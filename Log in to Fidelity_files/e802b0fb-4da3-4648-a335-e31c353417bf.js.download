//15.136.1-es2019 2025-10-03T15:40:44.250Z (59af52f6d4306)
var CS_CONF={"recordingUrlRules":[{"id":"a7a40f79-93a5-4579-b947-5e8d900055d9","projectId":2351,"enabled":true,"operator":"contain","value":"fidelitydigitalassets.com","ignoreQueryParams":false,"ignoreURIFragments":false,"samplingRate":100,"startDate":"2025-03-29T00:00:00.000Z","endDate":null,"createdAt":"2025-03-31T21:37:02.585Z","updatedAt":"2025-04-16T18:32:44.173Z","deletedAt":null},{"id":"50190d0a-dc68-40a3-ac96-810894f8ff80","projectId":2351,"enabled":true,"operator":"start","value":"https://digital.fidelity.com/ftgw/digital/dare","ignoreQueryParams":false,"ignoreURIFragments":false,"samplingRate":100,"startDate":"2025-03-29T00:00:00.000Z","endDate":null,"createdAt":"2025-03-31T21:37:02.585Z","updatedAt":"2025-04-16T18:32:44.199Z","deletedAt":null},{"id":"7b1329cf-c811-4619-ad86-111ef437f2fe","projectId":2351,"enabled":true,"operator":"start","value":"https://digital.fidelity.com/ftgw/digital/aom/","ignoreQueryParams":false,"ignoreURIFragments":false,"samplingRate":100,"startDate":"2025-04-07T00:00:00.000Z","endDate":null,"createdAt":"2025-04-08T18:26:05.196Z","updatedAt":"2025-04-16T18:32:44.174Z","deletedAt":null},{"id":"d0552ed7-75b7-4f9f-a291-cf113a5c3549","projectId":2351,"enabled":true,"operator":"start","value":"https://digital.fidelity.com/ftgw/digital/aox/","ignoreQueryParams":false,"ignoreURIFragments":false,"samplingRate":100,"startDate":"2025-04-07T00:00:00.000Z","endDate":null,"createdAt":"2025-04-08T18:22:09.214Z","updatedAt":"2025-04-16T18:32:44.174Z","deletedAt":null},{"id":"7edd6d4d-b943-4c6e-a536-c27b0b45f2b5","projectId":2351,"enabled":true,"operator":"start","value":"https://digital.fidelity.com/prgw/digital/aox/","ignoreQueryParams":false,"ignoreURIFragments":false,"samplingRate":100,"startDate":"2025-04-07T00:00:00.000Z","endDate":null,"createdAt":"2025-04-08T18:22:09.213Z","updatedAt":"2025-04-16T18:32:44.199Z","deletedAt":null},{"id":"4d47d42e-4c3a-46c7-9900-28b5a9968dc9","projectId":2351,"enabled":true,"operator":"start","value":"https://digital.fidelity.com/prgw/digital/aom/","ignoreQueryParams":false,"ignoreURIFragments":false,"samplingRate":100,"startDate":"2025-04-06T00:00:00.000Z","endDate":null,"createdAt":"2025-04-08T18:22:09.220Z","updatedAt":"2025-04-16T18:32:44.203Z","deletedAt":null},{"id":"13690c8a-297a-4a8c-8139-318c5b71fdbe","projectId":2351,"enabled":true,"operator":"contain","value":"/w/go/student-debt","ignoreQueryParams":false,"ignoreURIFragments":false,"samplingRate":100,"startDate":"2025-06-11T00:00:00.000Z","endDate":null,"createdAt":"2025-06-12T21:39:59.372Z","updatedAt":"2025-06-12T21:42:52.021Z","deletedAt":null}],"collectionEnabled":true,"projectId":2351,"status":1,"hostnames":["fidelity.com","fmrpi.az1.qualtrics.com","qualtrics.com","fidelitydigitalassets.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":1,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":25,"replayRecordingRate":50,"validationRate":10,"lastTrackingDraw":1758551549,"trackerDomain":"c.clicktale.net","recordingDomain":"r.clicktale.net","useMalkaPipeline":1,"ed":"l.clicktale.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"jsErrorsEnabled":0,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":0,"customHashIdEnabled":1,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":"(^button-[\\w-]+)|(^panel-[\\w-]+)","whitelistedAttributes":["pvd-fixed-width"],"replayRecordingUnmaskedUrlRegex":"","replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":"replayRecordingUnmaskedUrlRegex","tagDeploymentMode":"DUAL_COLLECTION","experimental":null,"iframesTracking":1,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":1,"malkaEtrEnabled":1,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":0,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":0,"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.clicktale.net","malkaRecordingDomain":"k-aus1.clicktale.net","staticResourceManagerDomain":"srm.bf.contentsquare.net","voc":{"siteId":null,"enabled":0},"dualCollectionTagDomain":"clicktale.net","ptcDomain":"cdnssl.clicktale.net","ptcPartition":"www43","anonymizeDigits":null,"dynamicConfDomain":"t.contentsquare.net/settings","tagVerificationDomain":"tcvsapi.contentsquare.com","ptcGuid":"e802b0fb-4da3-4648-a335-e31c353417bf"};
var CS_INTEGRATIONS_CONF = {"adobe-target":{},"hotjar":{"settings":["sendArtificialPageviews","setReplayLinkToFirstPV"]},"qualtrics":{"settings":[]}};
/* integration-adobe-target 3.9.1 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e,n,t){if((t=t||window)&&n&&e){let o=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,o||(o=!0,n())}})}}const t=JSON.parse('{"Q":"Adobe Target","M":"AB_AT_"}'),o=function(n){let t,o,i,c;if(e(function(){const e=n.name;t=n.version;const a=e.replace("@contentsquare/integration-","");o=a+"-"+t;let r="-contentsquare";c=new RegExp(r+"$").test(a),i=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),c||(r="-cap",c=new RegExp(r+"$").test(a),i=a.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),c)return{snippetBuildName:o,parameterName:i,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-adobe-target-cap","version":"3.9.1","scripts":{"build:snippet":"npx webpack"}}')),i=o.parameterName,c=o.snippetBuildName,a=o.snippetVersion;e(function(){const o=t.Q,r=t.M;var u,s;u=o,s=a,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(u+" - v"+s);const l=function(e){function n(e){return"object"==typeof e&&null!==e}if(n(window.CS_INTEGRATIONS_CONF)&&n(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e].customObjectName}(i),d=l?l.trim():"ttMETA";function p(e,n){var t,o;(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=r+e,n),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(c,(t=e,o=n,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=t,document.getElementById("csValue").textContent=o),`Dynamic variable with ${t} and value ${o} sent`))}const g=[];function f(e){if(e&&function(e){return Array.isArray(e)}(e))for(const n of e){let e,t;n.CampaignName&&n.RecipeName?(e=n.CampaignName,t=n.RecipeName):n.campaign&&n.experience?(e=n.campaign,t=n.experience):n["activity.name"]&&n["experience.name"]&&(e=n["activity.name"],t=n["experience.name"]),g.length&&g.includes(e+"~~~~"+t)&&(e="",t=""),e&&t&&(g.push(e+"~~~~"+t),p(e,t))}}document.addEventListener("at-request-succeeded",function(n){e(function(){n&&n.detail&&n.detail.responseTokens&&f(n.detail.responseTokens)},c)}),function(e,t,o){o=o||window;const i=e.split(".");if(1==i.length)n(e,t,o);else{let e=o,c=0;const a=function(){e=c>0?e[i[c-1]]:window,c++,c>=i.length?n(i[c-1],t,e):n(i[c-1],a,e)};a()}}(d,function(){setTimeout(function(){e(function(){f(window[d])},c)},500)})},c)})();
/* integration-hotjar 3.2.4 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}let t,i=1e3,o=10;function s(e,u,r,a,c,d){var l;u&&r&&(t||(t=n(e,"timingSettings"),"object"==typeof(l=t)&&null!==l&&Object.keys(l).length&&(i=t.doOnlyWhenInterval,o=t.doOnlyWhenTimes)),void 0===c&&(c=i),void 0===d&&(d=o),--d<0?"function"==typeof a&&a():r()?u():setTimeout(function(){s(e,u,r,a,c,d)},c))}const u=JSON.parse('{"QC":"Hotjar","Mz":"FB_HJ_","ir":"cs_hotjar","X3":"hj"}'),r=function(n){let t,i,o,s;if(e(function(){const e=n.name;t=n.version;const u=e.replace("@contentsquare/integration-","");i=u+"-"+t;let r="-contentsquare";s=new RegExp(r+"$").test(u),o=u.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),s||(r="-cap",s=new RegExp(r+"$").test(u),o=u.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),s)return{snippetBuildName:i,parameterName:o,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-hotjar-cap","version":"3.2.4","scripts":{"build:snippet":"npx webpack"}}')),a=r.parameterName,c=r.snippetBuildName,d=r.snippetVersion;e(function(){const t=u.QC,i=u.Mz,o=u.ir,r=u.X3;var l,p;l=t,p=d,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(l+" - v"+p);const w=n(a,"settings"),y=(f=w,Array.isArray(f)?w:[]);var f;const g=y.includes("sendArtificialPageviews"),v=y.includes("setReplayLinkToCurrentPV");let m=!1;function h(e,n,t,o){var s,u;(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=i+e,n),m&&"etr"===t&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackEventTriggerRecording","@ETS@"+e])}(e),o&&g&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+o),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(c,(s=e,u=n,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=s,document.getElementById("csValue").textContent=u),`Dynamic variable with ${s} and value ${u} sent`))}const _=[];window.addEventListener("hotjar-survey-event",function(n){e(function(){if(n&&n.detail&&n.detail.event){const e=n.detail,t=e.event,i=e.surveyId;if(t&&i)if("surveyInvitationDisplayed"===t)_.includes(t+"-"+i)||(_.push(t+"-"+i),h("Survey Invitation Displayed","Survey ID : "+i,0,o+"=survey_invitation_displayed"));else if("surveyDisplayed"===t)_.includes(t+"-"+i)||(_.push(t+"-"+i),h("Survey Displayed","Survey ID : "+i,0,o+"=survey_displayed"));else if("surveySubmitted"===t){_.includes(t+"-"+i)||(_.push(t+"-"+i),h("Survey Response Submitted","Survey ID : "+i,"etr",o+"=survey_response_submitted"));const n=e.question;if(n){const t=n.type,o=n.text,s=e.questionIndex,u=e.response;let r=u[0]&&u[0].answer;"multiple-close-ended"!=t&&o&&void 0!==r&&(isNaN(r)||(r=parseInt(r)),h(i+" : "+o,r),h(i+" : Question "+(s+1),r))}const s=e.insightsUrl;s&&(_.includes(s+"-"+i)||(_.push(s+"-"+i),h("Survey Response URL",s)))}else"surveyCompleted"===t&&(_.includes(t+"-"+i)||(_.push(t+"-"+i),h("Survey Completed","Survey ID : "+i,0,o+"=survey_completed")))}},c)}),s(a,function(){setTimeout(()=>{e(function(){(function(e,n,t){return new Promise(function(i,o){function s(){window._uxa.push(["replay:link:generate",{withTimestamp:t},u])}function u(o){if(o&&o.replayLink&&o.isRecording){let s="https://"+o.replayLink+"&vd="+e;if(!n&&!t){const e=new URLSearchParams(s);e.set("pvid",1);const n=e.toString();s=decodeURIComponent(n)}i(s)}}e||(e="missingFromDynamicSnippet"),t||(t=!1),window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&s()}])})})(r,v).then(function(n){e(function(){if(m=!0,n&&"function"==typeof hj)try{hj("identify",null,{contentsquare_replay_link:n})}catch(e){hj("identify","",{contentsquare_replay_link:n})}},c)})},c)},500)},function(){return"function"==typeof window.hj})},c)})();
/* integration-qualtrics 3.2.2 */
(()=>{"use strict";function e(e,t){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",t,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${t}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function t(e,t){let n=!1;window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(i){t?n||(e(i),n=!0):e(i)}])}function n(e){const t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""}function i(){let e=0,t=document.location.host;const n=t.split("."),i="_cs_tld"+(new Date).getTime();for(;e<n.length-1&&-1==document.cookie.indexOf(i+"="+i);)t=n.slice(-1-++e).join("."),document.cookie=i+"="+i+";domain="+t+";SameSite=None;Secure";return document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";Secure",t}function o(e){return e.toString().replace(/[^\w. ]/gi,function(e){return"&#"+e.charCodeAt(0)+";"})}function c(e){return Array.isArray(e)}function a(e,t){t||(t="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&=]"+e+t+"([^&#]*)").exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}const s=JSON.parse('{"QC":"Qualtrics","Mz":"FB_QT_","ir":"cs_qualtrics","X3":"qt"}'),u=function(t){let n,i,o,c;if(e(function(){const e=t.name;n=t.version;const a=e.replace("@contentsquare/integration-","");i=a+"-"+n;let s="-contentsquare";c=new RegExp(s+"$").test(a),o=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),c||(s="-cap",c=new RegExp(s+"$").test(a),o=a.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),c)return{snippetBuildName:i,parameterName:o,snippetVersion:n}}(JSON.parse('{"name":"@contentsquare/integration-qualtrics-cap","version":"3.2.2","scripts":{"build:snippet":"npx webpack"}}')),r=u.parameterName,d=u.snippetBuildName,l=u.snippetVersion;e(function(){const u=s.QC,p=s.Mz,f=s.ir,g=s.X3;var _,S;_=u,S=l,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(_+" - v"+S);let w=!1;window.self!=window.top&&(w=CS_CONF.iframesTracking);const m=function(e){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e].settings}(r),C=c(m)?m:[],I=C.includes("sendArtificialPageviews"),h=C.includes("setReplayLinkToCurrentPV");let y=!1;function D(e,t,n,i){var o,c,a;(function(e,t){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:t}])})(e=p+((a=e)?((new DOMParser).parseFromString(a,"text/html").body.textContent||"").trim():""),t),y&&"etr"===n&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackEventTriggerRecording","@ETS@"+e])}(e),i&&I&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+i),function(e,t,n){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(n?"warn"===n&&console.log(`%cCSQ INTEGRATION: [${e}] : ${t}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${t}`,"color: #2a9d8f; font-weight: bold"))}(d,(o=e,c=t,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=o,document.getElementById("csValue").textContent=c),`Dynamic variable with ${o} and value ${c} sent`))}function b(){const e={contentsquare_integration:n("_cs_s"),vendor:"qualtrics"};window.opener?window.opener.postMessage(e,"*"):window.self!=window.top&&window.top.postMessage(e,"*")}if(window.Qualtrics&&Qualtrics.SurveyEngine&&"function"==typeof Qualtrics.SurveyEngine.addOnPageSubmit){if(!w){let v;if(window._cs_integration_qualtrics_postmessage_csid||window.ClickTaleSettings&&ClickTaleSettings.PTC&&ClickTaleSettings.PTC.IntegrationHandler&&ClickTaleSettings.PTC.IntegrationHandler.UserValues)window._cs_integration_qualtrics_postmessage_csid?v=_cs_integration_qualtrics_postmessage_csid:ClickTaleSettings.PTC.IntegrationHandler.UserValues&&(v=ClickTaleSettings.PTC.IntegrationHandler.UserValues);else{const x=document.location.search;x.indexOf("CSID=")>-1?v=a("CSID"):CS_CONF.ptcDomain&&x.indexOf("CT_UID=")>-1?v=a("CT_UID"):window._cs_integration_qualtrics_csid&&(v=decodeURIComponent(_cs_integration_qualtrics_csid))}if(v&&"null"!=v){const E=v.split("~"),N=E[0],O=E[1],q=E[2],R=E[3],P=i();N&&O&&q&&(R?document.cookie="_cs_optout="+R+";domain="+P+";path=/;SameSite=None;Secure":(document.cookie="_cs_optout=;domain="+P+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;domain=."+document.location.host+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure"),document.cookie="_cs_id="+N+";domain="+P+";path=/;SameSite=None;Secure",document.cookie="_cs_s="+O+";domain="+P+";path=/;SameSite=None;Secure",document.cookie="_cs_c="+q+";domain="+P+";path=/;SameSite=None;Secure")}}let T;function k(){if(!w){let t=n("_cs_s");if(t&&t.indexOf(".T.")>-1){const i=setInterval(function(){e(function(){t=n("_cs_s"),t&&-1===t.indexOf(".T.")&&(clearInterval(i),b())},d)},500)}else b()}}if(window.Page?T=!1:window.q&&(T=!0),setTimeout(function(){(function(e,t,n,i){return new Promise(function(o,c){function a(){window._uxa.push(["replay:link:generate",{withTimestamp:n},s])}function s(i){if(i&&i.replayLink&&i.isRecording){let c="https://"+i.replayLink+"&vd="+e;if(!t&&!n){const e=new URLSearchParams(c);e.set("pvid",1);const t=e.toString();c=decodeURIComponent(t)}o(c)}}e||(e="missingFromDynamicSnippet"),n||(n=!1),i?a():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&a()}]))})})(g,h,!1,w).then(function(t){e(function(){if(y=!0,t&&Qualtrics.SurveyEngine){const e=Qualtrics.SurveyEngine;let n;CS_CONF.ptcDomain&&(n="ClicktaleSpecificRecording",!0===T&&"function"==typeof e.setJSEmbeddedData?e.setJSEmbeddedData(n,t):!1===T&&"function"==typeof e.setEmbeddedData&&e.setEmbeddedData(n,t)),n="ContentsquareReplayLink",!0===T&&"function"==typeof e.setJSEmbeddedData?e.setJSEmbeddedData(n,t):!1===T&&"function"==typeof e.setEmbeddedData&&e.setEmbeddedData(n,t)}},d)})},500),t(k,!1),window.addEventListener("Contentsquare_QT_Integration_Dispatcher",function(t){e(function(){if(t&&"object"==typeof t.detail&&"string"==typeof t.detail.key&&"string"==typeof t.detail.value){let e=t.detail.key;const n=t.detail.value;"FB_QT_"===e.slice(0,6)&&(e=e.slice(6)),D(e,n)}},d)}),!1===T&&"function"==typeof Page.getSessionId&&Page.runtime&&Page.runtime.ED&&Page.runtime.ED.SurveyID&&Page._questionRenderers&&Qualtrics.SurveyEngine.QuestionInfo){const F=Page.runtime.ED.SurveyID,Q=Page.getSessionId().replace("FS_","R_");D("Feedback Displayed","Survey ID : "+F);let A=!1,V=!1,$=!1;const B=[];function U(){const e=Qualtrics.SurveyEngine.QuestionInfo,t=Object.keys(e);if(c(t))for(let e=0;e<t.length;e++){const n=Qualtrics.SurveyEngine.QuestionInfo[t[e]].Selector;if(n&&"TB"!=n){V=!0;break}}}function J(){e(function(){U(),A||(A=!0,D("Feedback Accepted","Survey ID : "+F,0,f+"=feedback_accepted_"+F)),setTimeout(function(){e(function(){V&&!$&&!1===Page.runtime.FailedValidation&&($=!0,D("Feedback Submitted","Survey ID : "+F,"etr",f+"=feedback_submitted_"+F),D("Feedback Response ID",Q))},d)},2e3);const t=Page._questionRenderers,n=Object.keys(t);if(c(n))for(let e=0;e<n.length;e++){const i=t[n[e]].runtime;if(i&&i.Selector&&i.QuestionText&&i.Displayed){const t=i.QuestionText;if("NPS"===i.Selector&&i.Selected){const o=parseInt(i.Selected);B.includes(n[e]+"~~~"+o)||(B.push(n[e]+"~~~"+o),D("NPS Rating - "+n[e]+" - "+F+" - "+t,o),D("NPS Rating - "+n[e]+" - "+F,o))}if("STAR"===i.Selector){const t=i.Choices,o=Object.keys(t);if(c(o))for(let i=0;i<o.length;i++){const c=t[o[i]].Display;if(t[o[i]].Value){const a=parseInt(t[o[i]].Value);B.includes(n[e]+" ("+(i+1)+")~~~"+a)||(B.push(n[e]+" ("+(i+1)+")~~~"+a),D("Star Rating - "+n[e]+" ("+(i+1)+") - "+F+" - "+c,a),D("Star Rating - "+n[e]+" ("+(i+1)+") - "+F,a))}}}if("SAVR"===i.Selector||"SAHR"===i.Selector){const t=i.Selected;if(t&&i.Choices){const o=i.Choices[t].ID;o&&(B.includes(n[e]+"~~~AID"+o)||(B.push(n[e]+"~~~AID"+o),D(n[e]+" - "+F,"AID"+o)))}}if("MAVR"===i.Selector&&i.Choices){const t=i.Choices,o=Object.keys(t);if(c(o))for(let i=0;i<o.length;i++)if(t[o[i]].Selected){const c=t[o[i]].ID;c&&(B.includes(n[e]+"~~~AID"+c)||(B.push(n[e]+"~~~AID"+c),D(n[e]+" - "+F,"AID"+c)))}}if("Likert"===i.Selector&&i.Choices){const t=i.Choices,o=Object.keys(t);if(c(o))for(let i=0;i<o.length;i++){const c=t[o[i]].Selected;if(c&&!B.includes(n[e]+"~~~"+c)){const a=t[o[i]].ID;a&&(B.push(n[e]+"~~~"+c),D(n[e]+" - "+F+" - AID"+a,c))}}}}}setTimeout(function(){document.getElementById("NextButton")||D("Feedback Completed","Survey ID : "+F,0,f+"=feedback_completed_"+F)},2e3),Qualtrics.SurveyEngine.addOnPageSubmit(J)},d)}U(),Qualtrics.SurveyEngine.addOnPageSubmit(J)}else if(!0===T&&window.q.init&&window.q.init.appData&&window.q.init.appData.setup&&window.q.init.appData.setup.survey&&window.q.init.appData.setup.survey.id&&window.q.init.appData.session&&window.q.init.appData.session.id){const M=window.q.init.appData.setup.survey.id,G=window.q.init.appData.session.id.replace("FS_","R_");D("Feedback Displayed","Survey ID : "+M);let L=!1;function j(){e(function(){L||(L=!0,D("Feedback Submitted","Survey ID : "+M,"etr",f+"=feedback_submitted_"+M),D("Feedback Response ID",G)),setTimeout(function(){e(function(){document.getElementById("next-button")||D("Feedback Completed","Survey ID : "+M,0,f+"=feedback_completed_"+M)},d)},2e3),Qualtrics.SurveyEngine.addOnPageSubmit(j)},d)}Qualtrics.SurveyEngine.addOnPageSubmit(j)}}else if(!w){function H(t){const n=t.data;n&&(n.contentsquare_integration&&"qualtrics"===n.vendor&&e(function(){const e=n.contentsquare_integration,t=e.split("."),c=Number(t[t.length-1]),a=new Date(c).toUTCString();if(window.CS_CONF&&CS_CONF.allowSubdomains){const t=i();document.cookie="_cs_s="+o(e)+";expires="+a+";domain="+t+";path=/;Secure"}else document.cookie="_cs_s="+o(e)+";expires="+a+";path=/;Secure";X()},d),n.message&&"Contentsquare_QT_Integration_Ready"===n.message&&e(function(){const e={message:"Contentsquare_QT_Integration_Launch",user_values:z()};t.source.postMessage(e,"*")},d))}function z(){const e=n("_cs_id"),t=n("_cs_c"),i=n("_cs_optout");return e+"~"+K+"~"+t+"~"+i}let K;function X(){function t(){const e=z();localStorage.setItem("CSID",e),CS_CONF.ptcDomain&&(localStorage.setItem("CT_UID",e),sessionStorage.setItem("CT_UID",e)),sessionStorage.setItem("CSID",e)}if(K=n("_cs_s"),K&&K.indexOf(".T.")>-1){const i=setInterval(function(){e(function(){K=n("_cs_s"),K&&-1===K.indexOf(".T.")&&(clearInterval(i),t())},d)},500)}else t()}window.addEventListener("message",H),t(X,!1)}},d)})();
(()=>{var ud=Object.defineProperty;var dd=(s,r,t)=>r in s?ud(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var Se=(s,r,t)=>dd(s,typeof r!="symbol"?r+"":r,t);var ue={};ue.d=(s,r)=>{for(var t in r)ue.o(r,t)&&!ue.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};ue.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();ue.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);ue.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var Ln={};ue.r(Ln);ue.d(Ln,{getRequestParameters:()=>Km});function Es(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}function Ut(s){return tt(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function Re(s){return s===parseInt(s,10)}function G(s){return tt(s)&&(typeof s=="string"||s instanceof csString)}function ui(s){return typeof s=="boolean"}function ne(s){return typeof s=="object"}function tt(s){return typeof s!="undefined"}function At(s){return tt(s)&&s!==null}function Vn(s){return typeof s=="object"&&s!==null}function pd(s,r,t){return Re(s)&&s>=r&&s<=t}function sn(s){for(let r in s)return!1;return!0}function te(s){return typeof s=="function"}function yi(s){return s instanceof Element}function ss(s){return s instanceof Error}function rn(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var Ei=typeof window=="undefined";function fd(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof ue.g!="undefined"?ue.g:typeof process!="undefined"?process:Function("return this")()}var et=fd();var rt=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})(),Pr={[rt.debug]:0,[rt.warn]:1,[rt.implementation]:1,[rt.error]:2,[rt.critical]:3},lt={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function gd(s){lt=s}var j=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return ms(n,o.bind(this))(...c)}}};function ms(s,r){return function(...t){try{let e=r.apply(this,t);return tt(et.Promise)&&e instanceof et.Promise?e.then(i=>i,i=>lt.error(ss(i)?i:new Error(i),s)):e}catch(e){try{lt.error(ss(e)?e:new Error(e),s)}catch{}}}}function ut(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function Un(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function Wo(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function ac(s){let r=self.atob(s);return Un(r)}function nn(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function Yo(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){lt.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let n=r?ac(e[1]):Un(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var cc=typeof performance!="undefined"&&!!performance.now,Xo=cc?()=>performance.now():()=>csDate.now(),md=(()=>{var s,r;return cc?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),jn=34164e6,M={now(){return Math.round(Xo()+md)},elapsed(){return Xo()}};function Ko(){return Math.floor(M.now()/1e3)}function lc(){return typeof window.Promise=="function"}function yd(){var s;return typeof crypto!="undefined"&&te((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function Jo(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function kt(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Si(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Ed=Number.MAX_SAFE_INTEGER||9007199254740991,fe={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=Ed){return Math.floor(Math.random()*s)}};function di(s,r){let t,e,i,n,o,c=null,l=f=>{let u=M.elapsed();if(!f&&c!==null){let y=r-(u-c);if(y>=1){i=et.csSetTimeout(l,y);return}}let m=u-n;i=null,c=null,n=null,o=s.apply(t,[m,...e])},h=function(){if(t=this,e=arguments,n){c=M.elapsed();return}return n=M.elapsed(),i=et.csSetTimeout(l,r),o};return h.flushPending=()=>{i&&(et.csClearTimeout(i),l(!0))},h.cancel=()=>{c=null,n=null,i&&(et.csClearTimeout(i),i=null)},h}function Sd(s=0){return(r,t,e)=>{e.value=di(e.value,s)}}var pi=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t,this.values={}}reset(){this.values={}}flush(){if(!s.globalService)return!1;let t=this.values,e=Object.keys(t);if(!e.length)return!1;let i=csArray.prototype.map.call(e,n=>({name:this.name,parameter:n,value:Math.round(t[n])}));return s.globalService.push(i),this.reset(),i.length>0}}return s.globalService=null,ut([j()],s.prototype,"flush",null),s})(),_t=(()=>{class s extends pi{constructor(t,e=100){super(t),this.ly=e,this.values={},e&&(this.debouncedFlush=di(()=>this.flush(),this.ly))}count(t,e=1){pi.globalService&&(this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),Qo=(()=>{class s extends pi{constructor(){super(...arguments),this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),vd=(()=>{class s extends pi{add(t,e){var i,n,o,c,l,h,f;let u=m=>this.values[`${t}.${m}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(h=this.values)[f=`${t}.total`])!==null&&n!==void 0||(h[f]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=u("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=u("total")/u("count")}}return s})(),q={counters:{commandsFromIntegrations:new _t("commands-from-integrations"),commandsFromCSTC:new _t("commands-from-cstc"),commandsFromIframe:new _t("commands-from-iframe"),commandApplied:new _t("command-applied"),commandError:new _t("command-error"),commandMisuse:new _t("command-misuse"),CSTCSnippetUsed:new _t("cstc-snippet-used"),redactedPII:new _t("redacted-pii"),pageAnonymisation:new _t("page-anonymisation"),patchedNativeFunctions:new _t("patched-native-functions"),pureWindowState:new _t("pure-window-state"),sensitiveElements:new _t("sensitive-elements"),cspErrors:new _t("csp-errors"),networkRequests:new _t("network-requests"),webVitalsErrors:new _t("web-vitals-errors"),trackedFeatures:new _t("tracked-features"),longTasks:new Qo("longTasks"),tasks:new Qo("tasks"),errors:new _t("errors"),methodPerformance:new vd("perf")},setService(s){pi.setGlobalService(s)}},vi=(()=>{class s{constructor(){this.mo=0}get length(){return this.mo}get isEmpty(){return!this.Ms}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.mo++,this.kr?this.kr=this.kr[1]=[t,void 0]:this.kr=this.Ms=[t,void 0]}pop(){if(!this.Ms)return null;this.mo--;let t=this.Ms[0];return this.Ms=this.Ms[1],this.Ms||(this.kr=void 0),t}forEach(t){let e=this.Ms;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.mo=0,this.Ms=this.kr=void 0}}return s})(),on=0,Hn=s=>{on++,csQueueMicrotask(()=>Ss(()=>{try{s()}finally{on--}},ge.MicroTask))},Ji=new vi,Qi=new vi;function Gt(s,r="high"){Ji.isEmpty&&Qi.isEmpty&&hc(_d),r==="high"?Qi.push(Zo(s)):Ji.push(Zo(s))}function hc(s,r=10){r===0?Hn(s):csQueueMicrotask(()=>hc(s,r-1))}function _d(){for(;!Qi.isEmpty;)Qi.pop()();for(;!Ji.isEmpty;)Ji.pop()()}async function uc(s=1){for(let r=0;r<s;r++)await new Promise(t=>Gt(t))}function Zo(s){return function(){try{s.apply(window,arguments)}catch(r){lt.critical(r)}}}var Wi="null",Ke=null,dc=[],wd=()=>{var s;return Ei||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!Ei&&wd()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],Ke=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{an({type:"UXA_EVENT",event:s.detail})}),Ke.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===Wi)return;Wi=s.data.sessionId,csArray.prototype.forEach.call(dc,r=>r()),Ke==null||Ke.postMessage({type:"CONNECTED",sessionId:Wi})}}));function Td(s){Ei||(Wi!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(dc,s)))}function an(s){Ke==null||Ke.postMessage(s)}function fi(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function de(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function Ad(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let o=r(s[n]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function pc(s,r){let t=[];return Ad(s,r,e=>csArray.prototype.push.call(t,e)),t}function X(s,r){if(bd(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function bd(s){return s.length>=0}function Qe(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function Rd(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function fc(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function Cd(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let o=0;o<s.length;o++)i[n++]=s[o];for(let o=0;o<r.length;o++)i[n++]=r[o];if(!t)return i;for(let o=0;o<t.length;o++)i[n++]=t[o];return i}function ta(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function $s(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}var _i=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),ve=(()=>{class s extends _i{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var ea=(()=>{class s extends _i{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),_e=(()=>{class s extends _i{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=M.elapsed();t(),this.count++;let i=M.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=M.elapsed();return()=>{this.count++;let e=M.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),Id=(()=>{class s extends _i{constructor(){super("INP","Value: {value}")}getData(){return{value:jt.tasks.eventListener.max}}}return s})(),jt={general:{category:"General",nbEvents:new ve("Nb of Events"),pendingTasks:new ve("Pending Tasks"),pendingEvents:new ve("Pending Tasks"),nbOfMutationObservers:new ea("Nb of Mutation Observers"),inp:new Id},mutations:{category:"Mutations",initialDOM:new _e("Initial DOM"),pendingMutations:new ve("Nb of Mutations scheduled"),serializedMutations:new _e("Serialized Mutations"),count:new ve("Mutation Count"),elementMutationObserved:new ea("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new _e("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new ve("Nb of Hidden Elements "),nbElements:new ve("Nb of  Elements")},tasks:{category:"Tasks",tasks:new ve("Tasks"),errors:new ve("Errors"),timer:new _e("Timers"),microtask:new _e("Microtasks"),mutationObserver:new _e("MutationObserver"),monkeyPatch:new _e("MonkeyPatch"),eventListener:new _e("EventListener"),intersectionObserver:new _e("Intersection")}};function Pd(){let s=null;Td(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(jt),n=>jt[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),o=>n[o]),o=>o instanceof _i));an({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,o)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{Ss(()=>{let n=pc(de(e,o=>de(o,c=>c.getData())),o=>o);an({type:"UXA_PERFORMANCE_COUNTER",event:n})},ge.Timer)},1e3))})}var ge=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),Kt=null;async function Ss(s,r,t=null){if(Kt&&r!==ge.MicroTask)return s();t&&(Kt=t),Kt||(Kt={type:r,elapsed:0},jt.tasks.tasks.increase());try{Kt.elapsed+=Od(s)}catch(e){jt.tasks.errors.increase(),lt.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{on<=0&&(jt.tasks[Kt.type].elapsed(Kt.elapsed),Kt.elapsed>50?q.counters.longTasks.push(Kt.elapsed):q.counters.tasks.push(Kt.elapsed),Kt=null)}}function Od(s){let r=M.elapsed();return s(),M.elapsed()-r}var Or,gc="cs-native-frame";var Be={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function mc(s,r){let t=Es(window,s);return function(e,i){return t(()=>Ss(e,r),i)}}window.csSetTimeout=mc("setTimeout",ge.Timer);window.csSetInterval=mc("setInterval",ge.Timer);window.csQueueMicrotask=(Or=Es(window,"queueMicrotask"))!==null&&Or!==void 0?Or:setTimeout;window.csClearTimeout=Es(window,"clearTimeout");window.csClearInterval=Es(window,"clearInterval");window.csFileReader=Es(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function Nd(){let s=document.createElement("iframe");s.id=gc,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function Md(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function kd(s,r,t){let e=Md(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function yc(s){var r,t;Object.keys(Be.constructors).forEach(i=>{window[Be.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),Ld(s);let e=s.MutationObserver;("Prototype"in window||xd())&&(e=(t=(r=Es(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=sa(window.IntersectionObserver,ge.IntersectionObserver),window.csMutationObserver=sa(e,ge.MutationObserver),Rs("csNode",Be.nodeProperties,s.Node.prototype,"get"),Rs("csElement",Be.elementProperties,s.Element.prototype,"get"),Rs("csElement",Be.elementPropertiesValues,s.Element.prototype,"value",!1),Rs("csHTMLImageElement",Be.imageProperties,s.HTMLImageElement.prototype,"set"),Rs("csEvent",Be.eventProperties,s.Event.prototype,"get"),Rs("csNavigator",Be.navigatorProperties,s.navigator,"value")}function Rs(s,r,t,e,i=!0){r.forEach(n=>{let o=typeof n!="string"&&"binding"in n,c=o?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=kd(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function Bn(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function Dd(){try{let s=Nd();return s?(window.CSPureWindow=s,yc(window.CSPureWindow),!0):!1}catch(s){return Bn("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!Dd())try{yc(et)}catch(s){Bn("Critical",`failed to copy references from window: ${s.message}`)}function xd(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Ld(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function sa(s,r){try{let t=function(e,i){return new s((o,c)=>{Ss(()=>e(o,c),r)},i)};return t.base=s,t}catch{return Bn("Warning",`failed to extends ${s.name}`),s}}var Mt=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}r.stringReplaceAll=i;function n(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function cn(s){return Mt.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function Vd(s){let r=s.getAttribute("id");return r&&Mt.escapeInvalidCharacters(r)}function ht(s){return s.nodeType===1}function Zi(s){return s.nodeType===3}function Ud(s){return s.nodeType===8}function Ec(s){return ht(s)&&s.localName==="link"}function jd(s){return ht(s)&&s.localName==="source"}function Sc(s){return ht(s)&&s.localName==="a"}function Fn(s){return Ec(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function Hd(s){return ht(s)&&s.localName==="img"}function ar(s){return ht(s)&&s.localName==="style"}function cr(s){return ht(s)&&s.localName==="input"}function $n(s){return ht(s)&&s.localName==="textarea"}function lr(s){return ht(s)&&s.localName==="script"}function Bd(s){return ht(s)&&s.localName==="button"}function zs(s){return ht(s)&&"ownerSVGElement"in s}function zn(s){return ht(s)&&s.localName==="select"}function Fd(s){return ht(s)&&s.localName==="details"}function $d(s){return ht(s)&&s.localName==="summary"}function zd(s){return zs(s)&&s.localName==="image"}function Gd(s){return zs(s)&&s.localName==="use"}function qd(s){return zs(s)&&s.localName==="feImage"}function Wd(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function Yd(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function tr(s){return s.nodeType===9}function Ls(s){return Wd(s)&&"host"in s&&"mode"in s}function vc(s){return ht(s)&&!!csElementshadowRoot.apply(s)&&Ls(csElementshadowRoot.apply(s))}var Xd=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function Kd(s){return ht(s)&&At(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(Xd,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var wi="detached";function _c(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return er(r)&&csArray.prototype.push.call(t,wi),{ancestors:t,selectionRoot:r}}function Jd(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&Sc(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return er(r)&&csArray.prototype.push.call(t,wi),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function er(s){return pe.isValidElement(s)}var us=(()=>{var s,r;return(r=(s=et.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),ee=us.matches||us.matchesSelector||us.mozMatchesSelector||us.msMatchesSelector||us.oMatchesSelector||us.webkitMatchesSelector,ia=us.closest,wc=9;function Qd(s,r){return r?csArray.prototype.some.call(r,t=>ee.call(s,t)):!1}function Zd(s,r,t){if(s===wi||s.nodeType===wc)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=cn(r),o=0,c=r.previousElementSibling;for(;c;)(cn(c)===n||i&&(e!=null&&e.test(c.localName)))&&!Qd(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function tp(s,r,t){if(s===wi||s.nodeType===wc)return 0;let e=0,i=r.previousElementSibling;for(;i;)ee.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var ep=[/\d{4}/,/^ember\d+$/],sp="@",Gn="data-cs-override-id",ip="data-cs-dynamic-id";function Tc(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,o=cn(s);if(n&&n.test(s.localName)&&(o=csString.prototype.replace.call(o,n,`$1${sp}`)),op(s,t)){let m=qn(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${Gn}="${m}"]`}}let c=pp(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=rp(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=Vd(s);if(cp(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let f=np(s,e);if(f){let m=tp(r,s,f);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${f}](${m})`}}let u=Zd(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${u})`}}function rp(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(ee.call(s,e)&&dp(e,r))return e}}function np(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(ee.call(s,t))return t}}function op(s,r){let t=qn(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&Wn(Gn,t,r)}function ap(s){return qn(s)!==null}function qn(s){return s.getAttribute(Gn)}function cp(s,r,t,e){return r&&!ap(s)&&!lp(s,r,e)&&up(r,t)}function lp(s,r,t){return s.hasAttribute(ip)||hp(r,t)}function hp(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(ep,e=>e.test(s))||t)}function up(s,r){return s&&Wn("id",s,r)}function Wn(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function dp(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function pp(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&Wn(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var ln=11;function sr(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return ra(e,t);let i=e,n=s[0],{elementSelector:o,hasUniqueIdentifier:c}=Tc(i,n,r,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${ra(h,t)}${o}`}let l=sr(s,r,t);return`${l?`${l}>`:""}${o}`}function ra(s,r){if(s===wi)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=_c(s.host);return`${sr(t,e,r)}|shadow-root|`}return s.nodeType===ln?"|fragment|":""}var Ac=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),fp=(()=>{class s extends Ac{constructor(){super(...arguments),this.yo=!1,this.Eo=!1,this.hc=!1}hy(t,e){return this.yo&&!(e===null&&er(t))&&t.nodeType!==ln&&!t.host}uy(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.hy(t,e))return;let o=!1;e===null&&er(t)&&(o=!0,this.done=!0);let c=this.Eo&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.hc=!0,this.yo=!1,this.Eo=!1),!l&&e===null&&t.nodeType===ln){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.uy(t))return;let h=e!=null?e:"detached",{elementSelector:f,hasUniqueIdentifier:u}=Tc(t,h,i,this.options);u&&(this.Eo=!0,this.yo=!this.options.fullPath);let m=`${o?`|detached|${c}`:""}${this.yo&&!u?"":f}`,v=!u&&this.Eo&&!this.options.fullPath?"":this.path&&!this.hc?">":"";this.hc=!1,this.path=`${m}${v}${this.path}`}}return s})();function qt(s,r=Ot.SHOW_ALL){let t=r|Ot.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=na(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(n){let h=n;return n=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=na(c);if(r&Ot.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(Mr[c.nodeType]&r)!==0)return c}return null},visitAll(o){Mr[s.nodeType]&r&&o(s);let c=this.nextNode();for(;c;){if((Mr[c.nodeType]&r)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},find(o){let c;return this.visitAll(l=>o(l)&&(c=l)),c},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function na(s){return s&&vc(s)?s.shadowRoot:null}var Nr=(()=>{var s;return(s=et.Node)!==null&&s!==void 0?s:{}})(),Ot=(()=>{var s;return(s=et.NodeFilter)!==null&&s!==void 0?s:{}})(),Mr={2:Ot.SHOW_ATTRIBUTE,4:Ot.SHOW_CDATA_SECTION,8:Ot.SHOW_COMMENT,11:Ot.SHOW_DOCUMENT_FRAGMENT,9:Ot.SHOW_DOCUMENT,10:Ot.SHOW_DOCUMENT_TYPE,1:Ot.SHOW_ELEMENT,[Nr.ENTITY_NODE]:Ot.SHOW_ENTITY,[Nr.ENTITY_REFERENCE_NODE]:Ot.SHOW_ENTITY_REFERENCE,[Nr.NOTATION_NODE]:Ot.SHOW_NOTATION,7:Ot.SHOW_PROCESSING_INSTRUCTION,3:Ot.SHOW_TEXT},bc=!1,hn=5;function gp(s=5){bc=lt.isPerfLoggingActive(),hn=s}function vs(s,r){return function(){if(!bc)return s.apply(this,arguments);let t=M.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=M.elapsed()-t;i>=hn&&q.counters.methodPerformance.add(r,i)});else{let i=M.elapsed()-t;i>=hn&&q.counters.methodPerformance.add(r,i)}return e}}var Dt=function(s){return function(r,t,e){let i=e.value;e.value=vs(i,s)}},fs=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&vc(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return qt(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}r.getAllShadowHosts=vs(i,"getAllShadowHosts")}(s||(s={})),s})(),gt=(()=>{let s;return function(r){function t(){let u=[i()];return document.documentElement&&csArray.prototype.push.call(u,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(u,document.body.scrollHeight,document.body.offsetHeight),Math.max(...u)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function o(){let u=window.csScreen.width;return Re(u)&&u>0?u:window.screen.width}r.screenWidth=o;function c(){let u=window.csScreen.height;return Re(u)&&u>0?u:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function h(){return window.pageYOffset}r.windowOffsetY=h;function f(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}r.getRequestParameters=f}(s||(s={})),s})(),kr=(()=>{var s;return(s=et.Node)!==null&&s!==void 0?s:Object})(),pt=(()=>{let s;return function(r){let t="isConnected"in kr.prototype?w=>w.isConnected:w=>!w.ownerDocument||!(w.ownerDocument.compareDocumentPosition(w)&w.DOCUMENT_POSITION_DISCONNECTED);function e(w,D){for(let V=w;V;V=csNodenextSibling.apply(V))D(w)}r.forEachChild=e;function i(w){return t(w)}r.isConnected=i;function n(w,D){let V=[];for(let B of l(w,D))csArray.prototype.push.call(V,B);return V}r.getAncestors=n;let o=(w,D)=>{var V;return(V=csNodeparentNode.apply(w))!==null&&V!==void 0?V:D&&Ls(w)?w.host:null};function c(w,D,V=!1){let B=w;for(;B;){if(D(B))return B;let at=o(B,V);if(at&&at!==B)B=at;else break}return null}r.findAncestor=c;function*l(w,D=!1){let V=w;for(;V;){yield V;let B=o(V,D);if(B&&B!==V)V=B;else break}}r.walkUp=l;function h(w,D){if(w===D||D.contains(w))return!0;let V=r.getParentElement(w);return V&&V!==w?h(V,D):!1}r.isDescendantOf=h;function f(w){var D;return w.parentElement?w.parentElement:r.getRootNode(w)?(D=r.getRootNode(w))===null||D===void 0?void 0:D.host:null}r.getParentElement=f;function u(w,D=document){let V=fi(window.csquerySelectorAll[D.nodeType].call(D,w)),B=fs.getAllShadowHosts(D);for(let at of B){let Pt=fs.getShadowRoot(at);if(!Pt)continue;let Bt=fi(window.csquerySelectorAll[Pt.nodeType].call(Pt,w));csArray.prototype.push.call(V,...Bt)}return V}r.findAllElements=u,r.getRootNode=(()=>{if("getRootNode"in kr.prototype)return(V,B)=>V.getRootNode(B);function w(V){let B=D(V);return Ls(B)?w(B.host):B}function D(V){return csNodeparentNode.apply(V)!=null?D(csNodeparentNode.apply(V)):V}return(V,B)=>typeof B=="object"&&!!B.composed?w(V):D(V)})();function m(w){return w==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(w)}function y(w){let D=w.getBoundingClientRect();return D.right+gt.windowOffsetX()<0||D.bottom+gt.windowOffsetY()<0}function v(w){var D,V;if(((D=w.checkVisibility)===null||D===void 0?void 0:D.call(w,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!w.offsetParent){if(!w.getBoundingClientRect)return lt.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${w instanceof kr} Ctor: ${(V=w==null?void 0:w.constructor)===null||V===void 0?void 0:V.name}`),!1;let Pt=w.getBoundingClientRect();if(Pt.width==0&&Pt.height==0)return!0}let B=window.getComputedStyle(w);return B?B.display==="none"||B.visibility==="hidden"||B.visibility==="collapse"||B.opacity==="0"||B.filter==="opacity(0)"||B.width==="0px"&&B.height==="0px"||m(B.color):!0}r.isHiddenByCSS=v;function P(w){if(v(w))return!0;let V=f(w);return V!=null&&P(V)}r.areAncestorsHiddenByCSS=P;function N(w){let D=null,V=w;do if(v(V))D=V;else break;while(V=f(V));return D}r.getTopAncestorHiddenByCSS=N;function _(w){let D=S(w);return D!==null&&!w.contains(D)&&!D.contains(w)}function S(w){let D=w.getBoundingClientRect(),V=D.left+.5*D.width,B=D.top+.5*D.height;return O(document,V,B)}r.getTopElement=S;function C(w){if(!w.getBoundingClientRect)return null;let D=w.getBoundingClientRect(),V=D.x+D.width/2,B=D.y+D.height/2;return r.getTopElementFromPoint(document,V,B)}r.getElementOnTop=C;function O(w,D,V){let B=w.elementFromPoint(D,V);if(!B)return null;let at=fs.getShadowRoot(B);return at&&at!=r.getRootNode(document.body)&&at!==w?O(at,D,V):B}r.getTopElementFromPoint=O;function A(w){return!y(w)&&!v(w)&&!_(w)}r.isVisibleInDocument=A;function H(w){return v(w)?!1:Q(w)}r.isVisibleInViewportInForeground=H;function Q(w){let D=S(w);return D===null?!1:w===D?!0:St(w)?w.textContent!==""&&D.contains(w):w.contains(D)}r.isInViewPort=Q;function ot(w,D,V){let B=w.getAttributeNS(D,V);return B===""?w.hasAttributeNS(D,V)?B:null:B}r.getAttributeNS=ot;function xt(w){return!!(w.hasAttribute("tabIndex")||w.getAttribute("contentEditable")==="true"||Sc(w)&&w.hasAttribute("href")||(zn(w)||$n(w)||cr(w)||Bd(w))&&!w.hasAttribute("disabled")||Fd(w)||$d(w))}r.isElementFocusable=xt;function St(w){return w.localName==="span"||w.localName==="a"||w.localName==="b"||w.localName==="i"||w.localName==="button"||w.localName==="input"||w.localName==="label"||w.localName==="cite"||w.localName==="small"||w.localName==="strong"||w.localName==="code"||w.localName==="abbr"||w.localName==="em"||w.localName==="dfn"||w.localName==="time"||w.localName==="output"||w.localName==="object"||w.localName==="sub"}r.isInlineElement=St}(s||(s={})),s})(),mp=(()=>{class s{constructor(t){this.dy=t}run(t){let e=[...this.dy],i=pt.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.py(e,o,c,n),this.fy(e),e.length===0)break;i.length===0&&o.host&&(i=pt.getAncestors(o.host,!1),n=i[i.length-1])}}py(t,e,i,n){for(let o of t)o.serializeElement(e,i,n)}fy(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),yp=(()=>{class s extends Ac{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.gy(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}gy(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.my(t.id),t.classList&&(e+=this.yy(csArray.from(t.classList))),t.attributes&&(e+=this.Ey(t)),e}my(t){return t?`#${t};`:""}yy(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}Sy(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||zs(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||cr(t)&&e==="value"}vy(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}_y(t){let e={};for(let i of csArray.from(t.attributes))this.Sy(t,i.name)||(e[i.name]=i.value);return e}Ey(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this._y(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.vy(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),pe=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let f=o(c);if(f===document)return{path:"",hierarchy:""};if(!t(f))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let u=new fp(h),m=new yp(l);return new mp([u,m]).run(f),{path:u.getPath(),hierarchy:m.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return r.INVALID_ELEMENT;let{ancestors:f,selectionRoot:u}=_c(h);return sr(f,u,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:f,ancestors:u,selectionRoot:m}=Jd(h);return{path:sr(u,m,l),firstAnchorParent:f}}r.getElementPathAndFirstAnchorParent=n;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||pe;var Rc=["t.contentsquare.net","clicktale"],Ep=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(Rc,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,L.critical(t)}};window.addEventListener("error",Ep);var L=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(Rc,t)}static setStrategy(t){s.Gi=t}static computeIsActive(t){s.He=fe.boolean(t),s.He?s.pc=fe.boolean(10):s.pc=!1}static isLoggingActive(){return s.He}static getStrategy(){return s.Gi}static debug(t,e=""){s.He&&this.Gi.send(t,e,rt.debug)}static warn(t,e=!0,i=""){var n;q.counters.errors.count("warning"),s.He&&e&&this.Gi.send(t,i,rt.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){q.counters.errors.count("implementation"),s.He&&this.Gi.send(t,e,rt.implementation)}static error(t,e=""){var i;q.counters.errors.count("error"),s.He&&this.Gi.send(t,e,rt.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){q.counters.errors.count("critical"),this.Gi.send(t,e,rt.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return tt(et.Promise)&&n instanceof et.Promise?n.then(o=>o,o=>s.error(ss(o)?o:new Error(o),t)):n}catch(n){try{s.error(ss(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.pc}}return s.He=!1,s.pc=!1,s})();var Sp=/^\d+\.\d+(?:\.\d+)?$/,vp=s=>{if(!Sp.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},_p=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,wp=(s,r)=>_p(s,r)>=0;function re(s){return kt(s,"data:")}function Cc(s){return kt(s,"#")}function ir(s){return!!s&&(Si(s,".css")||kt(s,"https://fonts.googleapis.com/css"))}var oa=/\bhttps?:\/\/[^\s<>"')\]]*[^\s<>"'),.;:\])]/gi;function Tp(s){oa.lastIndex=0;let r,t=0,e=[];for(;(r=oa.exec(s))!==null;){let i=r.index,n=r.index+r[0].length;if(i>t){let c=csString.prototype.slice.call(s,t,i);csArray.prototype.push.call(e,{content:c,isUrl:!1})}let o=csString.prototype.slice.call(s,i,n);csArray.prototype.push.call(e,{content:o,isUrl:!0}),t=n}if(t<s.length){let i=csString.prototype.slice.call(s,t);csArray.prototype.push.call(e,{content:i,isUrl:!1})}return e}var Ap=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Ic=s=>{let r=new Set(Ap);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},bp=["svg","slot"],Rp=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(bp,s)>-1,Pc={href:new Set(["a"]),src:new Set(["iframe"])},Cp=s=>Pc.hasOwnProperty(s),Ip=(s,r,t)=>{var e;return((e=Pc[r])===null||e===void 0?void 0:e.has(s))&&!re(t)},Pp=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function Dr(s){return s?Op(s):null}function Op(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var Np=1,Mp="f553e78fb58e051e51fe8074c4c6e73e",un=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),kp=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,f,u,m,y,v,P,N;this.isChild=!1,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||jn,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&o!==void 0)||o),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(h=t.apiErrorsEnabled)!==null&&h!==void 0?h:0,...t.apiErrors},this.customErrors={enabled:(f=t.customErrorsEnabled)!==null&&f!==void 0?f:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=Dr(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=Dr(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=Dr(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(u=t.recordingUrlRules)!==null&&u!==void 0?u:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((m=t.uxaDomain)===null||m===void 0?void 0:m.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(y=t.anonymizeDigits)!==null&&y!==void 0?y:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(v=t.recordTargetingRules)!==null&&v!==void 0?v:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(P=t.collectTargetText)!==null&&P!==void 0?P:un.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(N=t.quotas)!==null&&N!==void 0?N:null}getTrackerUri(){return`${this.cs()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.cs()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${Mp}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.cs()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.cs()}://${this.loggerDomain}`}getMetricsUri(){return`${this.cs()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.cs()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.cs()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.cs()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.cs()}://${this.paProxyDomainUri}`}cs(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===Np}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,o]=i;this.wy(n,o)}})}wy(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.od()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.od())return!0;let t=vp(this.getHeapVersion()||"");if(t&&t.major===4&&wp(t,{major:4,minor:23,patch:5}))return!0}return!1}od(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==un.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})(),Dp=(()=>{class s{constructor(t,e){this.So=t,this.ad=e}init(){this.cd=this.So!==this.So.top,this.ld=this.ad.isWebView&&this.So===this.So.top,this.ad.iframesTracking&&this.cd||this.ld?this.ud=!1:this.ud=!0}isInIframeContext(){return this.cd}isTopWindowTracker(){return this.ud}isInWebViewContext(){return this.ld}}return s})();function aa(){}function dn(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function xp(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var xr=csSymbol("cachedJson");function Lp(s){if(s[xr])return s[xr];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+ys(s[0]);for(let t=1;t<s.length;t++)r+=","+ys(s[t]);return r+="]"}return s[xr]=csJSON.stringify(s)}var ys=typeof window.Symbol!="undefined"?Lp:csJSON.stringify;var gi=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),Oc=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),Vs=(()=>{class s extends Oc{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.fc(t);let e=gi.toQuery(t);this.Ty(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}Ty(t){let e=new window.Image(1,1);e.onload=aa,e.onerror=aa,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}fc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})();var Vp=(()=>{class s{constructor(t,e){this.ls=t,this.Ay=e}init(){this.hs=new Vs(this.ls.getLoggerUri()),this.hs.setRequestParametersProviders(this,this.Ay)}send(t){this.vo=t,this.hs.send()}getRequestParameters(){return{a:this.vo.app,l:this.vo.level,m:this.vo.message,s:this.vo.stacktrace}}}return s})(),Up=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,jp=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Hp="CS_ANONYMIZED_EMAIL",Lr="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Bp=new csRegExp(`(ey${Lr}\\.ey${Lr}\\.${Lr})`,"g"),Fp="CS_ANONYMIZED_JWT",$p=/[0-9]{4}/,zp=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Gp="CS_ANONYMIZED_PII",qp="\u2022",Wp=/\d/g,Yp=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Xp=/(?:\d{1,3}\.){3}\d{1,3}/,Kp=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Fe=(()=>{let s;return function(r){function t(f){return csString.prototype.replace.call(f,Up,Hp)}r.replaceEmail=t;function e(f){return csString.prototype.replace.call(f,Bp,Fp)}r.replaceJWT=e;function i(f,u){return csString.prototype.replace.call(f,zp,u)}r.replaceCreditCardNumber=i;function n(f){return csString.prototype.replace.call(f,Wp,qp)}r.replaceDigits=n;function o(f){return Xp.test(f)||Kp.test(f)}r.mayHaveIPAddress=o;function c(f){return Yp.test(f)}r.mayHaveNumberSequence=c;function l(f){return $p.test(f)}r.mayHaveCreditCardNumber=l;function h(f){return jp.test(f)}r.mayHaveEmail=h}(s||(s={})),s})(),Gs=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.by(this.gc(t));return e===!0?i=this.Ry(i):e===!1&&(i=this.Cy(i)),i}anonymizePII(t){return this.gc(t)}anonymizeJwt(t){return Fe.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.gc(t[i])}),t}gc(t){if(Fe.mayHaveEmail(t)){let e=Fe.replaceEmail(t);return e!==t&&q.counters.redactedPII.count("email"),e}return t}Ry(t){return Fe.replaceDigits(t)}Cy(t){return Fe.mayHaveNumberSequence(t)?Fe.replaceDigits(t):t}by(t){return Fe.mayHaveCreditCardNumber(t)?Fe.replaceCreditCardNumber(t,(e,i,n,o,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(n,o),""):n;if(!this.Iy(h))return e;q.counters.redactedPII.count("cc")}else q.counters.redactedPII.count("cc-partial");return`${i}${Gp}${c}`}):t}Iy(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let o=parseInt(t[n]);n%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),Nc="15.136.1";function Yn(){return{v:Nc}}var Jp=(()=>{class s{constructor(t,e){this.f=t,this.M=e}getRequestParameters(){return{d:`${M.now()}`,p:this.M.anonymizePII(window.location.href),...this.f.getRequestParameters(),...Yn()}}}return s})(),Qp="uxa",ca=5,Zp="No stacktrace",Mc="snippet-",kc="implementation-snippet-",la=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),tf=(()=>{class s{constructor(t,e,i){this.us=e,this.M=new Gs,this.dd=Pr[rt.warn],this.dd=Pr[t.minLogLevel||rt.warn],this.hs=i||new Vp(t,new Jp(t,this.M)),this.pd={[rt.debug]:[],[rt.warn]:[],[rt.implementation]:[],[rt.error]:[],[rt.critical]:[]},this._o={implementation:{},dynamic:{}},this.hs.init()}send(t,e="",i=rt.warn){if(!this.Py(i,e))return;csArray.prototype.push.call(this.pd[i],e||"");let n={message:this.Oy(t,e),stacktrace:this.Ny(t),app:Qp,level:i};this.hs.send(n)}Oy(t,e){let i=ss(t)?this.M.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}Ny(t){return ss(t)?`${t.stack||Zp} ${this.Dr()}`:this.Dr()}Dr(){let t=this.us.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.us.getSessionService(),n=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(o)}Py(t,e){if(Pr[t]<this.dd)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,kc,0))===0)return this.gd(e,la.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Mc,0))===0)return this.gd(e,la.DYNAMIC);let i=this.pd[t];return i.length>=ca?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}gd(t,e){return t in this._o[e]?this._o[e][t]>=ca?!1:(this._o[e][t]+=1,!0):(this._o[e][t]=1,!0)}}return s})(),wt=!Ei&&document.createElement("a"),ef=/(:443|:80)$/;function ts(s){return wt?(wt.href=s,wt.href):""}function Dc(s,r){return new csURL(s,r).href}function xc(s){let r=Kn(s);return r===null?"":decodeURIComponent(r.hostname)}function Xn(s,r){return csArray.prototype.some.call(r,t=>Si(s,`.${t}`)||s===t||t==="")}function sf(s){return s[0]==="/"?s:`/${s}`}function ha(s){return csString.prototype.replace.call(s,ef,"")}function Kn(s){return!wt||!kt(s,"http://")&&!kt(s,"https://")?null:(wt.href=s,{hash:wt.hash,host:ha(wt.host),hostname:wt.hostname,href:wt.href,origin:wt.origin?wt.origin:ha(`${wt.protocol}//${wt.host}`),pathname:sf(wt.pathname),port:wt.port,protocol:wt.protocol,search:wt.search})}var ua="CS_IFRAME_MESSAGE",Us=(()=>{let s;return function(r){r.AfterPageView="afterPageView",r.GetSessionKey="getSessionKey"}(s||(s={})),s})(),zt=(()=>{let s;return function(r){r.Parent="parent",r.Child="child"}(s||(s={})),s})(),I=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})(),st=(()=>{let s;return function(r){function t(l,h,f,u){let m={type:l,from:h,pid:f,signature:ua};return u!==void 0&&u>=0&&(m.id=u),m}r.buildBaseMessage=t;function e(l,h,f,u){let m=xc(l.origin);return!!l.data&&!!l.data.type&&l.data.signature===ua&&l.data.from===h&&l.data.pid===f&&Xn(m,u)}r.isMessageValid=e;function i(l,h,f,u){u?l.postMessage(f,h,u):l.postMessage(f,h)}r.sendPostMessage=i;function n(){return new MessageChannel}r.getNewChannelMessage=n;function o(l,h){l.postMessage(h)}r.sendChannelMessage=o;function c(l){l.close()}r.closeChannelPort=c}(s||(s={})),s})(),rf=(()=>{class s{constructor(t){this.f=t}send(t,e="",i=rt.warn){let n={message:t,errorCode:e,level:i},o=st.buildBaseMessage(I.ChildLogMessage,zt.Child,this.f.projectId);o.content=n,st.sendPostMessage(window.parent,"*",o)}}return s})(),nf=(()=>{class s{setContext(t,e){this.I=t,this.R=e}getVisitorService(){return this.I}getSessionService(){return this.R}}return s})(),pn=!1;function of(){pn=!0}function Tt(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&pn||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&pn||e.call(this,i,n)}}}}function af(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function $(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function cf(){let s=new MutationObserver(r=>{r.forEach(t=>{X(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(q.counters.pureWindowState.count("iframe-deletion"),lt.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function da(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function lf(){(!da(MutationObserver)||!da(MutationObserver.prototype.observe))&&q.counters.patchedNativeFunctions.count("MutationObserver")}function hf(){try{window.CSPureWindow&&cf(),lf()}catch{}}var dt=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let f=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return f?decodeURIComponent(f[2]):null}r.get=t;function e(l,h,f,u,m,y){let v=encodeURIComponent(`${h}`),P=f===r.CURRENT_DOMAIN?void 0:f,N=i(u),_=N?`;expires=${N.toUTCString()}`:"",S=";path=/",C=At(P)?`;domain=${P}`:"",O=`${l}=${v}${_}${S}${C}`;return tt(m)&&m!==Je.NotSet&&(O=`${O};SameSite=${m}`),tt(y)&&y===le.Yes&&(O=`${O};Secure`),document.cookie=O,!0}r.set=e;function i(l){return Ut(l)?new csDate(M.now()+l):l}r.toExpireDate=i;function n(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),Je.None,le.Yes)}r.remove=n;function o(){return document.cookie.length>0}r.isCookiePresent=o;function c(l,h){let f="_cs_root-domain",u=t(f);if(u!==null&&u!=="1")return u;let m=csString.prototype.split.call(window.location.hostname,"."),y=csArray.prototype.pop.call(m);for(;m.length&&(u===null||u==="1");)y=csArray.prototype.join.call([csArray.prototype.pop.call(m),y],"."),e(f,y,y,void 0,l,h),u=t(f);return n(f,y),y}r.getRootDomain=c}(s||(s={})),s})(),uf=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),Je=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),le=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),hr=(()=>{class s{constructor(t,e,i){this.f=t,this.A=e,this.hi=i,this.mc=!1,this.md=Je.NotSet,this.yc=le.No}getSameSiteFlag(){return this.md}getSecureFlag(){return this.yc}getDomain(){return this.Ec}getRootDomain(){return this.yd}init(){if(this.f.cookielessTrackingEnabled)return;let t=this.My(),e=this.ky();this.mc=this.Dy(t,e),this.mc?(this.md=t,this.yc=e):this.f.secureCookiesEnabled&&this.A.getUrlProtocol()==="https:"&&(this.yc=le.Yes),this.yd=this.xy(),this.Ec=this.Ly(this.yd)}Dy(t,e){return uf.browserIsSafariV12()?!1:(dt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),dt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(dt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}My(){return this.A.getUrlProtocol()==="http:"?Je.Lax:this.hi.isSameSiteNoneSecureNeeded()||this.f.crossDomainTracking?Je.None:Je.Lax}ky(){return this.A.getUrlProtocol()==="http:"?le.No:this.f.secureCookiesEnabled||this.f.crossDomainTracking||this.hi.isSameSiteNoneSecureNeeded()?le.Yes:le.No}isSameSiteSupported(){return this.mc}set(t,e,i,n){let o=dt.toExpireDate(i),c=n?le.Yes:this.getSecureFlag();dt.set(t,e,this.Ec,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.Ec;dt.remove(t,i)}xy(){let t=this.hi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?Je.None:void 0,i=t?le.Yes:void 0;return dt.getRootDomain(e,i)}Ly(t){return this.f.allowSubdomains?t:dt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Cs="_cs_t",pa="1",df=(()=>{class s{constructor(t,e){this.mt=t,this.f=e,this.wo=!1,this.To=!1}init(){if(!this.f.cookielessTrackingEnabled&&this.mt.isTopWindowTracker()&&"cookie"in document){if(!this.mt.isInIframeContext()&&dt.isCookiePresent()){this.wo=!0,this.To=!1;return}if(dt.set(Cs,pa,dt.CURRENT_DOMAIN),dt.get(Cs)!==null){this.wo=!0,this.To=!1,dt.remove(Cs,dt.CURRENT_DOMAIN);return}dt.set(Cs,pa,dt.CURRENT_DOMAIN,void 0,Je.None,le.Yes),dt.get(Cs)!==null&&(this.wo=!0,this.To=!0,dt.remove(Cs,dt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.wo}isSameSiteNoneSecureNeeded(){return this.To}}return s})();function pf(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var ff=(()=>{class s{constructor(t,e){this.f=t,this.hi=e}canTrack(){return this.f.isProjectActive()&&this.Vy()&&this.Ed()&&this.Uy()}canTrackInChild(){return this.f.isProjectActive()&&this.jy()&&(this.Ed()||this.Hy())}Uy(){return this.f.cookielessTrackingEnabled?pf():this.hi.areCookiesEnabled()}Ed(){return Xn(window.location.hostname,this.f.hostnames)}Vy(){return!this.Sd()&&this.By()}jy(){return!this.Sd()&&this.Fy()}Hy(){return window.location.protocol==="about:"&&window.location.hostname===""}Sd(){return"visibilityState"in document&&document.visibilityState==="prerender"}By(){return this.vd()&&this.$y()}Fy(){return this.vd()}$y(){try{return!!window.localStorage}catch{return!1}}vd(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),gf=(()=>{class s{constructor(t,e){this.Sc=!1,this._d=new Map,this.wd=new Map,this.Td=new Map,this.Ad="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";function e(e,t,r,s){return new(r||(r=Promise))((function(o,a){function i(e){try{c(s.next(e))}catch(e){a(e)}}function n(e){try{c(s.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,n)}c((s=s.apply(e,t||[])).next())}))}var t,r;Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(t||(t={})),function(e){e.debug="debug",e.warn="warn",e.implementation="implementation",e.error="error",e.critical="critical"}(r||(r={})),r.debug,r.warn,r.implementation,r.error,r.critical;let s={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class o{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:r}=t;this.send(r,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.contentType=e.contentType,this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach((t=>{this.queryParams[t]=e[t]}))}removeQueryParams(e){e?e.forEach((e=>{delete this.queryParams[e]})):this.queryParams={}}send(e,r){const o=r||Object.assign({},this.queryParams),a=!("ct"in o),i="application/json"===this.contentType||"string"!=typeof e&&!this.isArrayBuffer(e);"ct"in o||(this.compressionOpts&&a?o.ct=this.compressionOpts.compressionType:o.ct=t.UNCOMPRESSED);const n=i?JSON.stringify(e):e,c=Object.keys(o).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(o[e])}\`)).join("&"),h=\`\${this.endpoint}?\${c}\`;!function(e,t){const r=e.length;for(let s=0;s<r;s++)if(t(e[s],s))return!0;return!1}(this.mandatoryParameters,(e=>null==o[e]))?this.compressionOpts&&a&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,(e=>this.doSend(h,o,e))):this.doSend(h,o,n):s.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${h}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,r){const s=new XMLHttpRequest,o=Object.keys(t).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`)).join("&");s.open("POST",e),this.contentType&&s.setRequestHeader("Content-Type",this.contentType),s.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:s.responseText,status:s.status};this.onLoadCallback(e)}},s.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:o,metadata:t,events:r}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(s.timeout=this.timeout,s.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>s.abort(),Object.keys(this.headers).forEach((e=>{s.setRequestHeader(e,this.headers[e])})),s.send(r)}}class a{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class i{constructor(e){this.ramStorage={},this.byteSizeCounter=new a(e)}save({key:e,metadata:t,events:r}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:r}))}recover(e){const t=[];this.getStorageKeys().forEach((e=>{const r=this.ramStorage[e];void 0!==r&&(delete r.metadata.datatype,t.push(r),this.removeItem(e))})),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var n;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(n||(n={}));class c{constructor(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=n.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}init(){return e(this,void 0,void 0,(function*(){yield this.openCache(),this.cacheState===n.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}))}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach((e=>{this.save(e)})),this.toBeSavedBuffer=[]}save(t){return e(this,void 0,void 0,(function*(){try{if(this.cacheState===n.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(t);if(this.cacheState!==n.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:e,metadata:r,events:s}=t;if(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached())return;yield this.cache.put(\`\${this.origin}/\${e}\`,new Response(s,{headers:r}))}catch(e){}}))}recover(t){return e(this,void 0,void 0,(function*(){(this.cache||(yield this.openCache(),this.cacheState===n.READY))&&this.doRecover(t)}))}openCache(){return e(this,void 0,void 0,(function*(){try{this.cacheState=n.OPEN_IN_PROGRESS,this.cache=yield self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=n.READY}catch(e){this.cacheState=n.OPEN_FAILED}}))}doRecover(t){return e(this,void 0,void 0,(function*(){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const e=yield this.cache.keys();if(0===e.length)return;const r=(yield this.cache.matchAll()).map((e=>{const t={};e.headers.forEach(((e,r)=>{t[r]=e})),delete t["content-type"];const r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((e=>({metadata:t,events:e}))):e.arrayBuffer().then((e=>({metadata:t,events:e})))})),s=yield Promise.all(r);yield Promise.all(e.map((e=>this.cache.delete(e)))),t(s),this.byteSizeCounter.reset()}catch(e){}finally{this.recoveryInProgress--}}))}}class h{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new c(e,h.MAX_SIZE,(e=>{this.setRamStorageStrategy(e)}))}setRamStorageStrategy(e){this.storageStrategy=new i(h.MAX_SIZE),e&&e.forEach((e=>{this.storageStrategy.save(e)}))}}h.MAX_SIZE=16777216,function(){const t="CS_WORKER_SIGNATURE",r=new Map,s=new h("csPersisted");function a(e){var a;if((a=e)&&a.WORKER_SIGNATURE===t)switch(e.type){case"CreatePostRequest":{const{endpoint:a,compressionOutputType:i,useRetry:n,mandatoryParameters:c}=e,h={endpoint:a,mandatoryParameters:c,worker:!0};i&&(h.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(h.recoveryStorage=s);const d=new o(h);r.set(a,d),d.onLoad((e=>{const r={type:"onLoad",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)})),d.onError((e=>{const r={type:"onError",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)}))}break;case"SetQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.removeQueryParams(s)}break;case"Send":{const{endpoint:t,payload:s,queryParams:o}=e,a=r.get(t);a&&a.send(s,o)}break;case"Abort":{const{endpoint:t}=e,s=r.get(t);s&&s.abort()}break;case"SetHeader":{const{endpoint:t,headerName:s,headerValue:o}=e,a=r.get(t);a&&a.setRequestHeader(s,o)}break;case"SetTimeout":{const{endpoint:s,timeout:o}=e,a=r.get(s);a&&a.onTimeout((()=>{const e={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:t};self.postMessage(e)}),o)}break;default:throw new Error(JSON.stringify(e))}}self.addEventListener("message",(function(t){t.data.getReader?function(t,r){e(this,void 0,void 0,(function*(){const e=t.getReader();for(;;){const{done:t,value:s}=yield e.read();if(t)break;r(s)}}))}(t.data,a):a(t.data)}))}()})();`;try{this.ds=this.zy(e||i),this.Sc=!0,s.isTransferableStreamSupported()&&(this.bd=new ReadableStream({start:n=>{this.vc=n},cancel:()=>{this.vc=null}}),this.ds.postMessage(this.bd,[this.bd]))}catch(n){n.name==="SecurityError"&&q.counters.cspErrors.count("network-worker"),this.Sc=!1}}postMessage(t){t.WORKER_SIGNATURE=this.Ad,this.vc?this.vc.enqueue(t):this.ds.postMessage(t)}zy(t){let e=window.csURL||window.webkitURL,i=window.Blob,n=window.Worker,o=new i([t],{type:"application/javascript"}),c=e.createObjectURL(o);L.whiteListFilename(c);let l=new n(c);return l.onmessage=h=>{let{type:f,endpoint:u,WORKER_SIGNATURE:m}=h.data;if(m===this.Ad){if(f==="onLoad"){let{response:y}=h.data,v=this._d.get(u);v&&v(y)}else if(f==="onError"){let{response:y}=h.data,v=this.wd.get(u);v&&v(y)}else if(f==="onTimeout"){let y=this.Td.get(u);y&&y()}}},l}registerOnLoadCallback(t,e){this._d.set(t,e)}registerOnErrorCallback(t,e){this.wd.set(t,e)}registerOnTimeoutCallback(t,e){this.Td.set(t,e)}isSupported(){return this.Sc}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),mf=(()=>{class s{constructor(t){var e;this.Xt={},this.Kt=t.endpoint,this.Se=t.networkWorker,this.Gy=t.compressionOutputType,this.qy=t.useRetry,this.Se.postMessage({type:"CreatePostRequest",endpoint:this.Kt,compressionOutputType:this.Gy,useRetry:this.qy,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this.Se.postMessage({type:"SetQueryParams",endpoint:this.Kt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.Xt[e]=t[e]})}getQueryParams(){return this.Xt}removeQueryParams(t){this.Se.postMessage({type:"RemoveQueryParams",endpoint:this.Kt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.Xt[e]})}send(t,e){this.Se.postMessage({type:"Send",endpoint:this.Kt,payload:t,queryParams:e})}abort(){this.Se.postMessage({type:"Abort",endpoint:this.Kt})}onLoad(t){this.Se.registerOnLoadCallback(this.Kt,t)}onError(t){this.Se.registerOnErrorCallback(this.Kt,t)}setRequestHeader(t,e){this.Se.postMessage({type:"SetHeader",endpoint:this.Kt,headerName:t,headerValue:e})}onTimeout(t,e){this.Se.registerOnTimeoutCallback(this.Kt,t),this.Se.postMessage({type:"SetTimeout",endpoint:this.Kt,timeout:e})}}return s})(),ur=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),Lc=(()=>{class s{constructor(t){this.onError=t}}return s})(),yf=(()=>{class s{constructor(t){var e;this.Xt={},this._c={},this.Rd=i=>{for(let n of i){let{metadata:o,events:c}=n;this.send(c,o)}},this.Kt=t.endpoint,this.xr=t.compressionOpts,this.Jt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.wc=t.contentType,this.worker=!!t.worker,this.Jt&&this.Jt.recover(this.Rd)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Xt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Xt[e]}):this.Xt={}}send(t,e){let i=e||{...this.Xt},n=!("ct"in i),o=this.wc==="application/json"||typeof t!="string"&&!this.Wy(t);"ct"in i||(!this.xr||!n?i.ct=ur.UNCOMPRESSED:i.ct=this.xr.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(f=>`${encodeURIComponent(f)}=${encodeURIComponent(i[f])}`).join("&"),h=`${this.Kt}?${l}`;if(Rd(this.mandatoryParameters,f=>i[f]==null)){lt.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.xr&&n&&typeof c=="string"?this.xr.compressor(c,this.xr.compressionOutputType,f=>this.Cd(h,i,f)):this.Cd(h,i,c)}onLoad(t){this.qi=t}onError(t){this.Lr=t}onTimeout(t,e){this.pi=t,this.Vr=e}abort(){this.Id&&this.Id()}setRequestHeader(t,e){this._c[t]=e}getQueryParams(){return this.Xt}Wy(t){return t&&t.byteLength!==void 0}Cd(t,e,i){let n=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t),this.wc&&n.setRequestHeader("Content-Type",this.wc),n.onload=()=>{if(this.Jt&&this.Jt.recover(this.Rd),this.qi){let c={params:e,responseText:n.responseText,status:n.status};this.qi(c)}},n.onerror=()=>{this.Jt&&this.Jt.save({key:o,metadata:e,events:i}),this.Lr&&this.Lr({params:e})},this.Vr&&this.pi&&(n.timeout=this.Vr,n.ontimeout=()=>{this.pi()}),this.Id=()=>n.abort(),Object.keys(this._c).forEach(c=>{n.setRequestHeader(c,this._c[c])}),n.send(i)}}return s})(),Vc=(()=>{class s{constructor(t){this.Tc=t,this.Se=new gf(this.Tc)}create(t,e,i,n,o=[]){if(this.Se.isSupported()&&e)return new mf({networkWorker:this.Se,endpoint:t,compressionOutputType:i,useRetry:!!n,mandatoryParameters:o});{let c=i?{compressor:this.Tc.compress,compressionOutputType:i,compressionType:this.Tc.algorithm}:void 0;return new yf({endpoint:t,compressionOpts:c,recoveryStorage:n})}}}return s})(),Ef=(()=>{class s{constructor(t,e,i,n,o){this.I=t,this.R=e,this.Xe=i,this.vt=n,this.f=o}get(){return{exclusion:this.Xe.getAppliedTrackingDraw(),visitor:this.I.getVisitor(),session:this.R.getSession(),cvars:this.vt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.Xe.exclude(this.f),this.I.removeVisitor(),this.R.removeSession(),this.vt.removeCustomVariablesSession()}include(t){this.Xe.removeExclusion(),this.I.setVisitor(t.visitor),t.session?this.R.setSession(t.session):this.R.removeSession(),t.cvars?this.vt.setCustomVariableSession(t.cvars):this.vt.removeCustomVariablesSession()}}return s})(),rr=".",Jn="__DOT__",Sf=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Uc="x";function vf(s){let[r,t,e,i,n,o,c,l,h]=bf(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===Uc?null:h}}function _f(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:Uc],csString),Tf),rr)}function wf(s){return Sf.test(s)}function Tf(s){return csString.prototype.replace.call(s,/\./g,Jn)}function Af(s){return csString.prototype.replace.call(s,new csRegExp(Jn,"g"),rr)}function bf(s){return csString.prototype.indexOf.call(s,Jn)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,rr),Af):csString.prototype.split.call(s,rr)}var U=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),Ht=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),es=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),Jt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),fn=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})();var Rf=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),jc=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,Hc=".";function Cf(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],Hc)}function If(s){if(!Qn(s))return null;let r=gn(s);return r!==null?Bc(r):null}function Bc(s){var r,t;let[e,i,n,o]=csString.prototype.split.call(s,Hc);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:fn.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:Rf.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function Qn(s){return jc.test(s)}function gn(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,jc))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var Te="_cs_ex",fa=2592e6,Pf=/^[0-9]+$/,Of=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i}onCookieToSet(t){this.fi=t}onCookieToRemove(t){this.gi=t}get(){return this.f.cookielessTrackingEnabled?Number(this.X.getItem(Te)):Number(this.N.get(Te))}set(t){var e;this.f.cookielessTrackingEnabled?this.X.setItem(Te,t):(this.N.set(Te,t,fa),(e=this.fi)===null||e===void 0||e.call(this,Te,t,fa))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(Te):(this.N.delete(Te),(t=this.gi)===null||t===void 0||t.call(this,Te))}static isValidExclusionString(t){return Pf.test(t)}}return s})(),$e="_cs_cvars",Nf=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i}onCookieToSet(t){this.fi=t}onCookieToRemove(t){this.gi=t}get(){return this.f.cookielessTrackingEnabled?this.X.getItem($e):this.N.get($e)}set(t){var e;this.f.cookielessTrackingEnabled?this.X.setItem($e,t):(this.N.set($e,t),(e=this.fi)===null||e===void 0||e.call(this,$e,t))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem($e):(this.N.delete($e),(t=this.gi)===null||t===void 0||t.call(this,$e))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();function Ce(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var dr=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return $s(this.set)}get count(){return this.set.size}}return s})(),Mf=(()=>{class s extends dr{constructor(t="high"){super(),this.Qy=t}add(t){this.set.add(t),this.set.size===1&&Gt(()=>{this.set.clear()},this.Qy)}}return s})();function pr(s,r=!1){let t=new dr;return{push(e){t.count===0&&(r?Gt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}function kf(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=xf(r);return t===""||(r=Lf(r,t),r.length===0)?"":Fc(r[0])}function Df(s){return csString.prototype.indexOf.call(s,"@")!==-1}function xf(s){return s.length>0?Fc(s[0]):""}function Lf(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function Fc(s){let r="",t;Df(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var Vf=s=>s;function Uf(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let f=c[l],u=Reflect.set(c,l,h);return e.forEach(m=>m(this,h,f,"subproperty")),u}}):this[i]=o,this[i])},set(){var n;let o=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){lt.error(h)}return l}})}function jf(s,r,t){let e=Hf(s,r);if(!e)return null;let i=(n,o,c,l)=>t(n,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Hf(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Uf(s,r,i,e),e):(lt.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(lt.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function Bf(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return lt.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call($s(i),f=>f(c))}catch(f){lt.critical(f)}let h=n.apply(this,c);return Ss(()=>{let f={result:h,context:this,args:c};csArray.prototype.forEach.call(l,u=>u(f))},ge.MonkeyPatch),h};$f(o,n),s[r]=o}return i}function ds({target:s,methodName:r,hook:t,hookPrepareArgs:e=Vf,options:i}){let n=Bf(s,r);if(!n)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:kf()}:{};return f=>t({...f,...h,args:l})};return{activate:()=>{n.add(o)},deactivate:()=>{n.delete(o)}}}function Ff(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Object.defineProperty(s,r,{set(){var n;let o=this[r],c=arguments;return Ss(()=>{e.forEach(l=>l(this,c[0],o,"property"))},ge.MonkeyPatch),(n=i.set)===null||n===void 0?void 0:n.apply(this,c)}}),e):(lt.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null):e}function nr(s,r,t){let e=Ff(s,r);if(!e)return null;let i=(n,o,c)=>t(n,o,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function $f(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var qs=(()=>{var s;class r{static Zy(e){this.ks.forEach(i=>{e(i,"initial")})}static Ur(e){if(this.D||(this.D=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&X(n.addedNodes,this.tE),X(n.removedNodes,this.eE)})),csArray.prototype.push.call(this._e,e),!this.F){this.F=!0,this.D.observe(document,this.jr);for(let i of fs.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.ks.add(n),this.D.observe(n,this.jr)}this.Ic||(this.Ic=ds({target:Element.prototype,methodName:"attachShadow",hook:i=>this.sE(i.result)&&this.Nd(i.result)})),this.Ic.activate()}this.Zy(e)}static sE(e){return e.isConnected&&e.ownerDocument===document}static Hr(e){var i,n;this._e=csArray.prototype.filter.call(this._e,o=>o!==e),this._e.length===0&&(this._e=[],this.F=!1,(i=this.D)===null||i===void 0||i.disconnect(),(n=this.Ic)===null||n===void 0||n.deactivate(),this.ks.clear())}constructor(e){this.w=e,this.w=ms("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return $s(s.ks)}takeRecords(){var e,i;return(i=(e=s.D)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){fs.isSupported()&&s.Ur(this.w)}disconnect(){fs.isSupported()&&s.Hr(this.w)}}return s=r,r._e=[],r.ks=new Set,r.F=!1,r.jr={childList:!0,subtree:!0},r.Nd=t=>{s.ks.has(t)||(s.D.observe(t,s.jr),s.ks.add(t),X(s._e,e=>e(t,"added")))},r.tE=t=>{qt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.Nd)},r.eE=t=>{t.isConnected||qt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.ks.has(e)&&(s.ks.delete(e),X(s._e,i=>i(e,"removed")))})},ut([j()],r.prototype,"observe",null),ut([j()],r.prototype,"disconnect",null),r})(),ga={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},Pe=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Pc(e){if(s.shadowRootFilters.length>0&&Ls(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,ga)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Gt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,ga)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(fs.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Pc(document),this.shadowRootObserver=new qs(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,X(this.shadowRootObserver.shadowRoots,n=>{this.Pc(n)}))}static disconnect(e,i){var n,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.w=e,this.Md=i;let n=pr(o=>e(o,this),!0);this.w=ms("DocumentMutationObserver:callback",o=>{X(o,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?Cd(i,n):i!=null?i:n}observe(){s.observe(this.w,this.Md)}disconnect(){s.disconnect(this.w,this.Md)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{jt.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{X(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.Pc(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,ut([j()],r.prototype,"observe",null),ut([j()],r.prototype,"disconnect",null),r})(),Vr;function Ms(s){if(Vr||(Vr=document.createElement("div")),!(!!s&&G(s)))return lt.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return ee.call(Vr,s),!0}catch{return lt.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function mn(s,r){if(ia)return ia.call(s,r);let t=s;do{if(ee.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var js=(()=>{class s{get selectors(){return this.Be===""?null:this.Be}constructor(t,e={closest:!1}){this.w=t,this.At=e,this.Be="",this.Br=new dr,this.Ao=vs(i=>{if(this.Be==="")return;let n=[];for(let o of pc(i,c=>c.addedNodes)){if(!(Yd(o)||this.At.closest&&Zi(o)))continue;let c=this.At.closest?this.iE(o,this.Be):this.findMatchingElements(o,this.Be);ta(c,n)}n.length&&this.w(n,"added")},"SelectorObserver.processMutations"),this.rE=(i,n)=>{if(this.Be===""||n!=="added")return;let o=this.findMatchingElements(i,this.Be);o.length&&this.w(o,"added")},this.z=new Pe(this.Ao,this.rE)}observe(t){this.Be===""?this.z.observe():this.Be+=",",this.Be+=t;let e=this.findMatchingElements(document,t);for(let i of this.z.shadowRoots){let n=this.findMatchingElements(i,t);ta(n,e)}e.length&&(X(e,i=>{this.Br.add(i)}),this.w(e,"initial"))}processPendingMutations(){this.Ao(this.z.takeRecords())}disconnect(){this.z.disconnect(),this.Br.clear(),this.Be=""}iE(t,e){let i=[];if(Zi(t)){if(t.parentElement){let n=mn(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.Br.has(n)===!1)}else{if(yi(t)){let n=mn(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,o=>this.Br.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=fi(window.csquerySelectorAll[t.nodeType].call(t,e));return ht(t)&&ee.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.Br.has(n)===!1)}}return ut([j()],s.prototype,"observe",null),ut([j()],s.prototype,"disconnect",null),ut([Dt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})();function zf(){let s=csSymbol.for("propStore");return{getStore(r){return r[s]},get(r,t){let e=r[s];return e==null?void 0:e[t]},set(r,t,e){let i=r[s];i||(i={},r[s]=i),i[t]=e}}}var Yi=zf(),W=(()=>{let s;return function(r){function t(l,h,f){var u;if(typeof Node!="undefined"&&l instanceof Node)Yi.set(l,h,f);else{let m=l;(u=m.props)!==null&&u!==void 0||(m.props={}),m.props[h]=f}}r.setProperty=t;function e(l,h){var f;return typeof Node!="undefined"&&l instanceof Node?Yi.get(l,h):(f=l.props)===null||f===void 0?void 0:f[h]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?Yi.getStore(l):l.props}r.getProperties=i;function n(l,h){let f=null;return o(l,(u,m,y)=>h(u)&&(f=u)&&!!y()),f}r.findDescendant=n;function o(l,h){c(l,void 0,h)}r.traverse=o;function c(l,h,f){let u=!1;if(f(l,h,()=>u=!0),u)return;let y=l.shadowRoot;y&&c(y,l,f);let v=l.children;if(v!=null&&v.length){for(let P of v)if(P&&(c(P,l,f),u))break}}}(s||(s={})),s})(),k=(()=>{let s;return function(r){let t;(function(_){_[_.NotMasked=0]="NotMasked",_[_.Parent=1]="Parent",_[_.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(_){return ne(_)&&"Attributes"in _&&"PIISelectors"in _?_.Attributes instanceof Array&&_.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(_){if(!ne(_)||_===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in _||(_.Attributes=[]),"PIISelectors"in _||(_.PIISelectors=[]),_}r.sanitizeSelectorUserInput=i;function n(_){var S;return(S=W.getProperty(_,r.maskedProp))!==null&&S!==void 0?S:{state:t.NotMasked}}r.getMaskedElementDetails=n;function o(_){var S;return(S=W.getProperty(_,r.maskedAttributeProp))!==null&&S!==void 0?S:{attributes:[]}}r.getMaskedAttributeDetails=o;function c(_){let S=W.getProperty(_,r.maskedProp);return(S==null?void 0:S.state)===t.Parent}r.isMaskedElement=c;function l(_){let S=W.getProperty(_,r.maskedProp);return(S==null?void 0:S.state)===t.Child}r.isMaskedElementChild=l;function h(_,S){let C=W.getProperty(_,r.maskedAttributeProp);return((C==null?void 0:C.attributes)==null?void 0:csArray.prototype.indexOf.call(C==null?void 0:C.attributes,S))>-1}r.isMaskedAttribute=h;function f(_,S){W.setProperty(_,r.maskedProp,S)}r.setMaskedElementProperty=f;function u(_){W.setProperty(_,r.maskedProp,void 0)}r.unsetMaskedElementProperty=u;function m(_,S){W.setProperty(_,r.maskedAttributeProp,S)}r.setMaskedAttributeProperty=m;function y(_,S){let C=csArray.prototype.filter.call(_.PIISelectors,H=>Ms(H));S.elementSelector.length>0&&csArray.prototype.push.call(C,...csString.prototype.split.call(S.elementSelector,","));let O=N([...C]),A={elementSelector:csArray.prototype.join.call(O,","),attrSelector:S.attrSelector,attrSelectors:S.attrSelectors};return csArray.prototype.forEach.call(_.Attributes,H=>{H!=null&&H.attrName&&(H!=null&&H.selector)&&Ms(H.selector)&&!v(A.attrSelectors,H)&&csArray.prototype.push.call(A.attrSelectors,H)}),A.attrSelector=P(A.attrSelectors),A}r.getComputedSelectorSettings=y;function v(_,S){return csArray.prototype.some.call(_,C=>C.selector===S.selector&&C.attrName===S.attrName)}function P(_){let S="";return csArray.prototype.forEach.call(_,C=>{let O=csString.prototype.split.call(C.selector,",");csArray.prototype.forEach.call(O,A=>{Ms(A)&&(S&&(S+=","),S+=A)})}),S}function N(_){if(_.length<=1)return _;let S=[];for(let C of _){let O=csString.prototype.split.call(C,",");for(let A of O)csArray.prototype.indexOf.call(S,A)===-1&&csArray.prototype.push.call(S,A)}return S}}(s||(s={})),s})(),Oe=(()=>{class s{constructor(){this.oe=[],this.isStarted=!1}produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:M.now(),t.timestamp==null&&(t.timestamp=M.now()),csArray.prototype.forEach.call(this.oe,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.oe=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.oe,t),()=>{let e=csArray.prototype.indexOf.call(this.oe,t);csArray.prototype.splice.call(this.oe,e,1)}}}return s})(),$c=1,ni=csSymbol("nodeIdentifier");function Gf(s=!1){s&&($c=1),ni=csSymbol("nodeIdentifier")}function qf(s){return W.getProperty(s,ni)}function it(s){let r=W.getProperty(s,ni);return r!=null?r:(W.setProperty(s,ni,$c++),W.getProperty(s,ni))}var zc=(()=>{class s extends Oe{constructor(t){super(),this.B=null,this.bo=null,this.D=null,this.Ds=null,this.kd=["value","checked","src","data","alt"],this.Ro={state:k.MaskedElementState.Child},this.nE=e=>{for(let i of e){if(k.isMaskedElement(i.target)||k.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let o=i.addedNodes[n];k.isMaskedElement(o)||k.isMaskedElementChild(o)||ht(o)&&this.Dd(o)}for(let n=0;n<i.removedNodes.length;n+=1){let o=i.removedNodes[n];pt.isConnected(o)||this.xd(o)}}},this.oE=t}setMaskedElementSettings(t){this.ps=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.ps||(lt.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.ps={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.ps;(t=this.Ds)!==null&&t!==void 0||(this.Ds=this.aE()),o.length!==0&&((e=this.B)!==null&&e!==void 0||(this.B=this.cE()),this.B.observe(o)),c.length!==0&&((i=this.bo)!==null&&i!==void 0||(this.bo=this.lE(l)),this.bo.observe(c)),(n=this.D)!==null&&n!==void 0||(this.D=new Pe(this.nE,(h,f)=>f==="added"&&this.hE(h))),this.D.observe(),csSetTimeout(this.oE)}onStop(){var t,e,i;this.B&&(this.xd(document),this.B.disconnect()),(t=this.bo)===null||t===void 0||t.disconnect(),(e=this.D)===null||e===void 0||e.disconnect(),(i=this.Ds)===null||i===void 0||i.disconnect()}aE(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}cE(){return new js(t=>{csArray.prototype.forEach.call(t,e=>{this.uE(e)?this.Dd(e):(this.dE(e),this.pE(e))})})}lE(t){return new js(e=>{csArray.prototype.forEach.call(e,i=>this.fE(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=k.getMaskedElementDetails(t.target);if(i.state!==k.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:k.MaskedElementState.Parent,width:e.width,height:e.height};k.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:it(t.target),width:e.width,height:e.height})}pE(t){!this.Ds||!ht(t)||lr(t)||this.Ds.observe(t)}uE(t){let e=csNodeparentNode.apply(t);return e?k.isMaskedElement(e)||k.isMaskedElementChild(e):Ls(t)?k.isMaskedElement(t.host)||k.isMaskedElementChild(t.host):!1}hE(t){(k.isMaskedElement(t.host)||k.isMaskedElementChild(t.host))&&k.setMaskedElementProperty(t,this.Ro)}xd(t){qt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{k.unsetMaskedElementProperty(i)})}dE(t){let e=t.getBoundingClientRect(),i={state:k.MaskedElementState.Parent,width:e.width,height:e.height};k.setMaskedElementProperty(t,i),this.gE(t),qt(t).visitAll(n=>n!=t&&k.setMaskedElementProperty(n,this.Ro))}Dd(t){k.setMaskedElementProperty(t,this.Ro),qt(t).visitAll(e=>e!=t&&k.setMaskedElementProperty(e,this.Ro))}gE(t){var e;let i=(e=W.getProperty(t,k.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.kd.length;n+=1){let o=this.kd[n];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&k.setMaskedAttributeProperty(t,i)}fE(t,e){var i;let n=(i=W.getProperty(t,k.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&ee.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&k.setMaskedAttributeProperty(t,n)}}return Ce([j()],s.prototype,"resizeObserverCallback",null),s})(),he=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return W.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){W.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){W.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),Gc=(()=>{class s{constructor(){this.Oc=0,this.V=!1,this.Ld="data-cs-capture",this.xs=t=>{for(let e of t){if(he.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];he.isWhitelistedElement(n)||ht(n)&&this.Vd(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];pt.isConnected(n)||this.Ud(n)}}}}start(){this.Oc++,!this.V&&(this.V=!0,this.mE())}mE(){this.B||(this.B=new js(e=>X(e,i=>this.Vd(i))));let t=this.Nc?`[${this.Ld}], ${this.Nc}`:`[${this.Ld}]`;this.B.observe(t),this.D||(this.D=new Pe(this.xs,(e,i)=>i==="added"&&this.yE(e))),this.D.observe()}stop(){this.V&&(this.Oc--,this.Oc===0&&(this.V=!1,this.EE()))}EE(){this.B&&(this.Ud(document),this.B.disconnect()),this.D&&this.D.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Ms(t))this.Nc=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Nc}Vd(t){qt(t).visitAll(e=>{he.whitelistElement(e)})}yE(t){he.isWhitelistedElement(t.host)&&he.whitelistElement(t)}Ud(t){qt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{he.removeWhitelistElement(i)})}}return s})(),Ae=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){return W.getProperty(n,r.EDITABLE_NODE_PROP)===!0}r.isEditableNode=t;function e(n){W.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){W.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})(),qc=(()=>{class s{constructor(){this.B=null,this.D=null,this.V=!1,this.xs=t=>{for(let e of t)if(Ae.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!Ae.isEditableNode(n)){if(Zi(n)||Ud(n)){Ae.markEditableNode(n);continue}ht(n)&&this.jd(n)}}}}start(){this.V||(this.V=!0,this.B=new js(t=>X(t,e=>{this.jd(e)})),this.B.observe("[contenteditable]"),this.D=new Pe(this.xs,(t,e)=>e==="added"&&this.SE(t)),this.D.observe())}stop(){var t,e;this.V&&(this.V=!1,(t=this.B)===null||t===void 0||t.disconnect(),this.B=null,(e=this.D)===null||e===void 0||e.disconnect(),this.D=null)}jd(t){qt(t).visitAll(e=>{Ae.markEditableNode(e)})}SE(t){Ae.isEditableNode(t.host)&&Ae.markEditableNode(t)}}return s})(),Wc=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="toEncrypt";function t(n){return W.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){W.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){W.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})();var Wf="spki",ma="RSA-OAEP",Yf="SHA-256",ya="AES-CTR",Xf="SHA-1",Ea=190,gs=(()=>{let s;return function(r){var t;let e=!1,i=null,n,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=et.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function h(){return i}r.getCryptoKey=h;function f(){var O,A;return((A=(O=et.self.crypto)===null||O===void 0?void 0:O.subtle)===null||A===void 0?void 0:A.encrypt)!=null&&et.self.CryptoKey!=null}r.isSupported=f;async function u(O){n=r.crypto.importKey(Wf,ac(O),{name:ma,hash:Yf},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||lt.warn(`Fail to import public key '${O}'`)}r.importKey=u;async function m(O){if(!f()||e)return null;await n;let A=Un(O);A.byteLength>Ea&&(A=A.slice(0,Ea));try{let H=await r.crypto.encrypt({name:ma},i,A);return Wo(H)}catch{return null}}r.asymmetricEncrypt=m;async function y(O,A){if(!f()||e)return null;let H={counter:A.initializationVector,name:ya,length:64},Q=o.encode(O);try{let ot=await r.crypto.encrypt(H,A.cryptoKey,Q);return Wo(ot)}catch{return null}}r.symmetricEncrypt=y;async function v(O){let A=await P(O);if(!A)throw new Error("Export secret failed");let H=await m(A);if(!H)throw new Error("Encrypt secret failed");return H}r.encryptSecret=v;async function P(O){var A;if(!f())return null;try{return(A=(await r.crypto.exportKey("jwk",O)).k)!==null&&A!==void 0?A:null}catch{return null}}async function N(){if(!f()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:ya,length:128},!0,["encrypt","decrypt"]),initializationVector:et.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=N;function _(O){c=O}r.setDigestSalt=_;async function S(O){O=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(O)),c&&(O=`${O}:${c}`);let A=o.encode(O);try{let H=await r.crypto.digest(Xf,A);return nn(H)}catch{return null}}r.digest=S;function C(){return et.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=C}(s||(s={})),s})(),we=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),ze=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),ls=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),fr=(()=>{class s{constructor(){this.kc=[]}setRegexRules(t){this.kc=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this._E(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.kc,e=>this.Bd(t,e))}getMatchingRules(t){return csArray.prototype.filter.call(this.kc,e=>this.Bd(t,e))}Bd(t,e){var i,n;let o=this.wE(t,e);return!this.TE(e)||!this.AE(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((n=e.regex)===null||n===void 0)&&n.test(o))}TE(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}AE(t){let e=t.samplingRate!==100,i=e&&fe.boolean(t.samplingRate);return!e||i}Co(t){return!kt(t,"http://")&&!kt(t,"https://")?`https://${t}`:t}wE(t,e){let i=Kn(this.Co(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}Io(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}_E(t){let e=null,i=!1;switch(t.operator){case ze.NOT_START:case we.NOT_START:i=!0;case ze.START:case we.START:e=new csRegExp(`^${t.value}`,this.Io(t));break;case ze.NOT_END:case we.NOT_END:i=!0;case ze.END:case we.END:e=new csRegExp(`${t.value}$`,this.Io(t));break;case ze.NOT_CONTAIN:case we.NOT_CONTAIN:i=!0;case ze.CONTAIN:case we.CONTAIN:case we.REGEX:e=new csRegExp(`${t.value}`,this.Io(t));break;case ze.NOT_EXACT:case we.NOT_EXACT:i=!0;case ze.EXACT:case we.EXACT:e=new csRegExp(`^${t.value}$`,this.Io(t));break;default:lt.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.Fd(t.startDate):void 0,o=t.endDate?this.Fd(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,maskMedia:t.maskMedia,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:o}}Fd(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),Zn=(()=>{class s{constructor(t,e,i,n){this.ae=t,this.Fr=e,this.$r=i,this.Tt=n}init(){this.bE()}shouldMaskNonTextElements(){if(this.ae.anonymisationMethod!==ls.replayRecordingMaskedUrlRegexRules)return!1;if(this.ae.isSMB)return this.shouldUseAnonymization();let t=this.$r.getMatchingRules(this.Fr.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.Tt&&!this.Tt.isReplayUnanonymizedAllowedByConsent()){switch(this.ae.anonymisationMethod){case null:case ls.replayRecordingUnmaskedUrlRegex:return!(this.ae.replayRecordingUnmaskedUrlRegex&&this.ae.replayRecordingUnmaskedUrlRegex.test(this.Fr.getAnonymizedUrl()));case ls.replayRecordingUnmaskedUrlRegexRules:return!this.$r.evaluateUrl(this.Fr.getAnonymizedUrl())}return!0}else{switch(this.ae.anonymisationMethod){case null:case ls.replayRecordingMaskedUrlRegex:return!!(this.ae.replayRecordingMaskedUrlRegex&&this.ae.replayRecordingMaskedUrlRegex.test(this.Fr.getAnonymizedUrl()));case ls.replayRecordingMaskedUrlRegexRules:return this.$r.evaluateUrl(this.Fr.getAnonymizedUrl())}return!1}}bE(){this.ae.anonymisationMethod===ls.replayRecordingMaskedUrlRegexRules&&this.ae.replayRecordingMaskedUrlRegexRules?this.$r.setRegexRules(this.ae.replayRecordingMaskedUrlRegexRules):this.ae.anonymisationMethod===ls.replayRecordingUnmaskedUrlRegexRules&&this.ae.replayRecordingUnmaskedUrlRegexRules&&this.$r.setRegexRules(this.ae.replayRecordingUnmaskedUrlRegexRules)}}return s})();function Kf(s){return s.nodeType===1}function yt(s){let r=csEventtarget.apply(s);return r&&Kf(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function Jf(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Qf(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(yt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var Et=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Hi=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),Zf=(()=>{class s{compute(t,e){let i=this.Ls(e.x)-this.Ls(t.x),n=this.Ls(e.y)-this.Ls(t.y),o=e.time-t.time;return{duration:o,distance:this.$d(i,n),direction:this.RE(i,n),velocity:this.CE(i,n,o)}}computePinchMetrics(t,e){let i=this.Ls(e.x)-this.Ls(t.x),n=this.Ls(e.y)-this.Ls(t.y);return{duration:e.time-t.time,distance:this.$d(i,n)}}getScale(t,e){return Math.abs(e/t-1)}Ls(t){return t/window.devicePixelRatio}$d(t,e){return Math.round(Math.sqrt(t*t+e*e))}CE(t,e,i){let n=i/1e3,o=t/n,c=e/n;return Math.round(Math.abs(o)+Math.abs(c))}RE(t,e){return Math.abs(t)>Math.abs(e)?t>0?Hi.RIGHT:Hi.LEFT:e>0?Hi.DOWN:Hi.UP}}return s})(),Yc=typeof performance!="undefined"&&!!performance.now,Sa=Yc?()=>performance.now():()=>csDate.now(),tg=(()=>{var s;return Yc?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),Bi={now(){return Math.round(Sa()+tg)},elapsed(){return Sa()}};function va(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var eg=1e3,sg=100,ig=.1,yn=(()=>{class s{constructor(){this.Ht={},this.Dc=()=>{},this.Po=new Zf,this.we()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Dc=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.IE(t))return;this.PE(t)&&this.we();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Bi.now()};if(t.touches.length===1)this.Ht.startPinchTime=e.time,this.Ht.firstTouch=e;else if(t.touches.length===2&&(this.Ht.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Bi.now()},this.Ht.firstTouch&&this.Ht.secondTouch)){let i=this.Po.computePinchMetrics(this.Ht.firstTouch,this.Ht.secondTouch);this.Wi=i.distance}csArray.prototype.push.call(this.zr,e),this.Oo=yt(t)}processActionMove(){this.xc=!0}processActionUp(t){if(this.OE(t)){if(csArray.prototype.push.call(this.zr,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Bi.now()}),this.NE(t)&&this.Ht.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Ht.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Bi.now()};this.Ht.firstTouch&&(this.Ht.firstTouch=e,this.Ht.secondTouch=i),this.ME(t)}this.Wi||this.kE()&&this.DE(t)}}we(){this.zr=[],this.Oo=null,this.xc=!1,this.Wi=null,this.Gr=!0}DE(t){let e=this.Po.compute(this.zr[0],this.zr[1]);this.Gr=t.isTrusted;let i=this.xc?this.xE(e):this.LE(e);if(this.VE(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=va(n.pageX,1),i.pageY=va(n.pageY,1)}this.Dc(i,t)}ME(t){if(!(this.Ht.firstTouch&&this.Ht.secondTouch))return;let e=this.Po.computePinchMetrics(this.Ht.firstTouch,this.Ht.secondTouch);this.Gr=t.isTrusted;let i=this.UE(e);i&&this.Dc(i,t)}UE(t){return!this.Wi||this.Po.getScale(this.Wi,t.distance)<ig?void 0:{type:this.Wi>t.distance?Et.PINCH_IN:Et.PINCH_OUT,target:this.Oo,distance:t.distance,isTrusted:this.Gr}}xE(t){return{type:t.velocity<sg?Et.DRAG:Et.FLICK,target:this.Oo,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Gr}}LE(t){return{type:t.duration<eg?Et.TAP:Et.LONG_PRESS,target:this.Oo,isTrusted:this.Gr}}VE(t,e){return t===Et.TAP&&e&&e.length===1}PE(t){return t.touches.length===1}kE(){return this.zr.length===2}IE(t){return t.touches.length>0}OE(t){return t.changedTouches.length>0}NE(t){return this.xc&&!!this.Wi&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),rg=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),Xc=!0,Xi=csSymbol("safe"),_a=csSymbol("task");function Ct(s,r=Xc){var t;(t=s[Xi])!==null&&t!==void 0||(s[Xi]=function(e){let i=arguments;Ss(()=>(e[_a]=Kt,s.listener.apply(s.boundElement,i)),ge.EventListener,e[_a])}),s.boundElement.addEventListener(s.type,s[Xi],r)}function It(s,r=Xc){s.boundElement.removeEventListener(s.type,s[Xi],r)}var Kc=(()=>{class s extends rg{constructor(t){super(),this.jE=t,this.Vs=[{boundElement:document,type:"touchstart",listener:e=>this.K(e)},{boundElement:document,type:"touchmove",listener:e=>this.K(e)},{boundElement:document,type:"touchend",listener:e=>this.K(e)}],this.qr=new yn,this.qr.onGesture((e,i)=>this.Lc(e,i))}Lc(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Vs,t=>Ct(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Vs,t=>It(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}K(t){this.jE.tryToExecute("process gesture event",()=>{if(this.qr.isValidTouchEvent(t))switch(t.type){case"touchstart":this.qr.processActionDown(t);break;case"touchmove":this.qr.processActionMove();break;case"touchend":this.qr.processActionUp(t);break}})()}static isSwipe(t){return t.type===Et.FLICK||t.type===Et.DRAG}}return s})();var ng=(()=>{class s{constructor(t,e,i,n,o){this.f=t,this.Z=e,this.Us=i,this.ce=n,this.pt=o}init(){this.Z.onChildMessage((t,e,i)=>this.pt.emitIframeEvent(t,e,i)),this.Z.setSentiveStatusCallback(()=>this.ce.getSensitiveStatus()),this.Z.setRecordingContextCallback(()=>this.Us.getRecordingContext())}onStartTracking(){this.f.iframesTracking&&this.Z.start()}onOptout(){this.f.iframesTracking&&this.Z.stop()}onSensitiveStatusChange(){if(this.f.iframesTracking){let t=this.ce.getSensitiveStatus();this.Z.onSensitiveStatusChange(t)}}onRecordingContextChange(){if(this.f.iframesTracking){let t=this.Us.getRecordingContext();this.Z.onRecordingContextChange(t)}}}return s})(),mt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),Jc=(()=>{class s extends mt{constructor(t){super(),this.f=t,this.Vc=0,this.Ae=new Map,this.zd={boundElement:window,type:"message",listener:e=>this.Uc(e)}}onChildMessage(t){this.Gd=t}setRecordingContextCallback(t){this.HE=t}setSentiveStatusCallback(t){this.BE=t}onSensitiveStatusChange(t){let e=st.buildBaseMessage(I.SensitiveStatus,zt.Parent,this.f.projectId);e.content=t;let i=st.buildBaseMessage(I.SensitiveStatus,zt.Parent,this.f.projectId);i.content={...t,started:!1,useAnonymization:!0,capturedElementSelector:""},this.Ae.forEach(n=>{if(n.port){let o=this.ko(n)?i:e;this.jc(n,o)}})}onRecordingContextChange(t){let e=st.buildBaseMessage(I.RecordingContext,zt.Parent,this.f.projectId);e.content=t,this.Ae.forEach(i=>{!this.ko(i)&&i.port&&this.jc(i,e)})}sendToChildren(t,e){let i=st.buildBaseMessage(t,zt.Parent,this.f.projectId);i.content=e,this.FE(i)}onStart(){Ct(this.zd,!1),this.qd()}onStop(){this.$E(),It(this.zd,!1),this.zE()}qd(){let t=this.GE();this.qE(t),csArray.prototype.forEach.call(t,e=>{if(this.WE(e)===null){let n={iframe:e};this.Ae.set(this.Vc,n),this.Vc+=1}}),this.YE()}GE(){return csArray.prototype.filter.call(pt.findAllElements("iframe"),t=>this.XE(t))}qE(t){this.Ae.forEach((e,i)=>{e.iframe&&csArray.prototype.indexOf.call(t,e.iframe)===-1&&this.KE(i,e)})}KE(t,e){e.port&&st.closeChannelPort(e.port),this.Ae.delete(t)}zE(){this.Ae.forEach(t=>{t.port&&st.closeChannelPort(t.port)}),this.Ae.clear()}WE(t){let e=null;return this.Ae.forEach((i,n)=>{e===null&&i.iframe===t&&(e=n)}),e}XE(t){return t.id!==gc&&(!t.src||kt(t.src,"about:")||Xn(xc(t.src),this.f.hostnames))}FE(t){this.Ae.forEach(e=>{this.jc(e,t)})}jc(t,e){let i=e.type===I.SensitiveStatus||e.type===I.RecordingContext;t.port&&(!i||t.initialStatusSent)&&st.sendChannelMessage(t.port,e)}YE(){this.Ae.forEach((t,e)=>{if(t.iframe.contentWindow){let i=this.JE(e);st.sendPostMessage(t.iframe.contentWindow,"*",i)}})}$E(){let t=this.QE();this.Ae.forEach(e=>{e.port?st.sendChannelMessage(e.port,t):e.iframe.contentWindow&&st.sendPostMessage(e.iframe.contentWindow,"*",t)})}JE(t){return st.buildBaseMessage(I.Discovery,zt.Parent,this.f.projectId,t)}QE(){return st.buildBaseMessage(I.Stop,zt.Parent,this.f.projectId)}ZE(t,e){let i=this.Ae.get(t);if(i===void 0){L.error(`Parent received channel messaging initialization from unknow child id : ${t} (${this.Vc})`);return}i.port=e,i.port.onmessage=n=>{this.Hc(n,i)}}tS(t){if(!t.port)return;let e=st.buildBaseMessage(I.SensitiveStatus,zt.Parent,this.f.projectId),i=this.BE();this.ko(t)&&(i.started=!1,i.capturedElementSelector="",i.useAnonymization=!0),e.content=i,st.sendChannelMessage(t.port,e)}eS(t){if(!t.port)return;let e=st.buildBaseMessage(I.RecordingContext,zt.Parent,this.f.projectId),i=this.HE();this.ko(t)&&(i.isRecording=!1),e.content=i,st.sendChannelMessage(t.port,e)}Hc(t,e){if(e===void 0){L.error(`Parent received channelMessage from unknown child : ${csJSON.stringify(t.data)}`);return}let i=t.data.type,n=t.data.content;i===I.EndOfBufferedMessages?(this.tS(e),this.eS(e),e.initialStatusSent=!0):this.Gd(e.iframe,i,n)}Uc(t){if(st.isMessageValid(t,zt.Child,this.f.projectId,this.f.hostnames))switch(t.data.type){case I.Discovery:if(t.data.id===void 0){this.qd();return}if(t.ports&&t.ports.length===1&&this.Ae.has(t.data.id)){this.ZE(t.data.id,t.ports[0]);return}L.error(`Parent received wrong channelMessage initialization : (${t.origin}) : ${csJSON.stringify(t.data)}`);break;case I.ChildLogMessage:this.Gd(null,I.ChildLogMessage,t.data.content);break;default:L.warn(`Parent received unexpected postMessage type from child (${t.origin}) : ${csJSON.stringify(t.data)}`)}}ko(t){return k.isMaskedElement(t.iframe)||k.isMaskedElementChild(t.iframe)}}return s})(),Ie;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(Ie||(Ie={}));function gr(s){return s.tagDeploymentMode===Ie.DualCollectionReview||s.tagDeploymentMode===Ie.DualCollection}function og(s){return gr(s)||s.tagDeploymentMode===Ie.LoadClicktalePtc}var ag=(()=>{class s{constructor(t){this.f=t}init(){this.Wd=!1,this.Yd=!1}loadClicktalePtc(){!this.Wd&&this.f.ptcDomain&&this.f.ptcGuid&&this.sS()}startDataCollection(t){this.Yd||gr(this.f)&&(t(),this.Yd=!0)}sS(){this.Wd=!0;let t=this.iS();document.getElementsByTagName("head")[0].appendChild(t)}iS(){let t=document.createElementNS("http://www.w3.org/1999/xhtml","script");return t.async=!0,t.crossOrigin="anonymous",t.type="text/javascript",this.f.ptcSha512&&this.f.ptcSnapshotPath?(t.integrity=`sha512-${this.f.ptcSha512}`,t.src=`https://${this.f.ptcDomain}/${this.f.ptcSnapshotPath}/ptc.js`):t.src=`https://${this.f.ptcDomain}/ptc/${this.f.ptcGuid}.js`,t}}return s})(),Xe=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=o}(s||(s={})),s})(),cg=(()=>{class s{constructor(t,e,i,n,o){this.f=t,this.R=e,this.A=i,this.E=n,this.rS=o,this.nS=0}init(){this.Do=new ag(this.f),this.Do.init(),this.oS(),this.E.register(["startDataCollection"],()=>{this.nS++,this.Do.startDataCollection(this.rS)})}oS(){gr(this.f)&&this.Do.loadClicktalePtc()}onAfterNaturalPageView(){this.f.tagDeploymentMode===Ie.LoadClicktalePtc&&this.Do.loadClicktalePtc()}onAfterArtificialPageView(){!this.R.isReplayRecorded()&&Xe.isRecording()&&this.f.tagDeploymentMode===Ie.LoadClicktalePtc&&Xe.triggerLogicalPageView(this.A.getAnonymizedUrl())}onAfterSessionRenewal(){!this.R.isReplayRecorded()&&Xe.isRecording()&&Xe.triggerLogicalPageView(this.A.getAnonymizedUrl())}onOptout(){Xe.isRecording()&&Xe.stopRecording()}}return s})(),Qc=(()=>{class s{constructor(t){this.ft=t}on(t,e){return i=>{this.ft.hasValidEventTarget(i)&&this.aS(i,t)&&e(i)}}aS(t,e){let i=yt(t);return ee.call(i,e)}isMatchesSelectorSupported(){return!!ee}}return s})(),lg=(()=>{class s extends mt{constructor(){super(),this.Xd=0}onStart(){L.isPerfLoggingActive()&&(this.Wr=window.csSetInterval(()=>this.Kd(),s.cS))}onStop(){L.isPerfLoggingActive()&&(this.Kd(),csClearInterval(this.Wr))}Kd(){this.Xd>=s.lS||q.counters.methodPerformance.flush()&&this.Xd++}}return s.cS=5e3,s.lS=5,s})(),hg=(()=>{class s{constructor(){}init(){this.Jd=new lg}onStartTracking(){this.Jd.start()}onOptout(){this.Jd.stop()}}return s})();var wa=(()=>{let s;return function(r){function t(n){return G(n)||Ut(n)}r.isValidIdentity=t;function e(n){let o=!1;return i(n)&&(o=!!n.hash),o}r.parseIdentityOptionsHash=e;function i(n){return At(n)&&ne(n)&&"hash"in n}}(s||(s={})),s})(),En=["identify"],ug=["getIdentity"],Zc=["resetIdentity"];var dg=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},pg=5e3,fg=(()=>{class s extends Oc{constructor(t,e,i){super(t,e),this.Xi=null,this.fS=(i==null?void 0:i.type)||"json",this.tp=i==null?void 0:i.cacheMinutes,this.Vr=i==null?void 0:i.timeout}onLoad(t){this.qi=t}onError(t){this.Lr=t}onTimeout(t,e){this.pi=t,this.Vr=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.fc(t);let e=gi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.gS(i,this.fS)}abort(){this.Xi&&(this.Xi.abort(),this.Xi=null)}isInProgress(){return this.Xi!==null}gS(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var o;return(o=this.Lr)===null||o===void 0?void 0:o.call(this,n)},n.ontimeout=()=>{var o;return(o=this.pi)===null||o===void 0?void 0:o.call(this,n)},n.onload=()=>{var o,c;n.status>=200&&n.status<400?((o=this.qi)===null||o===void 0||o.call(this,this.mS(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Lr)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.Xi=null},n.timeout=(i=this.Vr)!==null&&i!==void 0?i:pg,this.Xi=n,n.send()}mS(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}fc(t){let e;this.tp?e=`${dg(this.tp)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})();var Ta=(()=>{let s;return function(r){function t(n){return Vn(n)}r.isValidProperties=t;let e=255;function i(n){let o={};for(let c of Object.keys(n)){let l=n[c];if(G(l)||Ut(l)){let h=Mt.truncate(csString(c),e);o[h]=Mt.truncate(csString(l),e)}}return o}r.sanitizeProperties=i}(s||(s={})),s})();var Sn=["addUserProperties"];var Hs={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11};function gg(s){return W.traverse(s,r=>{if(r.nodeType===Hs.DOCUMENT_FRAGMENT_NODE){let t=W.getProperty(r,"styles");t&&(r.adoptedStyleSheets=t)}}),s}function mg(s){if(s!=null&&s.length)return de(s,r=>Eg(r))}function yg(){qt(document).visitAll(s=>{var r;if(Ls(s)&&((r=s.adoptedStyleSheets)===null||r===void 0?void 0:r.length)>0){let t=mg(s.adoptedStyleSheets);W.setProperty(s,"styles",t)}})}function Eg(s){let r=[];try{r=de(s.cssRules,t=>t.cssText)}catch{}return{cssRules:r,disabled:s.disabled}}var Aa=new Map,Ur=!Ei&&document.implementation.createHTMLDocument("");function tl(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Sg(s){if(!ar(s))return null;let r=el(s);if(r===null||r.length===0)return null;let t="";if(rn(s.textContent))X(r,e=>t+=e.cssText);else{let e=vg(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,o=0;n<r.length;n+=1,o+=1)i[o]=r[n];X(i,n=>t+=n.cssText)}return t}function vg(s){if(!Ur)return 0;let r=Aa.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,Ur.head.appendChild(t);let e=el(t);return r=e?e.length:0,Aa.set(s.textContent,r),Ur.head.removeChild(t),r}function el(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var si=s=>s instanceof HTMLFormElement?"form":s.localName;var _s=(()=>{class s{constructor(t){this.csId=it(t),this.props=Yi.getStore(t)}}return s})(),sl=(()=>{class s extends _s{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),ks=(()=>{class s extends _s{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=Hs.ELEMENT_NODE,this.localName=si(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=Sg(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new sl(c);csArray.prototype.push.call(this.children,l)}zs(t)&&W.setProperty(this,"SVG",!0),(ar(t)||Fn(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===Hs.ELEMENT_NODE}static getAttribute(t,e){return Qe(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),_g=(()=>{class s extends _s{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),wg=(()=>{class s extends _s{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),Tg=(()=>{class s extends _s{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),Ag=(()=>{class s extends _s{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),bg=(()=>{class s extends _s{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Rg=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let o=e[n];i[n]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&Fn(t)&&(i[n].value=tl(t))}return i}}return s})(),ba={workTime:40,async:!0,initialDOM:!0};var oi=csSymbol("InitialDom"),Ra=csSymbol.for("ignoreNextSerialization");function il(s){return s[Ra]?(delete s[Ra],!0):!1}function rl(s=ba){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=ba.workTime);let n=ms("serialize:callback",m=>e(m)),o=new vi,c=(m,y)=>{m.hasChildNodes()&&o.push({node:m,serializedNode:y});let v=m instanceof Element&&csElementshadowRoot.apply(m);if(v){let P=y.shadowRoot=ai(v);s.async&&s.initialDOM&&W.setProperty(v,oi,!0),c(v,P)}},l,h=!0,f=8,u=ms("work",()=>{var m;if(h)l=ai(t),s.async&&s.initialDOM&&W.setProperty(t,oi,!0),c(t,l),h=!1;else if(o.isEmpty)return;let y=Pg(100);for(;!o.isEmpty;){if(s.async&&y.elapsed()>=s.workTime){--f<=0&&csSetTimeout(u);return}let{node:v,serializedNode:P}=o.pop(),N=(m=P.children)!==null&&m!==void 0?m:[];if(lr(v))continue;let _=0;for(let S=csNodefirstChild.apply(v);S;S=csNodenextSibling.apply(S)){if(il(S))continue;let C=ai(S);s.async&&s.initialDOM&&W.setProperty(S,oi,!0),N[_++]=C,c(S,C)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,u();else for(let m=0;m<f;m++)csSetTimeout(u,1)}}function Cg(s){let r=ai(s),t=r;if(lr(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))il(n)||(t.children[e++]=vn(n));let i=s.shadowRoot;return i&&(t.shadowRoot=vn(i)),r}var vn=vs(Cg,"serializeSync");function ai(s){let r,t;switch(s.nodeType){case 1:t=r=new ks(s),r.attributes=Og(s);break;case 3:t=new sl(s);break;case 4:t=new _g(s);break;case 8:t=new wg(s);break;case 10:t=new Tg(s);break;case 9:t=new Ag(s);break;case 11:t=new bg(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function Ig(){oi=csSymbol("InitialDom")}function Pg(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=M.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=M.elapsed()),t-this.started}}}function Og(s){return lr(s)?[]:Rg.create(s)}var Ng=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Mg="\uFF41",kg=/[^\s]/g,Dg="a";function jr(s){let r=csString.prototype.replace.call(s,Ng,Mg);return csString.prototype.replace.call(r,kg,Dg)}var xg=(()=>{class s{constructor(t,e,i,n=null,o=!1){this.Ke=t,this.ES=e,this.M=i,this.jo=n,this.SS=o,this.vS=Ic(this.ES)}sanitize(t,e){return W.traverse(t,(i,n)=>{if(i.anonymized=this.Ke,i.nodeType===Hs.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?W.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(ks.isElement(i))return this._S(i);if(i.nodeType===Hs.CDATA_SECTION_NODE){let o=i;o.data=this.Ke?jr(o.data):this.M.checkAndAnonymizePII(o.data,this.jo);return}}),t}setAnonymization(t){this.Ke=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[he.ANONYMIZED_TEXT_STATUS_PROP])===he.WHITELISTED_STATUS;return this.Ke&&!n?{anonymizedValue:jr(t),withAnonymization:!0}:{anonymizedValue:this.M.checkAndAnonymizePII(t,this.jo),withAnonymization:!1}}_S(t){if(W.getProperty(t,"SVG"))return;let e=Qe(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.Ke,n.value=this.getAnonymizedAttributeValue(t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n){if(this.wS(t,e,n))return i;if(Cp(e))return Ip(t,e,i)?this.M.anonymizePII(i):i;let o=this.SS&&e==="placeholder";return this.Ke&&(Pp(t,e,n)||o)?jr(i):this.Ke?"":this.M.checkAndAnonymizePII(i,null)}wS(t,e,i){return Rp(t,e,i)||this.vS.has(e)}}return s})(),nl=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let o=0;o<i.length;o+=1)n=csString.prototype.charCodeAt.call(i,o)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var to=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.PS}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.OS();if(i===null)return null;let{bubbles:n=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,n,o,c),i}static OS(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.PS="cs.tracking.",s})();var ol=(()=>{class s{constructor(){}onLoad(t){this.qi=t}onLoadCallbackExecute(){this.qi()}start(){let t=this.onLoadCallbackExecute.bind(this);this.sv(t)}sv(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return $([j("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),Lg=(()=>{class s{constructor(t){this.Bo=t.performance}getRequestParameters(){if(this.iv())return{};let t=this.rv();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}rv(){let t=this.Bo.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}iv(){return!(this.Bo&&this.Bo.timing&&this.Bo.timing.loadEventEnd>0)}}return s})(),Vt=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(n,o)=>o.enhanceAnalysisEvent(t,n),e)}}return s})(),z=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),Hr=(()=>{let s;return function(r){r.SUCCESS="success",r.FAILURE="failure",r.ATTEMPT="attempt"}(s||(s={})),s})(),Ps=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.WEB="web"}(s||(s={})),s})();function Ca(s){return"text"in s}function Br(s){return"hrchy"in s}function Vg(s){return s.tgtHM!==void 0}function al(s){return s.tgt!==void 0}function Ug(s){return s.tgtLk!==void 0}function jg(s){return s.x!==void 0&&s.y!==void 0}function Hg(s){return s===Hr.SUCCESS||s===Hr.FAILURE||s===Hr.ATTEMPT}function Bg(s){return s===Ps.APPCUES||s===Ps.CHAMELEON||s===Ps.CONTENTSQUARE||s===Ps.SEGMENT||s===Ps.WEB}var cl=(()=>{class s{constructor(t,e,i){this.Qt=t,this.xt=e,this.At=i}processGesture(t,e){switch(t.type){case Et.TAP:this.nv(e);break;case Et.FLICK:this.ov(t,e);break;case Et.DRAG:this.av(t,e);break;default:break}}nv(t){let e={type:z.TAP,ts:0,x:0,y:0,tgt:""},i=Vt.build(t,e,this.Qt);i.tgt!==pe.INVALID_ELEMENT&&this.L(i)}av(t,e){var i,n;let o={type:z.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.At)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.At)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Vt.build(e,o,this.Qt);c.tgt!==pe.INVALID_ELEMENT&&this.L(c)}ov(t,e){var i,n;let o={type:z.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.At)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.At)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Vt.build(e,o,this.Qt);c.tgt!==pe.INVALID_ELEMENT&&this.L(c)}onEvent(t){this.L=t}start(){this.xt.subscribe(s.hp,(t,e)=>this.processGesture(t,e))}stop(){this.xt.unsubscribe(s.hp)}}return s.hp="AnalysisGestureTracker",$([Tt()],s.prototype,"processGesture",null),s})();function mr(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],o=null,c=0,l,h=()=>{c=M.now(),o=null,l=s.apply(i,n),n=[],i=null},f=function(...u){if(i=this!==null&&this!==void 0?this:et,n=[...u],e==="trailing")return o||(o=et.csSetTimeout(h,t)),l;let m=M.now(),y=t-(m-c);return y<=0||y>t?(c=m,l=s.apply(i,n),o?(et.csClearTimeout(o),o=null):n=[]):o||(o=et.csSetTimeout(h,y)),l};return f.cancel=()=>{o&&(et.csClearTimeout(o),c=0,o=null,n=[])},f.flushPending=()=>{o&&(et.csClearTimeout(o),h())},f}var Ti=s=>(r,t,e)=>{e.value=mr(e.value,s)},Ia="data-cs-scroll-container";function Fg(s){try{if(At(csEventtarget.apply(s)))return!0}catch{}return!1}var Ds=(()=>{let s;return function(r){function t(i){return!!(At(i)&&Fg(i)&&yi(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Ia)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Ia}]`)}r.getScrollContainer=e}(s||(s={})),s})(),xs=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),Y=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})(),ll=(()=>{class s{constructor(t,e,i,n=["submit"]){this.Qt=t,this.ft=e,this.Lt=i,this.cv=n,this.up="select, select *, input, textarea",this.lv="select, select *, input, textarea",this.dp="a, a *, button, button *, select, select *, input, textarea",this.Kr="input, select, textarea",this.hv="form",this.Fo=150,this.uv=400,this.pp=!1,this.Jr=di((o,c)=>this.scrollListener(o,c),this.Fo),this.fp=di(o=>this.resizeListener(o),this.Fo),this.pv=mr(o=>this.mouseMoveListener(o),this.uv),this.fv=[{boundElement:window,type:"resize",listener:()=>this.fp()},{boundElement:document,type:"scroll",listener:o=>this.Jr(o)},{boundElement:window,type:"mousemove",listener:o=>{this.pv(Jf(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.gp=[{type:"change",listener:this.Lt.on(this.lv,o=>this.changeListener(o))},{type:"submit",listener:this.Lt.on(this.hv,o=>this.submitListener(o))}],this.gv=[{boundElement:document,type:"mouseover",listener:this.Lt.on(this.dp,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.Lt.on(this.dp,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.Lt.on(this.up,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.Lt.on(this.up,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.Lt.on(this.Kr,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.Lt.on(this.Kr,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.Lt.on(this.Kr,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.Lt.on(this.Kr,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.Lt.on(this.Kr,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.gp,o=>({...o,boundElement:document}))],this.U={},this.Jc=(o,c)=>{switch(c){case"initial":case"added":this.yi(o);break;case"removed":this.Ei(o);break}},this.he=new qs(this.Jc),this.Qc()}yi(t){if(tr(t)){let e=this.mp();csArray.prototype.forEach.call(e,i=>Ct(i))}else{let e=this.yp();csArray.prototype.forEach.call(e,i=>{Ct({...i,boundElement:t})})}}Ei(t){if(tr(t)){let e=this.mp();csArray.prototype.forEach.call(e,i=>It(i))}else{let e=this.yp();csArray.prototype.forEach.call(e,i=>{It({...i,boundElement:t})})}}onEvent(t){this.L=t}start(){this.he.observe(),this.yi(document),this.resizeListener()}stop(){this.Ei(document),this.he.disconnect()}flushPendingDebouncedListeners(){this.Jr.flushPending(),this.fp.flushPending()}Ep(t){return csArray.prototype.some.call(this.cv,e=>e===t)}yp(){return this.Lt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.gp,t=>!this.Ep(t.type)):(L.warn("Element.matches is not implemented yet"),[])}mp(){let t=[];return csArray.prototype.push.call(t,...this.fv),this.Lt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.gv):L.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.Ep(e.type))}resizeListener(t){let e=Ds.getScrollContainer(),i=yi(e);i&&(this.pp=!0);let n={type:z.RESIZE,ts:0,x:i?e.clientWidth:gt.windowWidth(),y:i?e.clientHeight:gt.windowHeight()};t!==void 0&&(n.d=t),this.L(n)}scrollListener(t,e){let i=Ds.isEventOnScrollContainer(e);!this.pp&&i&&this.resizeListener();let n={type:z.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:gt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:gt.windowOffsetY(),d:t},o=Vt.build(e,n,this.Qt);this.L(o)}mouseMoveListener(t){let e={type:z.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Vt.build(t,e,this.Qt);this.L(i)}mouseDownListener(t){let e={type:z.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Vt.build(t,e,this.Qt);this.ue(i)}mouseUpListener(t){let e={type:z.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Vt.build(t,e,this.Qt);this.ue(i)}clickListener(t){let e={type:z.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Vt.build(t,e,this.Qt);this.ue(i)}mouseOverListener(t){let e={type:z.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Vt.build(t,e,this.Qt);this.ue(i)}mouseOutListener(t){let e={type:z.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.ft.getEventTargetPath(t)},i=Vt.build(t,e,this.Qt);this.ue(i)}focusInListener(t){let e={type:z.FOCUSIN,ts:0,tgt:this.ft.getEventTargetPath(t)},i=Vt.build(t,e,this.Qt);this.ue(i)}focusOutListener(t){let e={type:z.FOCUSOUT,ts:0,tgt:this.ft.getEventTargetPath(t)},i=Vt.build(t,e,this.Qt);this.ue(i)}changeListener(t){let e={type:z.CHANGE,ts:0,tgt:""},i=Vt.build(t,e,this.Qt);this.ue(i)}submitListener(t){let e={type:z.SUBMIT,ts:0,tgt:""},i=Vt.build(t,e,this.Qt);this.ue(i)}copyListener(t){let e={type:z.COMMAND,ts:0,tgt:this.ft.getEventTargetPath(t),key:xs.COPY};this.ue(e)}cutListener(t){let e={type:z.COMMAND,ts:0,tgt:this.ft.getEventTargetPath(t),key:xs.CUT};this.ue(e)}pasteListener(t){let e={type:z.COMMAND,ts:0,tgt:this.ft.getEventTargetPath(t),key:xs.PASTE};this.ue(e)}keyUpListener(t){let e={type:z.KEYUP,ts:0,tgt:this.ft.getEventTargetPath(t),key:this.Sp(t)};this.ue(e)}keyDownListener(t){let e={type:z.KEYDOWN,ts:0,tgt:this.ft.getEventTargetPath(t),key:this.Sp(t)};this.ue(e)}Sp(t){let e=this.U[t.key];return e===void 0?Y.ALPHANUMERICAL:e}ue(t){al(t)&&t.tgt!==pe.INVALID_ELEMENT&&this.L(t)}Qc(){this.U[" "]=Y.SPACE,this.U.Spacebar=Y.SPACE,this.U.Enter=Y.ENTER,this.U.Backspace=Y.BACKSPACE,this.U.Delete=Y.DELETE,this.U.ArrowUp=Y.ARROWUP,this.U.ArrowDown=Y.ARROWDOWN,this.U.ArrowLeft=Y.ARROWLEFT,this.U.ArrowRight=Y.ARROWRIGHT,this.U.Up=Y.ARROWUP,this.U.Down=Y.ARROWDOWN,this.U.Left=Y.ARROWLEFT,this.U.Right=Y.ARROWRIGHT,this.U.CapsLock=Y.CAPSLOCK,this.U.Shift=Y.SHIFT,this.U.Tab=Y.TAB}}return $([j("Event handler type: resize")],s.prototype,"resizeListener",null),$([j("Event handler type: scroll")],s.prototype,"scrollListener",null),$([j("Event handler type: mouseMove"),Tt()],s.prototype,"mouseMoveListener",null),$([j("Event handler type: mouseDown"),Tt()],s.prototype,"mouseDownListener",null),$([j("Event handler type: mouseUp"),Tt()],s.prototype,"mouseUpListener",null),$([j("Event handler type: click"),Tt()],s.prototype,"clickListener",null),$([j("Event handler type: mouseOver"),Tt()],s.prototype,"mouseOverListener",null),$([j("Event handler type: mouseOut"),Tt()],s.prototype,"mouseOutListener",null),$([j("Event handler type: focusIn")],s.prototype,"focusInListener",null),$([j("Event handler type: focusOut")],s.prototype,"focusOutListener",null),$([j("Event handler type: change")],s.prototype,"changeListener",null),$([j("Event handler type: submit"),Tt()],s.prototype,"submitListener",null),$([j("Event handler type: copy")],s.prototype,"copyListener",null),$([j("Event handler type: cut")],s.prototype,"cutListener",null),$([j("Event handler type: paste")],s.prototype,"pasteListener",null),$([j("Event handler type: keyup")],s.prototype,"keyUpListener",null),$([j("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),$g=(()=>{class s{constructor(){this.vp=100,this.Qr=0,this.Zr=gt.documentHeight(),this._p={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.Qr=this.Zc(Ds.getScrollContainer()).maxScrollRate}onEvent(t){this.L=t}start(){Ct(this._p)}stop(){It(this._p)}reset(){let t=Ds.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Zc(t);this.Zr=i,this.Qr=e,this.L()}Zc(t){let e=0,i=0;if(t===null)i=gt.documentHeight(),e=this.mv(i);else{let n=this.yv(t);i=this.wp(t,n),e=this.Ev(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Ds.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.Zc(e);(i>this.Qr||n>this.Zr)&&(this.Qr=i,n>this.Zr&&(this.Zr=n),this.L())}mv(t){let e=Math.round(this.Sv()/t*100);return Math.min(e,this.vp)}Sv(){let t=gt.windowHeight();return gt.windowOffsetY()+t}Ev(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.wp(t,e),o=Math.round(i/n*100);return Math.min(o,this.vp)}yv(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}wp(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.Qr}`,mdh:`${this.Zr}`}}}return $([j("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),Zt=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),hl=(()=>{class s{constructor(){this.V=!1,this.Fs=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.Zt(Zt.Hidden):this.Zt(Zt.Visible);case"pagehide":return document.visibilityState==="hidden"?this.Zt(Zt.PagehideHidden):this.Zt(Zt.PagehideVisible);case"blur":return this.Zt(Zt.Blur);case"navigate":return this.vv(t)?this.Zt(Zt.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.V||(this.V=!0,this.tl(),this._v(),this.wv(),Jo()&&this.Tv())}stop(){this.V&&(this.V=!1,this.sl(),this.Av(),this.bv(),Jo()&&this.Rv())}onEvent(t){this.Zt=t}Tv(){window.navigation.addEventListener("navigate",this.Fs)}Rv(){window.navigation.removeEventListener("navigate",this.Fs)}tl(){document.addEventListener("visibilitychange",this.Fs)}sl(){document.removeEventListener("visibilitychange",this.Fs)}_v(){window.addEventListener("pagehide",this.Fs)}Av(){window.removeEventListener("pagehide",this.Fs)}wv(){window.addEventListener("blur",this.Fs)}bv(){window.removeEventListener("blur",this.Fs)}vv(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})();var zg=1024,Gg=512,Fr=1024,$r="||",qg=(()=>{class s extends mt{constructor(t,e,i,n,o,c,l,h,f,u,m,y,v,P,N,_,S,C,O,A,H){super(),this.f=t,this.$s=e,this.xt=i,this.er=n,this.il=o,this.Fe=c,this.be=l,this.rl=h,this.G=f,this.Jt=u,this.Q=m,this.nl=y,this.$e=v,this.W=P,this.$o=N,this.gs=_,this.ms=S,this.ol=C,this.Si=O,this.vi=A,this._i=H,this.Bs=new to,this.zo=!1,this.al=[]}init(){var t,e,i,n,o,c,l;this.$s.onEvent(h=>this.Nt(h)),this.xt.onEvent(h=>this.Nt(h)),this.er.onEvent(()=>{let h=this.er.getRequestParameters();this.W.setQueryParams(h),this.be.setQueryParams(h)}),this.nl.onEvent(h=>this.Re(h)),this.cl(),(t=this.$o)===null||t===void 0||t.onEvent(h=>this.Nt(h)),(e=this.Si)===null||e===void 0||e.onEvent(h=>this.Nt(h)),(i=this.gs)===null||i===void 0||i.onEvent(h=>this.Nt(h)),(n=this.ms)===null||n===void 0||n.onEvent(h=>this.Nt(h)),this.Cv(),(o=this.ol)===null||o===void 0||o.onEvent(h=>this.Re(h)),(c=this.vi)===null||c===void 0||c.onEvent(h=>this.Re(h)),(l=this._i)===null||l===void 0||l.onEvent(h=>this.Re(h))}Cv(){this.be.onBeaconSuccess(()=>{this.Fe.clearEvents()}),this.be.onBeaconFailure(t=>{this.Iv(t)})}initStates(){let t=this.rl.getRequestParameters(),e=this.il.getRequestParameters(),i=this.er.getRequestParameters();this.W.setQueryParams(t),this.W.setQueryParams(e),this.W.setQueryParams(i),this.be.setQueryParams(t),this.be.setQueryParams(e),this.be.setQueryParams(i),this.ll()}clearStates(t){var e,i;this.$s.flushPendingDebouncedListeners(),(e=this.gs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.ms)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.ul(),this.sendLastMessageBeacon()):this.sendEvents(),this.er.reset(),this.W.removeQueryParams()}onStart(t){var e,i,n,o,c,l,h;t||(e=this.ol)===null||e===void 0||e.start(),this.$e.start(),this.$s.start(),this.er.start(),this.xt.start(),(i=this.$o)===null||i===void 0||i.start(),(n=this.ms)===null||n===void 0||n.start(),t||this.nl.start(),(o=this.gs)===null||o===void 0||o.start(),(c=this.Si)===null||c===void 0||c.start(),(l=this.vi)===null||l===void 0||l.start(),(h=this._i)===null||h===void 0||h.start(),csArray.prototype.forEach.call(this.al,f=>{this.Re(f)}),this.al=[]}collectInitialEvents(){var t;(t=this.$o)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Re(t)}onIframeAnalysisUserEvent(t){this.Nt(t)}onExternalEvent(t){this.K(t)}Re(t){this.G.isCurrentPageviewValid()&&this.K(t)}Nt(t){this.G.refreshSession(),this.G.isSessionValid()&&this.K(t)}K(t){this.Fe.addEvent(this.Pv(t)),this.Fe.isFull()&&this.sendEvents(),this.f.emitDebugEvents&&this.Bs.emit("analysisEvent",{...t,typeName:z[t.type]})}Pv(t){return t.ts=this.wi(),t}ul(){this.be.setQueryParams({hlm:"true"}),this.zo=!0}sendLastMessageBeacon(){this.be.removeQueryParams(["i"]),this.be.setQueryParams(this.rl.getRequestParameters()),this.be.setQueryParams(this.il.getRequestParameters()),this.be.send(this.Fe.stringifyEvents()),this.be.removeQueryParams(["hlm"]),this.zo=!1}sendEvents(){this.Fe.isEmpty()||(this.be.removeQueryParams(["i"]),this.W.setQueryParams(this.rl.getRequestParameters()),this.W.setQueryParams(this.il.getRequestParameters()),this.W.send(this.Fe.getEvents()),this.Fe.clearEvents())}onStop(){var t,e,i,n,o,c,l;this.$e.stop(),this.$s.stop(),this.er.stop(),this.xt.stop(),this.nl.stop(),(t=this.$o)===null||t===void 0||t.stop(),(e=this.gs)===null||e===void 0||e.stop(),(i=this.ms)===null||i===void 0||i.stop(),(n=this.Si)===null||n===void 0||n.stop(),this.Fe.empty(),(o=this.ol)===null||o===void 0||o.stop(),(c=this.vi)===null||c===void 0||c.stop(),(l=this._i)===null||l===void 0||l.stop()}ll(){this.Qe=M.now()}wi(){return M.now()-this.Qe}cl(){this.$e.onEvent(t=>{var e,i;t!==Zt.Visible&&((e=this.gs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.ms)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Zt.PagehideVisible?this.ul():t===Zt.PagehideHidden?(this.ul(),this.sendLastMessageBeacon()):(!this.Fe.isEmpty()||this.zo)&&this.sendLastMessageBeacon())})}Iv(t){try{(!this.Fe.isEmpty()||this.zo)&&this.Jt.save({requestParameters:t,events:this.Fe.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!Hg(t)||!yi(e))throw new Error(`Command misuse: ${Tl}`);let i={status:t,type:z.SUBMIT_COMMAND,ts:0,tgt:this.Q.getElementPath(e)};i.tgt!==pe.INVALID_ELEMENT&&this.Re(i)}pushCustomEvent(t,e,i){if(!(G(t)&&!rn(t))||i!==void 0&&!Vn(i))throw new Error(`Command misuse: ${Rn}`);let n=Bg(e)?e:Ps.WEB,o=this.Ov(i),c={type:z.CUSTOM_EVENT,ts:0,customEventName:Mt.truncate(t,zg),sourceLibrary:n,...sn(o)?{}:{properties:o}};this.isStarted?this.Re(c):csArray.prototype.push.call(this.al,c)}Ov(t){let e={};for(let i in t){if(i.length>Gg)continue;let n=t[i];if(Ut(n)||ui(n))e[i]=csString(n);else if(this.Tp(n))e[i]=Mt.truncate(n,Fr);else if(this.Nv(n)){let o=this.Mv(n);o!==""&&(e[i]=o)}}return e}Mv(t){let e="";for(let i=0;i<t.length;i++){let n=t[i];if(!Ut(n)&&!ui(n)&&!this.Tp(n))continue;let o=csString(n);if(e==="")e=Mt.truncate(o,Fr);else if(e.length+$r.length+o.length<=Fr)e+=$r+o;else break}return e}Tp(t){return G(t)&&!rn(t)&&!csString.prototype.includes.call(t,$r)}Nv(t){return csArray.isArray(t)&&t.length>0}}return s})(),mi=(()=>{class s{constructor(...t){this.Ap=t}addProvider(t){csArray.prototype.push.call(this.Ap,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Ap,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),Wg=(()=>{class s{constructor(t,e){this.Jt=t,this.W=e,this.bp=()=>{document.visibilityState==="visible"&&this.Rp()}}start(){this.Rp(),this.tl()}stop(){this.sl()}getRecoveryStorage(){return this.Jt}Rp(){let t=this.Jt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.W.send(i,e)}}tl(){document.addEventListener("visibilitychange",this.bp)}sl(){document.removeEventListener("visibilitychange",this.bp)}}return s})(),ul=(()=>{class s{constructor(t){this.Cp=[],this.Ip=[],this.Xt={},this.Kt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Xt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Xt[e]}):this.Xt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Cp,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Ip,t)}send(t){let e=gi.toQuery({...this.Xt,ct:ur.UNCOMPRESSED}),i=this.kv(e,t);return i?csArray.prototype.forEach.call(this.Cp,n=>n()):csArray.prototype.forEach.call(this.Ip,n=>n(this.Xt)),i}kv(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Kt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Kt}?${t}`,e||"")}}return s})(),Yg=(()=>{class s{constructor(t){this.ir=t}save(t){localStorage.setItem(this.ir,csJSON.stringify(t))}clear(){localStorage.removeItem(this.ir)}recover(){let t=localStorage.getItem(this.ir);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{L.error(`Invalid item in localStorage.
         (key:${this.ir}; value:${t})`)}finally{this.clear()}return e}}return s})(),Xg=(()=>{class s{constructor(t){this.tn=t,this.rn=e=>this.processMetric(e),this.V=!1}onEvent(t){this.L=t}start(){this.V||(this.V=!0,this.tn.onFCP(this.rn),this.tn.onCLS(this.rn),this.tn.onLCP(this.rn),this.tn.onTTFB(this.rn),this.tn.onINP(this.rn))}stop(){this.V=!1}processMetric(t){if(!this.V)return;let e={type:z.PERFORMANCE,name:t.name,val:t.value,ts:0};this.L(e)}}return $([j("Performance metric handler")],s.prototype,"processMetric",null),s})(),dl=-1,Ws=s=>{addEventListener("pageshow",r=>{r.persisted&&(dl=r.timeStamp,s(r))},!0)},me=(s,r,t,e)=>{let i,n;return o=>{r.value>=0&&(o||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},eo=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},so=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},Ai=()=>{var r;let s=so();return(r=s==null?void 0:s.activationStart)!=null?r:0},ye=(s,r=-1)=>{let t=so(),e="navigate";return dl>=0?e="back-forward-cache":t&&(document.prerendering||Ai()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},zr=new WeakMap;function io(s,r){return zr.get(s)||zr.set(s,new r),zr.get(s)}var _n=class{constructor(){Se(this,"t");Se(this,"i",0);Se(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},bi=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},ro=s=>{let r=!1;return()=>{r||(s(),r=!0)}},Ns=-1,Pa=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,or=s=>{document.visibilityState==="hidden"&&Ns>-1&&(Ns=s.type==="visibilitychange"?s.timeStamp:0,Kg())},Oa=()=>{addEventListener("visibilitychange",or,!0),addEventListener("prerenderingchange",or,!0)},Kg=()=>{removeEventListener("visibilitychange",or,!0),removeEventListener("prerenderingchange",or,!0)},pl=()=>{var s;if(Ns<0){let r=Ai(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;Ns=t!=null?t:Pa(),Oa(),Ws(()=>{setTimeout(()=>{Ns=Pa(),Oa()})})}return{get firstHiddenTime(){return Ns}}},yr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},Na=[1800,3e3],fl=(s,r={})=>{yr(()=>{let t=pl(),e,i=ye("FCP"),n=bi("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-Ai(),0),i.entries.push(c),e(!0)))});n&&(e=me(s,i,Na,r.reportAllChanges),Ws(o=>{i=ye("FCP"),e=me(s,i,Na,r.reportAllChanges),eo(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},Ma=[.1,.25],Jg=(s,r={})=>{fl(ro(()=>{let t,e=ye("CLS",0),i=io(r,_n),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=bi("layout-shift",n);o&&(t=me(s,e,Ma,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),Ws(()=>{i.i=0,e=ye("CLS",0),t=me(s,e,Ma,r.reportAllChanges),eo(()=>t())}),setTimeout(t))}))},gl=0,Gr=1/0,Fi=0,Qg=s=>{for(let r of s)r.interactionId&&(Gr=Math.min(Gr,r.interactionId),Fi=Math.max(Fi,r.interactionId),gl=Fi?(Fi-Gr)/7+1:0)},wn,ka=()=>{var s;return wn?gl:(s=performance.interactionCount)!=null?s:0},Zg=()=>{"interactionCount"in performance||wn||(wn=bi("event",Qg,{type:"event",buffered:!0,durationThreshold:0}))},Da=0,Tn=class{constructor(){Se(this,"u",[]);Se(this,"l",new Map);Se(this,"m");Se(this,"p")}v(){Da=ka(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((ka()-Da)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},ml=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=ro(s)),document.addEventListener("visibilitychange",s,{once:!0}))},xa=[200,500],tm=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&yr(()=>{var c;Zg();let t,e=ye("INP"),i=io(r,Tn),n=l=>{ml(()=>{for(let f of l)i.h(f);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=bi("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=me(s,e,xa,r.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),Ws(()=>{i.v(),e=ye("INP"),t=me(s,e,xa,r.reportAllChanges)}))})},An=class{constructor(){Se(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},La=[2500,4e3],em=(s,r={})=>{yr(()=>{let t=pl(),e,i=ye("LCP"),n=io(r,An),o=l=>{r.reportAllChanges||(l=l.slice(-1));for(let h of l)n.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-Ai(),0),i.entries=[h],e())},c=bi("largest-contentful-paint",o);if(c){e=me(s,i,La,r.reportAllChanges);let l=ro(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>ml(l),{capture:!0,once:!0});Ws(h=>{i=ye("LCP"),e=me(s,i,La,r.reportAllChanges),eo(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},Va=[800,1800],bn=s=>{document.prerendering?yr(()=>bn(s)):document.readyState!=="complete"?addEventListener("load",()=>bn(s),!0):setTimeout(s)},sm=(s,r={})=>{let t=ye("TTFB"),e=me(s,t,Va,r.reportAllChanges);bn(()=>{let i=so();i&&(t.value=Math.max(i.responseStart-Ai(),0),t.entries=[i],e(!0),Ws(()=>{t=ye("TTFB",0),e=me(s,t,Va,r.reportAllChanges),e(!0)}))})},im=(()=>{class s{onFCP(t){try{fl(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{Jg(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{em(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{sm(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{tm(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("INP")}}}return s})();var Ri=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),rm=(()=>{class s extends Ri{constructor(){super(...arguments),this.supportedEventTypes=[z.CHANGE],this.r_=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=yt(t);return cr(i)&&csArray.prototype.indexOf.call(this.r_,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var yl=(()=>{class s extends Ri{constructor(t){super(),this.ft=t,this.supportedEventTypes=[z.MOUSEDOWN,z.MOUSEUP,z.CLICK,z.MOUSEOVER,z.TAP,z.DRAG,z.FLICK,z.SUBMIT,z.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.ft.getEventTargetPath(t)),e}}return s})(),Ua=65535,nm=(()=>{let s;return function(r){function t(e){let i=yt(e);if(!i||!ht(i)||!te(i.getBoundingClientRect)||!At(e.pageX)||!At(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),o=e.pageX-n.left-gt.windowOffsetX(),c=e.pageY-n.top-gt.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),h=Math.max(i.scrollHeight,n.height),f=Math.round(o/l*Ua),u=Math.round(c/h*Ua);return{xRel:f,yRel:u,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),om=Math.pow(2,31);function am(s,r=0){let l=r>>>0,h=s.length;for(let y=0;y<h-3;y+=4){let v=(csString.prototype.charCodeAt.call(s,y)&255|(csString.prototype.charCodeAt.call(s,y+1)&255)<<8|(csString.prototype.charCodeAt.call(s,y+2)&255)<<16|(csString.prototype.charCodeAt.call(s,y+3)&255)<<24)>>>0;v=Math.imul(v,3432918353),v=v<<15|v>>>17,v=Math.imul(v,461845907),l^=v,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let f=0,u=h&3,m=h-u;switch(u){case 3:f^=(csString.prototype.charCodeAt.call(s,m+2)&255)<<16;case 2:f^=(csString.prototype.charCodeAt.call(s,m+1)&255)<<8;case 1:f^=csString.prototype.charCodeAt.call(s,m)&255,f=Math.imul(f,3432918353),f=f<<15|f>>>17,f=Math.imul(f,461845907),l^=f}return l^=h,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function El(s){return am(s)+om>>>0}var cm=(()=>{class s extends Ri{constructor(t,e){super(),this.ls=t,this.ft=e,this.supportedEventTypes=[z.MOUSEMOVE,z.CLICK],this._l=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:o}=nm.getRelativePosition(t);if(i){let c=this.ft.getEventTargetPath(t);c!==pe.INVALID_ELEMENT&&(e.xRel=n,e.yRel=o,e.type===z.MOUSEMOVE&&(c!==this._l||this.ls.iframesTracking?(this._l=c,e.tgtHM=c,this.ls.isChild||(e.tgtHMH=El(e.tgtHM))):e.tgtHM=""))}else e.type===z.MOUSEMOVE&&(this._l="");return e}}return s})(),Nt=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),ja=100,Sl=(()=>{class s extends Ri{constructor(t,e,i){super(),this.f=t,this.ce=e,this.M=i,this.supportedEventTypes=[z.TAP,z.CLICK,z.SUBMIT]}n_(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,zn(n.parentElement)||$n(n.parentElement)||this.ce.getElementSensitiveStatus(n.parentElement)!==Nt.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=ja)break;n=i.nextNode()}return!1}o_(t){let e=mn(t,"button,a");return e||(this.f.collectTargetText===un.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(yi(csEventtarget.apply(t))){let i=this.o_(csEventtarget.apply(t));if(i&&G(i.textContent)&&!this.n_(i)&&!this.M.hasPII(i.textContent,this.f.anonymizeDigits)){let n=Mt.truncate(csString.prototype.trim.call(i.textContent),ja);n.length>0&&(e.text=n)}}return e}}return s})(),vl=(()=>{class s extends Ri{constructor(t,e){super(),this.ft=t,this.ce=e,this.supportedEventTypes=[z.CLICK,z.SUBMIT,z.CHANGE,z.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.ce.getSensitiveStatus().useAnonymization,{path:n,hierarchy:o}=this.ft.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=o,e}}return s})();function _l(s,r,t){let e=[];return csArray.prototype.push.call(e,new cm(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Sl(s,t,new Gs)),s.collectHierarchy&&csArray.prototype.push.call(e,new vl(r,t)),csArray.prototype.push.call(e,new rm,new yl(r)),e}function wl(s,r,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Sl(s,t,new Gs)),s.collectHierarchy&&csArray.prototype.push.call(e,new vl(r,t)),csArray.prototype.push.call(e,new yl(r)),e}var lm=50,hm=(()=>{class s{constructor(t=[]){this.Vt=t}stringifyEvents(){return csJSON.stringify(this.Vt)}addEvent(t){csArray.prototype.push.call(this.Vt,t)}eventsCount(){return this.Vt.length}clearEvents(){this.Vt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=lm}isEmpty(){return this.Vt.length===0}getEvents(){return this.Vt}}return s})(),um="csAnalysisEventsPersisted",Ha="v2/events",Tl=["submit"],Rn=["trackEvent"];var dm=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,u,m,y,v){this.f=t,this.yt=e,this.I=i,this.Q=n,this.Lt=o,this.E=c,this.G=l,this.xt=h,this.pt=f,this.de=u,this.J=m,this.ce=y,this.wl=v}init(){let t=new hm,e=this.de.create(`${this.f.getTrackerUri()}/${Ha}`,!0,"base64");this.Yo=this.a_(e),this.Ce=this.c_(t,this.Yo.getRecoveryStorage(),e),this.Ce.init(),this.J.addListener(this.Ce),this.pt.addListener(this.Ce),this.E.register(Tl,(i,n)=>{this.Ce.pushSubmitCommandEvent(i,n)}),this.E.register(Rn,i=>{if(!Vn(i))throw new Error(`Command misuse: ${Rn}`);this.Ce.pushCustomEvent(i.name,i.source,i.properties)})}onStartTracking(t){this.Yo.start(),this.Ce.start(t)}onAfterNaturalPageView(){this.Ce.initStates()}onAfterArtificialPageView(){this.Ce.initStates(),this.Ce.collectInitialEvents()}onArtificialPageViewEnd(){this.Ce.clearStates(!0)}onBeforeSessionRenewal(){this.Ce.clearStates(),this.Ce.stop(),this.Yo.stop()}onOptout(){this.Ce.stop(),this.Yo.stop()}c_(t,e,i){var n;let o=new Lg(window),c=new $g,l=_l(this.f,this.Q,this.ce),h=[];this.f.collectSubmit||csArray.prototype.push.call(h,"submit");let f=new ll(l,this.Q,this.Lt,h),u=wl(this.f,this.Q,this.ce),m=new cl(u,this.xt),y=new Xg(new im),v=new hl,P,N,_,S=new ul(`${this.f.getTrackerUri()}/${Ha}`),C=new mi(this.yt,this.I),O,A,H,Q;return new qg(this.f,f,m,c,o,t,S,C,this.G,e,this.Q,y,v,i,P,N,_,O,A,H,Q)}a_(t){return new Wg(new Yg(um),t)}}return s})();var pm=["api-errors:maskUrl"];var fm=(()=>{class s{constructor(t,e,i=!1){this._t=t,this.tt=e,this.hn=i}addUrlMaskingPattern(t){this._t.addUrlMaskingPattern(t)}anonymize(t){let e=this.tt.removeQueryString(t.url),i={maskingPatterns:this._t.getUrlMaskingPatterns(),partialMaskingPatterns:this._t.getPartialUrlMaskingPatterns(),maskNames:this.hn};return{...t,url:this.tt.anonymizeUrl(e,i),library:t.library?this.tt.anonymizeUrl(t.library,i):void 0}}}return s})();var gm=(()=>{let s;return function(r){function o(h,f,u=!1){let y={message:Mt.truncate(h,300,Mt.ELLIPSIS),errorType:"customError"};return(u||l(f))&&(c(f),y.attributes=f),y}r.buildCustomErrorEvent=o;function c(h){for(let f in h){let u=h[f];if(typeof u=="string"&&u.length>30&&(u=Mt.truncate(u,30,Mt.ELLIPSIS),h[f]=u),f.length>30){let m=Mt.truncate(f,30,Mt.ELLIPSIS);delete h[f],h[m]=u}}}function l(h){let f=Object.keys(h).length;return f>0&&f<=5}}(s||(s={})),s})();var mm=["trackError"];var ym=/(\b["']?key["']?\s*[=:]\s*["'](?:first|last|user|profile|primary|primary[ _-]?last)[ _-]?name["']\s*,?\s*["']?value["']?\s*[=:]\s*["'])(.+?)(["']|$)|(\b["']?(?:first|last|user|profile|primary|primary[ _-]?last)[\s_-]?name["']?\s*[=:]\s*["'])(.+?)(["']|$)/gi,Em="$1$4CS_ANONYMIZED_NAME$3$6",Sm=/(?:\(\d{3}\) \d{3}[- ]\d{4}\b)|(?:\b\d{3}([-\. ])\d{3}\1\d{4}\b)|(?:\b\d{2} \d{2} \d{2} \d{2} \d{2}\b)|(?:\b\d{4} \d{3} \d{3}\b)|(?:\b\d{2}([-\. ])\d{4}\2\d{4}\b)|(?:\b\d{3}([- ])\d{4}\3\d{4}\b)|(?:\+\d{1,3} \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \(\d{3}\) \d{3}-\d{4}\b)|(?:\+\d{1,3}([- ])\d{4}\4\d{3}\4\d{3}\b)|(?:\+\d{1,3} \d \d{4} \d{4}\b)|(?:\+\d{1,3} \d \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \d \d{2} \d{2} \d{2} \d{2}\b)|(?:\+\d{7,15}\b)|(?:\+\d{1,3} \d{6,12}\b)|(?:\+\d{1,3}([- ])\d{4}\5\d{3}\5\d{3}\b)/g,vm="CS_ANONYMIZED_PHONE",_m=(()=>{class s{constructor(t,e){this.M=t,this.tt=e}anonymize(t){return this.tt?csArray.prototype.join.call(csArray.prototype.map.call(Tp(t),({content:e,isUrl:i})=>{var n;return i?(n=this.tt)===null||n===void 0?void 0:n.anonymizeUrl(e,{maskNames:!0}):this.ef(e)}),""):this.ef(t)}ef(t){t=this.M.anonymizePII(t);let e=t;t=this.hn(t),t!==e&&(q.counters.redactedPII.count("name"),q.counters.redactedPII.count("name-in-custom-error"));let i=t;return t=this.k_(t),t!==i&&(q.counters.redactedPII.count("phone"),q.counters.redactedPII.count("phone-in-custom-error")),t}hn(t){return csString.prototype.replace.call(t,ym,Em)}k_(t){return csString.prototype.replace.call(t,Sm,vm)}}return s})();var wm="CS_ANONYMIZED_VALUE",Tm=(()=>{class s{constructor(t,e){this.M=t,this.A=e}anonymize(t){return G(t.message)&&(t.message=this.U_(t.message),t.message=this.M.anonymizePII(t.message)),G(t.filename)&&(t.filename=this.A.computeOverriddenUrl(t.filename)),t}U_(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${wm}'`)}}return s})(),Am=512,bm=255,ci=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,Am),this.value=G(e)?csString.prototype.slice.call(e,0,bm):e}static isKeyValid(t){return G(t)}static isValueValid(t){return G(t)||Re(t)}}return s})(),Rm=(()=>{class s extends mt{constructor(t,e){super(),this.zt=t,this.M=e,this.xl=[]}onStart(){csArray.prototype.forEach.call(this.xl,t=>this.sf(t.key,t.value)),this.xl=[]}onStop(){}sf(t,e){let i=this.M.anonymizePII(t),n=Re(e)?e:this.M.anonymizePII(e);this.zt.add(new ci(i,n))}trackDynamicVariable(t,e){if(ci.isKeyValid(t)&&ci.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.xl,{key:t,value:e});return}this.sf(t,e)}else throw new Error(`Command misuse: ${Er[0]}`)}}return s})(),Cm=(()=>{class s{constructor(t){this.pe=t,this.zt=[]}add(t){csArray.prototype.push.call(this.zt,t),this.setBatchReadyCall()}clear(){this.zt=[]}onBatchReady(t){this.j_=t}getRequestParameters(){let t={};for(let e of this.zt)t[e.key]=e.value;return{dv:this.pe.compressSync(csJSON.stringify(t),"base64"),ct:this.pe.algorithm}}setBatchReadyCall(){this.j_()}}return $([Ti({wait:0,mode:"trailing"}),j("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),Im="dvar",Er=["trackDynamicVariable"],Pm=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.R=e,this.f=i,this.xe=n,this.pe=o,this.M=c,this.hs=new Vs(this.f.getTrackerUri(),Im),this.zt=new Cm(this.pe),this.Mi=new Rm(this.zt,this.M)}init(){this.hs.setRequestParametersProviders(this.xe,this.zt),this.R.setDynamicVariablesService(this.Mi),this.zt.onBatchReady(()=>this.hs.send()),this.hs.after(()=>this.zt.clear()),this.E.register(Er,({key:t,value:e}={})=>{this.Mi.trackDynamicVariable(t,e)})}onStartTracking(){this.Mi.start()}}return s})(),Cn=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),G(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return At(t)&&Ut(t.revenue)&&G(t.currency)&&t.currency.length<=10&&(!At(t.id)||G(t.id))}}return s})(),Al=100,Om=100,Nm=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.$c(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return tt(t.sku)&&(e.sku=t.sku),tt(t.category)&&(e.category=t.category),tt(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,Al)),e}static $c(t){return At(t)&&G(t.id)&&G(t.name)&&Ut(parseFloat(t.price))&&Re(parseInt(t.quantity,10))&&(!tt(t.sku)||G(t.sku))&&(!tt(t.category)||G(t.category))&&(!tt(t.merchant)||G(t.merchant))}}return s})(),bl=(()=>{class s extends mt{constructor(t,e,i){super(),this.M=t,this.rf=e,this.G=i,this.Ll=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Ll,t=>{this.fe=t.transaction,this.En=t.transactionItems,this.sendTransaction()}),this.Ll=[]}onStop(){}addTransaction(t){let e=this.M.anonymizeFields(t,["id"]);this.fe=Cn.from(e)}getTransaction(){return this.fe}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Ll,{transaction:this.fe,transactionItems:[...this.En]}),this.clear();return}if(!(this.rf===null||this.G===null)&&(this.G.refreshSession(),!!this.G.isSessionValid())){if(!this.fe.hasValidRevenue()){L.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.rf.send()}}addItem(t){if(te(t))throw new Error(`Command misuse: ${Sr[1]}`);let e=this.M.anonymizeFields(t,["id","name","sku","category"]),i=Nm.from(e);i!==null&&csArray.prototype.push.call(this.En,i)}getItems(){return this.En}clear(){this.fe=Cn.from({revenue:NaN}),this.En=[]}getRequestParameters(){let t={id:this.fe.id?`${this.fe.id}`:"",revenue:`${this.fe.revenue}`};return tt(this.fe.tax)&&(t.tax=`${this.fe.tax}`),tt(this.fe.shipping)&&(t.shipping=`${this.fe.shipping}`),tt(this.fe.currency)&&(t.cu=`${this.fe.currency}`),t.items=window.csJSON.stringify(this.En),t}}return s})(),Mm=(()=>{class s extends mt{constructor(t,e){super(),this.H_=t,this.G=e,this.Ie=null,this.Vl=[]}onStart(){csArray.prototype.forEach.call(this.Vl,t=>{this.Ie=t,this.nf()}),this.Vl=[]}onStop(){}addToCart(t){let e={};G(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Om)),G(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,Al)),(e.sku||e.merchant)&&(this.Ie=e,this.nf())}getCartItem(){return this.Ie}nf(){if(!this.isStarted&&this.Ie!==null){csArray.prototype.push.call(this.Vl,this.Ie),this.clear();return}this.G.refreshSession(),this.G.isSessionValid()&&this.H_.send()}clear(){this.Ie=null}getRequestParameters(){if(!this.Ie)return{};let t={};return G(this.Ie.sku)&&this.Ie.sku.length>0&&(t.sku=this.Ie.sku),G(this.Ie.merchant)&&this.Ie.merchant.length>0&&(t.me=this.Ie.merchant),t}}return s})(),Rl=["ecommerce:addToCart","ec:cart:add"],no=["ecommerce:addTransaction","ec:transaction:create"],Sr=["ecommerce:addItem","ec:transaction:items:add"],oo=["ecommerce:send","ec:transaction:send"],km=(()=>{class s{constructor(t,e,i,n,o,c,l){this.f=t,this.yt=e,this.I=i,this.E=n,this.M=o,this.G=c,this.A=l}init(){let t=new Vs(this.f.getTrackerUri(),"transaction"),e=new Vs(this.f.getTrackerUri(),"addtocart");this.es=new bl(this.M,t,this.G),this.ia=new Mm(e,this.G);let i=new mi(this.yt,this.I,this.A,this.es);t.setRequestParametersProviders(i),t.after(()=>{this.es.clear()});let n=new mi(this.yt,this.I,this.A,this.ia);e.setRequestParametersProviders(n),e.after(()=>{this.ia.clear()}),this.E.register(no,o=>{this.es.addTransaction(o)}),this.E.register(Sr,o=>this.es.addItem(o)),this.E.register(oo,()=>this.es.sendTransaction()),this.E.register(Rl,o=>{this.ia.addToCart(o)})}onStartTracking(){this.es.start(),this.ia.start()}}return s})();var Dm=2,ao=(()=>{class s{constructor(t){this.Y_=t,this.ra=0}addString(t){this.ra+=t.length*Dm}addArrayBuffer(t){this.ra+=t.byteLength}isThresholdReached(){return this.ra>this.Y_}reset(){this.ra=0}}return s})();var xm=()=>(s,r,t)=>{t.value=Lm(t.value)};function Lm(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let o=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,o[r])return;o[r]=!0,Hn(()=>{o[r]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=r,i}xm.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var ii=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),Ze=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===U.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),Vm=(()=>{class s{constructor(t,e,i,n){this.I=t,this.R=e,this.f=i,this.ns=n,this._f=!1}isNaturalPageViewSent(){return this._f}setNaturalPageViewSent(t){this._f=t}getTrackingContext(){let t=this.R.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.f.projectId,n=this.f.uxaDomain,o=t.pageNumber,c=this.ns.getPageViewType(),l=this.R.isReplayRecorded(),h=this.Iw(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:h,...this.f.smbConfig}}getSessionKey(){let t=this.I.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Iw(t){return Ze.isReplayConsentNeeded(this.f)?t.collectState===U.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?ii.NOT_EXPRESSED:t.collectState===U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?ii.WITHDRAWN:ii.GRANTED:ii.NOT_NEEDED}}return s})(),Um=(()=>{class s{constructor(t){this.Rt=t,this.ee=[]}handleCommand(t){if(te(t)&&(this.Rn(t),this.Rt.isNaturalPageViewSent())){let e=this.Rt.getTrackingContext();e!==null&&this.jt(t,e)}}Rn(t){csArray.prototype.push.call(this.ee,t)}executeRegisteredCallbacks(){let t=this.Rt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.ee,e=>this.jt(e,t))}jt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),jm=(()=>{class s{constructor(t){this.Rt=t,this.ki=[]}handleCommand(t){if(this.Rt.isNaturalPageViewSent())return this.Pw(t);this.Cn(t)}Pw(t){let e=this.Rt.getSessionKey();return this.wf(t)&&e!==null&&this.jt(t.callback,e),e}Cn(t){this.wf(t)&&csArray.prototype.push.call(this.ki,t.callback)}flushPendingCallbacks(){let t=this.Rt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.ki,e=>{this.jt(e,t)}),this.ki=[]}wf(t){return t&&typeof t.callback=="function"}jt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),Hm=(()=>{class s{constructor(t,e){this.Z=t,this.Rt=e}onTrackingContextRequestCallback(t){let e=this.Rt.getTrackingContext();e!==null&&this.Z.sendToChildren(I.TrackingContextResultMessage,{...t,trackingContext:e})}onIframeIntegrationCallback(t){if(!this.Rt.isNaturalPageViewSent())return;let e=this.Rt.getTrackingContext();e!==null&&(t.trackingContext=e,this.Z.sendToChildren(I.IntegrationCallback,t))}sendAfterPageViewCallbackToChildren(){let t=this.Rt.getTrackingContext();if(t===null)return;let e={trackingContext:t,initiator:Us.AfterPageView};this.Z.sendToChildren(I.IntegrationCallback,e)}}return s})();function Cl(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,f,u]=l;n?h=`${c}/sites/${n}/player?uu=${f}&sn=${u}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${f}&sn=${u}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(h+=`&t=${M.now()-r.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var Bm=(()=>{class s{constructor(t){this.Rt=t}handleCommand(t,e){ne(t)&&te(e)&&this.jt(t,e)}jt(t,e){csSetTimeout(()=>{let i=this.Rt.getTrackingContext();if(i){let n=Cl(i,t);e(n)}})}}return s})(),Il=(()=>{class s{constructor(){this.ee=new Set}handleCommand(t,e){return!te(t)||this.ee.has(t)?null:(this.ee.add(t),e&&(this.Oe=e,this.Tf(t,e)),()=>this.ee.delete(t))}executeCallbacks(t){this.Ow(t)&&(this.Oe=t,this.ee.forEach(e=>this.Tf(e,t)))}Tf(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Ow(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:o,collectState:c}=t;return this.Oe&&(this.Oe.isRecording!==e||this.Oe.recordingStartTimestamp!==i||this.Oe.etrState!==n||this.Oe.etrStatus!==o||this.Oe.collectState!==c)}}return s})(),co=["afterPageView"],Pl=["getSessionKey"],Ol=["onRecordingContextChange","onRecordingStateChange"],Nl=["replay:link:generate"],Fm=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.I=t,this.R=e,this.E=i,this.pt=n,this.Z=o,this.f=c,this.ns=l,this.Us=h,this.pa=null}init(){this.Rt=new Vm(this.I,this.R,this.f,this.ns),this.Fl=new Um(this.Rt),this.Af=new jm(this.Rt),this.In=new Il,this.Nw=new Bm(this.Rt),this.pa=new Hm(this.Z,this.Rt),this.pt.addListener(this.pa),this.E.register(Pl,t=>this.Af.handleCommand(t)),this.E.register(co,t=>this.Fl.handleCommand(t)),this.E.register(Ol,t=>this.In.handleCommand(t,this.Us.getRecordingContext())),this.E.register(Nl,(t,e)=>{this.fr&&this.Nw.handleCommand({...t,recordingStartTimestamp:this.Us.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.Rt.setNaturalPageViewSent(!0),this.Af.flushPendingCallbacks(),this.Fl.executeRegisteredCallbacks(),(t=this.pa)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.Fl.executeRegisteredCallbacks(),(t=this.pa)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.In.executeCallbacks(this.Us.getRecordingContext())}setRecordingService(t){this.fr=t}}return $([Ti({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),$m=(()=>{class s{constructor(t){this.E=t}init(){this.bf(s.Mw,kc),this.bf(s.kw,Mc)}bf(t,e){this.E.register([t],(i,n)=>{!G(i)||!(G(n)||ss(n))||L.error(n,`${e}${i}`)})}}return s.kw="logSnippetError",s.Mw="logImplementationSnippetError",s})(),zm="@ETP@",Ba="@user-identifier@",Gm=(()=>{class s extends mt{constructor(t,e,i,n){super(),this.f=t,this.Dw=e,this.pe=i,this.J=n,this.$l=[],this.Di=[]}onStart(){csArray.prototype.forEach.call(this.$l,t=>this.Rf(t)),this.$l=[],csArray.prototype.forEach.call(this.Di,t=>this.Cf(t)),this.Di=[]}onStop(){}Rf(t){this.xw(t)?gs.isSupported()&&this.Lw(t):this.Vw(t)}trackPageEvent(t){if(!s.If(t))throw new Error(`Command misuse: ${lo[0]}`);this.isStarted?this.Rf(t):csArray.prototype.push.call(this.$l,t)}xw(t){return dn(t,Ba)}async Lw(t){if(!this.f.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,Ba.length);if(e.length>gs.MAX_DIGEST_INPUT_SIZE){L.warn("UserIdentifier event: invalid user identifier");return}let i=await gs.digest(e);i?(this.gr={eventName:i,isETR:!1,isCustomHashId:!0},this.fa()):L.warn("Page event: unable to compute customHashId"),this.f.encryptionEnabled&&this.J.emitUserIdentifierEvent(e)}Vw(t){this.J.emitPageEvent(t),this.gr={eventName:t,isETR:!1,isCustomHashId:!1},this.fa(),this.f.tagDeploymentMode===Ie.LoadClicktalePtc&&Xe.sendPageEvent(t)}Cf(t){this.f.malkaEtrEnabled?this.Uw(t):this.jw(t)}trackEventTriggerRecording(t){if(!s.If(t))throw new Error(`Command misuse: ${ho[0]}`);this.isStarted?this.Cf(t):csArray.prototype.push.call(this.Di,t)}Uw(t){dn(t,zm)?this.J.emitEventTriggerRecording(t,es.ETR_PAGE):this.J.emitEventTriggerRecording(t,es.ETR_SESSION),this.gr={eventName:t,isETR:!0,isCustomHashId:!1},this.fa()}jw(t){og(this.f)&&(this.J.emitEventTriggerRecording(t,es.ETR_LEGACY),this.gr={eventName:t,isETR:!0,isCustomHashId:!1},this.fa(),this.f.tagDeploymentMode===Ie.LoadClicktalePtc&&Xe.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.pe.compressSync(this.gr.eventName,"base64"),ct:this.pe.algorithm,isETR:`${this.gr.isETR}`,isCustomHashId:`${this.gr.isCustomHashId}`}}fa(){this.Dw.send()}static If(t){return G(t)&&!!csString.prototype.trim.call(t)}}return s})(),lo=["trackPageEvent"],ho=["trackEventTriggerRecording"],qm=(()=>{class s{constructor(t,e,i,n,o){this.f=t,this.E=e,this.pe=i,this.xe=n,this.J=o}init(){let t=new Vs(this.f.getTrackerUri(),"pageEvent");this.ga=new Gm(this.f,t,this.pe,this.J),t.setRequestParametersProviders(this.ga,this.xe),this.E.register(lo,e=>{this.ga.trackPageEvent(e)}),this.E.register(ho,e=>{this.ga.trackEventTriggerRecording(e)})}onStartTracking(){this.ga.start()}}return s})();var Ki=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),Wm=(()=>{class s{constructor(){this.zl=Ki.Natural}setPageViewType(t){this.zl=t}getPageViewType(){return this.zl}getRequestParameters(){return{pvt:this.zl}}}return s})();var Ym=(()=>{class s extends mt{constructor(t,e,i,n,o){super(),this.S=t,this.J=e,this.Gl=i,this.A=n,this.ns=o}init(){this.Gw()}onStart(t){t?this.qw():this.Ww()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.Of(t,e):At(t)&&this.A.overridePath(t,e),this.isStarted||(this.J.emitTargetingRulesArtificialPageview(this.A.getUrl()),this.A.cleanupOverrideLifespan())}Ww(){this.ns.setPageViewType(Ki.Natural),this.S.emitBeforeNaturalPageView(this.A.getAnonymizedUrl()),this.Gl.send(),this.A.cleanupOverrideLifespan(),this.S.emitAfterNaturalPageView()}qw(){this.ns.setPageViewType(Ki.Renewal),this.S.emitBeforeNaturalPageView(this.A.getAnonymizedUrl()),this.Gl.send(),this.S.emitAfterNaturalPageView()}Of(t,e){let i=this.A.getAnonymizedUrl();this.ns.setPageViewType(Ki.Artificial),this.S.emitArtificialPageViewEnd(),At(t)&&this.A.overridePath(t,e),this.S.emitBeforeArtificialPageView(i,this.A.getAnonymizedUrl()),this.Gl.send(),this.A.cleanupOverrideLifespan(),this.S.emitAfterArtificialPageView()}Gw(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.Of()})}}return s})(),Xm=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Km(){return{la:Xm}}var Jm=99999,Qm=(()=>{class s{constructor(t){this.R=t,this.Yw=this.Xw()&&window.CSCurrentScript}Kw(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.Jw(e)?null:Math.round(e.responseEnd-e.fetchStart)}Jw(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.Yw||this.Qw()!==1)return{};let t=this.Kw();return t===null?{}:{dt:`${Math.min(t,Jm)}`}}Qw(){var t;return((t=this.R.getSession())===null||t===void 0?void 0:t.pageNumber)||null}Xw(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),uo=["trackPageview"],In=["setPath"],Pn=["setQuery"],Fa=["referrer:maskUrl"],Zm=["referrer:removeQueryString"],ty=["referrer:keepQueryString"],qr=s=>ne(s)&&s!==null,ey=(s,r,t,e)=>{s.register(uo,(i,n)=>{if(!G(i)){r.triggerArtificialPageView();return}qr(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(In,(i,n)=>{if(!G(i))throw new Error(`Command misuse: ${In[0]}`);qr(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(Pn,(i,n)=>{if(!G(i))throw new Error(`Command misuse: ${Pn[0]}`);qr(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(Fa,i=>{if(!G(i))throw new Error(`Command misuse: ${Fa[0]}`);e.addUrlMaskingPattern(i)}),s.register(Zm,()=>e.enableRemoveQueryString()),s.register(ty,()=>e.disableRemoveQueryString()))};var sy=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,u,m,y,v,P,N){this.f=t,this.E=e,this.S=i,this.xe=n,this.I=o,this.R=c,this.xi=l,this.Tt=h,this.vt=f,this.A=u,this.se=m,this.ns=y,this.J=v,this.We=P,this.Yi=N}init(){let t=new Vs(this.f.getTrackerUri(),"pageview");this.Js=new Ym(this.S,this.J,t,this.A,this.ns),this.Js.init();let e=new mi(this.xe,this.I,gt,this.xi,this.A,this.Tt,Ln,this.vt,this.ns,new Qm(this.R),this.se);this.We&&e.addProvider(this.We),this.Yi&&e.addProvider(this.Yi);let i=this.f.isCsCrosswritingHeap();if(i||this.f.isCsSideloadingHeap()||this.f.isHeapSideloadsCs()){let n=this.f.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return n&&(o.happid=n),o}})}t.setRequestParametersProviders(e),ey(this.E,this.Js,this.A,this.xi)}start(t){this.Js.start(t)}onBeforeSessionRenewal(){this.Js.stop()}}return s})();function iy(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}var be=csSymbol(),po=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,f,u,m,y,v,P;this.w=t,this.ql=null,this.Wl=null,this.Yl=null,this.Xl=null,this.Kl=null,this.Zw=pr(N=>this.processUpdateRulesInATick(N)),this.Jl=null,this.Ql=null,this.Zl=null,this.w=N=>Gt(()=>t(N)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.ql=ds({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:N,args:_})=>{this.processInsertRule(N,_)}})),typeof((o=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.Wl=ds({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:N,args:_})=>{this.processDeleteRule(N,_)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Yl=ds({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:N})=>this.processUpdateRule(N)})),typeof((f=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||f===void 0?void 0:f.deleteRule)=="function"&&(this.Xl=ds({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:N})=>this.processUpdateRule(N)})),!((u=window.StyleSheet)===null||u===void 0)&&u.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Kl=nr(window.StyleSheet.prototype,"disabled",(N,_,S)=>{_!==S&&this.tT(N,_)})),typeof((y=(m=window.CSSStyleDeclaration)===null||m===void 0?void 0:m.prototype)===null||y===void 0?void 0:y.setProperty)=="function"&&(this.Jl=ds({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:N})=>{let _=N.parentRule;_ instanceof CSSStyleRule&&this.processUpdateRule(_)}})),typeof((P=(v=window.CSSStyleDeclaration)===null||v===void 0?void 0:v.prototype)===null||P===void 0?void 0:P.removeProperty)=="function"&&(this.Ql=ds({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:N})=>{let _=N.parentRule;_ instanceof CSSStyleRule&&this.processUpdateRule(_)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Zl=jf(window.CSSStyleRule.prototype,"style",N=>{this.processUpdateRule(N)}))}observe(){var t,e,i,n,o,c,l,h;(t=this.ql)===null||t===void 0||t.activate(),(e=this.Wl)===null||e===void 0||e.activate(),(i=this.Yl)===null||i===void 0||i.activate(),(n=this.Xl)===null||n===void 0||n.activate(),(o=this.Kl)===null||o===void 0||o.activate(),(c=this.Jl)===null||c===void 0||c.activate(),(l=this.Ql)===null||l===void 0||l.activate(),(h=this.Zl)===null||h===void 0||h.activate()}disconnect(){var t,e,i,n,o,c,l,h;(t=this.ql)===null||t===void 0||t.deactivate(),(e=this.Wl)===null||e===void 0||e.deactivate(),(i=this.Yl)===null||i===void 0||i.deactivate(),(n=this.Xl)===null||n===void 0||n.deactivate(),(o=this.Kl)===null||o===void 0||o.deactivate(),(c=this.Jl)===null||c===void 0||c.deactivate(),(l=this.Ql)===null||l===void 0||l.deactivate(),(h=this.Zl)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[be]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.w(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.Zw.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(fi(i.cssRules),e);if(n===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.w(o)}}processDeleteRule(t,[e]){if(t[be]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.w(i)}tT(t,e){if(t[be]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.w(i)}}return ut([j()],s.prototype,"observe",null),ut([j()],s.prototype,"disconnect",null),ut([j()],s.prototype,"processInsertRule",null),ut([j()],s.prototype,"processUpdateRule",null),ut([j()],s.prototype,"processUpdateRulesInATick",null),ut([j()],s.prototype,"processDeleteRule",null),s})(),ry=(()=>{class s{constructor(t){this.eT=1,this.ya=new Set,this.th=null,this.eh=null,this.Jc=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.sT=e=>{let i=e.sheet;if(this.ya.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[be],rule:e.rule,index:e.index};this.w(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[be],index:e.index};this.w(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[be],rule:e.rule,index:e.index};this.w(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[be],disabled:e.disabled};this.w(n)}}},this.w=e=>Gt(async()=>{await uc(2),t(e)}),this.he=new qs(this.Jc),"adoptedStyleSheets"in Document.prototype&&(this.th=nr(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.eh=nr(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.Nf=new po(this.sT)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.he.observe(),(t=this.th)===null||t===void 0||t.activate(),(e=this.eh)===null||e===void 0||e.activate(),this.Nf.observe()}disconnect(){var t,e;this.ya.clear(),this.he.disconnect(),(t=this.th)===null||t===void 0||t.deactivate(),(e=this.eh)===null||e===void 0||e.deactivate(),this.Nf.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.iT(e);let i=de(e,o=>o[be]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.w(n)}iT(t){X(t,e=>{if(this.ya.has(e))return;let i=this.eT++;e[be]=i,this.ya.add(e);let n=this.rT(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.w(o)})}rT(t){let e=[];try{e=de(t.cssRules,i=>i.cssText)}catch{}return e}}return ut([j()],s.prototype,"observe",null),ut([j()],s.prototype,"disconnect",null),ut([j()],s.prototype,"setStyleSheets",null),s})(),ny=vs(ly,"optimizeMutations"),oy=csSymbol.for("ignoreNextSerialization");function ay(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,o=new Map,c=new Set,l=new Set,h=new Map,f=new Set;return{isMovedNode(u){return s.has(u)},markAsMovedNode(u){f.delete(u),s.add(u)},isDetachedMove(u){return!!pt.findAncestor(u,m=>f.has(m),!0)},isAddedNode(u){let m=pt.findAncestor(u,y=>r.has(y)||l.has(y)||s.has(y),!0);return!!m&&!s.has(m)},isMovedNodeIntoAddedNode(u){return s.has(u)&&!!pt.findAncestor(u,m=>r.has(m)||l.has(m),!0)},markAsAddedNode(u){f.delete(u),l.delete(u),r.add(u)},markAsPendingInsert(u){l.add(u)},isPendingInsert(u){return l.has(u)},isRemovedNode(u){return!!pt.findAncestor(u,m=>t.has(m),!0)},markAsRemovedNode(u){t.add(u)},isUselessNode(u){return e.has(u)},markAsUselessNode(u){e.add(u)},getPlaceholder(u,m){let y=m==="previous"?n:i;return u&&y.has(u)?y.get(u)||null:u},getSiblings(u){let m=u.addedNodes.length,y=this.getPlaceholder(u.previousSibling,"previous"),v=this.getPlaceholder(u.nextSibling,"next");if(m){let P=y,N=v,_=u.previousSibling!==y,S=u.nextSibling!==v;for(let C=0;C<m;C++){let O=u.addedNodes[C],A=u.addedNodes[m-C-1];this.isLatestNodeMutation(O,u)?(n.delete(O),u.previousSibling&&_&&(i.set(u.previousSibling,O),_=!1),P=O):n.set(O,P),this.isLatestNodeMutation(A,u)?(i.delete(A),u.nextSibling&&S&&(n.set(u.nextSibling,A),S=!1),N=A):i.set(A,N)}}else u.previousSibling&&u.previousSibling!==y&&i.set(u.previousSibling,v),u.nextSibling&&u.nextSibling!==v&&n.set(u.nextSibling,y);return{previousSibling:y,nextSibling:v}},setAttributeMutation(u,m){let y=o.get(u)||new Set;y.add(m),o.set(u,y)},isAttributeMutated(u,m){var y;return!!(!((y=o.get(u))===null||y===void 0)&&y.has(m))},setLatestNodeMutation(u,m){h.set(u,m)},isLatestNodeMutation(u,m){return h.get(u)===m},markAsFutureAddedNode(u){h.has(u)||f.add(u)},isTextMutated(u){return c.has(u)},setTextMutated(u){return c.add(u)}}}function cy(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function ly(s){let r=ay(),t=[];for(let e of s)e.type==="childList"&&cy(e,r);for(let e of s)switch(e.type){case"attributes":uy(e,r,t);break;case"characterData":hy(e,r,t);break;case"childList":fy(e,r,t);break}return t}function hy(s,r,t=[]){let e=s.target;return pt.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!py(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function uy(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return pt.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var dy=30;function py(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=M.now(),n=s[e];return n&&i<n?!0:(s[e]=i+dy,!1)}function fy(s,r,t=[]){let e=pt.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),o=r.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,f=()=>{if(h){let{childListType:y,movedNodes:v,...P}=h;csArray.prototype.push.call(t,y==="added"?P:{...P,movedNodes:v}),h=null}},u=y=>y===(h==null?void 0:h.childListType)?h:(f(),{childListType:y,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let y=0;y<s.addedNodes.length;y++){let v=s.addedNodes[y];r.isLatestNodeMutation(v,s)?(r.isMovedNode(v)?(h=u("moved"),csArray.prototype.push.call(h.movedNodes,v)):(r.markAsAddedNode(v),n||(h=u("added"),csArray.prototype.push.call(h.addedNodes,v))),l=v):pt.isConnected(v)?r.isMovedNode(v)||r.markAsPendingInsert(v):r.markAsUselessNode(v)}f()}let m=fc(s.removedNodes,y=>{if(pt.isConnected(y)){if(!i&&!r.isPendingInsert(y)){if(r.isDetachedMove(y))return!0;r.markAsMovedNode(y),r.isMovedNodeIntoAddedNode(y)&&(y[oy]=!0)}return!1}return r.isUselessNode(y)?!1:(r.markAsRemovedNode(y),!0)});return m.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:m,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var gy=(()=>{class s{constructor(t){this.w=t,this.ih=!1,this.nT=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.w({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.w({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.w({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.w({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.w=e=>Gt(()=>t(e)),this.Mf=new po(e=>Gt(async()=>{await uc(),this.nT(e)})),"adoptedStyleSheets"in Document.prototype&&(this.kf=new ry(t))}observe(){var t;this.ih=!1,this.D=new Pe(e=>this.oT(e),(e,i)=>{i==="added"&&this.aT(e)}),this.D.observe(),this.Mf.observe(),(t=this.kf)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.D)===null||t===void 0||t.disconnect(),this.Mf.disconnect(),(e=this.kf)===null||e===void 0||e.disconnect(),this.ih=!0}oT(t){if(this.ih)return;let e=ny(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){lt.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:lt.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:pt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.w(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.w(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.w(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:fi(t.addedNodes)};this.w(o)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let o={type:"nodesRemoved",target:t.target,nodes:de(t.removedNodes,c=>c)};this.w(o)}}aT(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.w(e)}}return ut([j()],s.prototype,"processAttributeChanged",null),ut([j()],s.prototype,"processCharacterDataChanged",null),ut([j()],s.prototype,"processChildListChanged",null),s})(),fo=(()=>{class s{constructor(t){this.type="asyncEvent",this.rh=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.rh)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.zs=t,this.rh=!0,this.w&&this.w(this.zs)}complete(t){this.rh&&t(this.zs),this.w=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),my=rl(),Ml=(()=>{class s extends Oe{constructor(){super(...arguments),this.Ea=!1}onStart(){this.Ea=!0,this.w=iy(this.cT,this),this.z=new gy(this.w),this.z.observe();let t=jt.mutations.initialDOM.asyncMeasure(),e=()=>{this.Ea=!1,Ig(),t()};this.produceEvent(new fo(i=>my(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.Ea=!1,(t=this.w)===null||t===void 0||t.cancel(),(e=this.z)===null||e===void 0||e.disconnect()}Gt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=it(e.target),i.targetProps=W.getProperties(e.target)),[e,i]}cT(t){if(!this.lT(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Gt(t.type,t);i.attribute=e.attribute,i.isSvg=zs(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=si(e.target),i.linkRel=Ec(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?si(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Gt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?si(e.target.parentElement):null,i.parentProps=e.target.parentElement?W.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Gt(t.type,t);i.targetLocalName=ht(e.target)?si(e.target):null,i.nextSibling=e.nextSibling?it(e.nextSibling):null,i.previousSibling=e.previousSibling?it(e.previousSibling):null,jt.mutations.serializedMutations.measure(()=>{i.nodes=de(e.nodes,vn)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Gt(t.type,t);i.previousSibling=e.previousSibling?it(e.previousSibling):null,i.nextSibling=e.nextSibling?it(e.nextSibling):null,i.nodesIds=de(e.nodes,it),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Gt(t.type,t);i.nodesIds=de(e.nodes,it),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Gt(t.type,t);i.shadowRoot=ai(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Gt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Gt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Gt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Gt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Gt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}Sa(t){return this.Ea&&!W.getProperty(t,oi)}lT(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.Sa(t.target)||k.isMaskedElement(t.target)||k.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.Sa(e)||k.isMaskedElement(e)||k.isMaskedElementChild(e))}case"attributeChanged":return this.Sa(t.target)||k.isMaskedElementChild(t.target)||k.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.Sa(t.target)||k.isMaskedElementChild(t.target);default:return!1}}}return s})(),Ci=(()=>{let s;return function(r){function t(e){return e.type==="DomEvent"}r.isDOMEvent=t}(s||(s={})),s})(),Ii=(()=>{class s{constructor(){this.oe=[]}start(){}stop(){this.oe.length=0,this.oe=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.oe;csSetTimeout(()=>{let n=ms("Processor:processEvent",o=>this.processEvent(o))(t);n!=null&&csArray.prototype.forEach.call(e,o=>o(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.oe,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.oe,t),()=>{this.oe=csArray.prototype.filter.call(this.oe,e=>e!==t)}}emitEvent(t){Gt(()=>csArray.prototype.forEach.call(this.oe,e=>e(t)))}}return s.pendingEvents=0,s})(),kl=(()=>{class s extends Ii{isListening(t){return Ci.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof ks){let c=k.getMaskedAttributeDetails(n);n.attributes=this.Uo(n,c)}if(k.getMaskedElementDetails(n).state===k.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}W.traverse(n,c=>{if(c instanceof ks){let l=k.getMaskedAttributeDetails(c);c.attributes=this.Uo(c,l);let h=k.getMaskedElementDetails(c);h.state===k.MaskedElementState.Parent&&(this.zc(c,h),e++)}})}return e>0&&q.counters.sensitiveElements.count("masked-elements",e),t}Uo(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}zc(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),ks.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return Ce([Dt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})();var $a=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})(),Dl=(()=>{class s extends Ii{constructor(t,e,i,n=null,o=!1){super(),this.M=i,this.jo=n,this.captureAnonymizedPlaceholders=o,this.va=new xg(t,e,i,n,o)}setAnonymization(t){this.va.setAnonymization(t)}isListening(t){return $a.isTextVisibilityEvent(t)||Ci.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if($a.isTextVisibilityEvent(t))return t.text=this.M.checkAndAnonymizePII(t.text,this.jo),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.ah(t);break;case"attributeChanged":this.uT(t);break;case"characterDataChanged":this.dT(t);break}return t}ah(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.va.sanitize(n,i)}uT(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.va.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}dT(t){t.newValue=this.va.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return Ce([Dt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();function go(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=yy(r);return e?(Si(t,",")||(e=Ey(e)),[za(t),...go(e)]):[za(t)]}function yy(s){return csString.prototype.split.call(s,/\s(.+)/)}function za(s){return csString.prototype.split.call(s,/,$/)[0]}function Ey(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var Sy=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function vy(s,r){return csString.prototype.replace.call(s,Sy,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],o=wy((i||n).trim()),c=i?"@import ":"",l=r(o)||o;return`${c}url(${_y(l)})`})}function _y(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function li(s){let r=new Set;return vy(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),$s(r)}function wy(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var Ga=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.fT(t);if(!n)return null;let o=await s.Lf(n),c=re(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let o=await s.gT(t,n),c=ts(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(f=>{f&&csArray.prototype.push.call(h.nestedResources,{hash:f.hash,data:f.data})})),h}static async Lf(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.Vf,e);return nn(i)}static async fT(t){let e;if(!re(t))e=await(await window.fetch(t)).blob();else{let i=Yo(t);if(!i)return null;e=i}return e}static async gT(t,e){let i=new Map,n=ts(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!re(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let y=await fetch(l.resourceAbsolutePath);l.data=await y.text()}l.nestedResources||(l.nestedResources=li(l.data));let u=!1,m=!1;for(let y of l.nestedResources){let v=re(y)?y:l.resourceAbsolutePath?Dc(y,l.resourceAbsolutePath):ts(y),P=i.get(v);if(P!==void 0){if(P!==null){let _=s.mT(P,y);l.data=Mt.stringReplaceAll(l.data,y,_)}continue}Qe(c,_=>_.resourceAbsolutePath===v)!==void 0||(u=!0,m||(csArray.prototype.push.call(c,l),m=!0),csArray.prototype.push.call(c,{resourceRawPath:y,resourceAbsolutePath:v}))}if(!u){let y=await s.yT(l.data);i.set(l.resourceAbsolutePath,{hash:y.hash,data:y.data})}}else{let u;if(!re(l.resourceAbsolutePath))u=await(await fetch(l.resourceAbsolutePath)).blob();else{let y=Yo(l.resourceAbsolutePath);if(!y){i.set(l.resourceAbsolutePath,null);continue}u=y}let m=await s.Lf(u);i.set(l.resourceAbsolutePath,{hash:m,data:u})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static mT(t,e){let i=`cs://resources/${t.hash}`;return re(e)||(i+=`?${s.ch}=${e}`),i}static async yT(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.Vf,i);return{data:e,hash:nn(n)}}}return s.Vf="SHA-256",s.ch="original-resource-name",s})(),Bs=(()=>{class s extends Ii{constructor(){super(),this._a="cssrm://",this.ye=0,this.Ts=!1}isListening(t){return!s.isSupported()||!Ci.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.ET(t);break;case"attributeChanged":this.ST(t);break;case"characterDataChanged":this.vT(t);break}return t}disableOnlineAssets(){this.Ts=!1}enableOnlineAssets(){this.Ts=!0}isOnlineAssetsActivated(){return this.Ts}ET(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)W.traverse(i,(n,o)=>{if(n.nodeType===Hs.TEXT_NODE&&o){this._T(n,o.localName);return}if(!ks.isElement(n))return;let c=Qe(n.attributes,l=>l.name==="style");if(c&&(c.value=this.wa(c.value)),this.wT(n)||this.TT(n,o)){let l=Qe(n.attributes,f=>f.name==="src");l&&l.value&&(l.value=this.Uf(l.value));let h=Qe(n.attributes,f=>f.name==="srcset");if(h){h.value=this.jf(h.value);return}}if(this.AT(n)&&this.Ts){let l=Qe(n.attributes,h=>h.name==="href");if(!l||!l.value)return;this.ye++,this.mr(ts(l.value),this.ye,!0),this.bT(n,l,this.ye)}})}bT(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this._a+i}_T(t,e){if(!t||e!=="style")return;let i=this.wa(t.data);i!==null&&(t.data=i)}vT(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.wa(t.newValue);e!==null&&(t.newValue=e)}ST(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.wa(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.Uf(t.newValue)),i&&(t.newValue=this.jf(t.newValue)))}Uf(t){return re(t)||this.Ts?(this.ye++,this.mr(t,this.ye,!1,M.now()),this._a+this.ye):t}jf(t){if(!this.Ts)return t;let e=t,i=go(t),n=M.now();for(let o of i)this.ye++,this.mr(ts(o),this.ye,!1,n),e=csString.prototype.replace.call(e,o,this._a+this.ye);return e}wa(t){let e=li(t),i=t,n=M.now();for(let o of e){let c=re(o);if(!(c||this.Ts)||this.RT(o))continue;this.ye++,i=csString.prototype.replace.call(i,o,this._a+this.ye);let l=ir(o);c?this.mr(o,this.ye,!1,n):this.Ts&&(l?this.mr(o,this.ye,!0,n):this.mr(ts(o),this.ye,!1,n))}return i}mr(t,e,i,n=M.now()){let o=i?Ga.toCSSStaticResourceEvent:Ga.toStaticResourceEvent,c=new fo(async l=>{try{let h=await o(t,e,n,this.Ts);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}});this.emitEvent(c)}wT(t){return t.localName==="img"}TT(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}AT(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return lc()&&yd()&&!!csArray.from}RT(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return Ce([Dt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),xl=(()=>{class s extends Ii{constructor(t){super(),this.tt=t}isListening(t){return Ci.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.tt.anonymizeUrl(t.initialDOM.baseURI)),t}}return Ce([Dt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Wr="textarea",Ll=(()=>{class s extends Ii{isListening(t){return Ci.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.CT(t);break;case"nodesAdded":this.IT(t);break;case"characterDataChanged":this.PT(t);break}return t}CT(t){W.traverse(t.initialDOM,(e,i)=>{(this.Hf(e,i)||this.Bf(e))&&(e.data=this.lh(e.data))})}IT(t){for(let e of t.nodes)W.traverse(e,(i,n)=>{(this.OT(i,n,t)||this.Bf(i))&&(i.data=this.lh(i.data))})}PT(t){var e;(t.parentLocalName===Wr||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.lh(t.newValue))}lh(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}OT(t,e,i){return this.NT(t,i)||this.Hf(t,e)}NT(t,e){return t.nodeType===3&&e.targetLocalName===Wr}Hf(t,e){return t.nodeType===3&&tt(e)&&e.localName===Wr}Bf(t){return t.nodeType===3&&Ae.isEditableNode(t)}}return Ce([Dt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Ty=(()=>{class s{constructor(t){this.w=t,this.$t={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.w=t}observe(){Ct(this.$t),this.hh()}hh(){this.resizeListener()}disconnect(){It(this.$t)}resizeListener(){let t={width:gt.windowWidth(),height:gt.windowHeight()};this.w(t)}}return ut([j("resize")],s.prototype,"resizeListener",null),s})(),Ye=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),$i=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),zi=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),Ay=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=et.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in et;function e(){return Ye.LANDSCAPE}function i(){var c;switch((c=et.screen.orientation)===null||c===void 0?void 0:c.type){case $i.PORTRAIT_PRIMARY:case $i.PORTRAIT_SECONDARY:return Ye.PORTRAIT;case $i.LANDSCAPE_PRIMARY:case $i.LANDSCAPE_SECONDARY:return Ye.LANDSCAPE;default:return Ye.PORTRAIT}}function n(){switch(window.orientation){case zi.PORTRAIT:case zi.PORTRAIT_REVERSE:return Ye.PORTRAIT;case zi.LANDSCAPE:case zi.LANDSCAPE_REVERSE:return Ye.LANDSCAPE;default:return Ye.PORTRAIT}}function o(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=o}(s||(s={})),s})(),by=(()=>{class s extends Oe{constructor(){super(...arguments),this.uh=null,this.ph=null,this.Ds=new Ty(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=Ay.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.MT(t);if(e!==this.uh||i!==this.ph){this.uh=e,this.ph=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}MT(t){let e,i,n=gt.screenWidth(),o=gt.screenHeight();return t===Ye.PORTRAIT?(e=n,i=o):(e=Math.max(n,o),i=Math.min(n,o)),{screenWidth:e,screenHeight:i}}onStart(){this.Ds.observe()}onStop(){this.uh=null,this.ph=null,this.Ds.disconnect()}}return s})();function Ry(s){let r=csEventtarget.apply(s);return r&&ht(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var Cy=(()=>{class s extends Oe{constructor(){super(),this.Ff=t=>{let e=Ry(t);e&&this.fh(e,t.type)},this.he=new qs((t,e)=>{switch(e){case"initial":case"added":this.$f(t);break;case"removed":this.zf(t);break}}),this.B=new js((t,e)=>{(e==="initial"||e==="added")&&this.kT(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&pt.isConnected(t)&&!k.isMaskedElement(t)&&!k.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.$f(document),this.he.observe(),this.B.observe("video")}onStop(){this.zf(document),this.he.disconnect(),this.B.disconnect()}fh(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=it(t),o={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),Hn(()=>this.produceEvent(o))}}kT(t){for(let e of t)this.fh(e,"seeked"),s.isPlaying(e)&&this.fh(e,"play")}$f(t){for(let e of["play","pause","seeked"])Ct({type:e,listener:this.Ff,boundElement:t})}zf(t){for(let e of["play","pause","seeked"])It({type:e,listener:this.Ff,boundElement:t})}}return s})();function Iy(s){return s.nodeName==="SELECT"}function mo(s){return s.nodeName==="INPUT"}function Py(s){return s.nodeName==="TEXTAREA"||mo(s)&&!Vl(s)&&!Ul(s)}function Vl(s){return mo(s)&&s.type==="number"}function Ul(s){return mo(s)&&(s.type==="checkbox"||s.type==="radio")}var jl=(()=>{class s extends Oe{constructor(t){super(),this.ot=t,this.gh=new Mf("low"),this.yr=e=>this.inputHandler(e),this.Ai=[],this.DT(),this.xT(),this.B=new js(e=>{for(let i of e)this.mh(i)&&Gt(()=>{this.yh(i,it(i))},"low")}),this.he=new qs((e,i)=>{switch(i){case"initial":case"added":Ct({type:"change",listener:this.yr,boundElement:e});break;case"removed":It({type:"change",boundElement:e,listener:this.yr});break}})}onStart(){Ct({type:"keyup",boundElement:document,listener:this.yr}),Ct({type:"change",boundElement:document,listener:this.yr}),X(this.Ai,t=>t.activate()),this.B.observe(csArray.prototype.join.call(s.LT,",")),this.he.observe()}onStop(){It({type:"keyup",boundElement:document,listener:this.yr}),It({type:"change",boundElement:document,listener:this.yr}),X(this.Ai,t=>t.deactivate()),this.B.disconnect(),this.he.disconnect(),this.gh.clear()}yh(t,e){var i,n,o;if(this.gh.has(t))return;if(this.gh.add(t),Iy(t)){let h={type:"InputEvent",inputType:"select",target:it(t),selectedIndex:t.selectedIndex,timestamp:M.now()};this.produceEvent(h);return}if(Ul(t)){let h={type:"InputEvent",inputType:"checkable",target:it(t),checked:t.checked,timestamp:M.now()};this.produceEvent(h);return}let c=Py(t),l=Vl(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.ot)===null||n===void 0)&&n.shouldEncrypt(t)){(o=this.ot)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:M.now()});return}let f=l?"0":"\u2022",u={type:"InputEvent",inputType:"text",target:it(t),value:csString.prototype.replace.call(h,/\S/g,f),timestamp:M.now()};this.produceEvent(u)}}inputHandler(t){if(!this.isStarted)return;let e=yt(t),i=it(e);!i||!this.mh(e)||pt.isConnected(e)&&Gt(()=>{this.yh(e,i)},"low")}DT(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}xT(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=nr(t.prototype,e,(o,c,l)=>{if(l!==c&&pt.isConnected(o)){let h=i?o.parentElement:o;this.VT(h)}});n&&csArray.prototype.push.call(this.Ai,n)}mh(t){return!k.isMaskedElement(t)&&!k.isMaskedElementChild(t)&&(cr(t)||zn(t)||$n(t))}VT(t){if(this.isStarted&&pt.isConnected(t)){let e=it(t);e&&this.mh(t)&&Gt(()=>{this.yh(t,e)},"low")}}}return s.LT=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],Ce([Tt()],s.prototype,"inputHandler",null),Ce([j()],s.prototype,"trackChanges",null),s})();var Oy=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.Zs=[],this.nt=[],this.UT=t}next(t){this.nt.length===this.UT&&csArray.prototype.shift.call(this.nt),csArray.prototype.push.call(this.nt,t),this.nt.length===1&&csSetTimeout(()=>this.clear());for(let e of this.Zs)e(t)}subscribe(t){if(Qe(this.Zs,i=>t===i))return()=>{this.Zs=csArray.prototype.filter.call(this.Zs,i=>i!==t)};csArray.prototype.push.call(this.Zs,t);for(let i of this.nt)t(i);return()=>{this.Zs=csArray.prototype.filter.call(this.Zs,i=>i!==t)}}clear(){this.nt=[]}hasObservers(){return this.Zs.length>0}}return s})(),Hl=(()=>{var s;class r{constructor(e){this.w=e}observe(){this.jT=s.On.subscribe(e=>this.w(e)),s.Ta||(s.Ta=!0,s.Pn.observe(),qt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.ws.add(i),s.On.next(i)}))}disconnect(){s.Ta&&(this.jT(),s.On.hasObservers()||(s.Ta=!1,s.Pn.disconnect(),s.On.clear(),s.ws.clear()))}}return s=r,r.ws=new dr,r.On=new Oy,r.HT=vs(t=>{Gt(()=>{for(let e of t)e.type==="childList"&&X(e.addedNodes,i=>{qt(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.ws.has(o)||(s.ws.add(o),s.On.next(o))})})})},"ElementObserver.findAllElements"),r.Ta=!1,r.Pn=new Pe(s.HT),ut([j()],r.prototype,"observe",null),ut([j()],r.prototype,"disconnect",null),r})(),Bl=(()=>{class s extends Oe{constructor(){super(),this.vs=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.BT=ms("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)k.isMaskedElement(i)||k.isMaskedElementChild(i)||Kd(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=pr(this.BT);this.Nn=new Hl(e=>t.push(e)),this.Qs=new Set}onStart(){this.vs&&this.Nn.observe()}onStop(){this.Qs.clear(),this.Nn.disconnect()}async register(t){this.Qs.has(t)||(this.Qs.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return Ce([j()],s.prototype,"register",null),s})(),qa=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static Gf(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.FT(t))}static FT(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Li=i,s.Er(i))}static Ur(t){this.$T(t),this.Li&&t(this.Li),this.Le||this.zT()}static $T(t){this.Mt.add(t)}static GT(t){this.Mt.delete(t)}static zT(){if(this.Mn||(this.Mn=this.Gf()),!this.Mn){this.Li||(this.Li={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Er(this.Li);return}this.Mn.observe({type:"navigation",buffered:!0}),this.Le=!0}static Er(t){this.Mt.forEach(e=>e(t))}static Hr(t){this.GT(t),this.Mt.size===0&&this.kn()}static kn(){var t;this.Le&&((t=this.Mn)===null||t===void 0||t.disconnect(),this.Le=!1,this.Li=null,this.Mn=this.Gf())}constructor(t){this.w=t}observe(){s.Ur(this.w)}disconnect(){s.Hr(this.w)}}return s.Le=!1,s.Mt=new Set,s.Li=null,s})(),Fl=(()=>{class s extends Oe{constructor(){super(...arguments),this.Aa=null,this.qf=new qa(t=>{if(this.Aa)return;let e=this.qT(t);e&&(this.Aa=e,this.produceEvent(e))})}onStart(){if(this.Aa){this.produceEvent(this.Aa);return}this.qf.observe()}onStop(){this.qf.disconnect()}qT(t){let e=qa.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:M.now()}}}return s})(),Ny="touchstart",My="touchmove",ky="touchend",Dy=(()=>{class s{constructor(t){this.w=t}observe(){s.Wf&&s.Eh(this.w)}disconnect(){s.Wf&&s.Sh(this.w)}static WT(t,e){csArray.prototype.forEach.call($s(s.Mt),i=>i(t,e))}static Eh(t){s.Mt.has(t)||(s.Mt.add(t),s.Mt.size===1&&(s.Dn.onGesture(s.WT),csArray.prototype.forEach.call(s.Vs,e=>Ct(e))))}static Sh(t){s.Mt.delete(t),s.Mt.size===0&&csArray.prototype.forEach.call(s.Vs,e=>It(e))}static vh(t){if(s.Dn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.Dn.processActionDown(t);break;case"touchmove":s.Dn.processActionMove();break;case"touchend":s.Dn.processActionUp(t);break}}}return s.Vs=[{boundElement:et.document,type:Ny,listener:r=>s.vh(r)},{boundElement:et.document,type:My,listener:r=>s.vh(r)},{boundElement:et.document,type:ky,listener:r=>s.vh(r)}],s.Wf=yn.isGestureDetectionSupported(),s.Mt=new Set,s.Dn=new yn,s})(),$l=(()=>{class s extends Oe{constructor(){super(),this.xn=new Dy(this.Lc.bind(this))}onStart(){this.xn.observe()}onStop(){this.xn.disconnect()}Lc(t){let e=this.YT(t);e&&this.produceEvent(e)}YT(t){if(!this.XT(t))return null;let e=qf(t.target);return e?{type:"Gesture",targetId:e,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}XT(t){return t.target!==null&&!(ht(t.target)&&k.isMaskedElementChild(t.target))}}return s})();var Os=[],On=!1,zl=vs(Ly,"executeTasks");function xy(s){if(csArray.prototype.push.call(Os,s),!On){for(let r=0;r<3;r++)csSetTimeout(zl);On=!0}}function Ly(){let s=csDate.now();for(let r=0;r<Os.length;r++)if(Os[r](),csDate.now()-s>=35){Os=csArray.prototype.slice.call(Os,r+1),csSetTimeout(zl);return}Os=[],On=!1}var Ge=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),Gl=(()=>{class s{constructor(){this.kt=new vi,this.Pt=Ge.Stopped,this.w=null,this.Kf=t=>{this.Pt===Ge.Stopped||!t||(this.w(t),this.Jf())}}get queueLength(){return this.kt.length}start(t){if(this.w)throw new Error("callback already set");this.Pt=Ge.Started,this.w=t}push(t){this.kt.push(t),this._h()}stop(){this.w=null,this.Pt=Ge.Stopped,this.kt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(n,l),X(i,h=>h.subscribe(f=>l.push(f))),i=[c]}let o=new Vy(n);return X(i,c=>c.subscribe(l=>o.push(l))),o}Qf(){return this.Pt===Ge.Stopped}rs(){return this.Pt===Ge.Processing}Jf(){if(!this.Qf()){if(this.kt.isEmpty){this.Pt=Ge.Completed;return}this.Pt=Ge.Processing,xy(()=>{let t=this.kt.pop();t instanceof fo?t.complete(this.Kf):this.Kf(t)})}}_h(){this.Qf()||this.rs()||this.Jf()}}return s})(),Vy=(()=>{class s extends Gl{constructor(t){super(),this.Zf=t}get queueLength(){return csArray.prototype.reduce.call(this.Zf,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),X(this.Zf,t=>t.stop())}}return s})(),ql=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.F=!1,this.Mt=[]}get pendingEvents(){var t,e;return(e=(t=this.kt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.F)throw new Error("Recording is already started.");let t=this.Mt;this.kt=Gl.pipe(this.producers,this.processors),this.kt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),X(this.producers,e=>e.start()),X(this.processors,e=>e.start()),this.F=!0}stop(){this.kt.stop(),this.Mt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.F=!1,this.Mt=[]}subscribe(t){if(this.F)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Mt,t),()=>this.Mt=csArray.prototype.filter.call(this.Mt,e=>e!==t)}}return s})(),Uy=(()=>{class s{constructor(t){this.Ra={},this.Ne=new ao(t)}save({key:t,metadata:e,events:i}){this.Ne.isThresholdReached()||(this.Ne.addString(t),typeof i=="string"?this.Ne.addString(i):this.Ne.addArrayBuffer(i),!this.Ne.isThresholdReached()&&(this.Ra[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.tA(),i=>{let n=this.Ra[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.eA(i))}),e.length!==0&&(t(e),this.Ne.reset())}tA(){return Object.keys(this.Ra)}eA(t){delete this.Ra[t]}}return s})(),qe=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),jy=(()=>{class s{constructor(t,e,i){this.ir=t,this.sA=i,this.Vi=qe.NOT_STARTED,this.Ca=[],this.Th=0,this.iA=self.origin,this.Oe=typeof window=="object"?"":"worker-",this.Ne=new ao(e),this.Ul()}async Ul(){await this.tg(),this.Vi===qe.READY?this.rA():this.sA(this.Ca)}rA(){csArray.prototype.forEach.call(this.Ca,t=>{this.save(t)}),this.Ca=[]}async save(t){try{if(this.Vi===qe.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Ca,t);return}if(this.Vi!==qe.READY||this.Ne.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.Ne.addString(e),typeof n=="string"?this.Ne.addString(n):this.Ne.addArrayBuffer(n),this.Ne.isThresholdReached())return;await this.ie.put(`${this.iA}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.ie&&(await this.tg(),this.Vi!==qe.READY)||this.nA(t)}async tg(){try{this.Vi=qe.OPEN_IN_PROGRESS,this.ie=await self.caches.open(`${this.Oe}${this.ir}`),this.Vi=qe.READY}catch{this.Vi=qe.OPEN_FAILED}}async nA(t){try{if(this.Th++,this.Th>1)return;let e=await this.ie.keys();if(e.length===0)return;let i=await this.ie.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((f,u)=>{l[u]=f}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(f=>({metadata:l,events:f})):c.arrayBuffer().then(f=>({metadata:l,events:f}))}),o=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.ie.delete(c))),t(o),this.Ne.reset()}catch{}finally{this.Th--}}}return s})(),Hy=(()=>{class s{constructor(t){try{this.oA(t)}catch{this.Ah()}}oA(t){self.caches?this.aA(t):this.Ah()}save(t){this.Ia.save(t)}recover(t){this.Ia.recover(t)}aA(t){this.Ia=new jy(t,s.eg,e=>{this.Ah(e)})}Ah(t){this.Ia=new Uy(s.eg),t&&csArray.prototype.forEach.call(t,e=>{this.Ia.save(e)})}}return s.eg=1024*1024*16,s})(),By=(()=>{class s{constructor(t,e){this.S=t,this.R=e,this.Ln=Jt.ETR_DISABLED,this.Pa=Jt.ETR_PENDING,this.bh=!0}getEtrStatus(t){t===void 0&&(t=this.R.getSession());let e=t==null?void 0:t.etrStatus;return this.sg()&&e===Jt.ETR_SAVED_SESSION?e:this.Ln}onEventTriggerRecording(t,e){switch(e){case es.ETR_PAGE:this.ig(Jt.ETR_SAVED_PAGE);break;case es.ETR_LEGACY:case es.ETR_SESSION:this.ig(Jt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===U.RECORDING_TEMPORARILY?this.bh=!0:this.bh=!1,t===U.ANALYTICS_ONLY&&e===Ht.ETR_ON?this.rg(this.Pa):this.rg(Jt.ETR_DISABLED)}rg(t){this.Ln=t,this.Pa=Jt.ETR_PENDING,this.ng(t),this.S.emitRecordingContextChange()}ig(t){this.bh?Number(t)>Number(this.Pa)&&(this.Pa=t):this.sg()&&Number(t)>Number(this.Ln)&&(this.Ln=t,this.ng(t),this.S.emitRecordingContextChange())}ng(t){let e=this.R.getSession();e!==null&&e.etrStatus===Jt.ETR_NOT_SAVED_SESSION&&t===Jt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.R.setSession(e))}sg(){return this.Ln!==Jt.ETR_DISABLED}}return s})(),x=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var ei=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),Wl=(()=>{class s{constructor(t=100){this.cA=t,this.Oa={},this.Vn=null,this.ch="original-resource-name"}onEvent(t){this.lA=t}processEvent(t){this.hA(t.resourceId,t.resource.hash,t.originalResourceName),this.uA(t)}flushEvents(){this.Vn&&csClearTimeout(this.Vn),this.og()}onSendStaticResource(t){this.uA=t}og(){if(!Object.keys(this.Oa).length)return;let t={type:x.RESOURCE_HASHES,date:M.now(),args:[this.Oa]};this.Vn=null,this.Oa={},this.lA(t)}hA(t,e,i){let n=e;i&&(n+=`?${this.ch}=${i}`),this.Oa[t]=n,!this.Vn&&(this.Vn=window.csSetTimeout(()=>this.og(),this.cA))}}return s})();function Fy(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:x.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:x.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:x.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:x.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:o,newValue:c}=s;r({type:x.MUTATION_ATTRIBUTE,date:e,args:[i,n,o,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:x.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:o}=s,c=tt(o)?[i,n,o]:[i,n];r({type:x.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:x.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:o}=s;r({type:x.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:x.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:x.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:o}=s;r({type:x.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:x.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:o}=s,c=tt(o)?[i,n,o]:[i,n];r({type:x.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:x.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:o}=s,c=[i,n,o];r({type:x.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,o=[i,n];r({type:x.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:L.error("translateDOMEvent: DOMEvent not supported");break}}function $y(s){let r=zy(s.data);return{type:x.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function zy(s){let r={type:Gy(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function Gy(s){switch(s){case Et.DRAG:case Et.FLICK:return ei.SWIPE;case Et.LONG_PRESS:return ei.LONG_PRESS;case Et.TAP:return ei.TAP;case Et.PINCH_IN:return ei.PINCH_IN;case Et.PINCH_OUT:return ei.PINCH_OUT}}function qy(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var Wy=20;function Yy(s){return qy(r=>{let t={visibleInViewPort:r},e={type:x.TEXT_VISIBILITY,date:M.now(),args:[t]};s(e)},{batchSize:Wy,autoFlushDelay:1e3})}var Yr=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();function Xy(s){return{type:x.PERFORMANCE_TIMINGS,args:[{performanceTiming:Yr.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:Yr.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:Yr.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function Ky(s){switch(s.inputType){case"text":return{type:x.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:x.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:x.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var Jy=500,Xr=0;function Qy(){return{processEvent(s,r){if(s.originalEvent.type===x.PERFORMANCE_RESOURCE_TIMING)return Xr>=Jy?null:(Xr+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){Xr=0}}}function Zy(s){switch(s.videoEventType){case"play":return{type:x.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:x.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:x.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var Yl=(()=>{class s{get pendingEvents(){return this.Na.pendingEvents}constructor(t,e,i,n,o){this.Na=t,this.S=e,this.Me=i,this.As=n,this.bs=o,this.re=()=>{},this.Ma=()=>{},this.ag=Yy(c=>this.re(c))}start(){var t,e;this.cg=Qy(),this.Na.subscribe(i=>{var n,o,c,l,h,f;let u=i,{timestamp:m}=u;switch(u.type){case"Legacy":{let y=u.eventType==="user"?(n=this.Ma)!==null&&n!==void 0?n:()=>{}:this.re;this.cg.processEvent(u,y)}break;case"CustomElementRegistration":{this.re({type:x.CUSTOM_ELEMENT_REGISTRATION,date:m,args:[u.tagName]});break}case"DomEvent":{Fy(u,this.re,this.S);break}case"InputEvent":{let y=Ky(u);(o=this.Ma)===null||o===void 0||o.call(this,y);break}case"encryptedCharacterDataChanged":{let{target:y,rawData:v,encryptedData:P,encryptionMetadata:N}=u;this.re({type:x.MUTATION_ENCRYPTED_CHARACTER_DATA,date:m,args:[y,v,P,N]});break}case"StaticResource":{let{url:y}=u;this.re({type:x.STATIC_RESOURCE_URL,date:m,args:[y]});break}case"ResizeMaskedElement":{let{target:y,width:v,height:P}=u;this.re({type:x.MUTATION_ATTRIBUTE,date:m,args:[y,"","style",`width:${v}px !important;height:${P}px !important;`]});break}case"Gesture":{let y=$y(i);(c=this.Ma)===null||c===void 0||c.call(this,y);break}case"TextVisibility":{this.ag.push(u.text);break}case"StaticResourceManagerEvent":{(l=this.Me)===null||l===void 0||l.processEvent(u);break}case"screenResize":{let{width:y,height:v}=u,P={type:x.SCREEN_RESIZE,date:m,args:[y,v]};this.re(P);break}case"viewportResize":{let{width:y,height:v}=u,P={type:x.RESIZE,date:m,args:[y,v]};this.re(P);break}case"PerformanceTiming":{this.re(Xy(u));break}case"CustomError":{let y=(h=this.bs)===null||h===void 0?void 0:h.translate(u);y&&this.re(y);break}case"JSError":{let y=(f=this.As)===null||f===void 0?void 0:f.translate(u);y&&this.re(y);break}case"VideoEvent":{let y=Zy(u);y&&this.re(y);break}case"warning":{L.warn(u.message);break}default:L.error(`WebRecorderEventTranslator: Event not supported (${u.type})`);break}}),this.S.emitInitialDomStart(),(t=this.As)===null||t===void 0||t.start(),(e=this.bs)===null||e===void 0||e.start(),this.Na.start()}stop(){var t,e,i;this.reset(),this.flush(),this.Na.stop(),(t=this.Me)===null||t===void 0||t.flushEvents(),(e=this.As)===null||e===void 0||e.stop(),(i=this.bs)===null||i===void 0||i.stop()}flush(){this.ag.flush()}onEvent(t,e){var i;this.re=t,this.Ma=e,(i=this.Me)===null||i===void 0||i.onEvent(n=>this.re(n))}reset(){this.cg.reset()}}return s})();var Xl=(()=>{class s extends Oe{constructor(t){super(),this.Ve=t}subscribe(t){return super.subscribe(t)}onStart(){X(this.Ve,t=>{t.onEvent(e=>{var i;return this.Sr(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),X(this.Ve,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){X(this.Ve,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Sr(t,e){this.produceEvent({timestamp:M.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),Rt=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),tE=(()=>{class s{constructor(t,e,i=[]){this.Sr=t,this.Rh=e,this.pA=i,this.ka=null,this.Pt=Rt.Active,this.nt=[]}reset(){this.ka=null,this.nt=[],this.Pt=Rt.Active}disconnect(){this.Pt=Rt.Stopped}fA(){this.Rh(Rt.Paused),this.Pt=Rt.Paused,csSetTimeout(()=>{this.Pt===Rt.Paused&&this.Ch()},s.STOP_TIMEOUT)}gA(){this.Rh(Rt.Active),this.Pt=Rt.Active,X(this.nt,this.Sr),this.nt=[]}Ch(){this.nt=[],this.Rh(Rt.Stopped),this.Pt=Rt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.ka=t.date,this.Pt!==Rt.Active)){this.gA(),this.Sr(t);return}if(this.mA(t)){this.Sr(t);return}switch(this.Pt){case Rt.Active:if(this.yA(t,e)){this.fA(),csArray.prototype.push.call(this.nt,t);return}this.Sr(t);break;case Rt.Paused:csArray.prototype.push.call(this.nt,t);break;case Rt.Stopped:break}}yA(t,e){return!e.isUserEvent&&this.ka!==null&&t.date-this.ka>s.INACTIVITY_TIMEOUT}mA(t){return csArray.prototype.indexOf.call(this.pA,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),eE=2e3,sE=(()=>{class s extends mt{constructor(t,e,i,n,o,c,l,h,f,u,m,y,v,P=[],N,_,S,C,O){super(),this.f=t,this.j=e,this.EA=i,this.G=n,this.R=o,this.Ge=c,this.Et=l,this.De=h,this.ot=f,this.W=u,this.Dt=m,this.Ct=y,this.Ue=v,this.Ve=P,this.lg=N,this.qt=_,this.Un=S,this.As=C,this.bs=O,this.qs=0,this.Bs=new to,this.vr={allowFromQuotaService:!0,allowFromSerialization:!0},this.hg=mr(()=>{this.j.eventsCount()>0&&this.ug()},eE),this.Rs=A=>this.processBrowserEvent(A),this.Hn=A=>this.Nt(A),this.Da=0,this.Bn=0,this.$e=new hl,this.Ih=!1,this.dg=50*1024,this.Ui=!1,this.Fn=!1,this.Di=[],this.xa=new tE(A=>this.K(A),A=>{switch(A){case Rt.Active:this.SA();break;case Rt.Stopped:this.vA();break}},[x.RESOURCE_HASHES,x.TEXT_VISIBILITY,x.API_ERROR,x.JAVASCRIPT_ERROR]),this.pg=A=>{this.Dt.removeBatchInProgress(`${A.params.sn}.${A.params.pn}.${A.params.ri}`)}}init(){this.Ph(),this.W.onLoad(this.pg),this.W.onError(this.pg)}SA(){csArray.prototype.forEach.call(this.lg,t=>t.start())}vA(){csArray.prototype.forEach.call(this.lg,t=>t.stopForInactivity())}Ph(){var t,e,i;this.Ue.onEvent(this.Rs,this.Hn),(t=this.ot)===null||t===void 0||t.onInputNodeToEncrypt(this.Hn),(e=this.ot)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.fg(n)}),(i=this.ot)===null||i===void 0||i.onUserIdentifierToEncrypt(this.Rs),this.$e.onEvent(n=>{if(csSetTimeout(()=>this.ji("page-state",n)),n!==Zt.Visible){if(n===Zt.Blur)return this.gg();if(!this.Ih)return this.Ih=!0,csSetTimeout(()=>{this.Ih=!1}),n===Zt.Hidden?this.gg():this._A()}})}isRecording(){return this.R.hasValidSession()&&this.isStarted}gg(){if(!this.canSendEvents())return;this.Ue.flush(),this.Dt.saveBatchesInProgress(),X(this.Ve,c=>{var l,h;return X((h=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&h!==void 0?h:[],f=>this.j.addEvent(f))});let t=this.j.getEvents();if(t.length===0)return;this.ji("pending-events",this.Ue.pendingEvents);let e=this.W.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.Bn=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.j.getCurrentRequestIndex(),n=i.getCurrentIndex();e.ri=n.toString(),this.Ct.removeQueryParams(),this.Ct.setQueryParams(e);let o=this.j.stringifyEvents();if(o.length>this.dg){let c=this.mg();if(c.length>0){let l=ys(c);this.Ct.send(l)||this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}if(this.j.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.j.stringifyEvents();this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}}else this.Ct.send(o)||this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:o}),i.increment();this.Ct.removeQueryParams(),this.j.clearEvents()}_A(){if(!this.canSendEvents())return;this.Ue.flush();let t=this.W.getQueryParams();this.Dt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Ct.removeQueryParams(),X(this.Ve,n=>{var o,c;return X((c=(o=n.getPendingEvents)===null||o===void 0?void 0:o.call(n))!==null&&c!==void 0?c:[],l=>this.j.addEvent(l))});let e=this.j.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Ct.setQueryParams(t),this.Ct.send(),this.Ct.removeQueryParams();return}this.ji("pending-events",this.Ue.pendingEvents),this.Bn=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Ct.setQueryParams(t);let i=this.j.stringifyEvents();if(i.length>this.dg){let n=this.mg();if(n.length>0){let o=ys(n);this.Ct.send(o)||this.Dt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.Ct.removeQueryParams(),this.Ct.setQueryParams(t),this.Ct.send(),this.Ct.removeQueryParams();if(this.j.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.j.getCurrentRequestIndex(),c=o.getCurrentIndex();t.ri=c.toString();let l=this.j.stringifyEvents();this.Dt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:l}),o.increment()}}else this.Ct.send(i)||(this.Dt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.j.getCurrentRequestIndex().increment());this.Ct.removeQueryParams(),this.j.clearEvents()}blockSendingEventsFromQuotaService(){this.vr.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.vr.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.vr.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.vr.allowFromSerialization=!0}canSendEvents(){return this.vr.allowFromQuotaService&&this.vr.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.Ge&&this.As){(e=this.Ge)===null||e===void 0||e.anonymize(t);let i=this.As.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:M.now(),type:"JSError"});i&&this.Rs(i)}}onIframeCustomError(t){if(this.bs){let e=this.bs.translate({...t,timestamp:M.now(),type:"CustomError"});e&&this.Rs(e)}}onIframeDetailedApiError(t){this.yg(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Nt(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.G.isCurrentPageviewValid()&&this.xa.pushEvent(t,{isUserEvent:!1})}Nt(t){this.G.refreshSession(),this.G.isSessionValid()&&this.xa.pushEvent(t,{isUserEvent:!0})}K(t){jt.general.nbEvents.increase(),this.j.addEvent(t),this.j.isThresholdReached()?this.pushEvents():this.j.isFull()&&this.hg(),this.Eg(t)}Eg(t){this.f.emitDebugEvents&&this.Bs.emit("recordingEvent",{...t,typeName:x[t.type]})}onStart(){var t;this.ji("tag-version","15.136.1"),this.ji("page-state",document.visibilityState),this.xa.reset(),this.$e.start(),this.initStates(),this.Ue.start(),this.Et&&this.De&&this.Et.subscribe(s.Ut,e=>this.yg(e),{detailedEvent:!0}),this.f.emitDebugEvents&&this.Bs.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Di,e=>this.Sg(e)),this.Di=[],this.Ui&&((t=this.qt)===null||t===void 0||t.enableOnlineAssets(),this.Ui=!1)}onStop(){var t;this.$e.stop(),this.Et&&this.Et.unsubscribe(s.Ut),this.Ue.stop(),this.xa.disconnect(),(t=this.qt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Ue.flush(),this.hg.cancel(),this.pushEvents(),this.W.removeQueryParams()}initStates(){this.Da=M.now(),this.j.getCurrentRequestIndex().reset(),this.qs=0,this.W.setQueryParams(this.EA.getRequestParameters())}pushEvents(){X(this.Ve,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.j.eventsCount()>0&&(this.isStarted?this.ug():this.j.clearEvents())}ug(){if(!this.canSendEvents())return;let t=this.j.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.Bn=i[i.length-1].date;let n=e.metadata.requestIndex,o=n.getCurrentIndex(),c=this.Da>this.Bn?i[0].date:this.Da;this.W.setQueryParams({pn:csString(e.metadata.pageNumber),ri:o.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.W.getQueryParams();this.Dt.addBatchInProgress(`${l.sn}.${l.pn}.${o}`,{...this.W.getQueryParams()},i),this.W.send(i),n.increment(),e.batch.clearEvents(),this.vg&&this.vg()}this.j.clearEmptyBatchSlots()}addInitialDom(t){this.j.addEventByTimestamp(t),this.Eg(t)}yg(t){if(this.Un&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Un.truncate(t),this.ot){this.ot.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.fg(t)}fg(t){if(this.qs<s.wA){let e={type:x.API_ERROR,date:M.now(),args:[this.De.anonymize(t)]};this.Rs(e),this.qs=this.qs+1,q.counters.networkRequests.count("collected")}}TA(t){t===es.ETR_SESSION?this.W.setQueryParams({[s.AA]:s._g}):t===es.ETR_PAGE&&this.W.setQueryParams({[s.bA]:s._g})}clearEvents(){this.j.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.As)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:M.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.Rs(i)}onCustomErrorEvent(t){var e;let i=(e=this.bs)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:M.now(),message:t.message,attributes:t.attributes});i&&this.Rs(i)}onPageEvent(t){this.wg(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:M.now(),keyId:this.f.encryptionPublicKeyId};(e=this.ot)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.Sg({eventName:t,eventType:e}):csArray.prototype.push.call(this.Di,{eventName:t,eventType:e})}Sg(t){this.TA(t.eventType),this.wg(t.eventName),this.pushEvents()}wg(t){let e={type:x.PAGE_EVENT,date:M.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.RA)}]};this.j.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:M.now(),type:x.UNANONYMIZED_CONSENT_GRANTED};this.j.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:M.now(),type:x.UNANONYMIZED_CONSENT_WITHDRAWN};this.j.addEvent(t)}triggerRecordingForSessionGranted(){this.ji("consent-granted")}triggerRecordingForSessionWithdrawn(){this.ji("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.Fn=!0}getStaticResourceManagerStatus(){return this.qt?{isStarted:this.f.useStaticResourceManager&&Bs.isSupported(),onlineAssets:{activated:this.qt.isOnlineAssetsActivated(),enabledOnNextPageview:this.Fn}}:null}resetOnlineAssetsOnPageview(){this.Ui=!1,this.Fn=!1}updateOnlineAssetsOnPageview(){this.qt&&this.Fn&&(this.Ui=!0,this.Fn=!1)}onRecordingRequestSent(t){this.vg=t}getRecordingStartTimestamp(){return this.Da.toString()}getRecordingLastEventTimestamp(){return this.Bn.toString()}onOptOut(){X(this.Ve,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}ji(t,e){if(!this.f.emitRecordInfoEvents)return;let i={date:M.now(),type:x.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.j.addEvent(i)}mg(){return this.j.extractEvents(x.API_ERROR,x.JAVASCRIPT_ERROR,x.CUSTOM_ERROR,x.TEXT_VISIBILITY,x.POINTER_DOWN)}}return s.Ut="RecordingService",s.RA=255,s.wA=20,s.bA="etrp",s.AA="etrs",s._g="1",$([Dt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),iE=(()=>{class s extends mt{constructor(t,e,i){super(),this.Jt=t,this.Ct=e,this.W=i,this.Oh=!1,this.$n={},this.CA=n=>{if(n.length!==0)for(let o of n){let{metadata:c,events:l}=o;this.IA(c.rt)&&this.W.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.$n={}}onStop(){}recover(){this.Jt.recover(this.CA)}addBatchInProgress(t,e,i){this.$n[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.$n[t]}blockSendingLastMessage(){this.Oh=!1}allowSendingLastMessage(){this.Oh=!0}sendLastMessageBeacon(){if(this.Oh){let{ri:t,rst:e,let:i,...n}=this.W.getQueryParams();n.hlm="true",this.Ct.setQueryParams(n),this.Ct.send()}}IA(t){return!!t&&csString.prototype.indexOf.call(t,U.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.$n),t=>{let{metadata:e,events:i}=this.$n[t];this.Jt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Jt.save(t)}}return $([j("RecordingRecovery")],s.prototype,"recover",null),s})(),rE=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),nE=8*1024*1024,oE=(()=>{class s extends mt{constructor(t,e,i){super(),this.Me=t,this.Tg=e,this.yt=i,this.Nh={},this.Ag=new Set,this.rs=!1}initState(){lc()&&(this.xe=this.yt.getRequestParameters(),this.PA=`${this.Tg}/exist?${gi.toQuery(this.xe)}`,this.OA=`${this.Tg}/putTag?${gi.toQuery(this.xe)}`,this.bg=di(async()=>{if(this.rs){this.bg();return}this.rs=!0;try{await this.NA()}finally{this.rs=!1}},300),this.Me.onSendStaticResource(t=>{this.Rg(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.Rg(t)}Rg(t){this.Cg(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.Cg(e.hash,e.data)})}Cg(t,e){this.Ag.has(t)||(this.Ag.add(t),this.Nh[t]=e,this.bg())}async NA(){let t=this.Nh;this.Nh={};let e=await this.MA(t);if(!e.length)return;let i=this.kA(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.OA,{method:"POST",body:n})))}async DA(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.xe.pid,filter:rE.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.PA,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async MA(t){let e=[],i=await this.DA(t);return csArray.prototype.forEach.call(i,n=>{let o=t[n];o?csArray.prototype.push.call(e,{hash:n,data:o}):L.warn("SRM: received unknown hash: "+n)}),e}kA(t){let e=0,i=[new FormData];for(let n of t){let{data:o,hash:c}=n,l=i.length-1;if(e=e+o.size,e<nE)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})();function Lt(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Kl=(()=>{class s{constructor(t,e){this.Ot=t,this.M=e,this.Vs=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.L=t}start(){this.yi(),this.triggerInitialEvents()}stop(){this.Ei()}yi(){csArray.prototype.forEach.call(this.Vs,t=>Ct(t))}Ei(){csArray.prototype.forEach.call(this.Vs,t=>It(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:x.HASH_CHANGE,args:[this.M.anonymizePII(this.Ot.href)],date:M.now()};this.L(t)}visibilityChangeListener(){let t={type:x.VISIBILITY_CHANGE,args:[document.visibilityState],date:M.now()};this.L(t)}}return $([j("hashChange")],s.prototype,"hashChangeListener",null),$([j("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})();function aE(s){if(!G(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var cE=!!window.chrome,lE=33,Jl=(()=>{class s{constructor(){this.eventType="user",this.kh=[],this.FA=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.$A=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.Va=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.Dh=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=aE(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.Dh,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.he=new qs((e,i)=>{switch(i){case"initial":case"added":this.yi(e);break;case"removed":this.Ei(e);break}})}init(){this.zA(),this.GA(),this.Qc()}onEvent(t){csArray.prototype.push.call(this.kh,t)}ne(t,e=!1){csArray.prototype.forEach.call(this.kh,i=>i(t,e))}start(){this.hh(),this.yi(document),this.he.observe()}stop(){this.Ei(document),this.he.disconnect(),this.kh=[]}GA(){this.qA()&&csArray.prototype.push.call(this.Va,...this.FA)}zA(){this.WA()&&csArray.prototype.push.call(this.Va,...this.$A)}yi(t){tr(t)?csArray.prototype.forEach.call(this.Va,e=>Ct(e)):csArray.prototype.forEach.call(this.Dh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Ct(i)})}Ei(t){tr(t)?csArray.prototype.forEach.call(this.Va,e=>It(e)):csArray.prototype.forEach.call(this.Dh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};It(i)})}qA(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}WA(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}hh(){this.YA()}YA(){let t=Ds.getScrollContainer()||document,e=it(t),i=this.Ig(t);if(i.top!==0||i.left!==0){let n={type:x.SCROLL,args:[e,i.left,i.top],date:M.now()};this.ne(n,!0)}}Ig(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(k.isMaskedElement(t)||k.isMaskedElementChild(t))return;let e=it(t),i=this.Ig(t),n={type:x.SCROLL,args:[e,i.left,i.top],date:M.now()};this.ne(n)}mouseOverListener(t){if(k.isMaskedElementChild(t.target))return;let e=it(t.target),i={type:x.MOUSE_OVER,args:[e],date:M.now()};this.ne(i)}clickListener(t){let e=yt(t);if(k.isMaskedElementChild(e))return;let i=it(e),n={type:x.CLICK,args:[i],date:M.now()};this.ne(n)}keyUpListener(t){let e=yt(t);if(k.isMaskedElementChild(e))return;let i=it(e),n=this.U[t.key];if(n===void 0)return;let o={type:x.KEY_UP,args:[i,n],date:M.now()};this.ne(o)}keyDownListener(t){let e=yt(t);if(k.isMaskedElementChild(e))return;let i=it(e),n=this.U[t.key];if(n===void 0)return;let o={type:x.KEY_DOWN,args:[i,n],date:M.now()};this.ne(o)}copyListener(t){let e=yt(t);if(k.isMaskedElementChild(e))return;let i=it(e),n={type:x.CLIPBOARD_COMMAND,args:[i,xs.COPY],date:M.now()};this.ne(n)}cutListener(t){let e=yt(t);if(k.isMaskedElementChild(e))return;let i=it(e),n={type:x.CLIPBOARD_COMMAND,args:[i,xs.CUT],date:M.now()};this.ne(n)}pasteListener(t){let e=yt(t);if(k.isMaskedElementChild(e))return;let i=it(e),n={type:x.CLIPBOARD_COMMAND,args:[i,xs.PASTE],date:M.now()};this.ne(n)}pointerUpListener(t){let e=yt(t);if(k.isMaskedElementChild(e))return;let i=it(e),n={type:x.POINTER_UP,args:[t.pointerId,t.pointerType,Lt(t.clientX,1),Lt(t.clientY,1),i,t.button],date:M.now()};this.ne(n)}pointerMoveListener(t){let e={type:x.POINTER_MOVE,args:[t.pointerId,t.pointerType,Lt(t.clientX,1),Lt(t.clientY,1)],date:M.now()};this.ne(e)}pointerDownListener(t){let e=yt(t);if(k.isMaskedElementChild(e))return;let i=it(e),n={type:x.POINTER_DOWN,args:[t.pointerId,t.pointerType,Lt(t.clientX,1),Lt(t.clientY,1),i,t.button,{pageX:Lt(t.pageX,1),pageY:Lt(t.pageY,1)}],date:M.now()};this.ne(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:x.TOUCH_START,args:[n.identifier,Lt(n.clientX,1),Lt(n.clientY,1)],date:M.now()};this.ne(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:x.TOUCH_MOVE,args:[n.identifier,Lt(n.clientX,1),Lt(n.clientY,1)],date:M.now()};this.ne(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:t.type==="touchend"?x.TOUCH_END:x.TOUCH_CANCEL,args:[n.identifier,Lt(n.clientX,1),Lt(n.clientY,1)],date:M.now()};this.ne(o)}}Qc(){this.U={},this.U[" "]=Y.SPACE,this.U.Spacebar=Y.SPACE,this.U.Backspace=Y.BACKSPACE,this.U.Enter=Y.ENTER,this.U.Delete=Y.DELETE,this.U.ArrowUp=Y.ARROWUP,this.U.ArrowDown=Y.ARROWDOWN,this.U.ArrowLeft=Y.ARROWLEFT,this.U.ArrowRight=Y.ARROWRIGHT,this.U.Up=Y.ARROWUP,this.U.Down=Y.ARROWDOWN,this.U.Left=Y.ARROWLEFT,this.U.Right=Y.ARROWRIGHT,this.U.CapsLock=Y.CAPSLOCK,this.U.Shift=Y.SHIFT,this.U.Tab=Y.TAB,this.U.Escape=Y.ESCAPE,this.U.Esc=Y.ESCAPE,this.U.End=Y.END,this.U.Alt=Y.ALT,this.U.Control=Y.CTRL,this.U.Meta=Y.META}}return $([Dt("RecordingPageEvents.start")],s.prototype,"start",null),$([j("scroll")],s.prototype,"scrollListener",null),$([j("mouseOver"),Tt(),Qf()],s.prototype,"mouseOverListener",null),$([j("click"),Tt()],s.prototype,"clickListener",null),$([j("Event handler type: keyup")],s.prototype,"keyUpListener",null),$([j("Event handler type: keydown")],s.prototype,"keyDownListener",null),$([j("Event handler type: copy")],s.prototype,"copyListener",null),$([j("Event handler type: cut")],s.prototype,"cutListener",null),$([j("Event handler type: paste")],s.prototype,"pasteListener",null),$([j("Event handler type: pointerup"),Tt()],s.prototype,"pointerUpListener",null),$([j("Event handler type: pointermove"),Tt(),Ti({wait:lE})],s.prototype,"pointerMoveListener",null),$([j("Event handler type: pointerdown"),Tt()],s.prototype,"pointerDownListener",null),$([j("Event handler type: touchstart"),Tt()],s.prototype,"touchStartListener",null),$([j("Event handler type: touchmove"),Tt()],s.prototype,"touchMoveListener",null),$([j("Event handler type: touchend-cancel"),Tt()],s.prototype,"touchEndCancelListener",null),s})(),Ql=(()=>{class s{constructor(){}onScannedAsset(t){this.Ua=t}scanCssString(t){this.xh(li(t))}scanElement(t,e){k.getMaskedElementDetails(t).state!==k.MaskedElementState.NotMasked||e&&k.isMaskedAttribute(t,e)||(ar(t)?this.KA(t):Fn(t)?this.JA(t,e):(this.QA(t,e),this.ZA(t,e),this.tb(t,e)))}JA(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:tl(t)};this.Ua({type:"stylesheet",asset:o})}}KA(t){var e;let i=new Set;if(t.textContent)for(let o of li(t.textContent))i.add(o);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||L.error(o.message)}if(n)for(let o=0;o<n.length;o++){let c=n.item(o).cssText;for(let l of li(c))i.add(l)}this.xh($s(i))}Lh(t){return!this.eb(t)&&!re(t)&&!Cc(t)}QA(t,e){if(Hd(t)||jd(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.Lh(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.Ua({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.sb(t.srcset)}}ZA(t,e){if(t.nodeType!==1){lt.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}sb(t){this.xh(go(t))}tb(t,e){if((zd(t)||Gd(t)||qd(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.Lh(i)){let n={assetId:ts(i),assetRawPath:i,assetBasePath:window.location.href};this.Ua({type:"asset",asset:n})}}}xh(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.Lh(e)),e=>({rawUrl:e,absoluteUrl:ts(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.Ua({type:"asset",asset:i})})}eb(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),hE=30,uE=0,Zl=(()=>{class s{constructor(t,e=hE,i=uE){this.ib=t,this.rb=e,this.nb=i,this.qe=new vi,this.He=!1,this.Vh=0,this.Pg=()=>{for(this.Vh=0;this.qe.length;){if(this.Vh>=this.rb){csSetTimeout(this.Pg,this.nb);return}let n=M.elapsed(),o=this.qe.pop();if(!o)break;this.runTask(o);let c=M.elapsed()-n;this.Vh+=c}this.He=!1}}schedule(t,e=!1){if(!this.ib||e){t();return}jt.general.pendingTasks.increase(),this.qe.push(t),this.ob()}ob(){this.He||(this.He=!0,csSetTimeout(()=>{this.Pg()}))}runTask(t){jt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.qe.forEach(t=>{this.runTask(t)}),this.qe.clear()}clearQueue(){jt.general.pendingTasks.clear(),jt.mutations.pendingMutations.clear(),this.qe.clear()}isEmpty(){return this.qe.length===0}}return $([j("TaskScheduler"),Dt("runTask")],s.prototype,"runTask",null),$([Dt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),th=(()=>{class s{constructor(){this.F=!1,this.Og=new po(t=>t.type==="cssRuleInserted"&&this.ab(t)),this.cb=pr(t=>{this.F&&t.length>0&&this.O.schedule(()=>X(t,e=>this.qn.scanElement(e)))}),this.lb=({type:t,asset:e})=>{var i,n,o;t==="stylesheet"&&((i=this.hb)===null||i===void 0||i.call(this,e)),(n=this.db)===null||n===void 0||n.call(this,e);let c={date:M.now(),type:x.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.L)===null||o===void 0||o.call(this,c)},this.O=new Zl(!0,30,0),this.Nn=new Hl(t=>this.pb(t)),this.D=new Pe(t=>this.Ao(t)),this.qn=new Ql,this.qn.onScannedAsset(this.lb)}onEvent(t){this.L=t}onAsset(t){this.db=t}onStyleSheetFound(t){this.hb=t}start(){this.F||(this.F=!0,this.Og.observe(),this.Nn.observe(),this.D.observe())}stop(){this.F&&(this.Og.disconnect(),this.Nn.disconnect(),this.D.disconnect(),this.F=!1)}ab(t){!t.rule||!this.F||this.qn.scanCssString(t.rule)}pb(t){this.F&&k.getMaskedElementDetails(t).state===k.MaskedElementState.NotMasked&&this.cb.push(t)}Ao(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.qn.scanElement(e.target,e.attributeName);break;case"characterData":this.fb(e.target);break;case"childList":}})}fb(t){Zi(t)&&csNodeparentNode.apply(t)&&ar(csNodeparentNode.apply(t))&&this.qn.scanCssString(t.data)}}return s})(),eh=2*1e3*1024,dE=200,Wa=(()=>{class s{constructor(t=eh){this.Vt=[],this.Uh=new ao(t)}addEvent(t){this.Uh.addString(ys(t)),csArray.prototype.push.call(this.Vt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Vt.length&&!(this.Vt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Vt,e,0,t)}eventsCount(){return this.Vt.length}clearEvents(){this.Uh.reset(),this.Vt=[]}isFull(){return this.eventsCount()>=dE}isThresholdReached(){return this.Uh.isThresholdReached()}getEvents(){return this.Vt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Vt,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Vt=i,e}stringifyEvents(){return ys(this.Vt)}sI(t){t.type===x.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return $([Dt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})();function pE(s){if(typeof Object.values=="function")return Object.values(s);let r=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(r,s[t]);return r}var Ya=(()=>{class s{constructor(){this.ja=1}getCurrentIndex(){return this.ja}increment(){this.ja+=1}reset(){this.ja=1}getRequestParameters(){return{ri:`${this.ja}`}}}return s})(),fE=3,gE=(()=>{class s{constructor(t,e=eh,i=fE){this.gb=t,this.Ng=e,this.jh=i,this.Ha={}}addEvent(t){this.Mg().addEvent(t)}addEventByTimestamp(t){this.Mg().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.Hi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.Hi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.Hi();return t.length>=this.jh||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return ys(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.Hi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.Ha[t[e].metadata.pageNumber]}Hi(){return pE(this.Ha)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.Hi(),mE)}kg(){let t=this.gb();if(t<=0)return L.error("RecordingBatchGroup: getCurrentPn() <= 0"),{batch:new Wa(this.Ng),metadata:{pageNumber:0,requestIndex:new Ya}};let e=this.Ha[t];if(e)return e;let i={batch:new Wa(this.Ng),metadata:{pageNumber:t,requestIndex:new Ya}};return this.Ha[t]=i,this.Hi().length>this.jh&&L.warn(`RecordingBatchGroup: max number of slots overflowed(${this.Hi().length}/${this.jh})`),i}Mg(){return this.kg().batch}getCurrentRequestIndex(){return this.kg().metadata.requestIndex}}return s})();function mE(s,r){return s.metadata.pageNumber-r.metadata.pageNumber}var yE="csPersisted",Xa="v2/recording",sh=["isRecording"],ih=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],rh=["replay:resourceManager:getStatus","cssrm:getStatus"],EE=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,u,m,y,v,P,N,_,S,C,O,A,H,Q){this.Us=t,this.R=e,this.f=i,this.xe=n,this.E=o,this.M=c,this.G=l,this.le=h,this.Ge=f,this.Et=u,this.De=m,this._t=y,this.S=v,this.Ws=P,this.Dg=N,this.se=_,this.de=S,this.tt=C,this.Un=O,this.it=A,this.iI=H,this.ot=Q}init(){var t,e;let i=[],n=[];csArray.prototype.push.call(n,new kl),this.Wn=new Dl(this.it.shouldUseAnonymization(),this.f.whitelistedAttributes,this.M,this.f.anonymizeDigits),this.Bi();let o=new Hy(yE);this.mb(o),this.j=new gE(()=>{var C;return((C=this.R.getSession())===null||C===void 0?void 0:C.pageNumber)||0});let c=new th;csArray.prototype.push.call(i,c),this.f.useStaticResourceManager&&Bs.isSupported()&&(this.qt=new Bs,this.Me=new Wl,this.xg=new oE(this.Me,this.f.getStaticResourceManagerUri(),this.xe),this.Dg.addListener(this.xg),csArray.prototype.push.call(n,this.qt));let l=new mi(this.xe,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")})}),h=new ul(`${this.f.getRecordingUri()}/${Xa}`);csArray.prototype.push.call(n,this.Wn),csArray.prototype.push.call(n,new xl(this.tt)),csArray.prototype.push.call(n,new Ll),this.Fi=new Jl,this.Fi.init(),csArray.prototype.push.call(i,this.Fi),this.Dt=new iE(o,h,this.W),csArray.prototype.push.call(i,new Kl(window.location,this.M));let f=new Ml,u=new by,m=new Cy,y=new jl(this.ot),v=new Bl,P=[u,this.le,f,new Xl(csArray.prototype.filter.call(i,C=>C)),v,new Fl,new $l,y,m],N=new ql(P,n),_=new Yl(N,this.S,this.Me,this.As,this.bs),S=[f,u,m,y,v];this.recordingService=new sE(this.f,this.j,l,this.G,this.R,this.Ge,this.Et,this.De,this.ot,this.W,this.Dt,h,_,i,S,this.qt,this.Un,this.As,this.bs),this.Ws.addListener(this.recordingService),this.Dg.addListener(this.recordingService),this.recordingService.init(),this.E.register(sh,()=>this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()),this.E.register(ih,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.S.emitRecordingContextChange()}),this.E.register(rh,()=>this.recordingService.getStaticResourceManagerStatus()),this.Yn=new By(this.S,this.R),this.Ws.addListener(this.Yn),this.Us.enableRecordingContext(this.recordingService,this.R,this.Yn),this.Hh()}onAfterNaturalPageView(){var t;this.se.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.xg)===null||t===void 0||t.initState()}onStartTracking(){this.Dt.recover(),this.Bi(),this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Bh())}onArtificialPageViewEnd(){this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()&&!this.R.isTemporarilyRecorded()&&this.Dt.sendLastMessageBeacon(),this.recordingService.clearStates()}onAfterArtificialPageView(){this.Bi(),this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()?(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.Eb()):(this.recordingService.resetOnlineAssetsOnPageview(),this._r())}onBeforeSessionRenewal(){this.recordingService.clearStates(),this._r()}onOptout(){this._r(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.Bi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.S.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.Bi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.S.emitRecordingContextChange()}onCollectStateChange(t,e){t===U.QUOTA_REACHED||t===U.ANALYTICS_ONLY&&e===Ht.ETR_OFF?(this.recordingService.clearEvents(),this._r()):(this.W.setQueryParams({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.Yn.onCollectStateChange(t,e))}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Dt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Dt.allowSendingLastMessage(),this.Fi.start(),this.recordingService.pushEvents(),q.counters.longTasks.count>0&&q.counters.longTasks.flush(),q.counters.tasks.count>0&&q.counters.tasks.flush()}onAfterReplayRecordingConsentGranted(){this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Bh(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this._r())}Hh(){var t,e,i,n;if(!((e=(t=this.f.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let o=(n=(i=this.f.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||n===void 0?void 0:n.filterByHostSelector;X(o,c=>{Ms(c)&&Pe.setShadowRootFilter(l=>{try{return ee.call(l.host,c)}catch{return!1}})})}}Bh(){this.recordingService.start(),this.Dt.start(),this.S.emitRecordingContextChange()}_r(){Gf(),this.recordingService.stop(),this.Dt.stop(),this.S.emitRecordingContextChange()}Eb(){this._r(),this.Bh()}mb(t){let e="byteArray";this.W=this.de.create(`${this.f.getRecordingUri()}/${Xa}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}Bi(){var t;let e=this.it.shouldUseAnonymization();this.Wn.setAnonymization(e),(t=this.yb)===null||t===void 0||t.setAnonymization(e)}}return $([Dt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),$([Dt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),SE=(()=>{class s{constructor(t,e){this.ce=t,this.f=e,this.Lg=!1}enableRecordingContext(t,e,i){this.Lg=!0,this.fr=t,this.R=e,this.Yn=i}getRecordingContext(){var t,e,i;if(!this.Lg)return{isRecording:!1,recordingStartTimestamp:0,etrState:Ht.ETR_OFF,etrStatus:Jt.ETR_DISABLED,collectState:U.ANALYTICS_ONLY};let n=this.R.getSession();return{isRecording:this.fr.isRecording(),useAnonymization:this.ce.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.fr.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.fr.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.fr.getRecordingStartTimestamp(),10),etrState:this.f.malkaEtrEnabled?Ht.ETR_ON:Ht.ETR_OFF,etrStatus:this.Yn.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:U.ANALYTICS_ONLY}}}return s})(),Fs=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})(),vE=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),_E=(()=>{class s{constructor(){}static init(t){(!this.Fh||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Fh=new Map,i){let n=csString.prototype.split.call(i,".");for(let o=0;o<n.length;o++){let[c,l]=csString.prototype.split.call(n[o],"=");this.Fh.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Fh)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(vE.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=n.value;wE(s.getString("debugLog"),t)&&(n.value=function(...f){return console.log(l,...f),h.bind(this)(...f)})}}}return s})();function wE(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}function Ka(){function i(a){let p=a.length;for(;--p>=0;)a[p]=0}let n=0,o=1,c=2,l=3,h=258,f=29,u=256,m=u+1+f,y=30,v=19,P=2*m+1,N=15,_=16,S=7,C=256,O=16,A=17,H=18,Q=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ot=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),xt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),St=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),w=512,D=new Array((m+2)*2);i(D);let V=new Array(y*2);i(V);let B=new Array(w);i(B);let at=new Array(h-l+1);i(at);let Pt=new Array(f);i(Pt);let Bt=new Array(y);i(Bt);function Ne(a,p,g,E,d){this.static_tree=a,this.extra_bits=p,this.extra_base=g,this.elems=E,this.max_length=d,this.has_stree=a&&a.length}let ws,Ft,Wt;function Ee(a,p){this.dyn_tree=a,this.max_code=0,this.stat_desc=p}let Pi=a=>a<256?B[a]:B[256+(a>>>7)],is=(a,p)=>{a.pending_buf[a.pending++]=p&255,a.pending_buf[a.pending++]=p>>>8&255},bt=(a,p,g)=>{a.bi_valid>_-g?(a.bi_buf|=p<<a.bi_valid&65535,is(a,a.bi_buf),a.bi_buf=p>>_-a.bi_valid,a.bi_valid+=g-_):(a.bi_buf|=p<<a.bi_valid&65535,a.bi_valid+=g)},Yt=(a,p,g)=>{bt(a,g[p*2],g[p*2+1])},Ys=(a,p)=>{let g=0;do g|=a&1,a>>>=1,g<<=1;while(--p>0);return g>>>1},wo=a=>{a.bi_valid===16?(is(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},To=(a,p)=>{let g=p.dyn_tree,E=p.max_code,d=p.stat_desc.static_tree,b=p.stat_desc.has_stree,T=p.stat_desc.extra_bits,R=p.stat_desc.extra_base,J=p.stat_desc.max_length,F,$t,He,nt,cs,bs,ji=0;for(nt=0;nt<=N;nt++)a.bl_count[nt]=0;for(g[a.heap[a.heap_max]*2+1]=0,F=a.heap_max+1;F<P;F++)$t=a.heap[F],nt=g[g[$t*2+1]*2+1]+1,nt>J&&(nt=J,ji++),g[$t*2+1]=nt,!($t>E)&&(a.bl_count[nt]++,cs=0,$t>=R&&(cs=T[$t-R]),bs=g[$t*2],a.opt_len+=bs*(nt+cs),b&&(a.static_len+=bs*(d[$t*2+1]+cs)));if(ji!==0){do{for(nt=J-1;a.bl_count[nt]===0;)nt--;a.bl_count[nt]--,a.bl_count[nt+1]+=2,a.bl_count[J]--,ji-=2}while(ji>0);for(nt=J;nt!==0;nt--)for($t=a.bl_count[nt];$t!==0;)He=a.heap[--F],!(He>E)&&(g[He*2+1]!==nt&&(a.opt_len+=(nt-g[He*2+1])*g[He*2],g[He*2+1]=nt),$t--)}},wr=(a,p,g)=>{let E=new Array(N+1),d=0,b,T;for(b=1;b<=N;b++)E[b]=d=d+g[b-1]<<1;for(T=0;T<=p;T++){let R=a[T*2+1];R!==0&&(a[T*2]=Ys(E[R]++,R))}},Ao=()=>{let a,p,g,E,d,b=new Array(N+1);for(g=0,E=0;E<f-1;E++)for(Pt[E]=g,a=0;a<1<<Q[E];a++)at[g++]=E;for(at[g-1]=E,d=0,E=0;E<16;E++)for(Bt[E]=d,a=0;a<1<<ot[E];a++)B[d++]=E;for(d>>=7;E<y;E++)for(Bt[E]=d<<7,a=0;a<1<<ot[E]-7;a++)B[256+d++]=E;for(p=0;p<=N;p++)b[p]=0;for(a=0;a<=143;)D[a*2+1]=8,a++,b[8]++;for(;a<=255;)D[a*2+1]=9,a++,b[9]++;for(;a<=279;)D[a*2+1]=7,a++,b[7]++;for(;a<=287;)D[a*2+1]=8,a++,b[8]++;for(wr(D,m+1,b),a=0;a<y;a++)V[a*2+1]=5,V[a*2]=Ys(a,5);ws=new Ne(D,Q,u+1,m,N),Ft=new Ne(V,ot,0,y,N),Wt=new Ne(new Array(0),xt,0,v,S)},bo=a=>{let p;for(p=0;p<m;p++)a.dyn_ltree[p*2]=0;for(p=0;p<y;p++)a.dyn_dtree[p*2]=0;for(p=0;p<v;p++)a.bl_tree[p*2]=0;a.dyn_ltree[C*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Ro=a=>{a.bi_valid>8?is(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},$h=(a,p,g,E)=>{Ro(a),E&&(is(a,g),is(a,~g)),a.pending_buf.set(a.window.subarray(p,p+g),a.pending),a.pending+=g},Co=(a,p,g,E)=>{let d=p*2,b=g*2;return a[d]<a[b]||a[d]===a[b]&&E[p]<=E[g]},Tr=(a,p,g)=>{let E=a.heap[g],d=g<<1;for(;d<=a.heap_len&&(d<a.heap_len&&Co(p,a.heap[d+1],a.heap[d],a.depth)&&d++,!Co(p,E,a.heap[d],a.depth));)a.heap[g]=a.heap[d],g=d,d<<=1;a.heap[g]=E},Io=(a,p,g)=>{let E,d,b=0,T,R;if(a.last_lit!==0)do E=a.pending_buf[a.d_buf+b*2]<<8|a.pending_buf[a.d_buf+b*2+1],d=a.pending_buf[a.l_buf+b],b++,E===0?Yt(a,d,p):(T=at[d],Yt(a,T+u+1,p),R=Q[T],R!==0&&(d-=Pt[T],bt(a,d,R)),E--,T=Pi(E),Yt(a,T,g),R=ot[T],R!==0&&(E-=Bt[T],bt(a,E,R)));while(b<a.last_lit);Yt(a,C,p)},Ar=(a,p)=>{let g=p.dyn_tree,E=p.stat_desc.static_tree,d=p.stat_desc.has_stree,b=p.stat_desc.elems,T,R,J=-1,F;for(a.heap_len=0,a.heap_max=P,T=0;T<b;T++)g[T*2]!==0?(a.heap[++a.heap_len]=J=T,a.depth[T]=0):g[T*2+1]=0;for(;a.heap_len<2;)F=a.heap[++a.heap_len]=J<2?++J:0,g[F*2]=1,a.depth[F]=0,a.opt_len--,d&&(a.static_len-=E[F*2+1]);for(p.max_code=J,T=a.heap_len>>1;T>=1;T--)Tr(a,g,T);F=b;do T=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Tr(a,g,1),R=a.heap[1],a.heap[--a.heap_max]=T,a.heap[--a.heap_max]=R,g[F*2]=g[T*2]+g[R*2],a.depth[F]=(a.depth[T]>=a.depth[R]?a.depth[T]:a.depth[R])+1,g[T*2+1]=g[R*2+1]=F,a.heap[1]=F++,Tr(a,g,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],To(a,p),wr(g,J,a.bl_count)},Po=(a,p,g)=>{let E,d=-1,b,T=p[0*2+1],R=0,J=7,F=4;for(T===0&&(J=138,F=3),p[(g+1)*2+1]=65535,E=0;E<=g;E++)b=T,T=p[(E+1)*2+1],!(++R<J&&b===T)&&(R<F?a.bl_tree[b*2]+=R:b!==0?(b!==d&&a.bl_tree[b*2]++,a.bl_tree[O*2]++):R<=10?a.bl_tree[A*2]++:a.bl_tree[H*2]++,R=0,d=b,T===0?(J=138,F=3):b===T?(J=6,F=3):(J=7,F=4))},Oo=(a,p,g)=>{let E,d=-1,b,T=p[0*2+1],R=0,J=7,F=4;for(T===0&&(J=138,F=3),E=0;E<=g;E++)if(b=T,T=p[(E+1)*2+1],!(++R<J&&b===T)){if(R<F)do Yt(a,b,a.bl_tree);while(--R!==0);else b!==0?(b!==d&&(Yt(a,b,a.bl_tree),R--),Yt(a,O,a.bl_tree),bt(a,R-3,2)):R<=10?(Yt(a,A,a.bl_tree),bt(a,R-3,3)):(Yt(a,H,a.bl_tree),bt(a,R-11,7));R=0,d=b,T===0?(J=138,F=3):b===T?(J=6,F=3):(J=7,F=4)}},zh=a=>{let p;for(Po(a,a.dyn_ltree,a.l_desc.max_code),Po(a,a.dyn_dtree,a.d_desc.max_code),Ar(a,a.bl_desc),p=v-1;p>=3&&a.bl_tree[St[p]*2+1]===0;p--);return a.opt_len+=3*(p+1)+5+5+4,p},Gh=(a,p,g,E)=>{let d;for(bt(a,p-257,5),bt(a,g-1,5),bt(a,E-4,4),d=0;d<E;d++)bt(a,a.bl_tree[St[d]*2+1],3);Oo(a,a.dyn_ltree,p-1),Oo(a,a.dyn_dtree,g-1)},qh=a=>{let p=4093624447,g;for(g=0;g<=31;g++,p>>>=1)if(p&1&&a.dyn_ltree[g*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(g=32;g<u;g++)if(a.dyn_ltree[g*2]!==0)return 1;return 0},No=!1,Wh=a=>{No||(Ao(),No=!0),a.l_desc=new Ee(a.dyn_ltree,ws),a.d_desc=new Ee(a.dyn_dtree,Ft),a.bl_desc=new Ee(a.bl_tree,Wt),a.bi_buf=0,a.bi_valid=0,bo(a)},Mo=(a,p,g,E)=>{bt(a,(n<<1)+(E?1:0),3),$h(a,p,g,!0)},Yh=a=>{bt(a,o<<1,3),Yt(a,C,D),wo(a)},Xh=(a,p,g,E)=>{let d,b,T=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=qh(a)),Ar(a,a.l_desc),Ar(a,a.d_desc),T=zh(a),d=a.opt_len+3+7>>>3,b=a.static_len+3+7>>>3,b<=d&&(d=b)):d=b=g+5,g+4<=d&&p!==-1?Mo(a,p,g,E):a.strategy===4||b===d?(bt(a,(o<<1)+(E?1:0),3),Io(a,D,V)):(bt(a,(c<<1)+(E?1:0),3),Gh(a,a.l_desc.max_code+1,a.d_desc.max_code+1,T+1),Io(a,a.dyn_ltree,a.dyn_dtree)),bo(a),E&&Ro(a)},Kh=(a,p,g)=>(a.pending_buf[a.d_buf+a.last_lit*2]=p>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=p&255,a.pending_buf[a.l_buf+a.last_lit]=g&255,a.last_lit++,p===0?a.dyn_ltree[g*2]++:(a.matches++,p--,a.dyn_ltree[(at[g]+u+1)*2]++,a.dyn_dtree[Pi(p)*2]++),a.last_lit===a.lit_bufsize-1);var Jh=Wh,Qh=Mo,Zh=Xh,tu=Kh,eu=Yh,su={_tr_init:Jh,_tr_stored_block:Qh,_tr_flush_block:Zh,_tr_tally:tu,_tr_align:eu},ko=(a,p,g,E)=>{let d=a&65535|0,b=a>>>16&65535|0,T=0;for(;g!==0;){T=g>2e3?2e3:g,g-=T;do d=d+p[E++]|0,b=b+d|0;while(--T);d%=65521,b%=65521}return d|b<<16|0};let iu=()=>{let a,p=[];for(var g=0;g<256;g++){a=g;for(var E=0;E<8;E++)a=a&1?3988292384^a>>>1:a>>>1;p[g]=a}return p},ru=new Uint32Array(iu());var Me=(a,p,g,E)=>{let d=ru,b=E+g;a^=-1;for(let T=E;T<b;T++)a=a>>>8^d[(a^p[T])&255];return a^-1},Oi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Do={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:nu,_tr_stored_block:ou,_tr_flush_block:au,_tr_tally:ke,_tr_align:cu}=su,{Z_NO_FLUSH:rs,Z_PARTIAL_FLUSH:lu,Z_FULL_FLUSH:hu,Z_FINISH:De,Z_BLOCK:xo,Z_OK:oe,Z_STREAM_END:Lo,Z_STREAM_ERROR:Xt,Z_DATA_ERROR:uu,Z_BUF_ERROR:br,Z_DEFAULT_COMPRESSION:du,Z_FILTERED:pu,Z_HUFFMAN_ONLY:Ni,Z_RLE:fu,Z_FIXED:gu,Z_DEFAULT_STRATEGY:mu,Z_UNKNOWN:yu,Z_DEFLATED:Mi}=Do,Eu=9,Su=15,vu=8,Rr=256+1+29,_u=30,wu=19,Tu=2*Rr+1,Au=15,K=3,xe=258,se=xe+K+1,bu=32,ki=42,Cr=69,Di=73,xi=91,Li=103,ns=113,Xs=666,ft=1,Ks=2,os=3,Ts=4,Ru=3,Le=(a,p)=>(a.msg=Oi[p],p),Vo=a=>(a<<1)-(a>4?9:0),Ve=a=>{let p=a.length;for(;--p>=0;)a[p]=0},Ue=(a,p,g)=>(p<<a.hash_shift^g)&a.hash_mask,je=a=>{let p=a.state,g=p.pending;g>a.avail_out&&(g=a.avail_out),g!==0&&(a.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+g),a.next_out),a.next_out+=g,p.pending_out+=g,a.total_out+=g,a.avail_out-=g,p.pending-=g,p.pending===0&&(p.pending_out=0))},vt=(a,p)=>{au(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,p),a.block_start=a.strstart,je(a.strm)},Z=(a,p)=>{a.pending_buf[a.pending++]=p},Js=(a,p)=>{a.pending_buf[a.pending++]=p>>>8&255,a.pending_buf[a.pending++]=p&255},Cu=(a,p,g,E)=>{let d=a.avail_in;return d>E&&(d=E),d===0?0:(a.avail_in-=d,p.set(a.input.subarray(a.next_in,a.next_in+d),g),a.state.wrap===1?a.adler=ko(a.adler,p,d,g):a.state.wrap===2&&(a.adler=Me(a.adler,p,d,g)),a.next_in+=d,a.total_in+=d,d)},Uo=(a,p)=>{let g=a.max_chain_length,E=a.strstart,d,b,T=a.prev_length,R=a.nice_match,J=a.strstart>a.w_size-se?a.strstart-(a.w_size-se):0,F=a.window,$t=a.w_mask,He=a.prev,nt=a.strstart+xe,cs=F[E+T-1],bs=F[E+T];a.prev_length>=a.good_match&&(g>>=2),R>a.lookahead&&(R=a.lookahead);do if(d=p,!(F[d+T]!==bs||F[d+T-1]!==cs||F[d]!==F[E]||F[++d]!==F[E+1])){E+=2,d++;do;while(F[++E]===F[++d]&&F[++E]===F[++d]&&F[++E]===F[++d]&&F[++E]===F[++d]&&F[++E]===F[++d]&&F[++E]===F[++d]&&F[++E]===F[++d]&&F[++E]===F[++d]&&E<nt);if(b=xe-(nt-E),E=nt-xe,b>T){if(a.match_start=p,T=b,b>=R)break;cs=F[E+T-1],bs=F[E+T]}}while((p=He[p&$t])>J&&--g!==0);return T<=a.lookahead?T:a.lookahead},as=a=>{let p=a.w_size,g,E,d,b,T;do{if(b=a.window_size-a.lookahead-a.strstart,a.strstart>=p+(p-se)){a.window.set(a.window.subarray(p,p+p),0),a.match_start-=p,a.strstart-=p,a.block_start-=p,E=a.hash_size,g=E;do d=a.head[--g],a.head[g]=d>=p?d-p:0;while(--E);E=p,g=E;do d=a.prev[--g],a.prev[g]=d>=p?d-p:0;while(--E);b+=p}if(a.strm.avail_in===0)break;if(E=Cu(a.strm,a.window,a.strstart+a.lookahead,b),a.lookahead+=E,a.lookahead+a.insert>=K)for(T=a.strstart-a.insert,a.ins_h=a.window[T],a.ins_h=Ue(a,a.ins_h,a.window[T+1]);a.insert&&(a.ins_h=Ue(a,a.ins_h,a.window[T+K-1]),a.prev[T&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=T,T++,a.insert--,!(a.lookahead+a.insert<K)););}while(a.lookahead<se&&a.strm.avail_in!==0)},Iu=(a,p)=>{let g=65535;for(g>a.pending_buf_size-5&&(g=a.pending_buf_size-5);;){if(a.lookahead<=1){if(as(a),a.lookahead===0&&p===rs)return ft;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let E=a.block_start+g;if((a.strstart===0||a.strstart>=E)&&(a.lookahead=a.strstart-E,a.strstart=E,vt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-se&&(vt(a,!1),a.strm.avail_out===0))return ft}return a.insert=0,p===De?(vt(a,!0),a.strm.avail_out===0?os:Ts):(a.strstart>a.block_start&&(vt(a,!1),a.strm.avail_out===0),ft)},Ir=(a,p)=>{let g,E;for(;;){if(a.lookahead<se){if(as(a),a.lookahead<se&&p===rs)return ft;if(a.lookahead===0)break}if(g=0,a.lookahead>=K&&(a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+K-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),g!==0&&a.strstart-g<=a.w_size-se&&(a.match_length=Uo(a,g)),a.match_length>=K)if(E=ke(a,a.strstart-a.match_start,a.match_length-K),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=K){a.match_length--;do a.strstart++,a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+K-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+1]);else E=ke(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(E&&(vt(a,!1),a.strm.avail_out===0))return ft}return a.insert=a.strstart<K-1?a.strstart:K-1,p===De?(vt(a,!0),a.strm.avail_out===0?os:Ts):a.last_lit&&(vt(a,!1),a.strm.avail_out===0)?ft:Ks},As=(a,p)=>{let g,E,d;for(;;){if(a.lookahead<se){if(as(a),a.lookahead<se&&p===rs)return ft;if(a.lookahead===0)break}if(g=0,a.lookahead>=K&&(a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+K-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=K-1,g!==0&&a.prev_length<a.max_lazy_match&&a.strstart-g<=a.w_size-se&&(a.match_length=Uo(a,g),a.match_length<=5&&(a.strategy===pu||a.match_length===K&&a.strstart-a.match_start>4096)&&(a.match_length=K-1)),a.prev_length>=K&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-K,E=ke(a,a.strstart-1-a.prev_match,a.prev_length-K),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+K-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=K-1,a.strstart++,E&&(vt(a,!1),a.strm.avail_out===0))return ft}else if(a.match_available){if(E=ke(a,0,a.window[a.strstart-1]),E&&vt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return ft}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(E=ke(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<K-1?a.strstart:K-1,p===De?(vt(a,!0),a.strm.avail_out===0?os:Ts):a.last_lit&&(vt(a,!1),a.strm.avail_out===0)?ft:Ks},Pu=(a,p)=>{let g,E,d,b,T=a.window;for(;;){if(a.lookahead<=xe){if(as(a),a.lookahead<=xe&&p===rs)return ft;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=K&&a.strstart>0&&(d=a.strstart-1,E=T[d],E===T[++d]&&E===T[++d]&&E===T[++d])){b=a.strstart+xe;do;while(E===T[++d]&&E===T[++d]&&E===T[++d]&&E===T[++d]&&E===T[++d]&&E===T[++d]&&E===T[++d]&&E===T[++d]&&d<b);a.match_length=xe-(b-d),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=K?(g=ke(a,1,a.match_length-K),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(g=ke(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),g&&(vt(a,!1),a.strm.avail_out===0))return ft}return a.insert=0,p===De?(vt(a,!0),a.strm.avail_out===0?os:Ts):a.last_lit&&(vt(a,!1),a.strm.avail_out===0)?ft:Ks},Ou=(a,p)=>{let g;for(;;){if(a.lookahead===0&&(as(a),a.lookahead===0)){if(p===rs)return ft;break}if(a.match_length=0,g=ke(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,g&&(vt(a,!1),a.strm.avail_out===0))return ft}return a.insert=0,p===De?(vt(a,!0),a.strm.avail_out===0?os:Ts):a.last_lit&&(vt(a,!1),a.strm.avail_out===0)?ft:Ks};function ae(a,p,g,E,d){this.good_length=a,this.max_lazy=p,this.nice_length=g,this.max_chain=E,this.func=d}let Qs=[new ae(0,0,0,0,Iu),new ae(4,4,8,4,Ir),new ae(4,5,16,8,Ir),new ae(4,6,32,32,Ir),new ae(4,4,16,16,As),new ae(8,16,32,32,As),new ae(8,16,128,128,As),new ae(8,32,128,256,As),new ae(32,128,258,1024,As),new ae(32,258,258,4096,As)],Nu=a=>{a.window_size=2*a.w_size,Ve(a.head),a.max_lazy_match=Qs[a.level].max_lazy,a.good_match=Qs[a.level].good_length,a.nice_match=Qs[a.level].nice_length,a.max_chain_length=Qs[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=K-1,a.match_available=0,a.ins_h=0};function Mu(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Mi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Tu*2),this.dyn_dtree=new Uint16Array((2*_u+1)*2),this.bl_tree=new Uint16Array((2*wu+1)*2),Ve(this.dyn_ltree),Ve(this.dyn_dtree),Ve(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Au+1),this.heap=new Uint16Array(2*Rr+1),Ve(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Rr+1),Ve(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let jo=a=>{if(!a||!a.state)return Le(a,Xt);a.total_in=a.total_out=0,a.data_type=yu;let p=a.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?ki:ns,a.adler=p.wrap===2?0:1,p.last_flush=rs,nu(p),oe},Ho=a=>{let p=jo(a);return p===oe&&Nu(a.state),p},ku=(a,p)=>!a||!a.state||a.state.wrap!==2?Xt:(a.state.gzhead=p,oe),Bo=(a,p,g,E,d,b)=>{if(!a)return Xt;let T=1;if(p===du&&(p=6),E<0?(T=0,E=-E):E>15&&(T=2,E-=16),d<1||d>Eu||g!==Mi||E<8||E>15||p<0||p>9||b<0||b>gu)return Le(a,Xt);E===8&&(E=9);let R=new Mu;return a.state=R,R.strm=a,R.wrap=T,R.gzhead=null,R.w_bits=E,R.w_size=1<<R.w_bits,R.w_mask=R.w_size-1,R.hash_bits=d+7,R.hash_size=1<<R.hash_bits,R.hash_mask=R.hash_size-1,R.hash_shift=~~((R.hash_bits+K-1)/K),R.window=new Uint8Array(R.w_size*2),R.head=new Uint16Array(R.hash_size),R.prev=new Uint16Array(R.w_size),R.lit_bufsize=1<<d+6,R.pending_buf_size=R.lit_bufsize*4,R.pending_buf=new Uint8Array(R.pending_buf_size),R.d_buf=1*R.lit_bufsize,R.l_buf=3*R.lit_bufsize,R.level=p,R.strategy=b,R.method=g,Ho(a)},Du=(a,p)=>Bo(a,p,Mi,Su,vu,mu),xu=(a,p)=>{let g,E;if(!a||!a.state||p>xo||p<0)return a?Le(a,Xt):Xt;let d=a.state;if(!a.output||!a.input&&a.avail_in!==0||d.status===Xs&&p!==De)return Le(a,a.avail_out===0?br:Xt);d.strm=a;let b=d.last_flush;if(d.last_flush=p,d.status===ki)if(d.wrap===2)a.adler=0,Z(d,31),Z(d,139),Z(d,8),d.gzhead?(Z(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),Z(d,d.gzhead.time&255),Z(d,d.gzhead.time>>8&255),Z(d,d.gzhead.time>>16&255),Z(d,d.gzhead.time>>24&255),Z(d,d.level===9?2:d.strategy>=Ni||d.level<2?4:0),Z(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(Z(d,d.gzhead.extra.length&255),Z(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(a.adler=Me(a.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=Cr):(Z(d,0),Z(d,0),Z(d,0),Z(d,0),Z(d,0),Z(d,d.level===9?2:d.strategy>=Ni||d.level<2?4:0),Z(d,Ru),d.status=ns);else{let T=Mi+(d.w_bits-8<<4)<<8,R=-1;d.strategy>=Ni||d.level<2?R=0:d.level<6?R=1:d.level===6?R=2:R=3,T|=R<<6,d.strstart!==0&&(T|=bu),T+=31-T%31,d.status=ns,Js(d,T),d.strstart!==0&&(Js(d,a.adler>>>16),Js(d,a.adler&65535)),a.adler=1}if(d.status===Cr)if(d.gzhead.extra){for(g=d.pending;d.gzindex<(d.gzhead.extra.length&65535)&&!(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=Me(a.adler,d.pending_buf,d.pending-g,g)),je(a),g=d.pending,d.pending===d.pending_buf_size));)Z(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>g&&(a.adler=Me(a.adler,d.pending_buf,d.pending-g,g)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=Di)}else d.status=Di;if(d.status===Di)if(d.gzhead.name){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=Me(a.adler,d.pending_buf,d.pending-g,g)),je(a),g=d.pending,d.pending===d.pending_buf_size)){E=1;break}d.gzindex<d.gzhead.name.length?E=d.gzhead.name.charCodeAt(d.gzindex++)&255:E=0,Z(d,E)}while(E!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=Me(a.adler,d.pending_buf,d.pending-g,g)),E===0&&(d.gzindex=0,d.status=xi)}else d.status=xi;if(d.status===xi)if(d.gzhead.comment){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=Me(a.adler,d.pending_buf,d.pending-g,g)),je(a),g=d.pending,d.pending===d.pending_buf_size)){E=1;break}d.gzindex<d.gzhead.comment.length?E=d.gzhead.comment.charCodeAt(d.gzindex++)&255:E=0,Z(d,E)}while(E!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=Me(a.adler,d.pending_buf,d.pending-g,g)),E===0&&(d.status=Li)}else d.status=Li;if(d.status===Li&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&je(a),d.pending+2<=d.pending_buf_size&&(Z(d,a.adler&255),Z(d,a.adler>>8&255),a.adler=0,d.status=ns)):d.status=ns),d.pending!==0){if(je(a),a.avail_out===0)return d.last_flush=-1,oe}else if(a.avail_in===0&&Vo(p)<=Vo(b)&&p!==De)return Le(a,br);if(d.status===Xs&&a.avail_in!==0)return Le(a,br);if(a.avail_in!==0||d.lookahead!==0||p!==rs&&d.status!==Xs){let T=d.strategy===Ni?Ou(d,p):d.strategy===fu?Pu(d,p):Qs[d.level].func(d,p);if((T===os||T===Ts)&&(d.status=Xs),T===ft||T===os)return a.avail_out===0&&(d.last_flush=-1),oe;if(T===Ks&&(p===lu?cu(d):p!==xo&&(ou(d,0,0,!1),p===hu&&(Ve(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),je(a),a.avail_out===0))return d.last_flush=-1,oe}return p!==De?oe:d.wrap<=0?Lo:(d.wrap===2?(Z(d,a.adler&255),Z(d,a.adler>>8&255),Z(d,a.adler>>16&255),Z(d,a.adler>>24&255),Z(d,a.total_in&255),Z(d,a.total_in>>8&255),Z(d,a.total_in>>16&255),Z(d,a.total_in>>24&255)):(Js(d,a.adler>>>16),Js(d,a.adler&65535)),je(a),d.wrap>0&&(d.wrap=-d.wrap),d.pending!==0?oe:Lo)},Lu=a=>{if(!a||!a.state)return Xt;let p=a.state.status;return p!==ki&&p!==Cr&&p!==Di&&p!==xi&&p!==Li&&p!==ns&&p!==Xs?Le(a,Xt):(a.state=null,p===ns?Le(a,uu):oe)},Vu=(a,p)=>{let g=p.length;if(!a||!a.state)return Xt;let E=a.state,d=E.wrap;if(d===2||d===1&&E.status!==ki||E.lookahead)return Xt;if(d===1&&(a.adler=ko(a.adler,p,g,0)),E.wrap=0,g>=E.w_size){d===0&&(Ve(E.head),E.strstart=0,E.block_start=0,E.insert=0);let J=new Uint8Array(E.w_size);J.set(p.subarray(g-E.w_size,g),0),p=J,g=E.w_size}let b=a.avail_in,T=a.next_in,R=a.input;for(a.avail_in=g,a.next_in=0,a.input=p,as(E);E.lookahead>=K;){let J=E.strstart,F=E.lookahead-(K-1);do E.ins_h=Ue(E,E.ins_h,E.window[J+K-1]),E.prev[J&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=J,J++;while(--F);E.strstart=J,E.lookahead=K-1,as(E)}return E.strstart+=E.lookahead,E.block_start=E.strstart,E.insert=E.lookahead,E.lookahead=0,E.match_length=E.prev_length=K-1,E.match_available=0,a.next_in=T,a.input=R,a.avail_in=b,E.wrap=d,oe};var Uu=Du,ju=Bo,Hu=Ho,Bu=jo,Fu=ku,$u=xu,zu=Lu,Gu=Vu,qu="pako deflate (from Nodeca project)",Zs={deflateInit:Uu,deflateInit2:ju,deflateReset:Hu,deflateResetKeep:Bu,deflateSetHeader:Fu,deflate:$u,deflateEnd:zu,deflateSetDictionary:Gu,deflateInfo:qu};let Wu=(a,p)=>Object.prototype.hasOwnProperty.call(a,p);var Yu=function(a){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let g=p.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(let E in g)Wu(g,E)&&(a[E]=g[E])}}return a},Xu=a=>{let p=0;for(let E=0,d=a.length;E<d;E++)p+=a[E].length;let g=new Uint8Array(p);for(let E=0,d=0,b=a.length;E<b;E++){let T=a[E];g.set(T,d),d+=T.length}return g},Fo={assign:Yu,flattenChunks:Xu};let $o=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{$o=!1}let ti=new Uint8Array(256);for(let a=0;a<256;a++)ti[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;ti[254]=ti[254]=1;var Ku=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let p,g,E,d,b,T=a.length,R=0;for(d=0;d<T;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<T&&(E=a.charCodeAt(d+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),d++)),R+=g<128?1:g<2048?2:g<65536?3:4;for(p=new Uint8Array(R),b=0,d=0;b<R;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<T&&(E=a.charCodeAt(d+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),d++)),g<128?p[b++]=g:g<2048?(p[b++]=192|g>>>6,p[b++]=128|g&63):g<65536?(p[b++]=224|g>>>12,p[b++]=128|g>>>6&63,p[b++]=128|g&63):(p[b++]=240|g>>>18,p[b++]=128|g>>>12&63,p[b++]=128|g>>>6&63,p[b++]=128|g&63);return p};let zo=(a,p=a.length)=>{if(p<65534&&a.subarray&&$o)return String.fromCharCode.apply(null,a.length===p?a:a.subarray(0,p));let g="";for(let E=0;E<p;E++)g+=String.fromCharCode(a[E]);return g};var Ju=(a,p)=>{let g=p||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,p));let E,d,b=new Array(g*2);for(d=0,E=0;E<g;){let T=a[E++];if(T<128){b[d++]=T;continue}let R=ti[T];if(R>4){b[d++]=65533,E+=R-1;continue}for(T&=R===2?31:R===3?15:7;R>1&&E<g;)T=T<<6|a[E++]&63,R--;if(R>1){b[d++]=65533;continue}T<65536?b[d++]=T:(T-=65536,b[d++]=55296|T>>10&1023,b[d++]=56320|T&1023)}return zo(b,d)},Qu=(a,p)=>{p=p||a.length,p>a.length&&(p=a.length);let g=p-1;for(;g>=0&&(a[g]&192)===128;)g--;return g<0||g===0?p:g+ti[a[g]]>p?g:p},Go={string2buf:Ku,buf2string:Ju,utf8border:Qu};function Zu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var td=Zu;let qo=Object.prototype.toString,{Z_NO_FLUSH:ed,Z_SYNC_FLUSH:sd,Z_FULL_FLUSH:id,Z_FINISH:rd,Z_OK:Vi,Z_STREAM_END:nd,Z_DEFAULT_COMPRESSION:od,Z_DEFAULT_STRATEGY:ad,Z_DEFLATED:cd}=Do;function Ui(a){this.options=Fo.assign({level:od,method:cd,chunkSize:16384,windowBits:15,memLevel:8,strategy:ad},a||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new td,this.strm.avail_out=0;let g=Zs.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(g!==Vi)throw new Error(Oi[g]);if(p.header&&Zs.deflateSetHeader(this.strm,p.header),p.dictionary){let E;if(typeof p.dictionary=="string"?E=Go.string2buf(p.dictionary):qo.call(p.dictionary)==="[object ArrayBuffer]"?E=new Uint8Array(p.dictionary):E=p.dictionary,g=Zs.deflateSetDictionary(this.strm,E),g!==Vi)throw new Error(Oi[g]);this._dict_set=!0}}Ui.prototype.push=function(a,p){let g=this.strm,E=this.options.chunkSize,d,b;if(this.ended)return!1;for(p===~~p?b=p:b=p===!0?rd:ed,typeof a=="string"?g.input=Go.string2buf(a):qo.call(a)==="[object ArrayBuffer]"?g.input=new Uint8Array(a):g.input=a,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(E),g.next_out=0,g.avail_out=E),(b===sd||b===id)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(d=Zs.deflate(g,b),d===nd)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),d=Zs.deflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===Vi;if(g.avail_out===0){this.onData(g.output);continue}if(b>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},Ui.prototype.onData=function(a){this.chunks.push(a)},Ui.prototype.onEnd=function(a){a===Vi&&(this.result=Fo.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function ld(a,p){p=p||{};let g=new Ui(p);if(g.push(a,!0),g.err)throw g.msg||Oi[g.err];return g.result}function hd(a,p){return p=p||{},p.gzip=!0,ld(a,p)}return(a,p,g)=>{let E=hd(a);return p==="base64"?E=btoa(zo(E)):E=E.buffer,g&&g(E),E}}var TE=(()=>{class s extends Lc{constructor(t){super(t),this.algorithm=ur.GZIP,this.Vg=Ka(),this.Sb=(i,n,o)=>{let c=this.Vg(i,n);o(c)},this.compress=Ja(),typeof CompressionStream!="undefined"&&cE||(this.compress=this.Sb,this.getCompressorSourceCode=()=>Ka.toString())}compressSync(t,e){return this.Vg(t,e)}getCompressorSourceCode(){return Ja.toString()}}return s})();function Ja(){let s=r=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([r]))});return(r,t,e)=>{let i=new Response(r).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();if(t==="base64"){n.then(o=>s(o)).then(o=>e(o));return}n.then(o=>e(o))}}var AE=(()=>{class s extends Lc{constructor(){super(...arguments),this.algorithm=ur.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),nh=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!_E.isCompressionEnabled()?new AE(t):this.instance=new TE(t)}}return s})(),oh=["setEncryptionSelectors"],vr=["setPIISelectors"],yo=["setCapturedElementsSelector"],bE=(()=>{class s{constructor(t,e,i,n,o,c,l){this.S=t,this.E=e,this.lt=i,this.Ee=n,this.Bt=o,this.ot=c,this.wr=l}init(){var t,e;this.wr&&this.ot&&((t=this.wr)===null||t===void 0||t.addSelector((e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ht()}onStartTracking(t){this.Ee.start(),this.S.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.Ee.stop(),this.S.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.Ee.start(),this.S.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.Ee.stop(),this.S.emitSensitiveStatusChange()}onOptout(){this.Ee.stop(),this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.S.emitSensitiveStatusChange()}ht(){this.E.register(vr,t=>{this.lt.setMaskedElementSettingsFromCommand(t),this.S.emitSensitiveStatusChange()}),this.E.register(yo,t=>{this.Bt.setWhitelistedElementsSelector(t),this.S.emitSensitiveStatusChange()}),this.E.register(oh,t=>{var e,i;(e=this.ot)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.wr)===null||i===void 0||i.addSelector(t)})}}return s})();var Eo=(()=>{class s extends mt{constructor(t,e,i,n,o,c){super(),this.le=t,this.lt=e,this.Bt=i,this.wr=n,this.Tr=o,this.it=c}onStart(){var t,e,i;this.Bt.start(),this.le.setMaskedElementSettings(this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.le.startIdentifier(),(e=this.wr)===null||e===void 0||e.start(),(i=this.Tr)===null||i===void 0||i.start()}onStop(){var t,e;this.Bt.stop(),this.le.stopIdentifier(),(t=this.wr)===null||t===void 0||t.stop(),(e=this.Tr)===null||e===void 0||e.stop()}}return s})(),RE=(()=>{class s{constructor(t,e,i,n,o){this.it=t,this.lt=e,this.Ee=i,this.Bt=n,this.ot=o}getSensitiveStatus(){var t,e;return{started:this.Ee.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Bt.getWhitelistedElementsSelector(),maskedElementSettings:this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.Ee.isStarted,i=this.it.shouldUseAnonymization();return e?k.isMaskedElement(t)||k.isMaskedElementChild(t)?Nt.MASKED:Wc.shouldEncrypt(t)?Nt.ENCRYPTED:Ae.isEditableNode(t)?Nt.ANONYMIZED:i?he.isWhitelistedElement(t)?Nt.CAPTURED:Nt.ANONYMIZED:Nt.CAPTURED:Nt.ANONYMIZED}}return s})(),CE=(()=>{class s{constructor(t){this.G=t}onAfterVisitorRenewal(){this.G.renewSession()}}return s})(),Qa=(()=>{let s;return function(r){function t(u,m){for(let y of u)if(i(y,m))return!0;return!1}r.isUrlMatching=t;function e(u,m){if(G(m)){for(let y of u)if(i(y,m))return!0}else if(ui(m)){for(let y of u)if(i(y,csString(m)))return!0}return!1}r.isMatching=e;function i(u,m){let y=n(u,m);return u.negate?!y:y}function n(u,m){switch(u.rule_type==="date"&&(u.match_operation==="less_than"||u.match_operation==="greater_than")&&(m=(new csDate(m).valueOf()/1e3).toFixed(0)),u.match_operation){case"exact":switch(u.rule_type){case"string":return G(u.pattern)?csString.prototype.toLowerCase.call(m)===csString.prototype.toLowerCase.call(u.pattern):!1;case"boolean":return m===u.pattern||m===csString(u.pattern);case"number":return At(m)?Number(m)===Number(u.pattern):!1;default:return m===u.pattern}case"starts_with":return G(u.pattern)?csString.prototype.indexOf.call(m,u.pattern)===0:!1;case"ends_with":return G(u.pattern)?Si(m,u.pattern):!1;case"contains":return G(u.pattern)?csString.prototype.indexOf.call(m,u.pattern)!==-1:!1;case"regex":if(!G(u.pattern))return!1;try{return new csRegExp(u.pattern).test(m)}catch(y){return L.warn(`targeting.matchOperation.regex invalid ${y==null?void 0:y.message}`),!1}case"simple":return G(u.pattern)?f(m)===f(u.pattern):!1;case"greater_than":return Number(m)>Number(u.pattern);case"less_than":return Number(m)<Number(u.pattern);case"exact_date":{let y=Number(u.pattern);if(!Ut(y))return!1;let v=new csDate(y*1e3);return new csDate(m).toDateString()===v.toDateString()}case"exact_days_ago":return o(u,m);case"more_than_days_ago":return c(u,m);case"less_than_days_ago":return l(u,m);case"unknown":return h(m);default:return L.warn(`targeting.matchOperation.regex not managed operation ${u.match_operation}`),!1}}function o(u,m){let y=new csDate,v=y.setDate(y.getDate()-Number(u.pattern)),P=new csDate(v);return new csDate(m).toDateString()===P.toDateString()}function c(u,m){let y=Number(u.pattern);if(!Ut(y))return!1;let v=Number(y)+1,P=new csDate,N=new csDate(P);return N.setDate(P.getDate()-v),new csDate(m).getTime()<=N.getTime()}function l(u,m){let y=Number(u.pattern);if(!Ut(y))return!1;if(y===0)return o(u,m);let v=new csDate,P=new csDate(v);return P.setDate(v.getDate()-y),new csDate(m).getTime()>=P.getTime()}function h(u){return At(u)?G(u)?csString.prototype.trim.call(u)==="":ui(u)?u===!0:Ut(u)?u!==0:!1:!0}function f(u){let m=kt(u,"http://")||kt(u,"https://")?u:`https://${u}`,y=Kn(m);return y!==null?csString.prototype.replace.call(y.host,/^www./,""):u}}(s||(s={})),s})(),IE=(()=>{class s{constructor(){this.jg=[],this.Hg=[]}setTargetingRules(t){for(let e of t)e.component==="url"?csArray.prototype.push.call(this.jg,e):e.component==="trigger"&&csArray.prototype.push.call(this.Hg,e)}matchUrl(t){return Qa.isUrlMatching(this.jg,t)}matchTrigger(t){return Qa.isMatching(this.Hg,t)}}return s})(),PE=(()=>{class s extends mt{constructor(t,e,i){super(),this.Ba=t,this.zh=e,this.A=i}init(){this.Gh=new IE,this.Ba&&this.Gh.setTargetingRules(this.Ba)}onStart(){}checkInitialUrlTargetingRules(){let t=this.A.getAnonymizedUrl();this.qh(t,"url")&&this.zh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.qh(t,"url")&&this.zh()}onExternalEvent(t){this.isStarted&&this.qh(t.name,"trigger")&&this.zh()}qh(t,e){var i,n;return e==="url"&&G(t)&&(!((i=this.Gh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.Gh)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),OE=(()=>{class s{constructor(t,e,i,n,o,c){this.Ba=t,this.bb=e,this.S=i,this.wt=n,this.J=o,this.A=c}init(){this.Kn=new PE(this.Ba,this.bb,this.A),this.J.addListener(this.Kn),this.Kn.init()}start(){this.Kn.start()}stop(){this.Kn.stop()}checkInitialUrlTargetingRules(){this.Kn.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this.wt.getInitialCollectState();t===U.ANALYTICS_ONLY?this.S.emitCollectStateChange(U.ANALYTICS_ONLY_RULES_TARGETING,Ht.ETR_OFF):t===U.RECORDING_GLOBAL_SAMPLING&&this.S.emitCollectStateChange(U.RECORDING_RULES_TARGETING,Ht.ETR_OFF)}}return s})(),ah=["networkRequest:maskUrls"],ch=["networkRequest:maskUrls:reset"];var lh=":";function Za(s){let r=[],t=NE(s),e=csString.prototype.split.call(t,"/");for(let i of e)kt(i,lh)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function NE(s){let r=s;return kt(s,"/")&&(r=csString.prototype.substring.call(r,1)),Si(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var hh=(()=>{class s{constructor(){this.Fg=new Set,this.$g=[],this.Wh=new Set,this.Yh=[]}addUrlMaskingPattern(t){if(this.Fg.has(t))return;this.Fg.add(t);let e=Za(t);csArray.prototype.push.call(this.$g,e)}getUrlMaskingPatterns(){return this.$g}resetPartialUrlMaskingPatterns(){this.Wh.clear(),this.Yh=[]}addPartialUrlMaskingPattern(t){if(this.Wh.has(t))return;this.Wh.add(t);let e=Za(t);csArray.prototype.push.call(this.Yh,e)}getPartialUrlMaskingPatterns(){return this.Yh}}return s})();var ME=(()=>{class s{constructor(t,e,i){this.f=t,this.I=e,this.R=i,this.Qe=M.now()}resetStartTime(){this.Qe=M.now()}getSessionData(){let{projectId:t}=this.f,e=this.I.getVisitor();e==null&&L.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},o=this.R.getSession();o===null&&L.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:M.now()-this.Qe}}}return s})(),uh=["clearSession"],dh=["extendSession"];var kE=["getSessionData"],ph=["session:start:newVisitor"],DE=["session:clear:visitor"],xE=(()=>{class s{constructor(t,e,i,n){this.f=t,this.I=e,this.R=i,this.E=n}init(){this.Xh=new ME(this.f,this.I,this.R),this.E.register(uh,()=>this.R.removeSession()),this.E.register(dh,()=>this.R.extendSessionPeriodically(),{disableApplyPending:!0}),this.E.register(kE,()=>this.Xh.getSessionData(),{disableApplyPending:!0}),this.E.register(ph,()=>this.I.renewVisitor()),this.E.register(DE,()=>{this.I.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.I.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onBeforeArtificialPageView(){this.I.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onAfterNaturalPageView(){this.Xh.resetStartTime()}onAfterArtificialPageView(){this.Xh.resetStartTime()}onOptout(){this.I.removeVisitor(),this.R.removeSession()}onCollectStateChange(t){this.R.updateCollectState(t)}}return s})(),LE=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,u,m,y,v,P,N,_,S,C,O,A,H,Q,ot,xt,St,w,D,V,B,at,Pt,Bt,Ne,ws){this.yt=t,this.Fa=e,this.pe=i,this.I=n,this.R=o,this.G=c,this.xi=l,this.S=h,this.E=f,this.Kh=u,this.f=m,this.Jh=y,this.ti=v,this.Jn=P,this.Tt=N,this.M=_,this.Q=S,this.tt=C,this.A=O,this.Pb=A,this.J=H,this.pt=Q,this.vt=ot,this.zg=xt,this.se=St,this.Ob=w,this.O=D,this.de=V,this.N=B,this.bt=at,this.wt=Pt,this.lt=Bt,this.We=Ne,this.fs=ws,this.Nb=(Ft=!1)=>{let Wt=this.R.getSession();Wt===null?(this.Ar=new OE(this.f.recordTargetingRules,this.Gg,this.S,this.wt,this.J,this.A),this.Ar.init(),this.Ar.start()):(Wt.collectState===U.RECORDING_RULES_TARGETING||Wt.collectState===U.ANALYTICS_ONLY_RULES_TARGETING)&&this.Gg(Ft)},this.Gg=(Ft=!1)=>{this.br.onLoad(()=>{var Wt,Ee;(Wt=this.Ar)===null||Wt===void 0||Wt.emitTargetingCollectState(),(Ee=this.Ar)===null||Ee===void 0||Ee.stop(),this.S.emitStartTracking(Ft)}),this.Qn(Ft)},this.Qn=(Ft=!1)=>{this.ti.isActive()||(this.lt.init(),this.Qh.start(Ft),this.br.start())},this.Mb=()=>{this.S.emitBeforeSessionRenewal(),this.Rr(!0),this.S.emitAfterSessionRenewal()},this.kb=()=>{this.S.emitBeforeSessionRenewal(),this.wt.refreshQuota(Ft=>{Ft!==U.QUOTA_REACHED&&(this.Rr(!0),this.S.emitAfterSessionRenewal())})}}start(){if(this.Jh.init(),this.ti.init(),this.ti.isActive())return;let t,e,i,n,o,c,l,h,f,u,m,y,v,P,N,_,S,C,O;this.O.schedule(()=>{N=new CE(this.G),y=new Qc(this.Q),v=new zc(()=>{}),_=new Gc,O=new qc;let A=new Eo(v,this.lt,_,C,O,this.Zh());P=new RE(this.Zh(),this.lt,A,_,S);let H=new bE(this.S,this.E,this.lt,A,_,S,C);H.init(),this.S.addListener(H),t=new dm(this.f,this.Fa,this.I,this.Q,y,this.E,this.G,new Kc(L),this.pt,this.de,this.J,P,this.wl),e=new Pm(this.E,this.R,this.f,this.yt,this.pe,this.M),m=new SE(P,this.f);let Q=null;Q=new Jc(this.f),u=new ng(this.f,Q,m,P,this.pt),u.init();let ot=new Wm;i=new Fm(this.I,this.R,this.E,this.pt,Q,this.f,ot,m),n=new km(this.f,this.Fa,this.I,this.E,this.M,this.G,this.A);let xt;this.Qh=new sy(this.f,this.E,this.S,this.Fa,this.I,this.R,this.xi,this.Tt,this.vt,this.A,this.se,ot,this.J,this.We,xt),this.qg=new xE(this.f,this.I,this.R,this.E),this.f.tagDeploymentMode!=="CONTENTSQUARE"&&(o=new cg(this.f,this.R,this.A,this.E,this.Qn)),l=new qm(this.f,this.E,this.pe,this.Fa,this.J),h=new $m(this.E),f=new hg,this.br=new ol}),this.O.schedule(()=>{this.Jn.init()}),this.O.schedule(()=>{i.init()}),this.O.schedule(()=>{e.init()}),this.O.schedule(()=>{n.init()}),this.O.schedule(()=>{this.zg.init()}),this.O.schedule(()=>{this.Qh.init()}),this.O.schedule(()=>{this.qg.init()}),this.f.tagDeploymentMode!=="CONTENTSQUARE"&&this.O.schedule(()=>{o.init()}),this.O.schedule(()=>{l.init()}),this.O.schedule(()=>{this.Pb.init()}),this.O.schedule(()=>{h.init()}),this.O.schedule(()=>{f.init()}),this.O.schedule(()=>{this.Ob.init()}),this.O.schedule(()=>{this.S.addListener(this.qg),this.S.addListener(this.Kh),this.S.addListener(t),this.S.addListener(this.Jn),this.S.addListener(i),this.S.addListener(n),this.S.addListener(this.zg),this.S.addListener(this.Qh),this.f.tagDeploymentMode!=="CONTENTSQUARE"&&this.S.addListener(o),this.S.addListener(l),this.S.addListener(e),this.S.addListener(u),this.S.addListener(f),this.S.addListener(N)}),Fs.isRecordingSupported()&&this.O.schedule(()=>{let A=new EE(m,this.R,this.f,this.yt,this.E,this.M,this.G,v,this.Ge,this.Et,this.De,this._t,this.S,this.J,this.pt,this.se,this.de,this.tt,this.Un,this.Zh(),this.ar,S);A.init(),this.S.addListener(A),i.setRecordingService(A.recordingService)}),this.O.schedule(()=>{var A;let H,Q}),this.O.schedule(()=>{t.init()}),this.O.schedule(()=>{this.f.isQuotaEnabled()?this.G.onSessionExpired(()=>{this.kb()}):this.G.onSessionExpired(()=>{this.Mb()}),this.Rr()})}Rr(t=!1){var e,i,n;if(this.f.hasTargetingRules()){this.Nb(t),this.E.start(),(e=this.wl)===null||e===void 0||e.start(),this.Ar&&this.Ar.checkInitialUrlTargetingRules();return}this.E.start(),(i=this.wl)===null||i===void 0||i.start(),this.br.onLoad(()=>{this.S.emitStartTracking(t)}),(!gr(this.f)||t)&&this.Qn(t)}Zh(){if(this.it)return this.it;let t=new fr;return this.it=new Zn(this.f,this.A,t,this.Tt),this.it.init(),this.it.shouldUseAnonymization()&&q.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})(),VE=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.f=t,this.I=e,this.Xe=i,this.Wg=n,this.Db=o,this.xb=c,this.Lb=l,this.tu=h}compute(t){var e,i;this.f.crossDomainTracking&&!this.f.cookielessTrackingEnabled?this.f.crossDomainSingleIframeTracking?(e=this.Lb)===null||e===void 0||e.start(()=>this.eu(t)):(i=this.xb)===null||i===void 0||i.applyUpToDate(()=>this.eu(t)):this.eu(t)}eu(t){this.Db.handle(),this.Wg.clear(),this.Vb()?(this.Wg.restoreClearedVisitor(),t(!0)):(this.Xe.exclude(this.f),t(!1))}Vb(){let t=fe.boolean(this.f.sampleRate);return this.tu.isForceIncluded()||!this.Xe.isExcluded()&&this.I.doesVisitorExist()||!this.Xe.isExcluded()&&t}}return s})(),UE=(()=>{class s{constructor(t,e,i,n){this.f=t,this.ut=e,this.S=i,this.R=n,this.Ub=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.jb(),(t=this.R)===null||t===void 0||t.removeSession()),this.Hb(e),this.setVisitor(e)}jb(){return{id:nl.generate(),visitsCount:0,appliedTrackingDraw:this.f.lastTrackingDraw,creationTimestamp:Ko(),lastVisitTimestamp:0,hitTimestamp:0,expires:M.now()+this.f.visitorCookieTimeout,allowSubdomains:this.f.allowSubdomains,identityPrint:null}}Hb(t){let e=Ko();this.R&&!this.R.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.f.lastTrackingDraw,this.Yg=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.ut.get()}setVisitor(t){this.ut.set(t)}doesVisitorExist(){return this.ut.get()!==null}resetVisitor(){this.Xg(),this.S.emitAfterVisitorCleared()}removeVisitor(){this.ut.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.f.allowSubdomains:!1}handleSubdomainChange(){this.ut.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.Yg===void 0?!1:t.visitsCount!==this.Yg}Bb(){return!tt(this.Kg)||M.now()-this.Kg>this.Ub}renewVisitor(){this.Bb()?(this.Kg=M.now(),this.Xg(),this.S.emitAfterVisitorRenewal()):L.warn("session:start:newVisitor is trying to renew visitor under time limit")}Xg(){this.S.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),ie="_cs_s",Nn=18e5,Kr=".",jE=13,Gi=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),HE=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i,this.ie=null,this.su=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?Bc(e):null}getRawSession(t){if(t){let f=this.iu();return gn(f)}let{sessionString:e,status:i}=this.Fb(),n=gn(e);if(i!==Gi.EXPIRED)return n;if(this.f.cookielessTrackingEnabled)return null;let o=this.iu();if(!o)return null;let c=csString.prototype.split.call(o,Kr);if(!s.Jg(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.$b(h),n}onCookieToSet(t){this.fi=t}onCookieToRemove(t){this.gi=t}set(t,e=Nn){var i;let n=M.now()+e,o=Cf(t);o+=`${Kr}${n}`,this.zb(o,n),this.f.cookielessTrackingEnabled?this.X.setItem(ie,o):(this.N.set(ie,o,e),(i=this.fi)===null||i===void 0||i.call(this,ie,o,e))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(ie):(this.N.delete(ie),(t=this.gi)===null||t===void 0||t.call(this,ie)),this.Gb()}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.f.allowSubdomains?this.N.delete(ie,hr.CURRENT_DOMAIN):this.N.delete(ie,this.N.getRootDomain()),this.set(t))}isValid(t){return t!==null&&Qn(t)}zb(t,e){this.ie={sessionString:t,expires:e}}Fb(){return this.ie?this.ie&&M.now()<=this.ie.expires?{sessionString:this.ie.sessionString,status:Gi.FOUND}:{sessionString:this.ie.sessionString,status:Gi.EXPIRED}:{sessionString:this.iu(),status:Gi.NOT_FOUND}}Gb(){this.ie=null}$b(t){this.ie&&(this.ie.expires=t,this.su=!0)}isCacheRefreshed(){return this.su}resetCacheRefreshed(){this.su=!1}iu(){if(this.f.cookielessTrackingEnabled){let e=this.X.getItem(ie);return!e||this.Qg(e)?null:e}let t=this.N.get(ie);return!t||this.Qg(t)?null:t}Qg(t){let e=csString.prototype.split.call(t,Kr);if(!s.Jg(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&M.now()>i}static Jg(t){return t[t.length-1].length===jE}}return s})(),So=60*1e3,BE=60*So,FE=4*BE-So,Is=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),$E=(()=>{class s{constructor(t,e,i,n,o){this.ke=t,this.wt=e,this.S=i,this.qb=n,this.Wb=o,this.Zn=null,this.ru=0,this.to=Is.NO}setDynamicVariablesService(t){this.Yb=t}createOrUpdateSession(){this.nu(),this.Xb=M.now(),this.ru=0;let t=this.Zg();t===null?(t=this.Kb(),this.$a(t),this.S.emitSessionCreated()):(t=this.wt.sanitizeSessionCollectState(t),this.Jb(t),t.collectState=this.wt.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.wt.getInitialCollectState(),t.collectState=this.wt.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.to=Is.GRANTED}withdrawnReplayRecording(t){t.collectState=this.wt.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.to=Is.WITHDRAWN}$a(t){this.to===Is.WITHDRAWN?(t.collectState=this.wt.getRecordingConsentWithdrawn(),this.setSession(t)):this.to===Is.GRANTED?t.collectState=this.wt.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.wt.computeInitialCollectState(t),this.to=Is.NO}Kb(){return{pageNumber:1,collectState:this.wt.getInitialCollectState(),replayConsent:this.qb?fn.NOT_EXPRESSED:fn.UNNECESSARY,etrStatus:Jt.ETR_NOT_SAVED_SESSION}}Jb(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.wt.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===U.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.ke.get()}Zg(){return this.ke.get(!0)}doesSessionExist(){return this.ke.get()!==null}setSession(t){this.ke.set(t),this.S.emitSessionRefreshed()}refreshSession(){let t=this.Zg();t&&this.setSession(t)}removeSession(){this.ke.remove(),this.S.emitSessionRemoved()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==U.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===U.RECORDING_RULES_TARGETING?U.RECORDING_GLOBAL_SAMPLING:t.collectState),this.Wb&&csArray.prototype.push.call(e,U.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.ke.getRawSession();return this.ke.isValid(t)}handleSubdomainChange(){this.ke.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.ke.isCacheRefreshed();return e&&t&&this.ke.resetCacheRefreshed(),e}extendSessionPeriodically(){this.Zn||this.tm()}extendSession(){let t=this.getSession();return t===null?(L.warn("extendSession is trying to extend an expired session"),this.nu(),!1):(this.setSession(t),!0)}tm(){if(this.Qb()){this.nu();return}this.extendSession()&&(this.Zb(),this.tR())}tR(){this.Zn=window.csSetTimeout(()=>{this.tm()},Nn-So)}Qb(){return FE-(M.now()+Nn-this.Xb)<0}nu(){this.Zn&&(window.csClearTimeout(this.Zn),this.Zn=null)}Zb(){this.ru+=1,this.Yb.trackDynamicVariable("session_expiry_update",this.ru)}}return s})(),zE=(()=>{class s{constructor(t,e,i){this.f=t,this.I=e,this.Xe=i}clear(){this.eR()&&(this.em=this.I.getVisitor(),this.I.removeVisitor()),this.sR()&&this.Xe.removeExclusion()}eR(){return this.I.doesVisitorExist()&&this.I.getVisitor().appliedTrackingDraw!==this.f.lastTrackingDraw}sR(){return this.Xe.getAppliedTrackingDraw()!==this.f.lastTrackingDraw}restoreClearedVisitor(){this.em&&this.I.setVisitor(this.em)}}return s})(),GE=(()=>{class s{constructor(t,e,i){this.I=t,this.R=e,this.iR=i}handle(){this.I.hasAllowSubdomainsChanged()&&(this.I.handleSubdomainChange(),this.R.handleSubdomainChange(),this.iR.handleSubdomainChange())}}return s})(),We="_cs_c",hs=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),qE=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.bt=i}get(){let t;return this.f.cookielessTrackingEnabled?t=this.bt.getItem(We):t=this.N.get(We),t===null?t:Number(t)}set(t){this.f.cookielessTrackingEnabled?this.bt.setItem(We,csString(t)):this.N.set(We,csString(t),jn)}remove(){this.f.cookielessTrackingEnabled?this.bt.removeItem(We):this.N.delete(We)}handleSubdomainChange(){this.f.cookielessTrackingEnabled||(this.f.allowSubdomains?this.N.delete(We,hr.CURRENT_DOMAIN):this.N.delete(We,this.N.getRootDomain()))}}return s})(),WE=(()=>{class s{constructor(t,e,i){this.f=t,this.R=e,this.S=i}grantReplayConsent(){if(!Ze.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.grantReplayRecordingBeforeSessionStart();return}Ze.isRecordingBlockedByConsent(t)&&(this.R.grantReplayRecording(t),this.S.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!Ze.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.withdrawnReplayRecordingBeforeSessionStart();return}Ze.isRecordingWithDrawn(t)||(this.R.withdrawnReplayRecording(t),this.S.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),fh=["replay:consent:unanonymized:granted","trackConsentGranted"],gh=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],mh=["replay:consent:startForSession:granted"],yh=["replay:consent:startForSession:withdrawn"],YE=(()=>{class s{constructor(t,e,i,n,o){this.f=t,this.E=e,this.Tt=i,this.R=n,this.S=o}init(){this.sm=new WE(this.f,this.R,this.S),this.Tt.setInitialConsent(),this.ht()}ht(){this.E.register(fh,()=>{this.Tt.grantReplayAnonymizationConsent()}),this.E.register(gh,()=>{this.Tt.withdrawReplayAnonymizationConsent()}),this.E.register(mh,()=>{this.sm.grantReplayConsent()}),this.E.register(yh,()=>{this.sm.withdrawReplayConsent()})}onOptout(){this.Tt.removeAllConsents()}onBeforeVisitorRenewal(){this.Tt.removeAllConsents()}onAfterVisitorRenewal(){this.Tt.setInitialConsent()}onAfterVisitorCleared(){this.Tt.setInitialConsent()}}return s})(),XE=(()=>{class s{constructor(t,e,i){this.f=t,this.ut=e,this.S=i}setInitialConsent(){let t=this.ut.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.f.consentRequired;return e&&t===hs.NOT_REQUIRED||!e&&t!==hs.NOT_REQUIRED}handleSubdomainChange(){this.ut.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.f.consentRequired?hs.NOT_EXPRESSED:hs.NOT_REQUIRED;this.ut.set(t)}grantReplayAnonymizationConsent(){this.f.consentRequired&&(this.ut.set(hs.GRANTED),this.S.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.f.consentRequired&&(this.ut.set(hs.WITHDRAWN),this.S.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.ut.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.f.consentRequired||this.ut.get()===hs.GRANTED}getRequestParameters(){return{uc:`${this.ut.get()}`}}}return s})(),KE=(()=>{class s{constructor(t,e,i,n,o,c,l){this.S=t,this.E=e,this.Kh=i,this.Jh=n,this.ti=o,this.rR=c,this.Jn=l}start(){this.S.addListener(this.rR),this.S.addListener(this.Jn),this.S.addListener(this.Kh),this.Jn.init(),this.Jh.init(),this.ti.init(),!this.ti.isActive()&&this.E.start()}}return s})(),JE=(()=>{class s{constructor(t,e){this.Ot=t,this.ut=e}exclude(t){this.ut.set(csString(t.lastTrackingDraw))}removeExclusion(){this.ut.remove()}isExcluded(){return this.nR()||this.oR()}nR(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.ut.get()}oR(){return csString.prototype.indexOf.call(this.Ot.href,Te)>0}}return s})(),QE=(()=>{class s{constructor(t){this.Mi=t}onOptout(){this.Mi.removeExclusion()}}return s})(),Jr=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),ZE=".^",tS=".*",Eh=(()=>{class s{constructor(t){this.A=t,this.ou=new csRegExp(`${ZE}`)}setExcludeUrlForSessionReplay(t){try{this.ou=new csRegExp(t)}catch{L.warn(`excludeURLforReplay - invalid regex '${t}'`),this.ou=new csRegExp(`${tS}`)}}im(){return this.ou.test(this.A.getAnonymizedUrl())?Jr.SessionReplay:Jr.None}isUrlExcludedForSessionReplay(){return this.im()===Jr.SessionReplay}getRequestParameters(){return{ex:this.im()}}}return s})(),eS=["excludeURLforReplay"],Sh=(()=>{class s{constructor(t,e){this.Mi=t,this.E=e}init(){this.E.register(eS,t=>{if(G(t))this.Mi.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay")})}}return s})(),Qr="_cs_inc",sS=(()=>{class s{constructor(t,e){this.Ot=t,this.N=e}isForceIncluded(){return this.aR()||this.cR()}isForceReplayRecorded(){return this.lR(U.RECORDING_GLOBAL_SAMPLING)}aR(){return this.N.get(Qr)!==null}lR(t){return this.N.get(Qr)===t}cR(){return csString.prototype.indexOf.call(this.Ot.href,Qr)>0}}return s})(),ri="_cs_optout",iS=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.bt=i}get(){return this.f.cookielessTrackingEnabled?this.bt.getItem(ri):this.N.get(ri)}set(t){this.f.cookielessTrackingEnabled?this.bt.setItem(ri,t):this.N.set(ri,t,jn)}}return s})(),tc="1",rS=(()=>{class s{constructor(t,e,i){this.S=t,this.Ot=e,this.ut=i}init(){!this.isActive()&&this.hR()&&this.activate()}isActive(){return this.ut.get()===tc}activate(){this.S.emitOptout(),this.ut.set(tc)}hR(){return csString.prototype.indexOf.call(this.Ot.href,ri)>0}}return s})(),vo=["optout"],vh=["optin"],nS=(()=>{class s{constructor(t,e){this.E=t,this.ti=e}init(){this.E.register(vo,()=>{this.ti.activate()})}}return s})();var oS=(()=>{class s{constructor(t,e){this.E=t,this.pt=e}init(){this.pt.addListener(this.E)}onOptout(){this.E.stop()}onBeforeSessionRenewal(){this.E.stop()}}return s})();var Mn=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),_h=(()=>{class s extends mt{constructor(t){super(),this.au=t,this.as={}}register(t,e,i){for(let n of t){let o=(...c)=>{try{let l=e(...c);return q.counters.commandApplied.count(n),l}catch(l){q.counters.commandMisuse.count(n),L.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${ss(l)?l.stack:l}`)}};this.as[n]={callback:o,configuration:i},this.as}}onStart(){this.dR(),this.pR()}onStop(){for(let t of this.au)window[t]=[]}applyFromIntegration(t,e,i){this.rm(t,e,`Commands.apply.from.integration: ${i}`),q.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.rm(t,e,`Commands.apply.from.implementation: ${i}`),q.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.fR(e.name,e.params,t.iframePath),q.counters.commandsFromIframe.count(e.name)}rm(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}L.tryToExecute(i,()=>{if(this.as[t])return this.as[t].callback(...e)})()}fR(t,e,i){L.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.as[t])return this.as[t].callback(...e)})()}dR(){for(let t of this.au)window[t].forEach(([e,...i])=>this.nm(e,i,!1))}pR(){for(let t of this.au)window[t]={push:([e,...i])=>this.nm(e,i,!0)}}nm(t,e,i){var n,o;if(this.as[t]){if(((n=this.as[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((o=this.as[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.as[t].callback(...e)}catch(l){q.counters.commandError.count(t),L.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})();var ec=(()=>{class s{constructor(t,e,i,n,o){this.f=t,this.I=e,this.R=i,this.gm=n,this.ii=o}getRequestParameters(){var t;let e={...Yn(),...this.f.getRequestParameters()},i=this.R.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.I.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.gm)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.gm.getSubProjectId()}`),this.vR(e),window.heap&&!this.f.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}vR(t){if(!this.ii)return;let e=this.ii.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})(),aS=(()=>{class s{constructor(t,e){this.E=t,this.ls=e}init(){this.E.register(["debugEvents"],t=>{typeof t=="boolean"&&this.ls.updateDynamicFields("emitDebugEvents",t)})}}return s})();function sc(s,r,t){if(!tt(r)&&!tt(t))return s.href;let e=tt(r)?wh(r):s.pathname,i=tt(t)?Th(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function wh(s){return kt(s,"/")?s:`/${s}`}function Th(s){return kt(s,"?")||s===""?s:`?${s}`}var Zr=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),Ah=(()=>{class s{constructor(t,e){this.Ot=t,this.tt=e,this._R=10}overridePath(t,e){if(t===""){this.Cr=void 0;return}let i=this.mm(e);i&&(this.du=i),this.Cr=e?this.ym(t,e):t}overrideQuery(t,e){let i=this.mm(e);i&&(this.pu=i),this.so=e?this.ym(t,e):t}computeOverriddenUrl(t){return this.wR(t)?this.getAnonymizedUrl():t}TR(t){return(typeof t=="string"||typeof t=="number")&&t in Zr}wR(t){let e=this.Co(this.Ot.href);return this.Co(t)===e}Co(t){return xp(t,"/")?csString.prototype.slice.call(t,0,-1):t}mm(t){return tt(t==null?void 0:t.lifespan)&&this.TR(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}AR(){return this.du&&this.du in Zr}bR(){return this.pu&&this.pu in Zr}cleanupOverrideLifespan(){this.AR()&&(this.Cr=void 0,this.du=void 0),this.bR()&&(this.so=void 0,this.pu=void 0)}getAnonymizedUrl(){let t=sc(this.Ot,this.Cr,this.so);return this.tt.anonymizeUrl(t)}getUrl(){return sc(this.Ot,this.Cr,this.so)}getAnonymizedPathAndQuery(){let t=tt(this.Cr)?wh(this.Cr):this.Ot.pathname,e=tt(this.so)?Th(this.so):this.Ot.search;return this.tt.anonymizeUrl(t+e)}getUrlProtocol(){return this.Ot.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}ym(t,e){return this.RR(e)?this.CR(t):this.IR(e)?this.PR(t):t}IR(t){return!!t.decodeURI}PR(t){return this.Em(t,1,!1)}RR(t){return!!t.decodeURIDeep}CR(t){return this.Em(t,this._R,!0)}Em(t,e,i){let n=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&L.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),_r=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),cS=(()=>{class s extends _r{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:z.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),hi="|iframe|",bh=(()=>{class s extends _r{constructor(t,e,i,n){super(),this.NR=t,this.MR=e,this.kR=i,this.DR=n}emitIframeEvent(t,e,i){if(this.xR(e)&&t===null){L.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case I.ChildLogMessage:this.LR(i);break;case I.AnalysisEvent:{let n=i,o=this.NR.transformEvent(t,n);o.isUserEvent?this.VR(o.event):this.UR(o.event);break}case I.RecordingEvent:{let n=i,o=this.DR.transformEvents(t,n);if(o.events.length===0)return;o.containsUserEvent?this.jR(o.events):this.HR(o.events);break}case I.JavascriptError:this.BR(i);break;case I.ApiError:this.FR(i);break;case I.DetailedApiError:this.$R(i);break;case I.CustomError:this.zR(i);break;case I.EmerchandisingMessage:{let n=this.kR.transformEvent(t,i);this.GR(n);break}case I.Commands:{let n=this.MR.transformEvent(t,i);this.qR(n);break}case I.IntegrationCallback:this.WR(i);break;case I.StaticResource:this.YR(i);break;case I.TrackingContextRequestMessage:this.XR(i);break;default:L.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}xR(t){let e=[I.AnalysisEvent,I.RecordingEvent,I.EmerchandisingMessage,I.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}LR(t){let{message:e,errorCode:i,level:n}=t;switch(n){case rt.debug:L.debug(e,i);break;case rt.warn:L.warn(e,!0,i);break;case rt.implementation:L.implementation(e,i);break;case rt.error:L.error(e,i);break;case rt.critical:L.critical(e,i);break}}VR(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}UR(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}jR(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}HR(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}BR(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}FR(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}$R(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}GR(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}qR(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}WR(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}YR(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}XR(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}zR(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),lS=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),_o=["setCustomVariable"],hS=(()=>{class s{constructor(t,e){this.E=t,this.vt=e}init(){this.E.register(_o,(t,e,i,n)=>{this.vt.set(t,e,i,n)})}onAfterArtificialPageView(){this.vt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.vt.deleteNextPageOnlyCustomVariables()}onOptout(){this.vt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.vt.removeCustomVariablesSession(),this.vt.removeCustomVariablesPage()}}return s})(),ic=512,rc=255,tn={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},uS=(()=>{class s{constructor(t,e){this.M=t,this.ut=e,this.Wt={},this.je={}}set(t,e,i,n){let o,c;if((Ut(t)||G(t))&&Number(t)>0&&At(e)&&At(i)&&!te(e)&&!te(i)&&this.KR(n)){let l=this.M.anonymizePII(csString(e)),h=this.M.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,ic),csString.prototype.slice.call(h,0,rc)],c=i!=="",!tt(n)||csArray.prototype.indexOf.call(tn.SESSION,n)>=0){let f=this.getCustomVariablesSession();c?f[t]=o:delete f[t],this.setCustomVariableSession(f)}(!tt(n)||csArray.prototype.indexOf.call(tn.PAGE,n)>=0)&&(c?this.Wt[t]=o:delete this.Wt[t]),tt(n)&&csArray.prototype.indexOf.call(tn.NEXT_PAGE_ONLY,n)>=0&&(c?this.je[t]=o:delete this.je[t])}else throw new Error(`Command misuse: ${_o[0]}`)}getCustomVariablesSession(){let t=this.ut.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&ne(e)?e:{}}setCustomVariableSession(t){this.ut.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.ut.remove()}removeCustomVariablesPage(){this.Wt={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.je)this.je.hasOwnProperty(i)&&(this.Wt[i]=this.je[i]);for(let i in this.Wt)this.Wt.hasOwnProperty(i)&&(t[i]=this.Wt[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.Sm(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.je).length>0)for(let t in this.je)this.je[t]===this.Wt[t]&&(delete this.Wt[t],delete this.je[t])}hasCustomVariablesPage(){return this.Wt&&!sn(this.Wt)}getCustomVariablesPage(){return this.Sm(this.Wt)}vm(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],o=n[0],c=n[1];(!pd(i,1,20)||o.length>ic||c.length>rc)&&delete t[e]}}Sm(t){this.vm(t);let e=sn(t)?[]:t;return window.csJSON.stringify(e)}KR(t){return!tt(t)||G(t)||Ut(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.je)this.je.hasOwnProperty(e)&&(this.Wt[e]=this.je[e]);for(let e in this.Wt)this.Wt.hasOwnProperty(e)&&(t[e]=this.Wt[e]);return this.vm(t),t}}return s})(),ce="_cs_id",dS=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i}onCookieToSet(t){this.fi=t}onCookieToRemove(t){this.gi=t}get(){let t;return this.f.cookielessTrackingEnabled?t=this.X.getItem(ce):t=this.N.get(ce),t?(wf(t)||L.warn(`Invalid visitor string: ${t}`),vf(t)):null}set(t){var e;let i=_f(t);if(this.f.cookielessTrackingEnabled)this.X.setItem(ce,i);else{let n=new csDate(t.expires);this.N.set(ce,i,n),(e=this.fi)===null||e===void 0||e.call(this,ce,i,n)}}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(ce):(this.N.delete(ce),(t=this.gi)===null||t===void 0||t.call(this,ce))}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.f.allowSubdomains,this.f.allowSubdomains?this.N.delete(ce,hr.CURRENT_DOMAIN):this.N.delete(ce,this.N.getRootDomain()),this.set(t))}}return s})(),pS=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],fS=1024,gS=1024,Rh=(()=>{class s{constructor(t,e){this.ft=t,this.f=e}getEventTargetPathAndHierarchy(t,e){let i=yt(t),n={isNodeSensitive(o){return k.isMaskedElement(o)||k.isMaskedElementChild(o)},isAttributeSensitive(o,c){return k.isMaskedAttribute(o,c)},allWhitelistedAttributes:Ic(this.f.whitelistedAttributes),attributeIgnoreTokens:pS,useAnonymization:e,attrMaxLength:gS,hierarchyMaxLength:fS};return this.ft.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPath(t){let e=yt(t);return this.ft.getElementPath(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=yt(t),{path:i,firstAnchorParent:n}=this.ft.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules}),o=this.JR(n)?n.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=yt(t);return this.ft.isValidElement(e)}getElementPath(t){return this.ft.getElementPath(t,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}JR(t){var e;return t!==null&&t.hasAttribute("href")&&!dn((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),Ch=(()=>{class s{constructor(t,e){this.Q=t,this.QR=e}transformEvent(t,e){this.ZR(t,e.event);let i=this.Q.getElementPath(t);return this.t0(i,e.event),e}ZR(t,e){if(jg(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+gt.windowOffsetX()),e.y=Math.round(i.top+e.y+gt.windowOffsetY())}}t0(t,e){al(e)&&(e.tgt=`${t}${hi}${e.tgt}`),Vg(e)&&(e.tgtHM=`${t}${hi}${e.tgtHM}`,this.QR||(e.tgtHMH=El(e.tgtHM))),Ug(e)&&(e.tgtLk=`${t}${hi}${e.tgtLk}`)}}return s})(),Ih=(()=>{class s{constructor(t){this.Q=t}transformEvent(t,e){let i=this.Q.getElementPath(t);return{iframePath:e.iframePath?`${i}${hi}${e.iframePath}`:i,commands:e.commands}}}return s})(),Ph=(()=>{class s{constructor(t){this.Q=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.Q.getElementPath(t),n=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${hi}${o.targetPath}`}));return{...e,products:n}}}return s})(),Oh=(()=>{class s{constructor(){this.e0={clientX:2,clientY:3},this.s0={clientX:1,clientY:2},this.i0=[x.POINTER_DOWN,x.POINTER_MOVE,x.POINTER_UP],this.r0=[x.TOUCH_START,x.TOUCH_MOVE,x.TOUCH_END]}transformEvents(t,e){if(!pt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==x.VISIBILITY_CHANGE),e.events.length===0||(L.warn(`IframeRecordingEventsTransformer received event ${I.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=it(t),n=null;csArray.prototype.some.call(e.events,c=>this._m(c)||this.wm(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this._m(c)?this.n0(n,c):this.wm(c)&&this.o0(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}o0(t,e){this.Tm(this.s0,t,e)}n0(t,e){this.Tm(this.e0,t,e)}Tm(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}_m(t){return csArray.prototype.indexOf.call(this.i0,t.type)!==-1}wm(t){return csArray.prototype.indexOf.call(this.r0,t.type)!==-1}}return s})(),mS=(()=>{class s{constructor(t){this.fu=t}start(){this.fu.onEvent(t=>this.K(t)),this.fu.start()}stop(){this.fu.stop()}K(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;L.warn(e)}}return s})(),yS=(()=>{class s{constructor(){this.$t={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){Ct(this.$t)}stop(){It(this.$t)}onEvent(t){this.L=t}a0(t){if(!t)return!1;let e=t.disposition;return G(t.sourceFile)&&csArray.prototype.some.call(s.c0,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.a0(t)&&this.L({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.c0=["contentsquare","cdnssl.clicktale.net"],$([j("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),ES=(()=>{class s{init(){this.Am=new mS(new yS),this.Am.start()}onOptout(){this.Am.stop()}}return s})();var{toString:Jv}=Object.prototype;function Nh(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let o=s.apply(this,e);return t.cache=n.set(i,o)||n,o};return t.cache=new(Nh.Cache||Map),t}Nh.Cache=Map;var{hasOwnProperty:Qv}=Object.prototype;var Mh=(()=>{class s{constructor(t){this.configuration=t}}return s})(),SS=(()=>{class s extends Mh{constructor(t,e,i){super(t),this.configuration=t,this.ao=e,this.S=i,this.O0=U.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.Lm=t,this.co=void 0,this.N0()}init(t){this.M0();let e=dt.get(ie);e!==null&&Qn(e)?t(this.canCollect(If(e))):this.refreshQuota(i=>{t(i!==U.QUOTA_REACHED)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==U.QUOTA_REACHED}computeInitialCollectState(t){return this.co?(this.S.emitCollectStateChange(this.co,this.configuration.malkaEtrEnabled?Ht.ETR_ON:Ht.ETR_OFF),this.co):(L.warn("Quota file error computeInitialCollectState() called before quota answered"),U.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===U.QUOTA_REACHED?U.QUOTA_REACHED:!Fs.isRecordingSupported()&&this.isReplayRecorded(t)?U.ANALYTICS_ONLY:t.collectState===U.RECORDING_RULES_TARGETING?U.RECORDING_RULES_TARGETING:t.collectState===U.ANALYTICS_ONLY_RULES_TARGETING?U.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===U.RECORDING_GLOBAL_SAMPLING?U.RECORDING_GLOBAL_SAMPLING:U.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===U.RECORDING_GLOBAL_SAMPLING||t.collectState===U.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.co||U.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return U.ANALYTICS_ONLY}lo(t){this.co=t,this.Lm&&this.Lm(t)}M0(){this.ao.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.ao.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.ao.onLoad(t=>this.quotaFileHandler(t))}N0(){this.ao.isInProgress()||this.ao.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.k0(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;L.warn(e),this.lo(this.O0)}k0(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&fe.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?Fs.isRecordingSupported()?this.lo(U.RECORDING_GLOBAL_SAMPLING):this.lo(U.ANALYTICS_ONLY):e&&!i?this.lo(U.ANALYTICS_ONLY):this.lo(U.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return U.ANALYTICS_ONLY}}return $([j("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),$([j("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),vS=(()=>{class s extends Mh{constructor(t,e,i,n,o){super(t),this.configuration=t,this.S=e,this.tu=i,this.A=n,this.Tu=o,this.Au=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.Au=!0,this.Tu.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===U.QUOTA_REACHED||t.collectState===U.RECORDING_RULES_TARGETING||t.collectState===U.RECORDING_TEMPORARILY)&&(t.collectState=U.ANALYTICS_ONLY),t}computeInitialCollectState(){return Ze.isReplayConsentNeeded(this.configuration)?U.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.$a()}computeInitialCollectStateFromRecordingConsentGranted(){return this.$a()}$a(){if(!Fs.isRecordingSupported())return U.ANALYTICS_ONLY;let t=U.ANALYTICS_ONLY,e=Ht.ETR_OFF;return fe.percentage()<this.configuration.replayRecordingRate||this.tu.isForceReplayRecorded()?t=U.RECORDING_GLOBAL_SAMPLING:this.Au&&this.Tu.evaluateUrl(this.A.getAnonymizedUrl())&&(t=U.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=Ht.ETR_ON),this.S.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!Fs.isRecordingSupported())return U.ANALYTICS_ONLY;if(Ze.isRecordingBlockedByConsent(t))return t.collectState===U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:U.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===U.RECORDING_GLOBAL_SAMPLING)return U.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?Ht.ETR_ON:Ht.ETR_OFF;return this.Au&&this.Tu.evaluateUrl(this.A.getAnonymizedUrl())?(this.S.emitCollectStateChange(U.RECORDING_URL_SAMPLING,e),U.RECORDING_URL_SAMPLING):(this.S.emitCollectStateChange(U.ANALYTICS_ONLY,e),U.ANALYTICS_ONLY)}isReplayRecorded(t){return Ze.isRecordingBlockedByConsent(t)?!1:t.collectState===U.RECORDING_TEMPORARILY||t.collectState===U.RECORDING_GLOBAL_SAMPLING||t.collectState===U.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return U.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})();function _S(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function wS(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var kh=(()=>{class s{constructor(){this.D0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.ps={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:_S(),Attributes:wS()};this.ps=k.getComputedSelectorSettings(t,this.ps)}init(){this.x0()}setMaskedElementSettingsFromCommand(t){if(t=k.sanitizeSelectorUserInput(t),!k.isSelectorUserInput(t))throw new Error(`Command misuse: ${vr[0]}`);this.bu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.bu(e)}getMaskedElementSettings(t){return t?this.Vm(this.D0):this.ps}x0(){var t,e,i,n,o,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(h=>{G(h.attr)&&G(h.rule)&&l.Attributes.push({selector:h.rule,attrName:h.attr})}),this.bu(l)}bu(t){this.ps=this.Vm(t)}Vm(t){return k.getComputedSelectorSettings(t,this.ps)}}return s})();var TS=(()=>{class s{constructor(t,e){this.tt=t,this._t=e,this.Ru=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this._t.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Ru=!0}disableRemoveQueryString(){this.Ru=!1}get(){let t=this.Ru?this.tt.removeQueryString(this.Um()):this.Um();return this.tt.anonymizeUrl(t,{maskingPatterns:this._t.getUrlMaskingPatterns()})}Um(){let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),AS=60*1e3,bS=30*1e3,RS=(()=>{class s{constructor(t,e){this.R=t,this.I=e,this.Cu=!1,this.L0=mr(()=>this.R.refreshSession(),bS)}onSessionExpired(t){this.V0=t}isSessionValid(){return this.Cu?!0:!(!this.R.hasValidSession()||this.R.pollCacheRefreshEvent()&&this.I.isSessionRenewed())}isCurrentPageviewValid(){let t=this.R.hasValidSession();return this.R.pollCacheRefreshEvent(!1)?!this.I.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.L0():this.U0()&&(this.jm=M.now(),this.renewSession())}renewSession(){this.Cu=!0,this.V0(),this.Cu=!1}U0(){return!document.hidden&&(!tt(this.jm)||M.now()-this.jm>AS)}}return s})();var CS=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,IS="$1CS_ANONYMIZED_NAME",Dh=(()=>{class s{constructor(t){this.M=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],o=this.M.anonymizePII(t);if(o=this.M.anonymizeJwt(o),e.maskNames){let h=o;o=this.hn(o),o!==h&&(q.counters.redactedPII.count("name"),q.counters.redactedPII.count("name-in-url"))}let c=this.X0(o,i);if(c!==o)return q.counters.redactedPII.count("url"),c;let l=this.K0(o,n);return l!==o&&q.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.Lu(t);return i!==""?`${e}?`:e}Lu(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}X0(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.Lu(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.J0(o,c);if(l!==null)return`${l}${n}`}return t}J0(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let o=t[n];if(n>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[n].key;if(this.Gm(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}K0(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.Lu(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.Q0(o,c);return`${csArray.prototype.join.call(o,"/")}${n}`}Q0(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],f=e[n].key;if(this.Gm(f)&&l>=c){let u=e[n].value;csArray.prototype.push.call(i,h.length>0?u:""),n++,n===e.length&&(n=0);continue}if(h===f){csArray.prototype.push.call(i,h),n++,n===e.length&&(n=0);continue}for(let u=0;u<n;u++){let m=l-n+u;i[m]=t[m]}n=0,csArray.prototype.push.call(i,h)}for(let l=0;l<n;l++){let h=t.length-n+l;i[h]=t[h]}return i}Gm(t){return kt(t,lh)}hn(t){return csString.prototype.replace.call(t,CS,IS)}}return s})(),PS=(()=>{class s{constructor(t,e,i,n,o,c){this.f=t,this.hi=e,this.us=i,this.O=n,this.S=o,this.X=c}initWithQuota(){if(!this.f.collectionEnabled){this.qm();return}let t=new fg(this.f.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.wt=new SS(this.f,t,this.S),this.wt.init(e=>{e?this.init():this.qm()})}Z0(){this.O.schedule(()=>{this.M=new Gs,this.tt=new Dh(this.M),this.A=new Ah(window.location,this.tt),this.N=new hr(this.f,this.A,this.hi),this.N.init(),this.bt=new lS,this.E=new _h([Mn.UXA]),this.J=new cS,this.lt=new kh,this.Tt=new XE(this.f,new qE(this.f,this.N,this.bt),this.S)})}qm(){}init(){gs.isSupported()&&gs.setDigestSalt(this.f.projectId.toString());let t,e,i,n,o,c,l,h,f,u,m,y,v,P,N,_,S,C,O,A,H,Q,ot,xt,St,w,D;this.Z0(),this.O.schedule(()=>{m=new sS(window.location,this.N),new ES().init(),y=nh.create(L.warn),u=new Vc(y),this.wt===void 0&&(this.wt=new vS(this.f,this.S,m,this.A,new fr),this.wt.init())}),this.O.schedule(()=>{t=new HE(this.f,this.N,this.X),e=new $E(t,this.wt,this.S,this.f.replayConsentRequiredForSession,this.f.malkaEtrEnabled),i=new dS(this.f,this.N,this.X),n=new UE(this.f,i,this.S,e),this.us.setContext(n,e)}),this.O.schedule(()=>{c=new GE(n,e,this.Tt),l=new Of(this.f,this.N,this.X),h=new JE(window.location,l),f=new QE(h),N=new zE(this.f,n,h),St=new Rh(pe,this.f),A=new Ch(St,this.f.isChild),H=new Ih(St),Q=new Ph(St),ot=new Oh,xt=new bh(A,H,Q,ot),_=new oS(this.E,xt),S=new Eh(this.A),C=new Sh(S,this.E);let V=new Nf(this.f,this.N,this.X);w=new uS(this.M,V),O=new hS(this.E,w);let B=new Ef(n,e,h,w,this.f)}),this.O.schedule(()=>{new VE(this.f,n,h,N,c,v,o,m).compute(B=>{this.O.schedule(()=>{_.init();let at=new YE(this.f,this.E,this.Tt,e,this.S),Pt=new iS(this.f,this.N,this.bt),Bt=new rS(this.S,window.location,Pt),Ne=new nS(this.E,Bt),ws=new aS(this.E,this.f),Ft=new TS(this.tt,new hh),Wt=new RS(e,n),Ee,Pi,is,bt=new ec(this.f,n,e,P),Yt=new ec(this.f,n,e,P,Pi);B?(this.S.emitInitTracking(),new LE(bt,Yt,y,n,e,Wt,Ft,this.S,this.E,_,this.f,Ne,Bt,at,this.Tt,this.M,St,this.tt,this.A,ws,this.J,xt,w,O,S,C,this.O,u,this.N,this.bt,this.wt,this.lt,is,Ee).start()):new KE(this.S,this.E,_,Ne,Bt,f,at).start()})})})}}return s})(),ps=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(S){let C=S.source,O=S.data;if(c(O)){let A=()=>{let H=n(t,O);m(H,()=>C.postMessage("csBundleLoaded",S.origin))};e=O.token,_(i.loadBundle),l(S.origin)&&A()}}};function n(S,C){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(S,"{version}",C.version),"{token}",C.token),"{domain}",C.domain)}function o(){return e}r.getToken=o;function c(S){return S&&S.type==="csBundleInjection"&&l(S.domain)&&f(S.version)&&h(S.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(S){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(S)||r.hjDomainRegex.test(S)}r.isAuthorizedDomain=l;function h(S){return/^[a-zA-Z0-9]+$/.test(S)}r.isAuthorizedToken=h;function f(S){return/^[a-zA-Z0-9\.]+$/.test(S)}r.isAuthorizedTagVersion=f;function u(){let S=window.opener||window.parent;return window!==S&&window.addEventListener}r.isActivable=u;function m(S,C){let O=document.createElement("script");O.type="text/javascript",O.async=!0,O.src=S,O.onload=C,O.charset="utf-8",document.head.appendChild(O)}r.addScript=m;function y(S){let C=document.createElement("link");C.rel="stylesheet",C.href=S,document.head.appendChild(C)}r.addStyle=y;function v(S){return`${S}?cb=${new csDate().getTime()}`}r.addCacheBusting=v;function P(){N(i.loadBundle)}r.waitForBundleInjection=P;function N(S){window.addEventListener("message",S,!1)}r.listen=N;function _(S){window.removeEventListener("message",S,!1)}r.removeListener=_}(s||(s={})),s})(),nc="_hp_ved",OS=18e5,NS="/js/ved.js",MS="/css/ved.css",kS="/js/ved.css",DS=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),xS=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var en=(()=>{let s;return function(r){let t=!1,e;function i(m){return e+m}function n(){let m=[i(MS),i(kS)];csArray.prototype.forEach.call(m,y=>{ps.addStyle(y)})}function o(m){let y=new csRegExp("(^|;)[ ]*"+m+"=([^;]*)"),v=y.exec(document.cookie);return v?decodeURIComponent(v[2]):null}function c(m,y,v){let P=encodeURIComponent(m)+"="+encodeURIComponent(y),N=new csDate;N.setTime(N.getTime()+v);let _=P+"; expires="+N.toUTCString()+"; path=/";document.cookie=_}function l(){c(nc,"on",OS)}function h(){return o(nc)==="on"}r.isVLCookieEnabled=h;function f(m){window.heapV=Object.assign({},window.heap,{source:m==null?void 0:m.source,uri:e,loadArgs:m==null?void 0:m.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=f;function u(m,y){var v;if(e=m,y){let P={type:DS.StatusUpdate,value:xS.ReceivedInitMessage},N={targetOrigin:y==null?void 0:y.origin};(v=y==null?void 0:y.source)===null||v===void 0||v.postMessage(P,N)}t||(t=!0,l(),f(y),window.heapV&&(ps.addScript(i(NS)),n()))}r.init=u}(s||(s={})),s})(),LS=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,ps.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(A){var H;A.origin===l&&((H=A.data)===null||H===void 0?void 0:H.message)==="init"&&A.source&&(en.init(l,A),S(h.initHeapVisualLabeler))},ping(A){typeof A.data=="string"&&A.data==="ping"&&m(A.origin)&&(c=A.origin,o=ps.hjDomainRegex.test(A.origin)?i:A.origin,S(h.ping),_(h.insertMessageScript),y(ps.addCacheBusting("utils.js")))},insertMessageScript:C(A=>{typeof A.data=="string"&&A.data!=="ping"&&(S(h.insertMessageScript),y(A.data))})};function f(){return ps.getToken()}r.getToken=f;function u(){return window!==t&&window.addEventListener}r.isActivable=u;function m(A){return csArray.prototype.some.call(n,H=>H.test(A))}r.isAuthorizedDomain=m;function y(A,H){let Q=document.createElement("script");Q.type="text/javascript",Q.async=!0;let ot=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");Q.src=`${ot}/${e}/${A}`,Q.onload=H,Q.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(Q),v(A)}function v(A){csString.prototype.includes.call(A,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(A,"&mode=")[1])}function P(){_(h.ping),ps.waitForBundleInjection()}r.waitForConnection=P;function N(A){l=A,_(h.initHeapVisualLabeler),en.isVLCookieEnabled()&&en.init(l)}r.waitForHeapVisualLabeler=N;function _(A){window.addEventListener("message",A,!1)}r.listen=_;function S(A){window.removeEventListener("message",A,!1)}r.removeListener=S;function C(A){return function(H){H.origin===c&&A(H)}}r.secureListener=C;function O(A){c&&t.postMessage(A,c)}r.post=O}(s||(s={})),s})();var qi=window.CSFrameCommunication||LS,VS=(()=>{class s extends _r{emitTrackingContextResultMessage(t){for(let e of this.listeners)e.onTrackingContextResultCallback&&e.onTrackingContextResultCallback(t)}emitAfterPageViewCallback(t){for(let e of this.listeners)e.onAfterPageViewCallback&&e.onAfterPageViewCallback(t)}emitIntegrationSessionKeyCallback(t){for(let e of this.listeners)e.onIntegrationSessionKeyCallback&&e.onIntegrationSessionKeyCallback(t)}emitParentRecordingContextChange(t){for(let e of this.listeners)e.onParentRecordingContextChange&&e.onParentRecordingContextChange(t)}emitParentSensitiveStatusChange(t){for(let e of this.listeners)e.onParentSensitiveStatusChange&&e.onParentSensitiveStatusChange(t)}emitStartAnalytics(){for(let t of this.listeners)t.onStartAnalytics&&t.onStartAnalytics()}emitStopAnalytics(){for(let t of this.listeners)t.onStopAnalytics&&t.onStopAnalytics()}emitStartRecording(){for(let t of this.listeners)t.onStartRecording&&t.onStartRecording()}emitStopRecording(){for(let t of this.listeners)t.onStopRecording&&t.onStopRecording()}}return s})(),xh=(()=>{class s extends _r{constructor(t){super(),this.O=t}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.O.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.O.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){L.error(e)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}}return $([Dt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})(),Lh=["trackTransaction"],US=(()=>{class s{constructor(t){this.Y=t}init(){this.Y.register(Er),this.Y.register(_o),this.Y.register(In),this.Y.register(Pn),this.Y.register(uo),this.Y.register(Rl),this.Y.register(no),this.Y.register(Sr),this.Y.register(oo),this.Y.register(Lh),this.Y.register(uh),this.Y.register(dh),this.Y.register(vo),this.Y.register(vh),this.Y.register(ph),this.Y.register(lo),this.Y.register(ho),this.Y.register(ih),this.Y.register(fh),this.Y.register(gh),this.Y.register(mh),this.Y.register(yh),this.Y.register(ah),this.Y.register(ch),this.Y.register(Sn),this.Y.register(En),this.Y.register(ug),this.Y.register(Zc)}onStartTracking(){this.Y.start()}onOptout(){this.Y.stop()}}return s})(),jS=(()=>{class s extends mt{constructor(t,e){super(),this.E=t,this.C=e,this.zt=[]}onStart(){this.commandsBatchReady()}onStop(){this.zt=[]}register(t){for(let e of t)this.E.register([e],(...i)=>this.send(e,i))}send(t,e){csArray.prototype.push.call(this.zt,{name:t,params:e}),this.isStarted&&this.commandsBatchReady()}commandsBatchReady(){if(this.zt.length===0)return;let t={commands:this.zt};this.C.sendToParent(I.Commands,t),this.zt=[]}}return $([j("Commands.iframe.commandsBatch.send")],s.prototype,"send",null),$([Ti({wait:0,mode:"trailing"}),j("send iframe commands batch")],s.prototype,"commandsBatchReady",null),s})(),HS="Buffer is full, events might be missing.",BS=(()=>{class s{constructor(t=25){this.Wm=t,this.Pr=[]}reset(){this.Pr=[]}getMessages(){return this.Pr}addMessage(t){this.Pr.length<this.Wm?csArray.prototype.push.call(this.Pr,t):this.Pr.length===this.Wm&&(this.tC(t),csArray.prototype.push.call(this.Pr,t))}tC(t){t.type=I.ChildLogMessage,t.content={message:HS,errorCode:"",level:rt.warn}}}return s})(),Vh=(()=>{class s extends mt{constructor(t){super(),this.buffer=new BS(t)}}return s})(),FS=25,$S=(()=>{class s extends Vh{constructor(t,e,i,n,o){super(FS),this.f=t,this.S=e,this.Ps=i,this.Yt=n,this.oi=o,this.Ye=null,this.Ym={boundElement:window,type:"message",listener:c=>this.Uc(c)}}onStart(){Ct(this.Ym,!1),this.eC()}onStop(){It(this.Ym,!1),this.Ye&&(st.closeChannelPort(this.Ye),this.Ye=null)}sendToParent(t,e){let i=this.buildChildBaseMessage(t,e);this.za(i)}eC(){let t=this.buildChildBaseMessage(I.Discovery);st.sendPostMessage(window.parent,"*",t)}buildChildBaseMessage(t,e){let i=st.buildBaseMessage(t,zt.Child,this.f.projectId);return e&&(i.content=e),i}za(t){this.Ye!==null?st.sendChannelMessage(this.Ye,t):this.buffer.addMessage(t)}sC(t,e){let i=st.getNewChannelMessage();this.Ye=i.port1,this.Ye.onmessage=o=>{this.Hc(o)};let n=this.buildChildBaseMessage(I.Discovery);n.id=e,st.sendPostMessage(window.parent,t,n,[i.port2]),this.sendAllMessagesFromBuffer()}Hc(t){switch(t.data.type){case I.TrackingContextResultMessage:this.oi.emitTrackingContextResultMessage(t.data.content);break;case I.IntegrationCallback:{let e=t.data.content;e.initiator===Us.AfterPageView?this.oi.emitAfterPageViewCallback(e):e.initiator===Us.GetSessionKey?this.oi.emitIntegrationSessionKeyCallback(e):L.warn(`Iframe child received unknown IntegrationCallback type from parent : ${csJSON.stringify(t.data)}`);break}case I.Stop:this.S.emitOptout();break;case I.RecordingContext:{let e=t.data.content;this.Ps.setRecordingContext(e),this.oi.emitParentRecordingContextChange(e);break}case I.SensitiveStatus:{let e=t.data.content;this.Yt.setSensitiveStatus(e),this.oi.emitParentSensitiveStatusChange(e);break}default:L.warn(`Iframe child received unknown channelMessage type from parent : ${csJSON.stringify(t.data)}`)}}Uc(t){if(this.Ye===null&&st.isMessageValid(t,zt.Parent,this.f.projectId,this.f.hostnames))switch(t.data.type){case I.Stop:this.S.emitOptout();break;case I.Discovery:if(!Re(t.data.id)||t.data.id<0){L.warn(`Iframe child received discovery without valid id from parent (${t.origin}) : ${csJSON.stringify(t.data)}`);return}this.sC(t.origin,t.data.id);break;default:L.warn(`Iframe child received unknown postMessage type from parent (${t.origin}) : ${csJSON.stringify(t.data)}`)}}sendAllMessagesFromBuffer(){if(this.Ye===null)return;let t=this.buffer.getMessages();for(let e of t)st.sendChannelMessage(this.Ye,e);this.iC(),this.buffer.reset()}iC(){let t=st.buildBaseMessage(I.EndOfBufferedMessages,zt.Child,this.f.projectId);st.sendChannelMessage(this.Ye,t)}}return s})(),zS=(()=>{class s{constructor(t){this.C=t}onStartTracking(){this.C.start()}onOptout(){this.C.stop()}}return s})(),GS=(()=>{class s{constructor(t,e,i,n,o){this.Z=t,this.pt=e,this.C=i,this.Ps=n,this.Yt=o}init(){this.Z.onChildMessage((t,e,i)=>this.pt.emitIframeEvent(t,e,i)),this.Z.setSentiveStatusCallback(()=>this.Yt.getSensitiveStatus()),this.Z.setRecordingContextCallback(()=>this.Ps.getRecordingContext())}onStartTracking(){this.Z.start()}onOptout(){this.Z.stop()}onIframeRecordingUserEvent(t){let e={events:t,containsUserEvent:!0};this.C.sendToParent(I.RecordingEvent,e)}onIframeRecordingBrowserEvent(t){let e={events:t,containsUserEvent:!1};this.C.sendToParent(I.RecordingEvent,e)}onIframeAnalysisUserEvent(t){let e={event:t,isUserEvent:!0};this.C.sendToParent(I.AnalysisEvent,e)}onIframeAnalysisBrowserEvent(t){let e={event:t,isUserEvent:!1};this.C.sendToParent(I.AnalysisEvent,e)}onIframeJavascriptError(t){this.C.sendToParent(I.JavascriptError,t)}onIframeApiError(t){this.C.sendToParent(I.ApiError,t)}onIframeDetailedApiError(t){this.C.sendToParent(I.DetailedApiError,t)}onIframeEmerchandisingMessage(t){this.C.sendToParent(I.EmerchandisingMessage,t)}onIframeCommands(t){this.C.sendToParent(I.Commands,t)}onIframeIntegrationCallback(t){this.C.sendToParent(I.IntegrationCallback,t)}onTrackingContextRequestCallback(t){this.C.sendToParent(I.TrackingContextRequestMessage,t)}onIframeStaticResource(t){this.C.sendToParent(I.StaticResource,t)}onIframeCustomError(t){this.C.sendToParent(I.CustomError,t)}onTrackingContextResultCallback(t){this.Z.sendToChildren(I.TrackingContextResultMessage,t)}onAfterPageViewCallback(t){this.Z.sendToChildren(I.IntegrationCallback,t)}onIntegrationSessionKeyCallback(t){this.Z.sendToChildren(I.IntegrationCallback,t)}onParentRecordingContextChange(t){this.Z.sendToChildren(I.RecordingContext,t)}onParentSensitiveStatusChange(t){this.Z.sendToChildren(I.SensitiveStatus,t)}}return s})(),qS=(()=>{class s extends mt{constructor(t,e,i,n,o,c,l,h){super(),this.$s=t,this.xt=e,this.C=i,this.gs=n,this.ms=o,this.Si=c,this.vi=l,this._i=h}init(){var t,e,i,n,o;this.$s.onEvent(c=>this.Nt(c)),this.xt.onEvent(c=>this.Nt(c)),(t=this.gs)===null||t===void 0||t.onEvent(c=>this.Nt(c)),(e=this.ms)===null||e===void 0||e.onEvent(c=>this.Nt(c)),(i=this.Si)===null||i===void 0||i.onEvent(c=>this.Nt(c)),(n=this.vi)===null||n===void 0||n.onEvent(c=>this.Re(c)),(o=this._i)===null||o===void 0||o.onEvent(c=>this.Re(c))}onStart(){var t,e,i,n,o;this.$s.start(),this.xt.start(),(t=this.gs)===null||t===void 0||t.start(),(e=this.ms)===null||e===void 0||e.start(),(i=this.Si)===null||i===void 0||i.start(),(n=this.vi)===null||n===void 0||n.start(),(o=this._i)===null||o===void 0||o.start()}onStop(){var t,e,i,n,o;this.$s.stop(),this.xt.stop(),(t=this.gs)===null||t===void 0||t.stop(),(e=this.ms)===null||e===void 0||e.stop(),(i=this.Si)===null||i===void 0||i.stop(),(n=this.vi)===null||n===void 0||n.stop(),(o=this._i)===null||o===void 0||o.stop()}Nt(t){let e={isUserEvent:!0,event:t};this.K(e)}Re(t){let e={isUserEvent:!1,event:t};this.K(e)}K(t){!this.isStarted||t.event.type===z.RESIZE||this.C.sendToParent(I.AnalysisEvent,t)}}return s})(),WS=["webview:analytics:start"],YS=["webview:analytics:stop"],XS=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f){this.f=t,this.Q=e,this.Lt=i,this.C=n,this.mt=o,this.gt=c,this.E=l,this.xt=h,this.ce=f}init(){let t,e,i=_l(this.f,this.Q,this.ce),n=[];this.f.collectSubmit||csArray.prototype.push.call(n,"submit");let o=new ll(i,this.Q,this.Lt,n),c=this.mt.isInWebViewContext()?{collectGestureVelocity:!0,collectGestureDistance:!0}:{collectGestureVelocity:!1,collectGestureDistance:!1},l=wl(this.f,this.Q,this.ce),h=new cl(l,this.xt,c),f,u,m;this.ho=new qS(o,h,this.C,t,e,u,m,f),this.ho.init(),this.mt.isInWebViewContext()&&this.rC()}onStartTracking(){this.ho.start()}onOptout(){this.ho.stop()}onStartAnalytics(){this.ho.start()}onStopAnalytics(){this.ho.stop()}rC(){this.E.register(WS,()=>this.gt.emitStartAnalytics(),{disableApplyPending:!0}),this.E.register(YS,()=>{this.gt.emitStopRecording(),this.gt.emitStopAnalytics()},{disableApplyPending:!0})}}return s})();var KS=(()=>{class s extends mt{constructor(t,e,i,n,o=[],c){super(),this.f=t,this.ot=e,this.C=i,this.Ue=n,this.Ve=o,this.qt=c,this.Vu=!1,this.Ui=!1,this.Bs=new to,this.j=[],this.Ja=!1,this.Rs=l=>this.Re(l),this.Hn=l=>this.Nt(l)}init(){this.Ph()}Ph(){var t;this.Ue.onEvent(this.Rs,this.Hn),(t=this.ot)===null||t===void 0||t.onInputNodeToEncrypt(this.Hn)}setEnableOnlineAssets(t){this.Vu=t!=null?t:!1}setOnlineAssetsEnabledOnNextStart(t){this.Ui=t}getStaticResourceManagerStatus(){return this.qt?{supported:Bs.isSupported(),onlineAssets:{activated:this.Vu,enableOnNextStart:this.Ui}}:null}Re(t){this.cC(t),this.Qa()}Nt(t){this.Xm(t),this.Qa()}Xm(t){csArray.prototype.push.call(this.j,t),this.Ja=!0}cC(t){csArray.prototype.push.call(this.j,t)}Qa(){X(this.Ve,e=>{var i;return(i=e.flushEvents)===null||i===void 0?void 0:i.call(e)});let t={containsUserEvent:this.Ja,events:this.j};this.C.sendToParent(I.RecordingEvent,t),this.j=[],this.Ja=!1}onStart(){this.qt&&this.Vu&&this.qt.enableOnlineAssets(),this.Ue.start(),this.f.emitDebugEvents&&this.Bs.emit("replayRecordingStarted"),X(this.Ve,t=>{t.start&&t.start()})}onStop(){var t;this.Ue.stop(),(t=this.qt)===null||t===void 0||t.disableOnlineAssets(),X(this.Ve,e=>{e.stop&&e.stop()})}addInitialDom(t){for(let e=0;e<this.j.length;e+=1)if(this.j[e].date>=t.date){csArray.prototype.splice.call(this.j,e,0,t),this.Ja=!0,this.Qa();return}this.Xm(t),this.Qa()}}return s})(),Uh=(()=>{class s{constructor(t){this.f=t}isReplayUnanonymizedAllowedByConsent(){return!this.f.consentRequired}}return s})(),kn=(()=>{class s{static isWebViewLocalAssetsSupported(){return"URL"in window}}return s})(),JS=["webview:replay:start"],QS=["webview:replay:stop"],ZS=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.f=t,this.gt=e,this.Km=i,this.ai=n,this.Uu=o,this.E=c,this.A=l,this.Yt=h,this.ju=!1}init(){let t=new Uh(this.f),e=new fr;if(this.se=new Eh(this.A),new Sh(this.se,this.E).init(),this.it=new Zn(this.f,this.A,e,t),this.it.init(),kn.isWebViewLocalAssetsSupported()){let n=f=>{this.uo(f)},o=f=>L.error("An error occurred while fetching a styleSheet: "+f),c=new Set,l=f=>!c.has(f),h=f=>{c.add(f.assetId),this.uo([f])};this.Km.onAsset(f=>{this.lC(f)}),this.Km.onStyleSheetFound(f=>{this.Uu.getStyleSheetAssets(f.assetId,n,o,l,h)})}this.hC()}onStartRecording(){if(this.ju=!0,!this.se.isUrlExcludedForSessionReplay()){let t=this.Yt.getSensitiveStatus();this.gt.emitParentRecordingContextChange({isRecording:!0,useAnonymization:t.useAnonymization})}}onStopRecording(){this.ju=!1,this.gt.emitParentRecordingContextChange({isRecording:!1})}onArtificialPageViewEnd(){this.gt.emitParentRecordingContextChange({isRecording:!1})}onAfterArtificialPageView(){if(this.V()&&!this.se.isUrlExcludedForSessionReplay()){let t=this.Yt.getSensitiveStatus();this.gt.emitParentRecordingContextChange({isRecording:!0,useAnonymization:t.useAnonymization})}}V(){return this.ju}hC(){this.E.register(JS,()=>{this.gt.emitStartAnalytics(),this.gt.emitStartRecording()},{disableApplyPending:!0}),this.E.register(QS,()=>this.gt.emitStopRecording(),{disableApplyPending:!0})}lC(t){this.ai.sendToParent(I.Assets,{assets:[t]})}uo(t){t.length!==0&&this.ai.sendToParent(I.Assets,{assets:t})}}return s})();function tv(s){var r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return s.replace(r,function(t,e,i,n){if(e==="\\")return t.slice(1);if(n)return n;var o=parseInt(i,16),c=55296<=o&&o<=57343;return c||o===0||o>1114111?"\uFFFD":String.fromCodePoint(o)})}var ev=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function sv(s,r){var t=s.replace(ev,function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=e[3]||e[4],o=e[9]||e[10]||e[11],c=tv((n||o).trim()),l=n?"@import ":"",h=r(c)||c;return l+"url("+iv(h)+")"});return t}function iv(s){return s.indexOf('"')===-1?'"'+s+'"':s.indexOf("'")===-1?"'"+s+"'":s}function rv(s){var r=[];return sv(s,function(t){return r.push(t),t}),r}var jh=(()=>{class s{constructor(t){this.uC=t}getStyleSheetAssets(t,e,i,n,o){let c=[];if(!ir(t)){i(`Not a recognized valid css file path ${t}`);return}let l=(h,f)=>{let u=this.dC(h,f);csArray.prototype.forEach.call(u,m=>{csArray.prototype.push.call(c,m),ir(m.assetId)&&n(m.assetId)&&(o==null||o(m),this.getStyleSheetAssets(m.assetId,e,i,n,o))}),e(c)};this.uC.getResourceContentText(t,l,i)}dC(t,e){return this.pC(t,rv(e))}pC(t,e){return csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(e,i=>!re(i)),i=>!Cc(i)),i=>({assetId:Dc(i,t),assetBasePath:t,assetRawPath:i}))}}return s})(),Hh=(()=>{class s{getResourceContentText(t,e,i){let n=c=>{e(t,c.responseText)},o=this.fC(n,i);o.open("GET",t),o.send()}fC(t,e){let i=new XMLHttpRequest;return i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(i.status===200?t(i):e(i.statusText))},i}}return s})(),nv=(()=>{class s extends mt{constructor(t,e){super(),this.Me=t,this.C=e}onStart(){}onStop(){}init(){this.Me.onSendStaticResource(t=>this.C.sendToParent(I.StaticResource,t))}}return s})(),ov=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,u,m,y,v){this.f=t,this.M=e,this.le=i,this.S=n,this.C=o,this.Ps=c,this.E=l,this.oi=h,this.mt=f,this.A=u,this.Yt=m,this.tt=y,this.ot=v}init(){let t=[],e=this.Ps.getRecordingContext();this.Wn=new Dl(!!e.useAnonymization,this.f.whitelistedAttributes,this.M,this.f.anonymizeDigits);let i=[];csArray.prototype.push.call(i,new kl,this.Wn,new xl(this.tt)),csArray.prototype.push.call(i,new Ll);let n=new th;csArray.prototype.push.call(t,n),!this.mt.isInWebViewContext()&&this.f.useStaticResourceManager&&Bs.isSupported()&&(this.qt=new Bs,csArray.prototype.push.call(i,this.qt),this.Me=new Wl,this.Hu=new nv(this.Me,this.C),this.Hu.init()),this.Fi=new Jl,this.Fi.init(),csArray.prototype.push.call(t,this.Fi),csArray.prototype.push.call(t,new Kl(window.location,this.M));let o=[this.le,new Ml,new Xl(csArray.prototype.filter.call(t,h=>h)),new Bl,new Fl,new $l,new jl(this.ot)],c=new ql(o,i),l=new Yl(c,this.S,this.Me);if(this.ci=new KS(this.f,this.ot,this.C,l,t,this.qt),this.E.register(sh,()=>this.Ps.getRecordingContext().isRecording),this.E.register(rh,()=>this.ci.getStaticResourceManagerStatus()),this.ci.init(),this.mt.isInWebViewContext()){let h=new jh(new Hh);this.Bu=new ZS(this.f,this.oi,n,this.C,h,this.E,this.A,this.Yt),this.oi.addListener(this.Bu),this.S.addListener(this.Bu),this.Bu.init()}}onParentRecordingContextChange(t){var e,i;t.useAnonymization!==void 0&&this.Bi(t.useAnonymization),t.enableOnlineResourcesOnNextPageview!==void 0&&this.ci.setOnlineAssetsEnabledOnNextStart(t.enableOnlineResourcesOnNextPageview),t.isRecording?(this.Hh(),this.ci.setEnableOnlineAssets(t.enableOnlineResources),this.ci.start(),(e=this.Hu)===null||e===void 0||e.start()):(this.ci.stop(),(i=this.Hu)===null||i===void 0||i.stop())}onInitialDomStart(){}onInitialDomDone(t){this.Fi.start(),this.ci.addInitialDom(t)}Bi(t){var e;this.Wn.setAnonymization(t),(e=this.yb)===null||e===void 0||e.setAnonymization(t)}onOptout(){this.ci.stop()}Hh(){var t,e,i,n;if(!((e=(t=this.f.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let o=(n=(i=this.f.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||n===void 0?void 0:n.filterByHostSelector;X(o,c=>{Ms(c)&&Pe.setShadowRootFilter(l=>{try{return ee.call(l.host,c)}catch{return!1}})})}}}return s})(),av=(()=>{class s{constructor(t,e){this.ai=t,this.Jm=e}init(){this.ai.onWebViewEvent((t,e)=>{this.Jm.emitWebviewEventToBridge(t,e)})}onStartTracking(){this.ai.start()}onOptout(){this.ai.stop()}onStartAnalytics(){this.ai.setAnalyticsStatus(!0)}onStopAnalytics(){this.ai.setAnalyticsStatus(!1)}onParentRecordingContextChange(t){this.Jm.setSessionReplayStatus(t.isRecording)}}return s})(),Qt=(()=>{let s;return function(r){r[r.PAGE_VIEW=4]="PAGE_VIEW",r[r.TAP=6]="TAP",r[r.LONG_PRESS=8]="LONG_PRESS",r[r.DRAG=9]="DRAG",r[r.FLICK=10]="FLICK",r[r.DETAILED_API_ERROR=13]="DETAILED_API_ERROR",r[r.JAVASCRIPT_ERROR_SR=19]="JAVASCRIPT_ERROR_SR",r[r.CUSTOM_ERROR_SR=20]="CUSTOM_ERROR_SR",r[r.API_ERROR=21]="API_ERROR",r[r.CUSTOM_ERROR_AN=25]="CUSTOM_ERROR_AN",r[r.JAVASCRIPT_ERROR_AN=26]="JAVASCRIPT_ERROR_AN",r[r.SUBMIT=27]="SUBMIT",r[r.CHANGE=28]="CHANGE"}(s||(s={})),s})(),cv=(()=>{class s{constructor(){this.Os=1}transformEvent(t){switch(t.type){case z.CHANGE:{let e={version:this.Os,type:Qt.CHANGE,data:{path:t.tgt}};return Br(t)&&(e.data.hrchy=t.hrchy),e}case z.SUBMIT:{let e={version:this.Os,type:Qt.SUBMIT,data:{path:t.tgt}};return Br(t)&&(e.data.hrchy=t.hrchy),Ca(t)&&(e.data.text=t.text),e}case z.TAP:{let e={version:this.Os,type:Qt.TAP,data:{path:t.tgt}};return Br(t)&&(e.data.hrchy=t.hrchy),Ca(t)&&(e.data.text=t.text),e}case z.DRAG:{let e=t;return{version:this.Os,type:Qt.DRAG,data:{path:e.tgt,direction:e.fd,distance:e.distance,velocity:e.velocity}}}case z.FLICK:{let e=t;return{version:this.Os,type:Qt.FLICK,data:{path:e.tgt,direction:e.fd,distance:e.distance,velocity:e.velocity}}}default:return null}}}return s})(),lv=(()=>{class s{constructor(t,e,i,n){this.A=t,this.Ge=e,this.De=i,this.ar=n,this.Os=1}transformEvent(t,e){switch(t){case I.ApiError:case I.DetailedApiError:{let i=this.De.anonymize(e);return{version:this.Os,data:i}}case I.JavascriptError:{let i={...e,pageUrl:this.A.getAnonymizedUrl()},n=this.Ge.anonymize(i);return{version:this.Os,data:{...n,date:M.now()}}}case I.CustomError:{let i=e;return i.message=this.ar.anonymize(i.message),{version:this.Os,data:{...i,date:M.now()}}}default:return null}}}return s})(),hv=2,ct=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let _=window.CSJavascriptBridge.getVersion();if(Ut(_))return _}catch{L.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(_,S){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(_,csJSON.stringify(S))}r.identify=n;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=o;function c(_){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(_))}r.addUserProperties=c;function l(_){window.CSJavascriptBridge.sendEvent(csJSON.stringify(_))}r.sendAnalysisEvent=l;function h(_){if(window.CSJavascriptBridge.sendSREvent)for(let S of _.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(S))}r.sendSREvent=h;function f(_){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(_))}r.sendLog=f;function u(){window.CSJavascriptBridge.optIn()}r.sendOptIn=u;function m(){window.CSJavascriptBridge.optOut()}r.sendOptOut=m;function y(_,S){window.CSJavascriptBridge.sendDynamicVar(_,S)}r.sendDynamicVariable=y;function v(_,S,C){window.CSJavascriptBridge.sendTransaction(_,S,C)}r.sendTransaction=v;function P(_,S){if(window.CSJavascriptBridge.sendAssets){let C=csJSON.stringify(_);window.CSJavascriptBridge.sendAssets(C,S||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(_,C=>C.assetId))}r.sendAssets=P;function N(_){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(_))}r.sendNativeSREvent=N}(s||(s={})),s})(),uv=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.Qm=t,this.es=e,this.gC=i,this.Za=n,this.Or=o,this.S=c,this.A=l,this._t=h,this.Fu=!1}async emitWebviewEventToBridge(t,e){switch(t){case I.AnalysisEvent:{let i=this.gC.transformEvent(e.event);i&&ct.sendAnalysisEvent(i);break}case I.RecordingEvent:ct.sendSREvent(e);break;case I.ChildLogMessage:ct.sendLog(e);break;case I.Commands:L.tryToExecute(`SDKMessageUtils.sendMessage.sendCommandMessage: ${e}`,()=>{this.mC(e)})();break;case I.Assets:{let{assets:i,serializationId:n}=e,o=await this.Or.getTransformedAssets(i,n);ct.sendAssets(o,n);break}case I.JavascriptError:{let i=this.Za.transformEvent(I.JavascriptError,e);i&&(this.Fu&&ct.sendNativeSREvent({...i,type:Qt.JAVASCRIPT_ERROR_SR}),ct.sendAnalysisEvent({...i,type:Qt.JAVASCRIPT_ERROR_AN}));break}case I.ApiError:{let i=this.Za.transformEvent(I.ApiError,e);i&&(ct.sendAnalysisEvent({...i,type:Qt.API_ERROR}),q.counters.networkRequests.count("collected"));break}case I.DetailedApiError:{let i=this.Za.transformEvent(I.DetailedApiError,e);i&&(ct.sendNativeSREvent({...i,type:Qt.DETAILED_API_ERROR}),q.counters.networkRequests.count("collected"));break}default:break}}setSessionReplayStatus(t){this.Fu=t}mC(t){let e=t.commands;for(let i of e)switch(!0){case csArray.prototype.indexOf.call(vh,i.name)>=0:ct.sendOptIn();break;case csArray.prototype.indexOf.call(vo,i.name)>=0:this.S.emitOptout(),ct.sendOptOut();break;case csArray.prototype.indexOf.call(Er,i.name)>=0:this.yC(i);break;case csArray.prototype.indexOf.call(uo,i.name)>=0:this.EC(i);break;case csArray.prototype.indexOf.call(no,i.name)>=0:this.Zm(i);break;case csArray.prototype.indexOf.call(Sr,i.name)>=0:break;case csArray.prototype.indexOf.call(oo,i.name)>=0:this.Ga();break;case csArray.prototype.indexOf.call(Lh,i.name)>=0:this.Zm(i),this.Ga();break;case csArray.prototype.indexOf.call(pm,i.name)>=0:this._t.addUrlMaskingPattern(i.params[0]);break;case csArray.prototype.indexOf.call(ah,i.name)>=0:this._t.addPartialUrlMaskingPattern(i.params[0]);break;case csArray.prototype.indexOf.call(ch,i.name)>=0:this._t.resetPartialUrlMaskingPatterns();break;case csArray.prototype.indexOf.call(mm,i.name)>=0:this.SC(i);break;case csArray.prototype.indexOf.call(En,i.name)>=0:this.vC(i);break;case csArray.prototype.indexOf.call(Zc,i.name)>=0:this._C();break;case csArray.prototype.indexOf.call(Sn,i.name)>=0:this.wC(i);break;default:L.warn(`WebviewBridgeEventEmitter received an unknown command: ${csJSON.stringify(i)}`);break}}vC(t){if(t.params.length<1||t.params.length>2)return;let e=t.params[0],i=t.params[1];if(!wa.isValidIdentity(e)){L.error(`Command misuse: ${En[0]}`);return}let n=wa.parseIdentityOptionsHash(i);ct.identify(e.toString(),{hash:n})}_C(){ct.resetIdentity()}wC(t){if(t.params.length!==1)return;let e=t.params[0];if(!Ta.isValidProperties(e)){L.error(`Command misuse: ${Sn[0]}`);return}let i=Ta.sanitizeProperties(e);ct.addUserProperties(i)}yC(t){if(t.params.length!==1)return;let e=t.params[0];if(!(!ne(e)||!("key"in e)||!("value"in e))&&ci.isKeyValid(e.key)&&ci.isValueValid(e.value)){let i=this.Qm.anonymizePII(e.key),n=Re(e.value)?e.value:this.Qm.anonymizePII(e.value);ct.sendDynamicVariable(i,n)}}EC(t){if(t.params.length!==1)return;let e=t.params[0];if(G(e)){let i={type:Qt.PAGE_VIEW,version:1,data:{url:e}};this.A.overridePath(e),this.S.emitArtificialPageViewEnd(),ct.sendAnalysisEvent(i),this.S.emitAfterArtificialPageView()}}Zm(t){if(t.params.length!==1)return;let[e]=t.params;e.value&&(e.revenue=e.value),this.es.addTransaction(e)}Ga(){let t=this.es.getTransaction();Cn.isValid(t)&&(ct.sendTransaction(t.id?t.id:null,t.revenue,t.currency?t.currency:""),this.es.clear())}SC(t){if(t.params.length<1)return;let e=t.params[0],i=t.params[1]||{};if(!(G(e)&&ne(i)))return;let n=gm.buildCustomErrorEvent(e,i),o=this.Za.transformEvent(I.CustomError,n);o&&(this.Fu&&ct.sendNativeSREvent({...o,type:Qt.CUSTOM_ERROR_SR}),ct.sendAnalysisEvent({...o,type:Qt.CUSTOM_ERROR_AN}))}}return s})();var dv="REMOTE_ASSET",oc="LOCAL_ASSET",pv="UNKNOWN_ASSET_TYPE",Dn="NONE",Bh="ONLY_LOCAL_ASSETS",xn="ALL",fv=(()=>{class s{constructor(t){var e,i;this.TC=t,this.$u=new Set,this.tc=Dn;try{let n=(i=(e=window.CSJavascriptBridge)===null||e===void 0?void 0:e.getAssetTransformerMode)===null||i===void 0?void 0:i.call(e);(n===Bh||n===xn)&&(this.tc=n)}catch{}}setAssetProcessingMode(t){this.tc=t}async getTransformedAssets(t,e){if(this.tc===Dn)return t;let i=[];for(let n of t){let o=n.assetId,c=this.AC(o);if(this.tc===xn||c===oc){let l=o;if(this.bC(o,e)&&(l=this.RC(o,e)),this.$u.has(l)){csArray.prototype.push.call(i,n);continue}try{let h=await this.TC.getAssetContent(o);if(this.$u.has(l)){csArray.prototype.push.call(i,n);continue}csArray.prototype.push.call(i,{...n,retrievedAssetContent:h}),this.$u.add(n.assetId)}catch(h){L.error(`an error occurred while getting data for asset: ${l}: ${h}`),csArray.prototype.push.call(i,n)}}else csArray.prototype.push.call(i,n)}return i}AC(t){let e=window.WEBVIEW_SERVER_URL||null;try{let{protocol:i}=new csURL(t);return i==="file:"||e&&csString.prototype.startsWith.call(t,e)?oc:dv}catch(i){L.error(`Error constructing URL (${t}"): ${i.message}`)}return pv}bC(t,e){return e&&ir(t)||!1}RC(t,e){return`${t}#${e}`}}return s})(),gv=(()=>{class s{constructor(){this.CC=50*1024*1024,this.IC=30*1024*1024,this.zu=0,this.Gu=!1,this.sc=new Map,this.kt=[]}async getAssetContent(t){let e=this.sc.get(t);return e||new Promise((i,n)=>{csArray.prototype.push.call(this.kt,{assetUrl:t,successCallback:i,errorCallback:n}),this.Gu||this.PC()})}async PC(){for(this.Gu=!0;this.kt.length>0;){let{assetUrl:t,successCallback:e,errorCallback:i}=csArray.prototype.shift.call(this.kt),n=this.sc.get(t);if(n){e(n);continue}try{let c=(await this.OC("GET",t,"blob")).target;if(c.status===200){let l=c.getResponseHeader("Content-Type"),h=Number(c.getResponseHeader("Content-Length"));if(h&&Number(h)>this.IC){let u=`asset is too big, size = ${h} bytes`;i(u);continue}let f=new csFileReader;f.onload=()=>{let m={data:csString.prototype.split.call(f.result,"base64,")[1],mimeType:l!=null?l:""};this.zu+=h,this.zu>this.CC&&(this.zu=0,this.sc.clear()),this.sc.set(t,m),e(m)},f.onerror=()=>{i("Error converting XHR response to base64")},f.readAsDataURL(c.response)}else i(`error downloading ${t}: ${c.statusText}`)}catch(o){let c=`Error downloading resource ${t}: ${o.message}`;i(c)}}this.Gu=!1}OC(t,e,i){return new Promise(function(n,o){let c=new XMLHttpRequest;c.open(t,e),c.responseType=i,c.onload=n,c.onerror=o,c.send()})}}return s})();function mv(s,r){let t=rl({...r,async:!1}),e;return t(s,i=>e=i),e}var yv=(()=>{class s{constructor(t,e){this.C=t,this.Uu=e,this.ty=new Ql}NC(){let t=new Set;qt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{t.has(i)||(this.ty.scanElement(i),t.add(i))})}handleCommand(t){let e=t&&t.withAssets,i=[],n=new Set,o=new Set,c=[];e&&kn.isWebViewLocalAssetsSupported()?(this.ty.onScannedAsset(({type:f,asset:u})=>{f==="stylesheet"&&!o.has(u.assetId)&&(o.add(u.assetId),csArray.prototype.push.call(c,u)),n.has(u.assetId)||(n.add(u.assetId),csArray.prototype.push.call(i,u))}),this.NC()):kn.isWebViewLocalAssetsSupported()||L.warn("Local asset is not supported on this browser");let l=Ev(),h=csJSON.stringify(l);if(e){let f=nl.generate();return this.MC(i,c,f),csJSON.stringify({serializedDom:h,serializationId:f})}return h}MC(t,e,i){e.length===0?this.uo(t,i):this.kC(t,e,i,(n,o)=>this.uo(n,o))}kC(t,e,i,n){let o=0,c=0,l=new Set(csArray.prototype.map.call(t,y=>y.assetId)),h=y=>!l.has(y),f=y=>{l.has(y.assetId)||(l.add(y.assetId),csArray.prototype.push.call(e,y),csArray.prototype.push.call(t,y))},u=y=>{for(let v of y)l.has(v.assetId)||(l.add(v.assetId),csArray.prototype.push.call(t,v));o++,o+c===e.length&&n(t,i)},m=y=>{c++,L.error("An error occurred while fetching a styleSheet: "+y),o+c===e.length&&n(t,i)};csArray.prototype.forEach.call(e,y=>{this.Uu.getStyleSheetAssets(y.assetId,u,m,h,f)})}uo(t,e){this.C.sendToParent(I.Assets,{assets:t,serializationId:e})}}return s})();function Ev(){return yg(),gg(mv(document))}var Sv=(()=>{class s{constructor(t){this.f=t,this.qu=null}isSdkTrackingContext(t){return At(t)&&ne(t)&&G(t.sessionKey)&&Re(t.pageNumber)&&G(t.pageViewType)&&ui(t.isRecording)}update(t){if(!this.isSdkTrackingContext(t)){L.warn(`webViewTrackingContext.service received wrong sdkTrackingContext, content:${csJSON.stringify(t)}`),this.qu=null;return}this.qu={...t,recordingConsentState:ii.NOT_NEEDED,projectId:this.f.projectId,uxaDomain:this.f.uxaDomain,...this.f.smbConfig}}getTrackingContext(){return this.qu}}return s})(),vv=(()=>{class s{constructor(t){this.li=t,this.ee=[]}handleCommand(t){if(!te(t))return;this.Rn(t);let e=this.li.getTrackingContext();e!==null&&this.jt(t,e)}executeRegisteredCallbacks(t){let e=t.trackingContext;e&&csArray.prototype.map.call(this.ee,i=>this.jt(i,e))}Rn(t){csArray.prototype.push.call(this.ee,t)}jt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),_v=(()=>{class s{constructor(t,e){this.Z=t,this.li=e}onIframeIntegrationCallback(t){let e=this.li.getTrackingContext();e!==null&&(t.trackingContext=e,this.Z.sendToChildren(I.IntegrationCallback,t))}}return s})(),Fh=(()=>{class s{constructor(t){this.commandsService=t,this.In=new Il}registerChildCommands(){this.commandsService.register(Ol,t=>this.In.handleCommand(t,this.Nr))}onParentRecordingContextChange(t){this.Nr={isRecording:t.isRecording,recordingStartTimestamp:t.recordingStartTimestamp||0,etrState:t.etrState||Ht.ETR_OFF},this.In.executeCallbacks(this.Nr)}}return $([Ti({wait:0,mode:"trailing"})],s.prototype,"onParentRecordingContextChange",null),s})(),wv=["serializeWebView","webview:serializeWebView"],Tv=["setAssetTransformerMode","webview:setAssetTransformerMode"],Av=["webview:onAfterScreenView"],bv=(()=>{class s extends Fh{constructor(t,e,i,n,o,c,l){super(t),this.commandsService=t,this.C=e,this.Z=i,this.Or=n,this.DC=o,this.pt=c,this.f=l}init(){this.li=new Sv(this.f),this.xC=new _v(this.Z,this.li),this.pt.addListener(this.xC),this.ey=new vv(this.li);let t=new jh(new Hh);this.LC=new yv(this.C,t),this.ht()}onAfterPageViewCallback(t){this.ey.executeRegisteredCallbacks(t)}ht(){super.registerChildCommands(),this.commandsService.register(co,t=>{this.ey.handleCommand(t)}),this.commandsService.register(Av,t=>{this.li.update(t);let e=this.li.getTrackingContext();e!==null&&this.DC.emitAfterPageViewCallback({initiator:Us.AfterPageView,trackingContext:e})}),this.commandsService.register(wv,t=>this.LC.handleCommand(t)),this.commandsService.register(Tv,t=>{(t===Dn||t===Bh||t===xn)&&this.Or.setAssetProcessingMode(t)})}}return s})(),Rv=(()=>{class s{constructor(t){this.C=t,this.ee={}}handleCommand(t){te(t)&&this.Rn(t)}executeRegisteredCallbacks(t){let e=t.trackingContext;if(e)if(t.callbackId){let i=this.ee[t.callbackId];i&&this.jt(i,e)}else for(let i in this.ee)this.jt(this.ee[i],e)}Rn(t){let e=fe.integer(),i={callbackId:e,initiator:Us.AfterPageView};this.ee[e]=t,this.C.sendToParent(I.IntegrationCallback,i)}jt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),Cv=(()=>{class s{constructor(t){this.C=t,this.ki={}}handleCommand(t){ne(t)&&te(t.callback)&&this.Cn(t.callback)}executePendingCallbacks(t){let{trackingContext:e,callbackId:i}=t;if(!i||!e)return;let n=this.ki[i];n&&(delete this.ki[i],this.jt(n,e.sessionKey))}Cn(t){let e=fe.integer(),i={callbackId:e,initiator:Us.GetSessionKey};this.ki[e]=t,this.C.sendToParent(I.IntegrationCallback,i)}jt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),Iv=(()=>{class s{constructor(t,e){this.C=t,this.Z=e,this.ic={}}handleCommand(t,e){ne(t)&&te(e)&&this.Cn(t,e)}executePendingCommand(t){let{trackingContext:e,callbackId:i}=t;if(!(!i||!e))if(this.ic[i]){let[n,o]=this.ic[i];n&&(delete this.ic[i],this.jt(e,n,o))}else this.Z.sendToChildren(I.TrackingContextResultMessage,t)}Cn(t,e){let i=fe.integer();this.ic[i]=[t,e],this.C.sendToParent(I.TrackingContextRequestMessage,{callbackId:i})}jt(t,e,i){csSetTimeout(()=>{let n=Cl(t,e);i(n)})}}return s})(),Pv=(()=>{class s extends Fh{constructor(t,e,i){super(t),this.commandsService=t,this.C=e,this.Z=i}init(){this.sy=new Rv(this.C),this.iy=new Cv(this.C),this.ry=new Iv(this.C,this.Z),this.ht()}onAfterPageViewCallback(t){this.sy.executeRegisteredCallbacks(t)}onIntegrationSessionKeyCallback(t){this.iy.executePendingCallbacks(t)}onTrackingContextResultCallback(t){this.ry.executePendingCommand(t)}ht(){super.registerChildCommands(),this.commandsService.register(co,t=>{this.sy.handleCommand(t)}),this.commandsService.register(Pl,t=>this.iy.handleCommand(t)),this.commandsService.register(Nl,(t,e)=>{this.ry.handleCommand(t,e)})}}return s})(),Ov=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.lt=e,this.le=i,this.Bt=n,this.ot=o,this.po=c,this.Tr=l}init(){var t,e;this.po&&this.ot&&((t=this.po)===null||t===void 0||t.addSelector((e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ht(),this.Ee=new Eo(this.le,this.lt,this.Bt,this.po,this.Tr)}Mo(){this.Ee.start()}Ch(){this.Ee.stop()}onParentSensitiveStatusChange(t){var e,i;t.maskedElementSettings&&this.lt.setMaskedElementSettingsFromParent(t.maskedElementSettings),t.capturedElementSelector&&this.Bt.setWhitelistedElementsSelector(t.capturedElementSelector,!1),t.encryptionSelectors&&((e=this.po)===null||e===void 0||e.addSelector(t.encryptionSelectors),(i=this.ot)===null||i===void 0||i.setEncryptionSelectors(t.encryptionSelectors,!1)),t.started?this.Mo():this.Ch()}ht(){this.E.register(yo,t=>{this.Bt.setWhitelistedElementsSelector(t)}),this.E.register(vr,t=>{this.lt.setMaskedElementSettingsFromCommand(t)}),this.E.register(oh,t=>{var e,i;(e=this.ot)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.po)===null||i===void 0||i.addSelector(t)})}}return s})(),Nv=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.S=t,this.E=e,this.lt=i,this.le=n,this.it=o,this.Bt=c,this.Yt=l,this.Tr=h,this.Ee=new Eo(this.le,this.lt,this.Bt,void 0,this.Tr,this.it)}init(){this.it.init(),this.ht()}onStartAnalytics(){this.Rr()}onAfterArtificialPageView(){this.ny(),this.Rr()}onStopAnalytics(){this.ny()}Rr(){this.Ee.start(),this.Yt.setSensitiveStatus({started:!0,useAnonymization:this.it.shouldUseAnonymization()}),this.S.emitSensitiveStatusChange()}ny(){this.Ee.stop(),this.Yt.setSensitiveStatus({started:!1,useAnonymization:this.it.shouldUseAnonymization()}),this.S.emitSensitiveStatusChange()}ht(){this.E.register(yo,t=>{this.Bt.setWhitelistedElementsSelector(t),this.S.emitSensitiveStatusChange()}),this.E.register(vr,t=>{this.lt.setMaskedElementSettingsFromCommand(t),this.S.emitSensitiveStatusChange()})}}return s})(),Mv=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f){this.gt=t,this.S=e,this.f=i,this.C=n,this.Ps=o,this.E=c,this.mt=l,this.O=h,this.Yt=f,this.Qn=()=>{this.E.start(),this.br.start()}}start(){let t,e,i,n,o,c,l,h,f,u,m,y,v,P,N,_;this.O.schedule(()=>{if(o=new kh,c=new zc(()=>{}),v=new Gc,_=new qc,this.mt.isInIframeContext()){let S=new Ov(this.E,o,c,v,P,N,_);S.init(),this.gt.addListener(S)}if(i=new Gs,u=new Dh(i),m=new Ah(window.location,u),this.mt.isInWebViewContext()){let S=new Uh(this.f),C=new fr,O=new Zn(this.f,m,C,S),A=new Nv(this.S,this.E,o,c,O,v,this.Yt);A.init(),this.gt.addListener(A),this.S.addListener(A)}}),this.O.schedule(()=>{t=new Rh(pe,this.f),e=new Qc(t),n=new XS(this.f,t,e,this.C,this.mt,this.gt,this.E,new Kc(L),this.Yt),this.gt.addListener(n)}),Fs.isRecordingSupported()&&this.O.schedule(()=>{let S=new ov(this.f,i,c,this.S,this.C,this.Ps,this.E,this.gt,this.mt,m,this.Yt,u,P);this.S.addListener(S),this.gt.addListener(S),S.init()}),this.O.schedule(()=>{f=new Jc(this.f);let S=new Ch(t,this.f.isChild),C=new Ih(t),O=new Ph(t),A=new Oh;h=new bh(S,C,O,A),l=new GS(f,h,this.C,this.Ps,this.Yt)}),this.O.schedule(()=>{h.addListener(l),this.gt.addListener(l),this.S.addListener(l),this.S.addListener(n)}),this.O.schedule(()=>{let S;if(this.mt.isInWebViewContext()){let C=new gv;this.Or=new fv(C),S=new bv(this.E,this.C,f,this.Or,this.gt,h,this.f)}else S=new Pv(this.E,this.C,f);this.gt.addListener(S),S.init()}),this.O.schedule(()=>{l.init(),n.init()}),this.O.schedule(()=>{var S,C,O,A;if(this.mt.isInWebViewContext()){let H=new cv,Q=new Tm(i,m),ot=new hh,xt=new fm(ot,u,!!(!((C=(S=this.f)===null||S===void 0?void 0:S.experimental)===null||C===void 0)&&C.anonymizeNameInUrls)),St=new _m(i,!((A=(O=this.f)===null||O===void 0?void 0:O.experimental)===null||A===void 0)&&A.anonymizeNameInUrls?u:void 0),w=new lv(m,Q,xt,St),D=new uv(i,new bl(i,null,null),H,w,this.Or,this.S,m,ot),V=new av(this.C,D);V.init(),this.S.addListener(V),this.gt.addListener(V)}else{let H=new zS(this.C);this.S.addListener(H)}}),this.br=new ol,this.O.schedule(()=>{this.br.onLoad(()=>{this.S.emitStartTracking()}),this.Qn()})}}return s})(),kv=2500,Dv=500,xv=(()=>{class s extends Vh{constructor(t,e,i=Dv){super(kv),this.gt=t,this.f=e,this.VC=i,this.zi=!1,this.rc=void 0,this.Wu=!0}onStart(){this.UC()}onStop(){this.buffer.reset(),this.Yu&&window.csClearInterval(this.Yu)}sendToParent(t,e){var i;if(this.jC()){(i=this.Xu)===null||i===void 0||i.call(this,t,e);return}if(this.HC(t)){let n=this.buildChildBaseMessage(t,e);this.buffer.addMessage(n)}}jC(){return this.zi&&this.Wu}HC(t){return!this.zi||t===I.Commands}onWebViewEvent(t){this.Xu=t}setAnalyticsStatus(t){this.Wu=t,this.Wu&&this.BC()}sendAllMessagesFromBuffer(){var t;let e=this.buffer.getMessages();for(let i of e)(t=this.Xu)===null||t===void 0||t.call(this,i.type,i.content);this.buffer.reset()}BC(){var t;if(!this.zi)return;let e=this.buffer.getMessages();for(let i of e)i.type===I.Commands&&((t=this.Xu)===null||t===void 0||t.call(this,i.type,i.content));this.buffer.reset()}buildChildBaseMessage(t,e){return{type:t,content:e}}UC(){this.zi=ct.isCSJavascriptBridgeDefined(),this.zi?this.oy():this.Yu=window.csSetInterval(()=>{this.zi=ct.isCSJavascriptBridgeDefined(),this.zi&&(this.oy(),window.csClearInterval(this.Yu))},this.VC)}oy(){this.FC(),this.rc=ct.getBridgeVersion(),this.rc===null?this.sendAllMessagesFromBuffer():this.rc>=hv?(this.$C(),ct.notifyIsReadyForTracking()):L.warn(`bridge version ${this.rc} is not supported`)}FC(){let t={message:csJSON.stringify(this.f),errorCode:"TAG_CONFIGURATION",level:rt.critical};ct.sendLog(t)}$C(){this.gt.emitStopAnalytics()}}return s})(),Lv=(()=>{class s{constructor(){this.Nr=null}getRecordingContext(){return this.Nr===null?{isRecording:!1}:this.Nr}setRecordingContext(t){this.Nr=t}}return s})();var Vv=(()=>{class s{constructor(){this.ac={started:!1,useAnonymization:!0}}getSensitiveStatus(){return this.ac}setSensitiveStatus(t){this.ac=t}getElementSensitiveStatus(t){return this.ac.started?k.isMaskedElement(t)||k.isMaskedElementChild(t)?Nt.MASKED:Wc.shouldEncrypt(t)?Nt.ENCRYPTED:Ae.isEditableNode(t)?Nt.ANONYMIZED:this.ac.useAnonymization?he.isWhitelistedElement(t)?Nt.CAPTURED:Nt.ANONYMIZED:Nt.CAPTURED:Nt.ANONYMIZED}}return s})(),Uv=(()=>{class s{constructor(t,e,i){this.f=t,this.mt=e,this.O=i}init(){this.f.isChild=!0,gs.isSupported()&&gs.setDigestSalt(this.f.projectId.toString());let t,e,i,n,o,c,l,h,f;this.O.schedule(()=>{t=new xh(this.O),e=new VS,i=new Lv,n=new Vv;let u=[Mn.UXA];this.mt.isInWebViewContext()?(window.cs_wvt=window.cs_wvt||[],csArray.prototype.push.call(u,Mn.WVT),o=new xv(e,this.f)):o=new $S(this.f,t,i,n,e),c=new _h(u)}),this.O.schedule(()=>{l=new jS(c,o),h=new US(l)}),this.O.schedule(()=>{h.init()}),this.O.schedule(()=>{}),this.O.schedule(()=>{}),this.O.schedule(()=>{t.addListener(h)}),this.O.schedule(()=>{t.emitInitTracking()}),this.O.schedule(()=>{new Mv(e,t,this.f,o,i,c,this.mt,this.O,n).start()})}}return s})();var jv=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),Hv=(()=>{class s{constructor(t,e,i){this.f=t,this.mt=e,this.us=i}start(){var t,e,i,n,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.f.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new jv,l=new Zl(!!(!((t=this.f.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.f.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.f.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),h=new df(this.mt,this.f);h.init();let f=new ff(this.f,h);if(this.mt.isTopWindowTracker()&&f.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&L.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){L.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}hf();let m=new xh(l),y=new PS(this.f,h,this.us,l,m,c);this.f.isQuotaEnabled()?y.initWithQuota():y.init()}else!this.mt.isTopWindowTracker()&&f.canTrackInChild()&&new Uv(this.f,this.mt,l).init();let u=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(m){return k.isMaskedElement(m)||k.isMaskedElementChild(m)},isAttributeSensitive(m,y){return k.isMaskedAttribute(m,y)},getSensitiveAttributes(m){return fc(m.attributes,y=>k.isMaskedAttribute(m,y.name))}},Console:{warn(m){u&&console.warn("cs.tracking.warning",m)},error(m){u&&console.error("cs.tracking.error",m)}},Version:Nc},window.CSFrameCommunication||(window.CSFrameCommunication=qi,qi.isActivable()&&qi.waitForConnection(),this.f.isCsCrosswritingHeap()&&qi.waitForHeapVisualLabeler(this.f.getHeapWebAppUri()))}}return $([Dt("main.start"),j("main.start")],s.prototype,"start",null),s})(),Bv=(()=>{class s{constructor(){}send(t,e,i=rt.warn){let n={message:t,errorCode:e,level:i};ct.sendLog(n)}}return s})();var Fv=(()=>{class s{constructor(t,e,i){this.W=t,this.M=e,this.tI=i,this.kt=[],this.eI=Yn().v}flush(){this.kt.length!==0&&(this.W.send({m:csArray.prototype.map.call(this.kt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.M.anonymizePII(window.location.pathname),pid:this.tI,v:this.eI}),this.kt=[])}push(t){csArray.prototype.push.call(this.kt,...t),this.flush()}}return s.DEBOUNCE_INTERVAL=5e3,$([Sd(s.DEBOUNCE_INTERVAL)],s.prototype,"flush",null),s})();function $v(s,r){let t=s.validationRate/10,e=fe.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let o=nh.create(L.warn,r.isTopWindowTracker()),l=new Vc(o).create(s.getMetricsUri(),!0),h=new Gs,f=new Fv(l,h,s.projectId);q.setService(f)}catch(o){L.warn(`Error initializing metrics: ${o.message}`)}}function zv(){var s;Pd();let r=new kp(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new Dp(window,r);t.init();let e=new nf;if(gd(L),of(),L.computeIsActive(r.validationRate),t.isTopWindowTracker()){let o=new tf(r,e);L.setStrategy(o)}else if(t.isInIframeContext()){let n=new rf(r);L.setStrategy(n)}else if(t.isInWebViewContext()){let n=new Bv;L.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=Es(window,"MutationObserver")),gp(),$v(r,t),new Hv(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{af(zv)}catch{}});})();

// signature-505664df730fab85ffeaf22be1b94a2c6869d51425d799fd0ba2c1fa6cc65283