/*! For license information please see posweb.472e65a55b16d8f0756b.bundle.js.LICENSE.txt */
/*! @fmr Copyright (c) 2025 FMR LLC. All Rights Reserved. Fidelity Confidential Information. @version: 25.09.26.763 */(()=>{"use strict";var e,t={15:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.MY_VIEW_GROUPS=void 0,function(e){e.account_specifics="Account Specifics",e.gain_loss="Gain/Loss",e.quote_data="Quote Data",e.research="Research",e.dividends="Dividends",e.fund_performance="Fund Performance",e.company_profile="Company Profile",e.options="Options",e.volatility="Volatility"}(s||(t.MY_VIEW_GROUPS=s={}))},924:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebGridPreloadMeta=void 0;const o=s(3274),i=s(17597),a=s(36764),r=s(58836),n=s(83254),l=s(17190),d=s(60942),c=s(60488),p=s(93535),u=s(49386),b=s(82402),w=s(19637),h=s(34140);class v{constructor(){this._shouldSkipPzn=!1,this._isTimeOut=!1,this.poswebPrefManager=w.PreferenceManager.getInstance(),this._posweb=p.PoswebMetadata.getInstance(),this._poswebGridService=new d.PoswebGridService,this._poswebCommon=n.PoswebCommon.getInstance(),v._poswebStore=u.PoswebStore.getInstance()}static getInstance(){return this._instance||(this._instance=new this)}invoke(){delete h.WindowService.getWindow()[l.PoswebConstants.PWE_PZN_TREATMENTS];const e=[this.preloadStateData(),this.preloadPznData()];return Promise.all(e)}preloadStateData(){const e="/session/ap126216/poswebexp",t="/user/ap126216/poswebexp",s={state:[{path:e,scope:"session",version:"1.0",entry:[{key:l.PoswebConstants.SETTINGS_FILTER_STATE_KEY},{key:l.PoswebConstants.SETTINGS_FILTER_ADDITIONAL_STATE_KEY},{key:l.PoswebConstants.SETTINGS_FILTER_CLOSED_STATE_KEY},{key:l.PoswebConstants.SETTINGS_PRESET_VIEW_STATE_KEY}]},{path:t,scope:"user",version:"1.0",entry:[{key:l.PoswebConstants.SETTINGS_WASHSALES_STATE_KEY},{key:l.PoswebConstants.SETTINGS_GROUPBY_STATE_KEY},{key:l.PoswebConstants.SETTINGS_GROUPBY_BASKET_STATE_KEY},{key:l.PoswebConstants.SETTINGS_FOREIGNSTOCKS_STATE_KEY},{key:l.PoswebConstants.SETTINGS_PRIORDAYGL_STATE_KEY},{key:l.PoswebConstants.SETTINGS_CLOSED_POSITIONS_YEAR_KEY},{key:l.PoswebConstants.GRID_COLUMN_ORDER},{key:a.PoswebActionKeys.GRID_PRESET_COLUMN_ORDER},{key:a.PoswebActionKeys.GRID_DRAWER_TAB_SELECTED},{key:a.PoswebActionKeys.GRID_COLUMN_SORT_DETAILS},{key:a.PoswebActionKeys.GRID_SETTINGS},{key:l.PoswebConstants.SHOW_BASKET_MSG},{key:l.PoswebConstants.SHOW_GBS_MSG},{key:l.PoswebConstants.SETTINGS_GROUPBY_SECURITYTYPE_STATE_KEY},{key:l.PoswebConstants.GBS_MSG_SEEN_DATES},{key:l.PoswebConstants.MY_VIEW_SEL_COLS},{key:l.PoswebConstants.GBS_EXPAND_ALL},{key:l.PoswebConstants.SHOW_MYVIEW_INTRO}]}]};let o,n,d,p,u,m,g,_,y,S,P,C,f,E,T,I,O,A,k,D,R,L;return this._poswebCommon.isHideFundView=void 0,new Promise(a=>{const G=setTimeout(()=>{w.PreferenceManager._isSafeMode=!0,this._isTimeOut=!0,a("State API Call Passed Threshold")},this._posweb.stateApiTimeout);this._poswebGridService.retrieveCustomStateData(s).subscribe({next:s=>{if(v.retrieveErrorFlag=!1,s&&!this._isTimeOut){if(Array.isArray(s)){for(const i of s)if(i&&i.entry&&Array.isArray(i.entry)&&i.entry.length)if(e===i.path)for(const e of i.entry)l.PoswebConstants.SETTINGS_FILTER_STATE_KEY===e.key?o=e.value:l.PoswebConstants.SETTINGS_FILTER_CLOSED_STATE_KEY===e.key?d=e.value:l.PoswebConstants.SETTINGS_PRESET_VIEW_STATE_KEY===e.key?y=e.value:l.PoswebConstants.SETTINGS_FILTER_ADDITIONAL_STATE_KEY===e.key&&(n=e.value);else if(t===i.path)for(const e of i.entry)l.PoswebConstants.SETTINGS_WASHSALES_STATE_KEY===e.key?p=e.value:l.PoswebConstants.SETTINGS_GROUPBY_STATE_KEY===e.key?u=e.value:l.PoswebConstants.SETTINGS_GROUPBY_BASKET_STATE_KEY===e.key?m=e.value:l.PoswebConstants.SETTINGS_GROUPBY_SECURITYTYPE_STATE_KEY===e.key?R=e.value:l.PoswebConstants.GBS_EXPAND_ALL===e.key?L=e.value:l.PoswebConstants.SETTINGS_FOREIGNSTOCKS_STATE_KEY===e.key?g=e.value:l.PoswebConstants.SETTINGS_PRIORDAYGL_STATE_KEY===e.key?_=e.value:l.PoswebConstants.SETTINGS_CLOSED_POSITIONS_YEAR_KEY===e.key?S=e.value:l.PoswebConstants.GRID_PRESET_COLUMN_ORDER===e.key?(P=e.value,D=this._poswebCommon.myViewColumns(P)):l.PoswebConstants.GRID_DRAWER_TAB_SELECTED===e.key?C=e.value:l.PoswebConstants.GRID_COLUMN_SORT_DETAILS===e.key?f=e.value:l.PoswebConstants.GRID_SETTINGS===e.key?E=e.value:l.PoswebConstants.GRID_COLUMN_ORDER===e.key?T=e.value:l.PoswebConstants.SHOW_MYVIEW_INTRO===e.key?O=e.value:l.PoswebConstants.SHOW_BASKET_MSG===e.key?I=e.value:l.PoswebConstants.SHOW_GBS_MSG===e.key?A=e.value:l.PoswebConstants.GBS_MSG_SEEN_DATES===e.key&&(k=e.value);const a=h.WindowService.getPositionSettings();if(u&&(a.groupBy=u),m&&(a.isGroupByBasket="true"===m),R&&(a.isGroupBySecurityType="true"===R),L&&(a.isGroupBySecurityExpandAll="true"===L),o&&(a[l.PoswebConstants.SETTINGS_FILTER_KEY]=o),n&&(a[l.PoswebConstants.SETTINGS_ADDITIONAL_FILTER_KEY]=n),d&&(a[l.PoswebConstants.SETTINGS_FILTER_CLOSED_KEY]=d),_&&(a.isPriorDayGL="true"===_),p&&(a.isUnadjusted="true"===p),g&&(a.isShowForeignStocks="true"===g),y&&(a.presetView=y),S&&(a.closedPositionsYearSelection=S),"false"!==I&&(a.showBasketMsg=!0),"false"!==O&&(a.showMyViewIntro=!0),"false"!==A&&(a.showGbsMsg=!0),k&&(a.gbsMsgSeenDates=k),a.myViewSelCols=D||"",P){const e=v._poswebStore.store.getState().presetColumnsOrder;let t;e[i.POSWEB_PRESET_VIEW.DIVIDEND_VIEW]=c.PoswebGridUtils.updateColumnOrder(e[i.POSWEB_PRESET_VIEW.DIVIDEND_VIEW],i.POSWEB_PRESET_VIEW.DIVIDEND_VIEW);try{const s=e[i.POSWEB_PRESET_VIEW.MY_VIEW];t=JSON.parse(P);const o=s?b.PoswebUtils.sortMyViewColumns(s.split(","),a.myViewSelCols.split(",")):[];t.MyView=o.join(","),t.DividendView=c.PoswebGridUtils.updateColumnOrder(t.DividendView,i.POSWEB_PRESET_VIEW.DIVIDEND_VIEW)}catch(s){t=e,console.warn("Error with format received from State API for column order--",s)}t.Overview=b.PoswebUtils.validateColumns(t.Overview,e[i.POSWEB_PRESET_VIEW.OVERVIEW]),t.DividendView=b.PoswebUtils.validateColumns(t.DividendView,e[i.POSWEB_PRESET_VIEW.DIVIDEND_VIEW]),t.StackOverView=b.PoswebUtils.validateColumns(t.StackOverView,e[i.POSWEB_PRESET_VIEW.STACK_OVERVIEW]),t.FundPerfView=b.PoswebUtils.validateColumns(t.FundPerfView,e[i.POSWEB_PRESET_VIEW.FUND_PERF_VIEW]),t.ClosedPositionsView=b.PoswebUtils.validateColumns(t.ClosedPositionsView,e[i.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW]),a.GRID_PRESET_COLUMN_ORDER=t,v._poswebStore.store.dispatch(r.PoswebActions.dispatchPresetColumnsOrder(t))}else if(T){const e=v._poswebStore.store.getState().presetColumnsOrder;e[i.POSWEB_PRESET_VIEW.OVERVIEW]=T,v._poswebStore.store.dispatch(r.PoswebActions.dispatchPresetColumnsOrder(e))}if(["purchase-history","research","events"].indexOf(C)>-1&&v._poswebStore.store.dispatch(r.PoswebActions.dispatchUserTabSelection(C)),f){const e=v._poswebStore.store.getState().presetColumnsOrder,t=v._poswebStore.store.getState().columnSortDetails;let s;try{s=JSON.parse(f)}catch(e){s=t,console.warn("Error with format received from State API for sort order--",e)}b.PoswebUtils.matchSort(s.Overview,e.Overview)||(s.Overview=t.Overview),b.PoswebUtils.matchSort(s.DividendView,e.DividendView)||(s.DividendView=t.DividendView),b.PoswebUtils.matchSort(s.StackOverView,e.StackOverView)||(s.StackOverView=t.StackOverView),b.PoswebUtils.matchSort(s.FundPerfView,e.FundPerfView)||(s.FundPerfView=t.FundPerfView),b.PoswebUtils.matchSort(s.ClosedPositionsView,e.ClosedPositionsView)||(s.ClosedPositionsView=t.ClosedPositionsView),b.PoswebUtils.matchSort(s.MyView,e.MyView)||(s.MyView=t.MyView),v._poswebStore.store.dispatch(r.PoswebActions.dispatchColumnSortDetails(s))}"true"===R&&"0"===u?"true"===L?(b.PoswebUtils.updateElementStyle("collapse-all-gbs","block"),b.PoswebUtils.updateElementStyle("expand-all-gbs","none")):(b.PoswebUtils.updateElementStyle("collapse-all-gbs","none"),b.PoswebUtils.updateElementStyle("expand-all-gbs","block")):(b.PoswebUtils.updateElementStyle("collapse-all-gbs","none"),b.PoswebUtils.updateElementStyle("expand-all-gbs","none")),E&&v._poswebStore.store.dispatch(r.PoswebActions.dispatchGridSettings(JSON.parse(E)))}this.poswebPrefManager._isSafeMode=!1,clearTimeout(G),a("Success")}else console.warn("No data from State API during preload positions data from state"),w.PreferenceManager.getInstance()._isSafeMode=!0,clearTimeout(G),a("No data from State API during preload positions data from state")},error:e=>{v.retrieveErrorFlag=!0,console.warn("Error retrieving State API --",e),w.PreferenceManager.getInstance()._isSafeMode=!0,clearTimeout(G),a(e)},complete:a})})}preloadPznData(){if(!h.WindowService.getToggle("ap126216_PWE_PZN_Enable"))return Promise.resolve("Skip retrieving PZN data");const e=Date.now();let t,s;this._posweb.pznApiTimeout&&(s=new Promise(s=>{t=setTimeout(()=>{const t=Date.now();console.warn(`PZN API Call Passed ${this._posweb.pznApiTimeout}ms Threshold after ${t-e}ms`),this._shouldSkipPzn=!0,s("PZN API Call Passed Threshold")},this._posweb.pznApiTimeout)}));const a=new Promise(s=>{(new o.AccountMiniContext).retrieveAccountInfo(i.POSWEB_PRESET_VIEW.OVERVIEW).then(o=>{var i,a;if((null===(i=null==o?void 0:o.accts)||void 0===i?void 0:i.length)>0&&(this._poswebCommon.amc=o),!(null===(a=null==o?void 0:o.accts)||void 0===a?void 0:a.some(e=>{var t;return null===(t=o.pznFPLAccts)||void 0===t?void 0:t.includes(e)})))return clearTimeout(t),void s("Skip retrieving PZN data as account(s) are not FPL eligible");const r={amc:o.amc};this._poswebGridService.retrievePznData(r).subscribe({next:e=>{e&&!this._shouldSkipPzn&&(h.WindowService.getWindow()[l.PoswebConstants.PWE_PZN_OFFERS_RES]=e.offersResponse||{},h.WindowService.getWindow()[l.PoswebConstants.PWE_PZN_TREATMENTS]=e.pznTreatments||[]),clearTimeout(t),s("Success")},error:o=>{clearTimeout(t);const i=Date.now();console.warn(`Error retrieving PZN data after ${i-e}ms --`,o),s("Error retrieving PZN data")},complete:s})}).catch(o=>{clearTimeout(t);const i=Date.now();console.warn(`Error retrieving account context for PZN data after ${i-e}ms --`,o),s("Error retrieving account context for PZN data")})});return s?Promise.race([a,s]):a}}t.PoswebGridPreloadMeta=v},2940:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CustomTooltip=void 0;t.CustomTooltip=class{init(e){if(e&&e.data&&e.data.headlineTime&&"--"!==e.data.headlineTime.val){const t=this.eGui=document.createElement("div");t.classList.add("custom-tooltip"),t.innerHTML=`\n         <div class="news-tooltip-headline">${e.data.text}</div>\n         <div class="news-tooltip-meta">\n               <span class="news-tooltip-source">${e.data.wirename}</span>\n               <span class="news-tooltip-source">${e.data.headlineTime.disp}</span>\n         </div>\n         <div class = "news-tooltip-summary">${e.data.summary}</div>\n            `}else{const e=document.createElement("div");e.style.display="none",this.eGui=e}}getGui(){return this.eGui}}},3274:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AccountMiniContext=void 0;const o=s(31368),i=s(17597);class a{static isAccountCrypto(e){return"Crypto"===e.acctType&&"CASH"===e.acctSubType}retrieveAccountInfo(e){return new Promise((t,s)=>{var r;if(!window.PortSumContainer)return void s(new Error("cannot find PortSumContainer from new port sum"));const n=[];n.push(new Promise((e,t)=>{var s;(null===(s=window.PortSumContainer.PicoService)||void 0===s?void 0:s.getPersonContext)?window.PortSumContainer.PicoService.getPersonContext().then(t=>{var s,i,a;const r=o.AmcUtils.mapPicoToAMC(t);this._amc=o.AmcUtils.zipAMC(r),this._amcObj=r,this._ineligibleAccountsForCloPos=o.AmcUtils.getIneligibleAccountsForCloPos(r.accounts),1===(null===(s=this._accts)||void 0===s?void 0:s.length)&&this._ineligibleAccountsForCloPos.indexOf(this._accts[0])>-1&&(this._isSingleIneligibleForCloPos=!0),this._hasSPS=r.hasSPS,this._pznFPLAccts=r.pznFPLAccts,this._externalCustId=null===(a=null===(i=t.person)||void 0===i?void 0:i.customerAttrDetail)||void 0===a?void 0:a.externalCustomerID,e()}):t(new Error("cannot find PicoService from PortSumContainer"))})),n.push(new Promise(e=>{var t;(null===(t=window.PortSumContainer.SubscriptionService)||void 0===t?void 0:t.getSubscriptions)?window.PortSumContainer.SubscriptionService.getSubscriptions().then(t=>{t&&t.length?(this._hasSubscribedBasket=t.filter(e=>"KIT01"===e.productId&&"A"===e.subscriptionStatusFlag).length>0,e()):(this._hasSubscribedBasket=!1,e())}).catch(()=>{this._hasSubscribedBasket=!1,e()}):(this._hasSubscribedBasket=!1,e())}));const l=null===(r=window.PortSumContainer.StateContext)||void 0===r?void 0:r.current("currentAccount");let d;(null==l?void 0:l.allAccountList)&&l.groups&&(d=[],l.groups.forEach(e=>{d=d.concat(e.accounts)})),this._selectedAccounts=l?d||l.accounts||[l]:[],this._numFiliAccounts=0,this._numBrokerageEligibleAccounts=0,this._numCryptoAccounts=0,this._selectedAccounts&&this._selectedAccounts.length>0&&(this._accts=[],this._spsAccts=[],this._selectedAccounts.forEach(t=>{if(!t.isHidden)if(t.acctNum&&"Fidelity Credit Card"!==t.acctType&&"SPS"!==t.acctType){if("Annuity"===t.acctType)++this._numFiliAccounts;else if(a.isAccountCrypto(t)){if(i.POSWEB_PRESET_VIEW.DIVIDEND_VIEW===e)return;++this._numCryptoAccounts}else++this._numBrokerageEligibleAccounts;this._accts.push(t.acctNum.toString())}else if("SPS"===t.acctType){const e=t.workplacePlanDetail,s=t.parentBrokAcctNum+"_"+e.clientTickerSymbol+"_"+e.planId+"_"+e.planTypeCode;this._spsAccts.push(s.toString())}})),Promise.allSettled(n).then(()=>{t(this)})})}get hasSPS(){return Boolean(this._hasSPS)}get pznFPLAccts(){return this._pznFPLAccts}get amc(){return this._amc}get externalCustId(){return this._externalCustId}get accts(){return this._accts}set amcObj(e){this._amcObj=e}get amcObj(){return this._amcObj}get spsAccts(){return this._spsAccts}get isFiliOnly(){return Boolean(this.hasFiliAccounts&&!this.hasSPSAccounts&&!this.hasBrokerageEligibleAccounts)}get isSPSOnly(){return Boolean(this.hasSPSAccounts&&!this.hasBrokerageEligibleAccounts&&!this.hasFiliAccounts)}get hasSPSAccounts(){return Boolean(this.spsAccts&&this.spsAccts.length>0)}get hasFiliAccounts(){return Boolean(this._numFiliAccounts&&this._numFiliAccounts>0)}get hasBrokerageEligibleAccounts(){return Boolean(this._numBrokerageEligibleAccounts&&this._numBrokerageEligibleAccounts>0)}get hasCrytpoAccounts(){return Boolean(this._numCryptoAccounts&&this._numCryptoAccounts>0)}get hasSubscribedBasket(){return Boolean(this._hasSubscribedBasket)}get ineligibleAccountsForCloPos(){return this._ineligibleAccountsForCloPos}get isSingleIneligibleForCloPos(){return Boolean(this._isSingleIneligibleForCloPos)}get selectedAccounts(){return this._selectedAccounts}}t.AccountMiniContext=a},5704:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebUtilsHTML=void 0;const o=s(82402);t.PoswebUtilsHTML=class{constructor(){this._stkColHdDragged=!1,this._stkColHdStartX=0,this._stkColHdStartY=0}static getInstance(){return this._instance||(this._instance=new this)}stkColHdTouchMove(e){(Math.abs(e.touches[0].clientX-this._stkColHdStartX)>10||Math.abs(e.touches[0].clientY-this._stkColHdStartY)>10)&&(this._stkColHdDragged=!0)}stkColHdTouchStart(e){this._stkColHdDragged=!1,this._stkColHdStartX=e.touches[0].clientX,this._stkColHdStartY=e.touches[0].clientY}stkColHdTouchEnd(e){if(!1===this._stkColHdDragged){const t=o.PoswebUtils.htmlQuerySelector(e);t&&t.click()}this._stkColHdDragged=!1}}},8326:()=>{},8939:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebGridClosedPositions=void 0;const o=s(31368),i=s(16186),a=s(17597),r=s(83254),n=s(17190),l=s(60942),d=s(60488),c=s(82402),p=s(34140);class u{constructor(){this._poswebGridService=new l.PoswebGridService,this._poswebSelectDiv=c.PoswebUtils.getHtmlElement("posweb-grid_top-year-dropdown"),this.initialize()}initialize(){const{todayDate:e}=u.getCurrentDate(),{startDateInput:t,endDateInput:s}=u.getDateInputElms();u.initDateInput(t,e),u.initDateInput(s,e),u.bindHarvestTaxLink()}static formatClosedPositionsRequestDate(e,t){const{currentMonth:s,currentDay:o,currentYear:i}=u.getCurrentDate(),a=`${i}-${s}`;if(null!=e||(e=u.getDefaultDateRange()),"today"===e)return{startDate:`${a}-${o}`,endDate:`${a}-${o}`};if("month"===e){return{startDate:`${a}-01`,endDate:`${a}-${new Date(Number(i),Number(s),0).getDate()}`}}if("custom"===e)return u.getCustomDateForCloPos();if(e&&e.includes("_")){const t=e.split("_");return{startDate:t[0],endDate:t[1]}}return t?{startDate:e+"-01-01",endDate:e+"-12-31"}:{dateType:"TAX_YEAR",taxYear:e}}static getInstance(){return this._instance||(this._instance=new this)}updateSelectedYear(){const e=u.calculateValidRange();this._poswebSelectDiv&&(this._poswebSelectDiv.pvdOptions=e);let t,s,o=p.WindowService.getPositionSettings().closedPositionsYearSelection;if(!this._poswebSelectDiv||o){if(o.includes("_")){[t,s]=o.split("_");u.isValidDates(t,s)||(o=u.getDefaultDateRange(),this.saveYearSelection(o))}if(o.includes("_")){const{startDateInput:e,endDateInput:o}=u.getDateInputElms();this._poswebSelectDiv&&(this._poswebSelectDiv.pvdSelectedValue="custom"),e&&(e.pvdValue=t),o&&(o.pvdValue=s),c.PoswebUtils.updateElementStyle("posweb-grid_top-date-select","flex"),u.validateCustomDate()}else u.validateYearSelection(o),c.PoswebUtils.updateElementStyle("posweb-grid_top-date-select","none")}else this._poswebSelectDiv.pvdSelectedValue=u.getDefaultDateRange()}checkAccountIsManagedAndTradable(){const{amc:e}=r.PoswebCommon.getInstance(),{selectedAccounts:t}=e;return t.some(e=>{var t,s;return"TAXED"===(null===(t=e.acctAttrDetail)||void 0===t?void 0:t.taxTreatmentCode)&&(null===(s=e.acctTradeAttrDetail)||void 0===s?void 0:s.isTradable)})}saveYearSelection(e){p.WindowService.getPositionSettings().closedPositionsYearSelection=e,this._poswebGridService.saveStateData({entry:[{key:"closedPositionsYearSelection",value:e}]}).subscribe({next:e=>{e||console.warn("No response from State API during saving closedPositionsYearSelection in user state")},error:e=>{console.error("Error occurred saving closedPositionsYearSelection in user state, and error is %o",e)}})}static getDefaultDateRange(){return u.getCurrentDate().currentYear}static getCustomDateForCloPos(){const{startDateInput:e,endDateInput:t}=u.getDateInputElms();return{startDate:u.validateDateInput(e),endDate:u.validateDateInput(t)}}getClosedPositionsData(e){var t;const{isUnadjusted:s,filter:o}=d.PoswebGridUtils.retrieveSettings(!1,n.PoswebConstants.SETTINGS_FILTER_CLOSED_KEY);if(a.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW!==p.WindowService.getPositionSettings().presetView){const e=c.PoswebUtils.getHtmlElement("posweb-spinner");e&&(e.pvdHidden=!1)}this._cloPosSubscription&&this._cloPosSubscription.unsubscribe();const i=u.formatClosedPositionsRequestDate(null===(t=c.PoswebUtils.getHtmlElement("posweb-grid_top-year-dropdown"))||void 0===t?void 0:t.pvdSelectedValue),r=Object.assign(Object.assign({},i),{accts:e.accts,amc:e.amc,externalCustId:e.externalCustId,settings:{isUnadjusted:s,filter:o},ineligibleAccounts:e.ineligibleAccountsForCloPos});return new Promise((e,t)=>{this._cloPosSubscription=this._poswebGridService.retrieveClosedPositionsData(r).subscribe({next:s=>{s?e(s):t(new Error("No response from Closed Positions API"))},error:t,complete:e})})}static validateCustomDate(e){const{startDateInput:t,endDateInput:s}=u.getDateInputElms(),o=c.PoswebUtils.getHtmlElement("posweb-grid_top-date-select-alert"),i=c.PoswebUtils.getHtmlElement("posweb-grid_top-date-select-button"),a=u.validateDateInput(t),r=u.validateDateInput(s),n=u.isValidDates(a,r);if(t&&s&&o&&i){const a="blur"===(null==e?void 0:e.type)&&e.target===s,r=Boolean(i.disabled);i.disabled=!n,n?(o.classList.remove(u.INVALID_CLASS),t.pvdError=!1,s.pvdError=!1,a&&r&&i.focus()):(o.classList.add(u.INVALID_CLASS),t.pvdError=!0,s.pvdError=!0,a&&!r&&o.focus())}return n?{startDate:a,endDate:r}:{}}static calculateValidRange(){const{currentYear:e}=u.getCurrentDate(),t=[],{amc:s}=r.PoswebCommon.getInstance(),{selectedAccounts:i}=s;let a=Number(e)-10;if(s.amcObj.accounts){const e=s.ineligibleAccountsForCloPos,t=i.filter(t=>!e.includes(t.acctNum)),r=o.AmcUtils.getEarliestAccount(t);r&&r.acctCreationDate&&(a=c.PoswebUtils.getYearFromEpoch(r.acctCreationDate))}for(let s=Number(e);s>=a;s--)t.push({value:s.toString(),text:s.toString()});return t.unshift({value:"today",text:"Today"},{value:"month",text:"This Month"},{value:"custom",text:"Custom"}),t}static validateYearSelection(e){const t=c.PoswebUtils.getHtmlElement("posweb-grid_top-year-dropdown");if(!t)return e;const s=t.pvdOptions;if(s&&s.length>0){const t=s[s.length-1].value;parseInt(e)<t&&(e=u.getDefaultDateRange()+"",this._instance.saveYearSelection(e))}return t.pvdSelectedValue=e,e}static getDateInputElms(){return{startDateInput:c.PoswebUtils.getHtmlElement("posweb-grid_top-start-date"),endDateInput:c.PoswebUtils.getHtmlElement("posweb-grid_top-end-date")}}static getCurrentDate(){const e=new Date,[t,s,o]=e.toLocaleString("en-US",{month:"2-digit",year:"numeric",day:"2-digit"}).split("/");return{currentYear:o,currentMonth:t,currentDay:s,todayDate:`${o}-${t}-${s}`}}static initDateInput(e,t){e&&(e.pvdValue=t,setTimeout(()=>{const s=e.querySelector("input.pvd-input__input");s&&(s.type="date",s.max=t)}),e.addEventListener("blur",u.validateCustomDate))}static validateDateInput(e){if(!e)return;const{todayDate:t}=u.getCurrentDate();return u.isValidDate(e.pvdValue,t)||(e.pvdValue=t),e.pvdValue}static isValidDate(e,t){if(!/\d{4}-\d{2}-\d{2}/.test(e))return!1;const s=Date.parse(e),o=Date.parse(t);return!isNaN(s)&&s<=o}static isValidDates(e,t){const{todayDate:s}=u.getCurrentDate();return u.isValidDate(e,s)&&u.isValidDate(t,s)&&e<=t}static bindHarvestTaxLink(){const e=c.PoswebUtils.htmlQuerySelector(".posweb-grid-tax-harvest-link");e&&e.addEventListener("click",()=>{i.MetricsService.sendMetricsRequest("Tax_Loss_Harvesting_Entry_From_Closed_Pos")})}}t.PoswebGridClosedPositions=u,u.INVALID_CLASS="posweb-grid_top-date-select-invalid"},10069:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebCostBasisTotalCellRenderer=void 0;const o=s(79859),i=s(17190),a=s(60488),r=s(93535);class n extends o.PoswebBaseCellRenderer{static getCostBasisTotalSnippet(e,t,s,o,r,n){var l;const d=(null===(l=window[i.PoswebConstants.SETTINGS_PROPERTY_NAME])||void 0===l?void 0:l.isUnadjusted)&&!n,c=a.PoswebGridUtils.getWashSalesPopover(d,e);return r?c+`<span class="posweb-cell-cost_basis_value">${s}</span><sup class="posweb-cell-cost_basis_total_sup">^</sup>`:(t&&["--","n/a"].indexOf(s)<0?c:"")+`<span class="posweb-cell-cost_basis_value">${s||""}</span>`+(o?`<sup aria-label="${this.getCostBasisSup(o)}" class="posweb-cell-cost_basis_total_sup">${o}</sup>`:"")}static getCostBasisPerShareSnippet(e,t){return`<span class="posweb-cell-stacked-item posweb-cell-stack-item-cost_basis_per_share">${e||""}${t?`<sup>${t}</sup>`:""}</span>`}static getCostBasisSup(e){switch(e){case"1":return"Cost basis will be updated shortly";case"2":return"Cost basis will be updated on the next business day";case"3":return"Cost basis not required for this position";case"a":return"Cost basis is calculated using average cost method";case"c":return"Cost basis contains data provided by customer";case"d":return"Adjusted cost basis based on IRS default methods or instructions provided to us";case"e":return"Cost basis is equal to fair market value on the date of retirement distribution";case"i":return"Cost basis provided by investment advisor or third party";case"t":return"Cost basis provided by third party";case"N":return"Cost basis for alternative positions";default:return"Cost basis"}}static getStackedItemsSnippet(e,t){var s,o,i,r,l,d,c,p,u,b;let w="";if(a.PoswebGridUtils.isValidStackColInfo(e,t)){const{colId:a}=t,h=null===(s=t.top)||void 0===s?void 0:s.field,v=null===(o=t.bottom)||void 0===o?void 0:o.field;w='<span class="posweb-cell-cost_basis_total_container posweb-cell-stacked-item posweb-cell-stack-item-cost_basis">'+n.getCostBasisTotalSnippet(null===(i=e.meta)||void 0===i?void 0:i.rowId,null===(r=e.meta)||void 0===r?void 0:r.isWash,null===(l=e[a][h])||void 0===l?void 0:l.disp,null===(d=e[a][h])||void 0===d?void 0:d.sup,null===(c=e.meta)||void 0===c?void 0:c.isEWSUnavail,null===(p=e.meta)||void 0===p?void 0:p.currencyCode)+"</span>"+n.getCostBasisPerShareSnippet(null===(u=e[a][v])||void 0===u?void 0:u.disp,null===(b=e[a][v])||void 0===b?void 0:b.sup)}return w}init(e){var t,s,o,i,a,l,d,c,p;this._poswebMetadata=r.PoswebMetadata.getInstance(),this._eGui=document.createElement("div"),this._params=e,e&&((null===(t=window.toggleMap)||void 0===t?void 0:t.ap126216_PWE_COST_BASIS_TOTAL)||["AWAY_TOTAL","SLEEVE_SUBTOTAL","BASKET_SUBTOTAL","ACCOUNT_TOTAL","GRAND_TOTAL","GBS_TOTAL"].indexOf(null===(s=e.data)||void 0===s?void 0:s.rowType)<0)&&((null===(i=null===(o=e.colDef)||void 0===o?void 0:o.cellRendererParams)||void 0===i?void 0:i.isStacked)&&e.data&&e.colDef.cellRendererParams.stackColInfo?(this._eGui.classList.add("posweb-cell-stacked-item-container"),this._eGui.innerHTML=n.getStackedItemsSnippet(e.data,e.colDef.cellRendererParams.stackColInfo)):(null===(a=e.data)||void 0===a?void 0:a.cstBasTot)&&(this._eGui.classList.add("posweb-cell-cost_basis_total_container"),this._eGui.innerHTML=n.getCostBasisTotalSnippet(null===(l=e.data.meta)||void 0===l?void 0:l.rowId,null===(d=e.data.meta)||void 0===d?void 0:d.isWash,e.data.cstBasTot.disp,e.data.cstBasTot.sup,null===(c=e.data.meta)||void 0===c?void 0:c.isEWSUnavail,null===(p=e.data.meta)||void 0===p?void 0:p.currencyCode)))}static getPoswebPrintGridCell(e,t,s){var o,i,a,r,l,d;return!(null===(o=window.toggleMap)||void 0===o?void 0:o.ap126216_PWE_COST_BASIS_TOTAL)&&["AWAY_TOTAL","SLEEVE_SUBTOTAL","BASKET_SUBTOTAL","ACCOUNT_TOTAL","GRAND_TOTAL","GBS_TOTAL"].indexOf(null==e?void 0:e.rowType)>-1?"<td></td>":(null==s?void 0:s.isStacked)&&e&&s.stackColInfo?`<td${t?` class="${t}"`:""}><div class="posweb-cell-stacked-item-container">${n.getStackedItemsSnippet(e,s.stackColInfo)}</div></td>`:(null===(i=null==e?void 0:e.cstBasTot)||void 0===i?void 0:i.disp)?`<td${t?` class="${t}"`:""}><div class="posweb-cell-cost_basis_total_container">`+n.getCostBasisTotalSnippet(null===(a=e.meta)||void 0===a?void 0:a.rowId,null===(r=e.meta)||void 0===r?void 0:r.isWash,e.cstBasTot.disp,e.cstBasTot.sup,null===(l=e.meta)||void 0===l?void 0:l.isEWSUnavail,null===(d=e.meta)||void 0===d?void 0:d.currencyCode)+"</div></td>":`<td${t?` class="${t}"`:""}></td>`}}t.PoswebCostBasisTotalCellRenderer=n},11908:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.POSWEB_SETTINGS_GROUPBY=void 0,function(e){e.ACCOUNT="0",e.SYMBOL="1",e.NO_GROUPING="2"}(s||(t.POSWEB_SETTINGS_GROUPBY=s={}))},16186:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsService=void 0;const o=s(53059);t.MetricsService=class{static sendMetricsRequest(e,t=o.MetricsActionTypes.INTERACTION,s,i,a){try{if(s=s||"",i=i||[],a=a||"",(e=e||"").trim().length>0&&window.Bootstrapper&&window.Bootstrapper._trackAnalytics&&"function"==typeof window.Bootstrapper._trackAnalytics){const r={pt:"ss",pname:"Positions",action:t,intname:e,pver:s,sec:"portfolio"};return i.length&&(r.trans=i),t!==o.MetricsActionTypes.PAGEVIEW&&t!==o.MetricsActionTypes.INTERACTION||(r.SEC2=a),window.Bootstrapper._trackAnalytics(r),!0}return!1}catch(e){return console.error("Error In track analytics "+e),!1}}static setMetricsTrans(e,t="clickthru",s="na"){const o=[];return e&&Array.isArray(e)&&e.forEach(e=>{o.push({msgID:s,msgTitle:e.name,phase:t,pname:"Positions"})}),o}}},17190:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebConstants=void 0;class s{}t.PoswebConstants=s,s.MK_GRID_ST="mark_start_pos_grid",s.MK_GRID_END="mark_end_pos_grid",s.MK_GRID_PAINT_ST="mark_start_ag_grid",s.MK_GRID_PAINT_END="mark_end_ag_grid",s.MES_GRID="measure_pos_grid",s.MES_GRID_PAINT="measure_ag_grid",s.DEFAULT_COL_WIDTH=145,s.TOGGLE_MAP_PROPERTY_NAME="toggleMap",s.SETTINGS_PROPERTY_NAME="pwePositionSettings",s.SETTINGS_GROUPBY_STATE_KEY="positionsGroupBy",s.SETTINGS_GROUPBY_BASKET_STATE_KEY="positionsGroupByBasket",s.SETTINGS_GROUPBY_SECURITYTYPE_STATE_KEY="positionsGroupBySecurityType",s.SETTINGS_FILTER_STATE_KEY="positionsFilter",s.SETTINGS_FILTER_ADDITIONAL_STATE_KEY="positionsAdditionalFilter",s.SETTINGS_FILTER_CLOSED_STATE_KEY="positionsFilterClosed",s.SETTINGS_WASHSALES_STATE_KEY="positionsWashSales",s.SETTINGS_FOREIGNSTOCKS_STATE_KEY="positionsForeignStocks",s.SETTINGS_CLOSED_POSITIONS_YEAR_KEY="closedPositionsYearSelection",s.SETTINGS_PRESET_VIEW_STATE_KEY="positionsPresetView",s.POS_APP_TIME="pwePositionAppRespTime",s.POS_LWC_TIME="pwePositionLwcRespTime",s.BASE_API_PATH="/ftgw/digital/positions/poswebex/",s.AIDE_API_PATH="/itgw/digital/positions/poswebex/",s.API_POSITIONS=s.BASE_API_PATH+"api/positions",s.HDR_APP_TIME="WEB_APP_RESP_TIME",s.HDR_LWC_TIME="WEB_API_RESP_TIME",s.DISABLE_SNIPPET=' disabled aria-disabled="true"',s.PWE_PZN_OFFERS_RES="offersResponse",s.PWE_PZN_TREATMENTS="pwePznTreatments",s.GRID_COLUMN_ORDER="GRID_COLUMN_ORDER",s.GRID_PRESET_COLUMN_ORDER="GRID_PRESET_COLUMN_ORDER",s.GRID_DRAWER_TAB_SELECTED="GRID_DRAWER_TAB_SELECTED",s.GRID_COLUMN_SORT_DETAILS="GRID_COLUMN_SORT_DETAILS",s.GRID_SETTINGS="GRID_SETTINGS",s.SETTINGS_FILTER_KEY="filter",s.SETTINGS_ADDITIONAL_FILTER_KEY="additionalFilter",s.SETTINGS_FILTER_ITEMS_SET_KEY="filterItemsSet",s.SETTINGS_ADDITIONAL_FILTER_ITEMS_SET_KEY="additionalFilterItemsSet",s.SETTINGS_FILTER_CLOSED_KEY="filterClosed",s.SETTINGS_FILTER_ITEMS_SET_CLOSED_KEY="filterItemsSetClosed",s.SETTINGS_PRIORDAYGL_STATE_KEY="priorDayGL",s.SETTINGS_SEARCH="poswebSearch",s.MY_VIEW_SEL_COLS="myViewSelCols",s.SHOW_BASKET_MSG="showBasketMsg",s.SHOW_GBS_MSG="showGbsMsg",s.GBS_MSG_SEEN_DATES="gbsMsgSeenDates",s.SHOW_MYVIEW_INTRO="showMyViewIntro",s.GBS_EXPAND_ALL="expandAllSecurityTypeGroups"},17597:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.POSWEB_PRESET_VIEW=void 0,function(e){e.OVERVIEW="Overview",e.STACK_OVERVIEW="StackOverView",e.DIVIDEND_VIEW="DividendView",e.FUND_PERF_VIEW="FundPerfView",e.CLOSED_POSITIONS_VIEW="ClosedPositionsView",e.MY_VIEW="MyView",e.EDIT_MY_VIEW="EditMyView"}(s||(t.POSWEB_PRESET_VIEW=s={}))},17693:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebAnalystRatingsCellRenderer=void 0;const o=s(79859);class i extends o.PoswebBaseCellRenderer{init(e){this._eGui=document.createElement("div"),this._params=e,this._eGui.classList.add("posweb-cell-analyst_ratings_container"),(null==e?void 0:e.data)&&(this._eGui.innerHTML=i.getAnalystRatingsSnippet(e.data))}static getAnalystRatingsSnippet(e){const{equitySummaryScore:t,equitySummaryRating:s}=e;return(null==t?void 0:t.disp)&&(null==s?void 0:s.disp)&&[void 0,"--","n/a"].indexOf(t.disp)<0&&[void 0,"--","n/a"].indexOf(s.disp)<0?`<span class="posweb-cell-eq_summary-rating">${s.disp}</span><span class="posweb-cell-eq_summary-score posweb-cell-eq_summary-score--${o=s.disp,o.toLowerCase().replace(/\s+/g,"-")}">${t.disp}</span>`:"";var o}static getPoswebPrintGridCell(e,t){return`<td${t?` class="${t}"`:""}><div class="posweb-cell-eq_summary-score">${i.getAnalystRatingsSnippet(e)}</div></td>`}}t.PoswebAnalystRatingsCellRenderer=i},18533:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GrandTotBalance=void 0;t.GrandTotBalance=class{}},18684:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.POSWEB_HTTP=void 0,function(e){e.GET="GET",e.HEAD="HEAD",e.OPTS="OPTIONS",e.POST="POST",e.PUT="PUT",e.DEL="DELETE"}(s||(t.POSWEB_HTTP=s={}))},19637:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PreferenceManager=void 0;const o=s(46022),i=s(36764),a=s(60942),r=s(3976);t.PreferenceManager=class{constructor(){this._poswebGridService=new a.PoswebGridService,this._colOrderSubject=new r.Subject,this._colOrders$=this._colOrderSubject.asObservable(),this._myViewcolOrderSubject=new r.Subject,this._myViewcolOrder$=this._myViewcolOrderSubject.asObservable(),this._drawerTabSelSubject=new r.Subject,this._drawerTabSel$=this._drawerTabSelSubject.asObservable(),this._colSortSubject=new r.Subject,this._colSort$=this._colSortSubject.asObservable(),this._settingsSubject=new r.Subject,this._settings$=this._settingsSubject.asObservable(),this._isSafeMode=!1}static getInstance(){return this._instance||(this._instance=new this)}checkColOrderChangeSubscription(){return Boolean(this.$colOrderSubscription)}checkMyViewSelColumnsChangSubscription(){return Boolean(this.$myViewSelectedColumnsSubscription)}subscribeColOrderChange(){this.checkColOrderChangeSubscription()||(this.$colOrderSubscription=this.createStrategyForColumnOrderObservable(3e3).subscribe())}subscribeMyViewSelectColumnsChange(){this.checkMyViewSelColumnsChangSubscription()||(this.$myViewSelectedColumnsSubscription=this.createStrategyForMyViewSelectedColumnsObservable(3e3).subscribe())}subscribeColSortChange(){this.$colSortSubscription||(this.$colSortSubscription=this.createStrategyForColumnSortObservable(3e3).subscribe())}subscribeDrawerTabSelChange(){this.$drawerTabSelSubscription||(this.$drawerTabSelSubscription=this.strategyForStateSave(this._drawerTabSel$).subscribe())}subscribeSettingsChange(){this.$settingsSelSubscription||(this.$settingsSelSubscription=this.strategyForStateSave(this._settings$).subscribe())}publish(e,t){switch(e){case i.PoswebActionKeys.GRID_PRESET_COLUMN_ORDER:this._colOrderSubject.next(t);break;case i.PoswebActionKeys.GRID_DRAWER_TAB_SELECTED:this._drawerTabSelSubject.next({key:e,value:t});break;case i.PoswebActionKeys.GRID_COLUMN_SORT_DETAILS:this._colSortSubject.next(t);break;case i.PoswebActionKeys.GRID_SETTINGS:t=JSON.stringify(t),this._settingsSubject.next({key:e,value:t});break;case i.PoswebActionKeys.MY_VIEW_SEL_COLUMNS:t=JSON.stringify(t),this._myViewcolOrderSubject.next({key:e,value:t})}}createStrategyForColumnOrderObservable(e,t=this._colOrders$){return t.pipe((0,o.filter)(()=>!this._isSafeMode),(0,o.distinctUntilChanged)(),(0,o.debounceTime)(e),(0,o.concatMap)(e=>this._poswebGridService.saveStateData({entry:[{key:i.PoswebActionKeys.GRID_PRESET_COLUMN_ORDER,value:JSON.stringify(e)}]})),(0,o.retry)())}createStrategyForMyViewSelectedColumnsObservable(e,t=this._myViewcolOrder$){return t.pipe((0,o.filter)(()=>!this._isSafeMode),(0,o.distinctUntilChanged)(),(0,o.debounceTime)(e),(0,o.concatMap)(e=>this._poswebGridService.saveStateData({entry:[{key:i.PoswebActionKeys.MY_VIEW_SEL_COLUMNS,value:JSON.stringify(e)}]})),(0,o.retry)())}createStrategyForColumnSortObservable(e,t=this._colSort$){return t.pipe((0,o.filter)(()=>!this._isSafeMode),(0,o.distinctUntilChanged)(),(0,o.debounceTime)(e),(0,o.concatMap)(e=>this._poswebGridService.saveStateData({entry:[{key:i.PoswebActionKeys.GRID_COLUMN_SORT_DETAILS,value:JSON.stringify(e)}]})),(0,o.retry)())}strategyForStateSave(e){return e.pipe((0,o.filter)(()=>!this._isSafeMode),(0,o.distinctUntilChanged)(),(0,o.concatMap)(e=>this._poswebGridService.saveStateData({entry:[e]})),(0,o.retry)())}get isSafeMode(){return this._isSafeMode}}},20045:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebNewsCellRenderer=void 0;const o=s(34629),i=s(75228),a=s(36043),r=s(89065),n=s(79859),l=s(60942);class d extends n.PoswebBaseCellRenderer{constructor(){super(),this.NEWS_STORY_UNAVAILABLE_MSG="We're sorry. This information is currently unavailable. Please try again later.",this._poswebGridService=new l.PoswebGridService}static getNewsSnippet(e){var t;return`<a href="javascript:void(0)" class="${null!==(t=null==e?void 0:e.includes("--"))&&void 0!==t&&t?"posweb-cell-news_value-placeholder":"posweb-cell-news_value"}">${e||""}</a>`}openNewsModal(e){const{headline:t,wirename:s,timestamp:o,storyId:a}=e,n=this.getModalHeaderSnippet(t,s,o),l=this.getModalSpinnerSnippet();i.CommonModal.getInstance().constructAndShowModal(n,'<div class="posweb-news-modal">'+l+"</div>","",r.POSWEB_MODAL_SIZE.LARGE);const d=document.querySelector(".posweb-news-modal");this.retrieveNewsStoryContent(a,d)}retrieveNewsStoryContent(e,t){this.retrieveNewsStory({resId:e}).then(e=>{t.innerHTML=e.storyContent}).catch(()=>{t.innerHTML=this.getMessageSnippet(this.NEWS_STORY_UNAVAILABLE_MSG,"critical")})}getMessageSnippet(e,t){return`<div class="posweb-headlines-container">\n                    <div class="posweb-research-card-header">News</div>\n                </div>\n                <div class="posweb-research-message">\n                    ${t?`<div class="posweb-research-message-icon"><pvd3pwe-icon pvd-name="alert__${t}--outline" pvd-size="large" class="color-black"></pvd3pwe-icon></div>`:""}\n                    <div class="posweb-research-message-text"><p>${e}</p></div>\n                </div>`}retrieveNewsStory(e){return o.__awaiter(this,void 0,void 0,function*(){return this.$newsStorySubscription&&this.$newsStorySubscription.unsubscribe(),new Promise((t,s)=>{this.$newsStorySubscription=this._poswebGridService.retrieveNewsStoryData(e).subscribe({next:t,error:e=>{console.error("Error occurred retrieving new story data, and error is %o",e),s(e)}})})})}init(e){var t;if(this._eGui=document.createElement("div"),this._params=e,null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.headlineTime){this._eGui.classList.add("posweb-cell-news_container"),this._eGui.innerHTML=d.getNewsSnippet(e.data.headlineTime.disp);const t=this._eGui.querySelector(".posweb-cell-news_value"),s={headline:e.data.text||"",wirename:e.data.wirename||"",timestamp:e.data.headlineTime,storyId:e.data.resId||""};"--"!==e.data.headlineTime.val&&t.addEventListener("click",e=>{e.stopPropagation(),this.openNewsModal(s)})}}getModalHeaderSnippet(e,t,s){return`<div class="posweb-news-story-heading">\n                    <div class="posweb-news-story-headline">\n                        <h4>${e}</h4>\n                    </div>\n                    <div class="posweb-news-story-metadata">\n                        <p class="posweb-news-story-author">${t}</p>\n                        <p class="posweb-news-story-timestamp">${s.disp}</p>\n                    </div>\n                </div>`}getModalSpinnerSnippet(){return`<div class="posweb-research-card posweb-research-card-news">\n            <div class="posweb-research-card-content">\n                ${a.NewsCardComponent.provideSpinner("")}\n            </div>\n        </div>`}static getPoswebPrintGridCell(e,t){var s;return`<td${t?` class="${t}"`:""}><div class="posweb-cell-news-headline_container">`+d.getNewsSnippet(null===(s=e.headlineTime)||void 0===s?void 0:s.disp)+"</div></td>"}}t.PoswebNewsCellRenderer=d},20438:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebColSort=void 0;const o=s(17597),i=s(11908),a=s(60488),r=s(93535);class n{static compareSymbolCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"sym")}static compareGrpCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"grp")}static compareLastPriceCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"lstPrc")}static compareLastPriceChangeCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"lstPrChg")}static compareLastPricePreClosCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"lstPrcPrevCls")}static compareTodayGLCurrencyCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"todGL")}static compareTodayGLPercentCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"todGLPct")}static compareTotalGLCurrencyCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"totGL")}static compareTotalGLPctCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"totGLPct")}static compareCurrentValueCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"curVal")}static compareAccountPercentCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"actPer")}static compareQuantityCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"qty")}static compareCostBasisShareCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"cstBasShr")}static compareCostBasisTotalCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"cstBasTot")}static compareFiftyTwoWeekCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"fifTwo")}static compareExDivDateCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"exDvDte")}static comparePreClosedDtCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"prevClsDt")}static compareAmountPerShareCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"dvAmt")}static comparePayDateCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"pyDte")}static compareDistYieldCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"distYld")}static compareSecYieldCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"secYld")}static compareEstAnuIncCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"estAnuInc")}static compareStackedLstPrStkCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"lstPrStk")}static compareStackedTodGLStkCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"todGLStk")}static compareStackedTotGLStkCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"totGLStk")}static compareStackedCstBasStkCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"cstBasStk")}static compareMngStarCtgCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"mngCtg")}static compareYTDDailyCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"ytdDly")}static compareOneYrCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"oneYr")}static compareThreeYrCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"thrYr")}static compareFiveYrCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"fivYr")}static compareTenYrCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"tenYr")}static compareExpRatioNetCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"exRtNt")}static compareExpRatioGrossCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"exRtGs")}static compareMstarCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"mngStr")}static compareAccountCol(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"act")}static compareCstBasCloPos(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"cstBasCloPos")}static compareProceeds(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"proceedsAmt")}static compareStGL(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"stGL")}static compareLtGL(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"ltGL")}static compareTotGLCloPos(e,t,s,o,i){return n.compareCols(e,t,s,o,i,"totGLCloPos")}static createComparator(e){return(t,s,o,i,a)=>n.compareCols(t,s,o,i,a,e)}static compareCols(e,t,s,n,l,d){var c,p,u,b,w,h;if("grp"===d||!(null===(c=s.data)||void 0===c?void 0:c.rowType)||!(null===(p=n.data)||void 0===p?void 0:p.rowType))return 0;if("GRAND_TOTAL"===s.data.rowType||"GRAND_TOTAL"===n.data.rowType)return 0;if("ACCOUNT_TOTAL"===s.data.rowType||"ACCOUNT_TOTAL"===n.data.rowType)return 0;if("ACCOUNT"===s.data.rowType||"ACCOUNT"===n.data.rowType)return 0;if("SLEEVE_SUBTOTAL"===s.data.rowType||"SLEEVE_SUBTOTAL"===n.data.rowType)return 0;if("BASKET_SUBTOTAL"===s.data.rowType||"BASKET_SUBTOTAL"===n.data.rowType)return 0;if("GBS_TOTAL"===s.data.rowType||"GBS_TOTAL"===n.data.rowType)return 0;if("PENDING"===s.data.rowType||"PENDING"===n.data.rowType)return 0;if("ASSETS_HELD_AWAY"===s.data.rowType||"ASSETS_HELD_AWAY"===n.data.rowType)return 0;if("AWAY_TOTAL"===s.data.rowType||"AWAY_TOTAL"===n.data.rowType)return 0;if("ACCOUNT_MSG"===s.data.rowType||"ACCOUNT_MSG"===n.data.rowType)return 0;const v=o.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW===a.PoswebGridUtils.getCurrentSelectedPresetView()?i.POSWEB_SETTINGS_GROUPBY.ACCOUNT:a.PoswebGridUtils.getGroupBy(),m=i.POSWEB_SETTINGS_GROUPBY.SYMBOL===v,g=i.POSWEB_SETTINGS_GROUPBY.NO_GROUPING===v;let _=!1;if(m&&(_=this.SYM_TOT_COL_IDS.indexOf(d)>-1||"cstBasStk"===d&&"top"===s.beans.gridApi.getColumn(d).colDef.headerComponentParams.sortBy)){if(["AHAIS","AHAS"].indexOf(s.data.rowSubType)>-1||["AHAIS","AHAS"].indexOf(n.data.rowSubType)>-1)return 0;if(("AHA"===s.data.rowSubType||"AHA"===n.data.rowSubType)&&(s.data.symNam!==n.data.symNam||s.data.rowSubType!==n.data.rowSubType||s.data.rowType.indexOf("POSITION")<0||n.data.rowType.indexOf("POSITION")<0))return 0;if(s.data.symNam===n.data.symNam&&(s.data.rowType.indexOf("POSITION")<0||n.data.rowType.indexOf("POSITION")<0))return 0}else{if("SPACER"===s.data.rowType||"SPACER"===n.data.rowType)return 0;if("SYMBOL"===s.data.rowType||"SYMBOL"===n.data.rowType)return 0;if("SYMBOL_TOTAL"===s.data.rowType||"SYMBOL_TOTAL"===n.data.rowType)return 0;if(("AHA"===s.data.rowSubType||"AHA"===n.data.rowSubType)&&s.data.rowSubType!==n.data.rowSubType&&(!g||r.PoswebMetadata.getInstance().totalNoOfAccts<2))return 0}if(i.POSWEB_SETTINGS_GROUPBY.ACCOUNT===v&&s.data.actNum===n.data.actNum||m&&(_||s.data.sym.name===n.data.sym.name)||g){if(o.POSWEB_PRESET_VIEW.FUND_PERF_VIEW===a.PoswebGridUtils.getCurrentSelectedPresetView()){if("sym"===d&&!m){if("POSITION_CORE"===s.data.rowType)return-1;if("POSITION_CORE"===n.data.rowType)return 1}}else if(this.CORE_COL_IDS.indexOf(d)<0&&!m&&s.data.meta&&n.data.meta){const e=l?-1:1;if(s.data.meta.isSimpCore&&("true"===s.data.meta.isFDIC||"true"!==n.data.meta.isFDIC))return-1*e;if(n.data.meta.isSimpCore)return 1*e}let i,c;switch(d){case"sym":m?(e=s.data.act.name)===(t=n.data.act.name)&&(e=s.data.act.number,t=n.data.act.number):(e=s.data&&s.data.sym&&s.data.sym.name&&s.data.sym.name.indexOf("-")>-1?s.data.sym.name.replace(/(^-)/g,""):s.data.sym.name,t=n.data&&n.data.sym&&n.data.sym.name&&n.data.sym.name.indexOf("-")>-1?n.data.sym.name.replace(/(^-)/g,""):n.data.sym.name);break;case"cusip":e=s.data.sym.cusip,t=n.data.sym.cusip;break;case"fifTwo":e=s.data.fifTwo.lowHigh,t=n.data.fifTwo.lowHigh;break;case"dayRange":e=s.data.dayRange.lowHigh,t=n.data.dayRange.lowHigh;break;case"contractRange":e=s.data.contractRangeVisual.lowHigh,t=n.data.contractRangeVisual.lowHigh;break;case"dayLow":e=s.data.dayRange.low.val,t=n.data.dayRange.low.val;break;case"dayHigh":e=s.data.dayRange.high.val,t=n.data.dayRange.high.val;break;case"mngStr":s.data.mstar.rate===n.data.mstar.rate?(e=s.data.mstar.cnt.val,t=n.data.mstar.cnt.val):(e=s.data.mstar.rate,t=n.data.mstar.rate);break;case"act":(e=s.data.actNam)===(t=n.data.actNam)&&(e=s.data.actNum,t=n.data.actNum);break;case"todGLStk":case"totGLStk":i=s.beans.gridApi.getColumn(d).colDef.headerComponentParams.sortBy,m&&(c=r.PoswebMetadata.getInstance().allSymTotInfos)&&s.data.symNam!==n.data.symNam?(e=c[s.data.symNam][d][i],t=c[n.data.symNam][d][i]):"top"===i?(e=s.data[d].top.val,t=n.data[d].top.val):"bottom"===i&&(e=s.data[d].bottom.val,t=n.data[d].bottom.val);break;case"cstBasStk":if(i=s.beans.gridApi.getColumn(d).colDef.headerComponentParams.sortBy,"bottom"===i)e=s.data[d].bottom.val,t=n.data[d].bottom.val;else if("top"===i)if(m&&(c=r.PoswebMetadata.getInstance().allSymTotInfos)&&s.data.symNam!==n.data.symNam){if((e=c[s.data.symNam][d])===(t=c[n.data.symNam][d]))return 0}else e=s.data[d].top.val,t=n.data[d].top.val;break;case"changeStk":case"lstPrStk":i=s.beans.gridApi.getColumn(d).colDef.headerComponentParams.sortBy,"top"===i?(e=s.data[d].top.val,t=n.data[d].top.val):"bottom"===i&&(e=s.data[d].bottom.val,t=n.data[d].bottom.val);break;case"securityType":e=s.data.meta.securityType,t=n.data.meta.securityType;break;case"securitySubType":e=s.data.meta.securitySubType,t=n.data.meta.securitySubType;break;case"acctType":e=s.data.meta.holdingType,t=n.data.meta.holdingType;break;case"todGL":case"todGLPct":case"totGL":case"totGLPct":case"cstBasTot":case"curVal":case"estAnuInc":if(m&&(c=r.PoswebMetadata.getInstance().allSymTotInfos)&&s.data.symNam!==n.data.symNam){if((e=c[s.data.symNam][d])===(t=c[n.data.symNam][d]))return 0}else e=s.data[d].val,t=n.data[d].val;break;case"cstBasCloPos":case"totGLCloPos":case"proceedsAmt":case"stGL":case"ltGL":e=null!==(b=null===(u=s.data[d])||void 0===u?void 0:u.val)&&void 0!==b?b:"--",t=null!==(h=null===(w=n.data[d])||void 0===w?void 0:w.val)&&void 0!==h?h:"--";break;default:e=s.data[d].val,t=n.data[d].val}return"--"===e?-1:"--"===t?1:"n/a"===e?-1:"n/a"===t?1:l?e<t?-1:1:e>t?1:-1}return 0}}t.PoswebColSort=n,n.SYM_TOT_COL_IDS=["todGL","todGLPct","totGL","totGLPct","curVal","todGLStk","totGLStk","estAnuInc","cstBasTot"],n.CORE_COL_IDS=["curVal","actPer","distYld","secYld","estAnuInc"]},21147:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebSettingsFilterComponent=void 0;const o=s(17190),i=s(70207);class a extends i.PoswebSettingsFilterBaseComponent{constructor(){super(...arguments),this.settingsFilterKey=o.PoswebConstants.SETTINGS_FILTER_KEY,this.settingsFilterItemsSetKey=o.PoswebConstants.SETTINGS_FILTER_ITEMS_SET_KEY,this.settingsFilterStateKey=o.PoswebConstants.SETTINGS_FILTER_STATE_KEY,this.additionalFilterStateKey=o.PoswebConstants.SETTINGS_FILTER_ADDITIONAL_STATE_KEY,this.securityTypeKeyLabelArr=[["Stocks","Stocks"],["ETFs","ETFs"],["MutualFunds","Mutual funds"],["Options","Options"],["Bonds_FixedIncome","Bonds/Fixed income"],["REIT_UIT_LP","REIT/UIT/LP"],["Warrants","Warrants"],["Cash","Cash"],["ForeignCash","Foreign cash"],["Annuities","Annuities"],["CIT","CIT"],["LoanedSecurities","Loaned securities"],["AssetsHeldAway","Assets held away"],["HardToBorrow","Hard to borrow"],["Digital_Currency","Digital assets"],["Bonds","Bonds"],["Stocks_ETFs","Stocks/ETFs"],["Others","Others"]],this.eventTypeKeyLabelArr=[["isOptionable","Optionable"],["isIntradayActivity","Has intraday activity"],["isLargestFiveHoldings","Largest five holdings"],["isDividendsEvent","Dividend"],["isNearFiftyTwoWeekHigh","Near 52-week high"],["isNearFiftyTwoWeekLow","Near 52-week low"],["isOptionNearExpiration","Option expiring soon"],["isSharesHeldShort","Shares held short"],["isSharesHeldLong","Shares held long"],["isSoonMaturingBond","Bond maturing soon"]]}static getInstance(){return this._instance||(this._instance=new this)}}t.PoswebSettingsFilterComponent=a},21836:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebReducers=void 0;const o=s(36737),i=s(36764),a=s(19637);t.PoswebReducers=class{static reducer(e=o.DEF_POSWEB_STATE,t){switch(t.type){case i.PoswebActionKeys.GRID_ROW_DATA:return Object.assign(Object.assign({},e),{rowData:t.rowData,slvData:t.slvData,basketData:t.basketData,groupBySecurityData:t.groupBySecurityData});case i.PoswebActionKeys.GRID_PRESET_COLUMN_ORDER:case i.PoswebActionKeys.MY_VIEW_SEL_COLUMNS:return a.PreferenceManager.getInstance().publish(t.type,t.presetColumnsOrder),Object.assign(Object.assign({},e),{presetColumnsOrder:t.presetColumnsOrder});case i.PoswebActionKeys.GRID_COLUMN_SORT_DETAILS:return a.PreferenceManager.getInstance().publish(t.type,t.sortDetails),Object.assign(Object.assign({},e),{columnSortDetails:t.sortDetails});case i.PoswebActionKeys.GRID_DRAWER_TAB_SELECTED:return a.PreferenceManager.getInstance().publish(t.type,t.selectedTab),Object.assign(Object.assign({},e),{userSelectedTab:t.selectedTab});case i.PoswebActionKeys.GRID_SETTINGS:return a.PreferenceManager.getInstance().publish(t.type,t.settingsDetails),Object.assign(Object.assign({},e),{settings:t.settingsDetails});case i.PoswebActionKeys.NO_ACTION:default:return e}}}},25661:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebPendingActivityPopoverCellRenderer=void 0;const o=s(79859),i=s(93535),a=s(82402);class r extends o.PoswebBaseCellRenderer{static getItemsContainerDiv(e){var t,s,o,i,a,n;let l='<div class="posweb-popover-pending_activity_items_container">';return e&&((null===(t=e.unsettledCash)||void 0===t?void 0:t.disp)&&(l+=r.getItemDivTag(e.unsettledCash.disp,e.unsettledCash.val&&e.unsettledCash.val>0?"Cash Credit from Unsettled Activity":"Cash Debit from Unsettled Activity")),(null===(s=e.unsettledMargin)||void 0===s?void 0:s.disp)&&(l+=r.getItemDivTag(e.unsettledMargin.disp,e.unsettledMargin.val&&e.unsettledMargin.val>0?"Margin Credit Balance":"Margin Debit Balance")),(null===(o=e.unsettledShort)||void 0===o?void 0:o.disp)&&(l+=r.getItemDivTag(e.unsettledShort.disp,e.unsettledShort.val&&e.unsettledShort.val>0?"Short Credit Balance":"Short Debit Balance")),(null===(i=e.whenIssuedCash)||void 0===i?void 0:i.disp)&&(l+=r.getItemDivTag(e.whenIssuedCash.disp,e.whenIssuedCash.val&&e.whenIssuedCash.val>0?"Cash Credit for When Issued Stock":"Cash Debit for When Issued Stock")),(null===(a=e.dividendsAccrued)||void 0===a?void 0:a.disp)&&(l+=r.getItemDivTag(e.dividendsAccrued.disp,"Dividends Accrued")),(null===(n=e.dvpRvpCash)||void 0===n?void 0:n.disp)&&(l+=r.getItemDivTag(e.dvpRvpCash.disp,e.dvpRvpCash.val&&e.dvpRvpCash.val>0?"Cash Credit for DVP/RVP":"Cash Debit for DVP/RVP"))),l+="</div>",l}static getItemDivTag(e,t){return`\n            <div class="posweb-popover-pending_activity_item_row">\n                <p class="posweb-popover-pending_activity_item_label">${t}</p>\n                <p class="posweb-popover-pending_activity_item_value">${e}</p>\n            </div>`}static getLinksContainerDiv(e){const t=i.PoswebMetadata.getInstance();return`\n            <div class="posweb-popover-pending_activity_link_container">\n                <a class="posweb-popover-pending_activity_link_balances posweb-metrics"\n                    data-metrics="pending activity popover balances link clicked"\n                    href="${t.digitalDomain}/ftgw/digital/portfolio/balances#${e}"\n                    target="_blank">Balances<pvd3pwe-icon pvd-name="action__open-link" pvd-size="small"\n                    class="color-action posweb-popover-pending_activity_link_icon"></pvd3pwe-icon></a>\n                <a class="posweb-popover-pending_activity_link_history posweb-metrics"\n                    data-metrics="pending activity popover history link clicked"\n                    href="${t.digitalDomain}/ftgw/digital/portfolio/activity#${e}"\n                    target="_blank">History<pvd3pwe-icon pvd-name="action__open-link" pvd-size="small"\n                    class="color-action posweb-popover-pending_activity_link_icon"></pvd3pwe-icon></a>\n            </div>`}static getPopoverDivInnerHTML(e,t,s){return`<p class="posweb-popover-pending_activity_account_name text-bold">${e}</p>\n                <p class="posweb-popover-pending_activity_account_number">${a.PoswebUtils.getAccountNumber(t)}</p>\n                ${r.getItemsContainerDiv(s)}\n                ${r.getLinksContainerDiv(t)}`}init(e){var t,s,o,i;this._eGui=document.createElement("div"),this._params=e,this._eGui.classList.add("posweb-cell-current_value_container"),(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.actNum)&&(null===(s=e.data.curVal)||void 0===s?void 0:s.disp)&&(null===(o=e.data.meta)||void 0===o?void 0:o.pendPop)&&(null===(i=e.node)||void 0===i?void 0:i.id)&&(this._eGui.innerHTML+=`\n            <a href="javascript:void(0);"\n               class="posweb-cell-popover-trigger posweb-cell-current_value posweb-metrics" data-metrics="pendingActivityPopover"\n               id="posweb-tt-trigger-pending-activity-${e.node.id}"\n               aria-describedby="posweb-tt-popover-pending-activity-${e.node.id}">${e.data.curVal.disp}</a>\n            <pwe-popover class="posweb-popover-pending_activity" position="top" role="dialog" show-elem=".positions-web-experience"\n                for="posweb-tt-trigger-pending-activity-${e.node.id}" id="posweb-tt-popover-pending-activity-${e.node.id}" zindex="1"\n                additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport" popover-hide-top_bottom=".ag-body-viewport"\n                popover-hide-left_right=".ag-center-cols-viewport">\n                <div class="posweb-totals-popover">${r.getPopoverDivInnerHTML(e.data.actNam||"",e.data.actNum,e.data.meta.pendPop)}</div>\n            </pwe-popover>`)}static getPoswebPrintGridCell(e,t){var s;return`<td class="posweb-cell-print ${t||""}">`+((null===(s=null==e?void 0:e.curVal)||void 0===s?void 0:s.disp)?e.curVal.disp+'<sup class="posweb-row-pending_activity_print_info_indicator">&nbsp;</sup>':"")+"</td>"}}t.PoswebPendingActivityPopoverCellRenderer=r},27334:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createMyFundViewTemplate=void 0;const s=["mstar","mngCtg","ytdDly","oneYr","thrYr","fivYr","tenYr","exRtNt","exRtGs"],o=["mstar"];t.createMyFundViewTemplate=()=>{const e={};return s.forEach(t=>{e[t]=o.includes(t)?{cnt:{val:"--",disp:"--"},rate:"--"}:{val:"--",disp:"--"}}),e}},28198:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DistributionCardComponent=void 0;const o=s(58294),i=s(93535);class a extends o.EventCardComponent{constructor(e,t,s){super(),this._posweb=i.PoswebMetadata.getInstance(),this._rowId=e,this._distributionDetails=t,this._distributionLabel=s}getSnippet(){return this._distributionDetails&&this._distributionLabel?'<div class="posweb-events-card posweb-events-card-distribution">'+this.getHeaderSnippet(this._distributionLabel)+this.getBodySnippet(this._distributionDetails)+this.getFooterSnippet()+"</div>":""}getHeaderSnippet(e){return e?`<div class="posweb-events-card-header"><div class="posweb-events-card-header-top"><img class="posweb-events-card-icon" alt="Distribution Event exists" src="${this._posweb.assetUrl}assets/${this._posweb.version}/distribution_card_icon.svg"/><div class="posweb-events-card-header-title">${e}</div></div></div>`:""}getBodySnippet(e){return`<div class="posweb-events-card-body"><div class="posweb-events-card-row"><div class="posweb-events-card-label">Ex-date</div><div class="posweb-events-card-data">${e&&e.exDate?e.exDate:"n/a"}</div></div><div class="posweb-events-card-row"><div class="posweb-events-card-label">Amount</div><div class="posweb-events-card-data">${e&&e.amount?e.amount+" per share":"n/a"}</div></div><div class="posweb-events-card-row"><div class="posweb-events-card-label">Pay date</div><div class="posweb-events-card-data">${e&&e.payDate?e.payDate:"n/a"}</div></div>`+(e&&e.securityType&&"Equity"===e.securityType&&e.yield?'<div class="posweb-events-card-row"><div class="posweb-events-card-label">Yield</div><div class="posweb-events-card-data">'+e.yield+"%</div></div>":"")+"</div>"}getFooterSnippet(){return`<div class="posweb-events-card-footer"><a href="${this._posweb.fidelityDomain}/learning-center/investment-products/stocks/all-about-dividends/overview" class="color-link" onclick="window.open(this.href, '', 'resizable,height=500,width=500'); return false;"> Learn more about dividends</a></div>`}}t.DistributionCardComponent=a},30181:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebQuantityCellRenderer=void 0;const o=s(79859),i=s(72317),a=s(60488);class r extends o.PoswebBaseCellRenderer{static getQuantitySnippet(e,t,s,o){var r;let n=a.PoswebGridUtils.getMarginShortPopover(e,s,o);return""===n&&(null===(r=i.PoswebGrid.getInstance().legendVisibility)||void 0===r?void 0:r.isHoldingTypeInd)&&(n='<div class="posweb-cell-holdingtype-placeholder"></div>'),`<span class="posweb-cell-quantity_value">${t||""}</span>`+n}init(e){var t,s,o;this._eGui=document.createElement("div"),this._params=e,e&&(null===(t=e.data)||void 0===t?void 0:t.qty)&&(this._eGui.classList.add("posweb-cell-quantity_container"),this._eGui.innerHTML=r.getQuantitySnippet(null===(s=e.data.meta)||void 0===s?void 0:s.rowId,e.data.qty.disp,null===(o=e.data.meta)||void 0===o?void 0:o.holdingType,e.data.actNum))}static getPoswebPrintGridCell(e,t){var s,o,i;return`<td${t?` class="${t}"`:""}><div class="posweb-cell-quantity_container">`+r.getQuantitySnippet(null===(s=e.meta)||void 0===s?void 0:s.rowId,null===(o=e.qty)||void 0===o?void 0:o.disp,null===(i=e.meta)||void 0===i?void 0:i.holdingType,e.actNum)+"</div></td>"}}t.PoswebQuantityCellRenderer=r},31368:(e,t,s)=>{var o=s(38891).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.AmcUtils=void 0;const i=s(74499);t.AmcUtils=class{static mapPicoToAMC(e){var t;const s={accounts:[],hasSPS:!1,pznFPLAccts:[]};return(null===(t=null==e?void 0:e.person)||void 0===t?void 0:t.assets)&&e.person.assets.forEach(e=>{var t,o,i,a,r,n,l,d,c,p,u,b,w;if(e){const h={};if((null===(t=e.acctTradeAttrDetail)||void 0===t?void 0:t.optionAgrmntCode)&&(h.optionAgreement="Y"),"Y"===(null===(o=e.acctTradeAttrDetail)||void 0===o?void 0:o.borrowFullyPaidCode)&&(h.borrowFullyPaidCode="Y"),h.acctCreationDate=e.acctCreationDate,h.accountId=e.acctNum,h.nickName=null===(i=e.preferenceDetail)||void 0===i?void 0:i.name,h.cit="College Savings"===e.acctSubType,h.cashAccount="Cash Management"===e.acctSubType,h.linkedBrokerageAccount="Brokerage Link"===e.acctSubType,h.collegeInvestmentTrustAccount="College Savings"===e.acctSubType,h.tradingAllowed=null===(a=e.acctTradeAttrDetail)||void 0===a?void 0:a.isTradable,h.brokerageAccount="Brokerage"===e.acctType,h.annuityAccount="Annuity"===e.acctType,h.definedContributionAccount="WPS"===e.acctType&&"Defined Contributions"===e.acctSubType,h.esopAccount=!0===(null===(r=e.acctTypesIndDetail)||void 0===r?void 0:r.hasSPSPlans),h.isRetirement=!0===(null===(n=e.acctTypesIndDetail)||void 0===n?void 0:n.isRetirement),h.esopPlan="SPS"===e.acctType,h.fromFullView="External"===e.acctType,h.registrationType=51,h.portfolioAdvisoryServicesAccount="Managed Account"===e.acctSubType,h.accountName=null===(l=e.preferenceDetail)||void 0===l?void 0:l.name,h.acctType=e.acctType,h.acctSubType=e.acctSubType,e.annuityProductDetail&&(h.systemOfRecord=e.annuityProductDetail.systemOfRecord,h.internalProdCode=e.annuityProductDetail.productCode,h.pricingProductCode=e.annuityProductDetail.planCode),e.acctIndDetail&&(h.ffoAccount=e.acctIndDetail.isFFOSAcct,h.friagAccount=e.acctIndDetail.isAdvisorAcct,h.authorizedAcct=e.acctIndDetail.isAuthorizedAcct),e.managedAcctDetail&&(h.openUma="FPP"===e.managedAcctDetail.productCode,h.productCode=e.managedAcctDetail.productCode,h.svcModelCode=e.managedAcctDetail.svcModelCode,h.productFullName=e.managedAcctDetail.productFullName,h.strategyName=e.managedAcctDetail.strategyName),h.siteId=e.acctNum,h.brokAcctNum=e.parentBrokAcctNum,e.workplacePlanDetail){const t=e.workplacePlanDetail;h.accountId="SPS"===e.acctType?e.parentBrokAcctNum+"_"+t.clientTickerSymbol+"_"+t.planId+"_"+t.planTypeCode:h.accountId,h.planId=t.planId,h.planName=t.planName,h.scfClientId=t.clientId,h.planTypeCode=t.planTypeCode,h.isRollup=t.isRollup}h.annuityProductType=e.acctSubType,h.annuityPolicyStatus=null===(d=e.annuityPolicyDetail)||void 0===d?void 0:d.policyStatus,e.annuityProductDetail&&(h.annuityProductDesc=e.annuityProductDetail.productDesc),(null===(c=window.toggleMap)||void 0===c?void 0:c.ap126216_PWE_PZN_Enable)&&Array.isArray(null===(b=null===(u=null===(p=window.cvi)||void 0===p?void 0:p.visitorIdentification)||void 0===u?void 0:u.cas)||void 0===b?void 0:b.account_details)&&(h.casFPLElg=null===(w=window.cvi.visitorIdentification.cas.account_details.find(t=>t.account_nbr===e.acctNum))||void 0===w?void 0:w.borrow_fully_paid_master_securities_lending_agreement_cd,"P"===h.casFPLElg&&s.pznFPLAccts.push(e.acctNum)),e.acctLegacyAttrDetail&&(h.legacyHouseHoldCostBasisCode=e.acctLegacyAttrDetail.legacyHouseHoldCostBasisCode),e.acctTrustIndDetail&&(h.isAdvisorTrustTLAAcct=e.acctTrustIndDetail.isAdvisorTrustTLAAcct),e.acctAttrDetail&&(h.taxTreatmentCode=e.acctAttrDetail.taxTreatmentCode),s.accounts.push(h),s.hasSPS=s.hasSPS||"SPS"===e.acctType}}),s}static zipAMC(e){return(0,i.gzipSync)(o.from(JSON.stringify(e))).toString("base64")}static getIneligibleAccountsForCloPos(e){return e.filter(e=>!e.brokerageAccount||!(!e.collegeInvestmentTrustAccount&&(["ADVTG","DEFER"].includes(e.taxTreatmentCode)||e.isAdvisorTrustTLAAcct||"A"===e.legacyHouseHoldCostBasisCode))).map(e=>e.accountId)}static getEarliestAccount(e){if(e&&0!==e.length)return e.reduce((e,t)=>t.acctCreationDate<e.acctCreationDate?t:e)}}},31424:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RowEventsInfo=void 0;t.RowEventsInfo=class{constructor(e,t,s,o){this.rowId=e,this.events={numberOfEvents:0},t&&this.setOpenOrder(t),s&&this.setEarnings(s),o&&this.setDistributions(o)}setEarnings(e){e&&(e.length>4&&(e=e.splice(0,4)),this.events.earningsCardDetails=e,this.events.hasEarnings||(this.events.numberOfEvents++,this.events.hasEarnings=!0))}setDistributions(e){e&&(this.events.distributionDetails=e,this.events.hasDistributions||(this.events.numberOfEvents++,this.events.hasDistributions=!0))}setOpenOrder(e){e&&(this.events.orderCardDetails=e,this.events.hasOpenOrder||(this.events.numberOfEvents++,this.events.hasOpenOrder=!0))}}},33829:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HorizontalScrollBarBehavior=void 0;const o=s(82402);class i{static initializeHorizontalScrollBarBehavior(e){i.disposeEventListeners();const t=o.PoswebUtils.htmlQuerySelector(".ag-overlay-no-rows-center"),s=t&&"No Rows To Show"===t.innerText;if(s&&i.hideSymbolColumnScrollbar(),e&&!s){this._scrollYPosition=window.pageYOffset,this._windowInnerHeight=window.innerHeight,i.styleHorizontalScrollOnScrollOrResize(),window["ap126216-pwe-horizontal-scroll"]=i.gridScrollBarStyle,window["ap126216-pwe-horizontal-resize"]=i.applyStyleOnResizeWindow,window["ap126216-pwe-horizontal-unload"]=i.disposeEventListeners,window.addEventListener("scroll",window["ap126216-pwe-horizontal-scroll"]),window.addEventListener("resize",window["ap126216-pwe-horizontal-resize"]),window.addEventListener("unload",window["ap126216-pwe-horizontal-unload"]);const e={subtree:!0,childList:!1,attributes:!0,attributeOldValue:!1,attributeFilter:["style"]},t=o.PoswebUtils.htmlQuerySelector(".acct-selector__container");t&&(i._sideMenuObserver=new MutationObserver(i.applyStyleOnResizeWindow),i._sideMenuObserver.observe(t,e),window["ap126216-pwe-horizontal-menu-observer"]=i._sideMenuObserver)}else console.info("Grid Horizontal Scroll bar is disabled")}static gridScrollBarStyle(){this._scrollYPosition===window.pageYOffset&&this._windowInnerHeight===window.innerHeight||(this._scrollYPosition=window.scrollY,i.styleHorizontalScrollOnScrollOrResize())}static styleHorizontalScrollOnScrollOrResize(){const e=o.PoswebUtils.htmlQuerySelector(".ag-center-cols-container"),t=o.PoswebUtils.htmlQuerySelector(".ag-pinned-left-cols-container"),s=!!e&&e.lastChild,a=o.PoswebUtils.htmlQuerySelector(".ag-body-horizontal-scroll");if(a){i.hideSymbolColumnScrollbar();const o=!!s&&s.getBoundingClientRect(),r=!!e&&e.firstElementChild,n=!!r&&r.getBoundingClientRect();if(!a.classList.contains("posweb-fixed-bottom")&&n&&r&&n.top+r.clientHeight/2>window.innerHeight)return;if(o&&window.innerHeight>o.bottom||a.classList.contains("posweb-fixed-bottom")&&n&&r&&n.top+r.clientHeight/2>window.innerHeight)a.classList.remove("posweb-fixed-bottom"),a.style.bottom="0";else if(!a.classList.contains("posweb-fixed-bottom")){const s=+(null==e?void 0:e.getBoundingClientRect().left),o=+(null==t?void 0:t.getBoundingClientRect().width);a.style.width=a.clientWidth.toString()+"px",a.style.left=0===o?s+o+"px":s-o+"px",a.classList.add("posweb-fixed-bottom")}}}static hideSymbolColumnScrollbar(){const e=o.PoswebUtils.htmlQuerySelector(".ag-horizontal-left-spacer");e&&"hidden"!==e.style.overflowX&&(e.style.overflowX="hidden")}static applyStyleOnResizeWindow(){const e=o.PoswebUtils.htmlQuerySelector(".ag-body-horizontal-scroll");if(i.gridScrollBarStyle(),e){const t=e.parentElement;e.offsetWidth!==t.offsetWidth&&(e.style.width=t.offsetWidth.toString()+"px"),e.classList.contains("posweb-fixed-bottom")&&e.classList.remove("posweb-fixed-bottom")}}static disposeEventListeners(){i._dockedTicketObserver&&i._dockedTicketObserver.disconnect(),i._sideMenuObserver&&i._sideMenuObserver.disconnect(),window["ap126216-pwe-horizontal-menu-observer"]&&window["ap126216-pwe-horizontal-menu-observer"].disconnect(),window["ap126216-pwe-horizontal-docked-observer"]&&window["ap126216-pwe-horizontal-docked-observer"].disconnect(),window.removeEventListener("resize",window["ap126216-pwe-horizontal-resize"]),window.removeEventListener("scroll",window["ap126216-pwe-horizontal-scroll"]),window.removeEventListener("unload",window["ap126216-pwe-horizontal-unload"]);const e=o.PoswebUtils.htmlQuerySelector(".ag-body-horizontal-scroll");e&&(e.style.width="")}}t.HorizontalScrollBarBehavior=i},34140:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WindowService=void 0;const o=s(17190);class i{static getWindow(){return window}static getProperty(e,t){var s;const o=i.getWindow();return void 0!==t&&(null!==(s=o[e])&&void 0!==s||(o[e]=t)),o[e]}static getToggle(e){var t;return!0===(null===(t=i.getProperty(o.PoswebConstants.TOGGLE_MAP_PROPERTY_NAME))||void 0===t?void 0:t[e])}static getPositionSettings(){return i.getProperty(o.PoswebConstants.SETTINGS_PROPERTY_NAME,{})}static getCurrentPwe(){return i.getProperty("poswebex")}}t.WindowService=i},35576:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebPrintTemplate=void 0;const o=s(17597),i=s(77965),a=s(69593),r=s(83577),n=s(83254),l=s(10069),d=s(56795),c=s(58677),p=s(72317),u=s(60488),b=s(93535),w=s(74186),h=s(20045),v=s(25661),m=s(60132),g=s(30181),_=s(69233),y=s(58805),S=s(59831),P=s(50895);class C{static getAccountRowSnippet(e,t,s,o,i=void 0,a){return`<tr class="pvd-table__row posweb-row-account"><td class="pvd-table__data-cell" colspan="${s||0}"><div class="posweb-cell-account_container"><div class="posweb-cell-account_links_container" role="presentation"><h3 class="posweb-cell-account"><span class="posweb-cell-account_primary">${e||""}</span>`+(i?`<sup class="posweb-cell-account_primary_sup">${i}</sup>`:"")+`<span class="posweb-cell-account_secondary">${t||""}</span></h3>`+`${"ACCOUNT"===o?u.PoswebGridUtils.getAccountBrandingLabel(!1,a):""}</div></div></td></tr>`}static getAssetsHeldAwayRowSnippet(e,t){return`<tr class="pvd-table__row posweb-row-assets_held_away"><td class="pvd-table__data-cell" colspan="${t||0}"><div class="posweb-cell-symbol-name_description" role="presentation"><div class="posweb-cell-symbol-name_container" role="presentation"><h4 class="posweb-cell-symbol-name">${e||""}</h4></div></div></td></tr>`}static getSymbolAssetsHeldAwayRowSnippet(e,t){return`<tr class="pvd-table__row posweb-row-symbol_assets_held_away symbol"><td class="pvd-table__data-cell" colspan="${t||0}"><div class="posweb-cell-symbol-name_description" role="presentation"><div class="posweb-cell-symbol-name_container" role="presentation"><h4 class="posweb-cell-symbol-name">${e||""}</h4></div></div></td></tr>`}static getSleeveAccountRowSnippet(e,t,s){var i,a,r,n;const l=null==e?void 0:e.split("-"),d=null==l?void 0:l.pop(),c=null==l?void 0:l.join("-"),p=d&&s&&(null===(i=s[d])||void 0===i?void 0:i.name)?s[d].name:"",u=d&&c&&s&&(null===(a=s[d])||void 0===a?void 0:a.accts)&&(null===(n=null===(r=s[d].accts[c])||void 0===r?void 0:r.curVal)||void 0===n?void 0:n.disp)?s[d].accts[c].curVal.disp:"";return`<tr class="pvd-table__row posweb-row-sleeve_group"><td class="pvd-table__data-cell posweb-cell-row_header" colspan="${t||0}"><div class="posweb-cell-group-container"><div class="posweb-cell-group"><div class="posweb-cell-group-exp_col posweb-cell-group-icon"><pvd3pwe-icon pvd-name="drawer__collapse" pvd-size="small" class="posweb-sleeve-collapse_icon"></pvd3pwe-icon></div><div class="posweb-cell-group-info"><div class="posweb-cell-group-info_primary"><h4 class="posweb-cell-group-info_primary_name">${p}</h4>${o.POSWEB_PRESET_VIEW.FUND_PERF_VIEW!==(null==s?void 0:s.currentView)?`<div class="posweb-print-sleeve-current_value"><p>Current Value: <span class="posweb-cell-group-text_curval">${u}</span></p></div>`:""}</div></div></div></div></td></tr>`}static getPositionsRowSnippet(e,t,s,o=null,i=""){var a;let r="";if(e){const l=null===(a=p.PoswebGrid.getInstance())||void 0===a?void 0:a.getPoswebGridApi;r+=`<tr class="pvd-table__row ${s}">`,t.forEach(t=>{const s=null==l?void 0:l.getColumnDef(t);if(s){const o="pvd-table__data-cell "+(s.cellClass?s.cellClass.join(" ")+" "+m.PoswebPrintUtils.getCellClassListFromRules(e,s).join(" "):"");r+=C.getPositionCellSnippet(e,o.trim(),t,s.cellRendererParams,i)}}),r+="</tr>";const d=n.PoswebCommon.getInstance().historyData.get(o);d&&e.sym&&(r+=`<tr class="pvd-table__row posweb-drawer-detail"><td class="pvd-table__data-cell" colspan="${t.length}"><div class="posweb-drawer-body">`,r+=`<div class="posweb-drawer-history_print">${e.sym.desc}</div>${d}</div></td></tr>`)}return r}static getPendingActivityRowsSnippet(e,t){var s;return C.getPositionsRowSnippet(e,t,"posweb-row-pending_activity")+""+((null===(s=null==e?void 0:e.meta)||void 0===s?void 0:s.pendPop)&&(null==t?void 0:t.indexOf("curVal"))>-1?`<tr class="pvd-table__row posweb-row-pending_activity_print_info"><td class="pvd-table__data-cell" colspan="${t.length}">${v.PoswebPendingActivityPopoverCellRenderer.getItemsContainerDiv(e.meta.pendPop)}</td></tr>`:"")}static getAccountTotalRowsSnippet(e,t,s){var o;return C.getPositionsRowSnippet(e,t,"posweb-row-total",null,s)+""+((null===(o=null==e?void 0:e.meta)||void 0===o?void 0:o.acctTotalPop)&&((null==t?void 0:t.indexOf("todGL"))>-1||(null==t?void 0:t.indexOf("todGLStk"))>-1)?`<tr class="pvd-table__row posweb-row-total_print_info"><td class="pvd-table__data-cell" colspan="${t.length}">${a.PoswebAccountTotalPopoverCellRenderer.getPopoverContent(e.meta.acctTotalPop)}`+u.PoswebGridUtils.getDisclaimerSnippet("posweb-popover-account_total_disclaimer",e.meta.isGLReset)+"</td></tr>":"")}static getGrandTotalRowsSnippet(e,t,s){var o;return C.getPositionsRowSnippet(e,t,"posweb-row-grand_total",null,s)+""+((null===(o=null==e?void 0:e.meta)||void 0===o?void 0:o.grandPop)&&((null==t?void 0:t.indexOf("todGL"))>-1||(null==t?void 0:t.indexOf("todGLStk"))>-1)?`<tr class="pvd-table__row posweb-row-grand_total_print_info"><td class="pvd-table__data-cell" colspan="${t.length}">${c.PoswebGrandTotalPopoverCellRenderer.getItemsContainerDiv(e.meta.grandPop)}`+u.PoswebGridUtils.getDisclaimerSnippet("posweb-popover-grand_total_disclaimer",e.meta.isGLReset)+"</td></tr>":"")}static getNAPositionsRowSnippet(e){return`<tr class="pvd-table__row posweb-row-na_positions"><td class="pvd-table__data-cell" colspan="${e||0}"><div class="posweb-cell-symbol-container"><div class="posweb-cell-na_positions-content"><pvd3pwe-inline-alert pvd-variant="critical" pvd-text="Positions for this account are currently unavailable." id="system-message-1588966773890346"></pvd3pwe-inline-alert></div></div></td></tr>`}static getUnsuptAccountRowSnippet(e){return`<tr class="pvd-table__row posweb-row-unsupt_account"><td class="pvd-table__data-cell" colspan="${e||0}"><div class="posweb-cell-symbol-container"><div class="posweb-cell-unsupt_account-content"><pvd3pwe-inline-alert pvd-variant="info" pvd-text="You can view the details of your crypto positions in the Fidelity® mobile app." id="system-message-1588966773890347"></pvd3pwe-inline-alert></div></div></td></tr>`}static getAcctMsgRowSnippet(e,t){var s;let o;if("BSK_ACCT_UNKNOWN_QUANTITY"===t.rowSubType)o='<div class="posweb-cell-account_warning_msg-content"><pvd3pwe-inline-alert pvd-variant="warning" pvd-text="Up-to-date details are not available for at least one of your baskets. This will be resolved by the next trading day." id="system-message-1588966773890348"></pvd3pwe-inline-alert></div>';else if("PZN_FPL_ACCT_ELIGIBLE"===t.rowSubType){const e=u.PoswebGridUtils.getPznFPLInlineContentAndButton();o=`<div class="posweb-cell-account_warning_msg-content"><div class="pvd3pwe-inline-alert-root pvd-inline-alert--medium pvd-inline-alert--info"><div class="pvd-inline-alert__icon"><img src="${b.PoswebMetadata.getInstance().assetUrl}assets/${b.PoswebMetadata.getInstance().version}/coin_icon.svg" alt="Fully Paid Lending icon" /></div><div class="pvd-inline-alert__content">${e.content}</div></div></div>`}else"MATURING_FIXED_INCOME"===t.rowSubType&&(null===(s=t.meta)||void 0===s?void 0:s.msgContentDate)&&(o=u.PoswebGridUtils.getMaturingFixedIncomeMsgSnippet(t));return o?`<tr class="pvd-table__row posweb-row-account_msg"><td class="pvd-table__data-cell" colspan="${e||0}"><div class="posweb-cell-symbol-container">`+o+"</div></td></tr>":""}static getSpacerRowSnippet(e){return`<tr class="pvd-table__row posweb-row-spacer"><td class="pvd-table__data-cell" colspan="${e||0}">&nbsp;</td></tr>`}static getAssetsHeldAwaySpacerRowSnippet(e){return`<tr class="pvd-table__row posweb-row-spacer-aha-symbol"><td class="pvd-table__data-cell" colspan="${e||0}">&nbsp;</td></tr>`}static getPositionCellSnippet(e,t,s,o,n=""){var p;if(e&&s)switch(s){case"sym":return P.PoswebSymbolCellRenderer.getPoswebPrintGridCell(e,t,n);case"lstPrStk":case"totGLStk":return S.PoswebStackedColumnCellRenderer.getPoswebPrintGridCell(e,t,o);case"curVal":return"PENDING"===e.rowType?v.PoswebPendingActivityPopoverCellRenderer.getPoswebPrintGridCell(e,t):C.getBasicCellHTMLSnippet(e[s],t);case"qty":return g.PoswebQuantityCellRenderer.getPoswebPrintGridCell(e,t);case"todGL":case"todGLStk":return"ACCOUNT_TOTAL"===e.rowType?a.PoswebAccountTotalPopoverCellRenderer.getPoswebPrintGridCell(e,t,o):"GRAND_TOTAL"===e.rowType?c.PoswebGrandTotalPopoverCellRenderer.getPoswebPrintGridCell(e,t,o):"todGLStk"===s?S.PoswebStackedColumnCellRenderer.getPoswebPrintGridCell(e,t,o):C.getBasicCellHTMLSnippet(e[s],t);case"cstBasTot":case"cstBasStk":return l.PoswebCostBasisTotalCellRenderer.getPoswebPrintGridCell(e,t,o);case"dayRange":case"fifTwo":return _.PoswebRangeCellRenderer.getPoswebPrintGridCell(e,t);case"mngStr":return w.PoswebMstarCellRenderer.getPoswebPrintGridCell(e,t);case"act":return i.PoswebAccountCellRenderer.getPoswebPrintGridCell(e,t);case"news":return h.PoswebNewsCellRenderer.getPoswebPrintGridCell(e,t);case"cstBasCloPos":return(null===(p=e.meta)||void 0===p?void 0:p.isWash)?r.PoswebCloPosCostBasisCellRenderer.getPoswebPrintGridCell(e,t):C.getBasicCellHTMLSnippet(e[s],t);case"distYld":return d.PoswebDistYieldCellRenderer.getPoswebPrintGridCell(e,t);case"secYld":return y.PoswebSecYieldCellRenderer.getPoswebPrintGridCell(e,t);default:return C.getBasicCellHTMLSnippet(e[s],t)}return'<td class="pvd-table__data-cell"></td>'}static getBasicCellHTMLSnippet(e,t){return`<td class="${t}">${(null==e?void 0:e.disp)?e.disp:""}`+((null==e?void 0:e.sup)?`<sup>${e.sup}</sup>`:"")+"</td>"}static getNoPosOrNoMatchPosSnippet(e,t){return`<tr class="pvd-table__row posweb-row-no_positions-print_info"><td class="pvd-table__data-cell" colspan="${e||0}"><p>`+("NO_POSITIONS"===t.rowType&&t.meta.hasPendingActivity?"Pending Activity:&nbsp;"+t.meta.pendingActVal:"NO_POSITIONS"===t.rowType?"You do not hold any positions or funds in this account.":"NO_MATCHED_POSITIONS"===t.rowType?"Positions are currently filtered. Use the filters icon at the top right corner to update.":"")+"</p></td></tr>"}static getNoCloPosSnippet(e){return`<tr class="pvd-table__row posweb-row-no-closed-positions"><td class="pvd-table__data-cell" colspan="${e||0}"><p>You have no closed position information for the account or time period selected.</p></td></tr>`}static getPendingUpdateRowSnippet(e,t){return`<tr class="pvd-table__row posweb-row-closed-pos-pending-update">${P.PoswebSymbolCellRenderer.getPoswebPrintGridCell(e,"pvd-table__data-cell posweb-cell posweb-cell-row_header","")}<td class="pvd-table__data-cell" colspan="${t}"><p>Pending update C<sup>1</sup></p></td></tr>`}}t.PoswebPrintTemplate=C},36043:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NewsCardComponent=void 0;const o=s(75228),i=s(53059),a=s(16186),r=s(89065),n=s(60942),l=s(93535),d=s(42095),c=["Annuity","Mutual Fund","Core","Foreign Cash"];class p extends d.ResearchCardComponent{constructor(e,t,s){super(),this.NEWS_UNAVAILABLE_MSG="Sorry, news information for this security is currently unavailable. Please try again later.",this.SECURITY_UNSUPPORTED_MSG="News for this security type is unavailable.",this.NO_NEWS_MSG="Currently, there is no news or commentary for ",this.NEWS_STORY_UNAVAILABLE_MSG="We're sorry. This information is currently unavailable. Please try again later.",this.stableCoinSymbol="STABLECO",this._rowId=e,this._gridRowData=t,this._poswebGridService=new n.PoswebGridService,this._posweb=l.PoswebMetadata.getInstance(),this._newsLandingUrl=this._posweb.fidelityDomain+"/news/overview",this._tabPanel=s}retrieveCardData(){const e=this._tabPanel.querySelector(`#posweb-research-card-content-news-${this._rowId}`);if(e)if(c.indexOf(this._gridRowData.data.meta.securityType)>-1||!0===this._gridRowData.data.meta.isFixedIncome)e.innerHTML=this.getMessageSnippet(this.SECURITY_UNSUPPORTED_MSG,!1);else{const t=this._gridRowData.data.meta.isStableCoinInd?this.stableCoinSymbol:this._gridRowData.data.sym.usn||this._gridRowData.data.sym.name;this.retrieveNewsHeadlines({symbol:t,isOption:"Option"===this._gridRowData.data.meta.securityType,headlinesCount:4,isCrypto:"Digital Currency"===this._gridRowData.data.meta.securityType}).then(t=>{t?(e.innerHTML=t,this.getNewsArticles()):e.innerHTML=this.getMessageSnippet(this.NO_NEWS_MSG+this._gridRowData.data.sym.name+".","info")}).catch(()=>{e.innerHTML=this.getMessageSnippet(this.NEWS_UNAVAILABLE_MSG,"critical")})}}getNewsArticles(){this._tabPanel.querySelectorAll(".posweb-headline-detail").forEach(e=>{const t=e.querySelector(".posweb-headline-btn"),s=e.querySelector(".posweb-headline-provider"),o=e.querySelector(".posweb-headline-timestamp"),i={headline:t.textContent,wirename:s.textContent,timestamp:o.textContent,storyId:t.getAttribute("data-attr-id")};t.addEventListener("click",e=>{e.stopPropagation(),this.openNewsModal(i)})})}openNewsModal(e){const{headline:t,wirename:s,timestamp:n,storyId:l}=e,d=null==s?void 0:s.toLowerCase().replaceAll(" ","_");a.MetricsService.sendMetricsRequest(d,i.MetricsActionTypes.INTERACTION,"news article");const c=this.getModalHeaderSnippet(t,s,n),p=this.getModalSpinnerSnippet();o.CommonModal.getInstance().constructAndShowModal(c,'<div class="posweb-news-modal">'+p+"</div>","",r.POSWEB_MODAL_SIZE.LARGE);const u=document.querySelector(".posweb-news-modal");this.retrieveNewsStoryContent(l,u)}retrieveNewsStoryContent(e,t){this.retrieveNewsStory({resId:e}).then(e=>{t.innerHTML=e.storyContent}).catch(()=>{t.innerHTML=this.getMessageSnippet(this.NEWS_STORY_UNAVAILABLE_MSG,"critical")})}getInitSnippet(){return`<div id="posweb-research-card-news-${this._rowId}" class="posweb-research-card posweb-research-card-news">\n                     <div id="posweb-research-card-content-news-${this._rowId}" class="posweb-research-card-content">`+p.provideSpinner("news data")+"</div>\n                 </div>"}getMessageSnippet(e,t){return`<div class="posweb-headlines-container">\n                    <div class="posweb-research-card-header">News</div>\n                </div>\n                <div class="posweb-research-message">\n                    ${t?`<div class="posweb-research-message-icon"><pvd3pwe-icon pvd-name="alert__${t}--outline" pvd-size="large" class="color-black"></pvd3pwe-icon></div>`:""}\n                    <div class="posweb-research-message-text"><p>${e}</p></div>\n                    <div class="posweb-market-sector-news-button">\n                        <button class="pvd3pwe-button-root pvd-button--secondary pvd-button--small pvd-button--with-icon" type="button" role="link" title="opens in new window"\n                        onclick="window.open('${this._newsLandingUrl}')"><div class="pvd-button__contents"><span class="pvd-button__text">Market and sector news\n                        </span><span class="pvd-button__icon pvd-button__icon--right"><pvd3pwe-icon pvd-name="action__open-link" pvd-size="extra-small" aria-hidden="true"></pvd3pwe-icon></span></div></button>\n                    </div>\n                </div>`}getModalHeaderSnippet(e,t,s){return`<div class="posweb-news-story-heading">\n                    <div class="posweb-news-story-headline">\n                        <h4>${e}</h4>\n                    </div>\n                    <div class="posweb-news-story-metadata">\n                        <p class="posweb-news-story-author">${t}</p>\n                        <p class="posweb-news-story-timestamp">${s}</p>\n                    </div>\n                </div>`}getModalSpinnerSnippet(){return`<div class="posweb-research-card posweb-research-card-news">\n            <div class="posweb-research-card-content">\n                ${p.provideSpinner("")}\n            </div>\n        </div>`}retrieveNewsHeadlines(e){return this.$newsHeadlinesSubscription&&this.$newsHeadlinesSubscription.unsubscribe(),new Promise((t,s)=>{this.$newsHeadlinesSubscription=this._poswebGridService.retrieveNewsCardData(e).subscribe({next:t,error:e=>{console.error("Error occurred retrieving news headlines data, and error is %o",e),s(e)}})})}retrieveNewsStory(e){return this.$newsStorySubscription&&this.$newsStorySubscription.unsubscribe(),new Promise((t,s)=>{this.$newsStorySubscription=this._poswebGridService.retrieveNewsStoryData(e).subscribe({next:t,error:e=>{console.error("Error occurred retrieving new story data, and error is %o",e),s(e)}})})}}t.NewsCardComponent=p},36737:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEF_POSWEB_STATE=void 0,t.DEF_POSWEB_STATE={rowData:[],slvData:{},basketData:{},groupBySecurityData:{},presetColumnsOrder:{Overview:"slv,basket,groupBySecurity,sym,lstPrc,lstPrChg,todGL,todGLPct,totGL,totGLPct,curVal,actPer,qty,cstBasShr,cstBasTot,fifTwo,act",DividendView:"slv,basket,groupBySecurity,sym,lstPrc,lstPrChg,exDvDte,dvAmt,pyDte,distYld,secYld,curVal,actPer,qty,act,estAnuInc",StackOverView:"slv,basket,groupBySecurity,sym,lstPrStk,todGLStk,totGLStk,curVal,actPer,qty,cstBasStk,fifTwo,act",FundPerfView:"slv,basket,groupBySecurity,sym,mngCtg,ytdDly,oneYr,thrYr,fivYr,tenYr,exRtNt,exRtGs,mngStr,act",ClosedPositionsView:"actGroup,sym,cstBasCloPos,proceedsAmt,stGL,ltGL,totGLCloPos",MyView:"slv,basket,groupBySecurity,sym,curVal,actPer,qty,cstBasStk,cstBasShr,cstBasTot,acctType,isLoaned,isHTB,todGL,todGLPct,todGLStk,totGL,totGLPct,totGLStk,cusip,lstPrc,lstPrStk,lstPrChg,lstPrChgPct,changeStk,volume,dayRange,fifTwo,yearHighDate,yearLowDate,bidPrice,bidSize,askPrice,askSize,openPrice,lstPrcPrevCls,prevClsDt,equitySummaryRating,equitySummaryScoreDate,news,avgVol10Day,avgVol90Day,marketCap,earningsAnnouncementDate,peRatio,sharesOutstanding,pctFloat,shortInterest,shortInterestRatio,prevShortInterest,prevShortInterestRatio,currency,exDvDte,dvAmt,pyDte,dividendFrequency,estAnuInc,ytdDly,oneYr,thrYr,fivYr,tenYr,exRtNt,exRtGs,mngStr,mngCtg,sector,industry,industryGroup,subIndustry,securityType,securitysubtype,isOptionable,callPut,expiration,impliedVolatility,intrinsicValue,timeValue,contractRangeVisual,contractHighDate,contractLowDate,delta,gamma,theta,vega,rho,volatility10Day,volatility30Day,volatility60Day,volatility90Day,volatility120Day,volatility250Day,secYld,distYld"},columnSortDetails:{Overview:"sym:asc",DividendView:"sym:asc",StackOverView:"sym:asc",FundPerfView:"sym:asc",ClosedPositionsView:"sym:asc",MyView:"sym:asc"},userSelectedTab:"purchase-history",settings:{pinnedSymbol:!0,stackedPosition:!0}}},36764:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebActionKeys=void 0,function(e){e.GRID_ROW_DATA="GRID_ROW_DATA",e.GRID_PRESET_COLUMN_ORDER="GRID_PRESET_COLUMN_ORDER",e.GRID_COLUMN_SORT_DETAILS="GRID_COLUMN_SORT_DETAILS",e.GRID_DRAWER_TAB_SELECTED="GRID_DRAWER_TAB_SELECTED",e.GRID_SETTINGS="GRID_SETTINGS",e.NO_ACTION="NO_ACTION",e.MY_VIEW_SEL_COLUMNS="myViewSelCols"}(s||(t.PoswebActionKeys=s={}))},37427:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createQuoteTemplate=void 0;const s=["sector","industry","industryGroup","subIndustry","contractHighDate","contractLowDate","contractHigh","contractLow","avgVol10Day","avgVol90Day","shortInterestRatio","prevShortInterestRatio","prevShortInterest","shortInterest","pctFloat","sharesOutstanding","currency","volatility10Day","volatility30Day","volatility60Day","volatility90Day","volatility120Day","volatility250Day","earningsAnnouncementDate","dividendFrequency","peRatio","marketCap","yearHighDate","yearLowDate","equitySummaryScoreDate","equitySummaryScore","equitySummaryRating","impliedVolatility","intrinsicValue","timeValue","delta","gamma","vega","theta","rho","callPut","expiration","contractRangeVisual","headlineTime"];t.createQuoteTemplate=()=>{const e={};return s.forEach(t=>{e[t]="contractRangeVisual"===t?{lowHigh:"--",low:{val:"--",disp:"--"},high:{val:"--",disp:"--"}}:{val:"--",disp:"--"}}),e}},37557:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommitmentDetailsCardComponent=void 0;const o=s(93535),i=s(82402),a=s(42095);class r extends a.ResearchCardComponent{constructor(e,t,s){super(),this._rowId=e,this._gridRowData=t,this._posweb=o.PoswebMetadata.getInstance(),this._tabPanel=s}retrieveCardData(){}getInitSnippet(){var e;const{totalCommitAmt:t,fundedCommitAmt:s,unfundedCommitAmt:o}=(null===(e=this._gridRowData.data)||void 0===e?void 0:e.altDetail)||{},a=[{label:"Total committed capital",data:i.PoswebUtils.formatVal(t,"$0,0.00[00]"),description:"Amount you have agreed to invest in the fund."},{label:"Funded commitment",data:i.PoswebUtils.formatVal(s,"$0,0.00[00]"),description:"Amount you have already contributed to the fund."},{label:"Unfunded commitment",data:i.PoswebUtils.formatVal(o,"$0,0.00[00]"),description:"The amount you have agreed to invest in the fund, but have not yet contributed."}];let r="";return a.forEach(({label:e,data:t,description:s})=>{r+=`<div class="posweb-comdet-row"><div class="posweb-comdet-row-container"><div class="posweb-comdet-label">${e}</div><div class="posweb-comdet-data">${t}</div></div><div class="posweb-comdet-description">${s}</div></div>`}),`<div id="posweb-research-card-comdet-${this._rowId}" class="posweb-research-card"><div id="posweb-research-card-content-${this._rowId}" class="posweb-research-card-content"><div class="posweb-comdet-container"><div class="posweb-research-card-header"><div role="heading" aria-level="6" class="posweb-comdet-header-label">Commitment details</div></div><div class="posweb-comdet-body"><p class="posweb-comdet-subheader">These commitment details do not include any subscriptions in progress.</p>${r}</div></div></div></div>`}}t.CommitmentDetailsCardComponent=r},38156:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebExperience=void 0;const o=s(49501),i=s(78996),a=s(72317),r=s(93535),n=s(49386),l=s(5704);t.PoswebExperience=class{constructor(){o.LicenseManager.setLicenseKey("Using_this_{AG_Grid}_Enterprise_key_{AG-077285}_in_excess_of_the_licence_granted_is_not_permitted___Please_report_misuse_to_legal@ag-grid.com___For_help_with_changing_this_key_please_contact_info@ag-grid.com___{Fidelity_Investments}_is_granted_a_{Multiple_Applications}_Developer_License_for_{30}_Front-End_JavaScript_developers___All_Front-End_JavaScript_developers_need_to_be_licensed_in_addition_to_the_ones_working_with_{AG_Grid}_Enterprise___This_key_has_not_been_granted_a_Deployment_License_Add-on___This_key_works_with_{AG_Grid}_Enterprise_versions_released_before_{31_May_2026}____[v3]_[01]_MTc4MDE4MjAwMDAwMA==4ca3c5adb2360ce6d87cbf896c2d6b85"),this._poswebStore=n.PoswebStore.getInstance(),this._poswebMetadata=r.PoswebMetadata.getInstance(),this._poswebUtilsHTML=l.PoswebUtilsHTML.getInstance(),this._poswebGrid=a.PoswebGrid.getInstance(),this._poswebExport=i.PoswebExport.getInstance()}get poswebGrid(){return this._poswebGrid}get poswebMetadata(){return this._poswebMetadata}get poswebStore(){return this._poswebStore}get poswebExport(){return this._poswebExport}get poswebUtilsHTML(){return this._poswebUtilsHTML}}},38903:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EarningsCardComponent=void 0;const o=s(58294),i=s(93535);class a extends o.EventCardComponent{constructor(e,t){super(),this._rowId=e,this._posweb=i.PoswebMetadata.getInstance(),this._earningsDetails=t||void 0}getSnippet(){return this._earningsDetails?'<div class="posweb-events-card posweb-events-earnings-card">'+this.getBodySnippet(this._earningsDetails[0])+this.getFooterSnippet(this._earningsDetails)+"</div>":""}getBodySnippet(e){return`<div class="posweb-events-card-header"><div class="posweb-events-card-header-top"><img class=posweb-events-card-icon" alt="Earnings Event exists" src="${this._posweb.assetUrl}assets/${this._posweb.version}/earnings_card_icon.svg"/><div class="posweb-events-card-header-title">Earnings announcement</div></div></div><div class="posweb-events-card-body"><div class="posweb-events-card-row"><div class="posweb-events-card-label">Fiscal quarter</div><div class="posweb-events-card-data">${e&&e.fiscalQuarter?e.fiscalQuarter:"n/a"}</div></div><div class="posweb-events-card-row"><div class="posweb-events-card-label">Report date</div><div class="posweb-events-card-data">${e&&e.reportDate?e.reportDate:"n/a"}</div></div>`+this.getCurrentEarningsSnippet(e)+"</div>"}getCurrentEarningsSnippet(e){return e&&e.consensusEstimate&&e.adjustedEPS?'<div class="posweb-events-card-row"><div class="posweb-events-card-label">Consensus/Actual EPS</div><div class="posweb-events-card-data">'+e.consensusEstimate+'/<div class="posweb-events-card-current-earnings-price-data">'+e.adjustedEPS+"</div></div></div>":e&&e.consensusEstimate&&"n/a"!==e.consensusEstimate?'<div class="posweb-events-card-row"><div class="posweb-events-card-label">Consensus estimate</div><div class="posweb-events-card-data">'+e.consensusEstimate+" per share</div></div>":'<div class="posweb-events-card-row"><div class="posweb-events-card-label">Consensus estimate</div><div class="posweb-events-card-data">n/a</div></div>'}getFooterSnippet(e){let t="";if(e)for(let s=e.length-1;s>0;s--){const o=e[s];o.fiscalQuarter&&o.adjustedEPS&&o.beatOrMissed&&o.beatOrMissedBy&&(t+=`<div class="posweb-events-card-earnings-quarter">\n                    <div class="posweb-events-card-label">${o.fiscalQuarter}</div>\n                    <div class="posweb-events-card-earnings-price-label">${o.adjustedEPS}</div>\n                    <div class="posweb-events-card-earnings-${o.beatOrMissed.toLowerCase()}">${o.beatOrMissed}</div>\n                    <div class="posweb-events-card-earnings-footnote">by ${o.beatOrMissedBy}</div>\n                    </div>`)}return-1===t.indexOf('"posweb-events-card-earnings-quarter"')&&(t='<div class="posweb-events-card-no-earnings">Previous earnings details for this security are unavailable.</div>'),'<div class="posweb-events-card-footer"><div class="posweb-events-card-earnings-quarter-container">'+t+"</div></div>"}}t.EarningsCardComponent=a},40584:(e,t)=>{var s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.MY_VIEW_EXPORT_MAPPING=t.MY_VIEW_LABEL_MAPPING=void 0,function(e){e.CURVAL="Current value",e.ACTPER="% of account",e.QTY="Quantity",e.CSTBASSTK="Cost basis",e.CSTBASSHR="Average cost basis",e.CSTBASTOT="Cost basis total",e.ACCTTYPE="Account type",e.ISLOANED="Loaned",e.ISHTB="Hard to borrow",e.TODGL="Today's gain/loss $",e.TODGLPCT="Today's gain/loss %",e.TODGLSTK="Today's gain/loss ($ and %)",e.TOTGL="Total gain/loss $",e.TOTGLPCT="Total gain/loss %",e.TOTGLSTK="Total gain/loss ($ and %)",e.SYM="Symbol",e.CUSIP="CUSIP",e.LSTPRC="Last price",e.LSTPRCHG="Change $",e.LSTPRCHGPCT="Change %",e.CHANGESTK="Change ($ and %)",e.LSTPRSTK="Last ($ and chg.)",e.VOLUME="Volume",e.DAYRANGE="Day range",e.FIFTWO="52-week range (visual)",e.YEARHIGHDATE="52-week high date",e.YEARLOWDATE="52-week low date",e.BIDPRICE="Bid",e.ASKPRICE="Ask",e.OPENPRICE="Opening price",e.LSTPRCPREVCLS="Previous close",e.PREVCLSDT="Previous close date",e.ASKSIZE="Ask size",e.BIDSIZE="Bid size",e.EQUITYSUMMARYRATING="Analyst ratings",e.NEWS="News",e.AVGVOL10DAY="10-day avg. volume",e.AVGVOL90DAY="90-day avg. volume",e.MARKETCAP="Market cap",e.EARNINGSANNOUNCEMENTDATE="Earnings announcement date",e.PERATIO="P/E ratio",e.SHARESOUTSTANDING="Shares outstanding",e.PCTFLOAT="Short %",e.SHORTINTEREST="Shares short",e.SHORTINTERESTRATIO="Days to cover",e.PREVSHORTINTEREST="Prior shares short",e.PREVSHORTINTERESTRATIO="Prior days to cover",e.CURRENCY="Currency",e.EQUITYSUMMARYSCOREDATE="Analyst ratings date",e.ISOPTIONABLE="Optionable",e.EXDVDTE="Ex-date",e.DVAMT="Amount per share",e.PYDTE="Pay date",e.DIVIDENDFREQUENCY="Payment frequency",e.DISTYLD="Dist. yield",e.SECYLD="SEC yield",e.ESTANUINC="Est. annual income",e.YTDDLY="YTD",e.ONEYR="1 year",e.THRYR="3 year",e.FIVYR="5 year",e.TENYR="10 year",e.EXRTNT="Exp ratio (net)",e.EXRTGS="Exp ratio (gross)",e.MNGSTR="Morningstar overall rating",e.MNGCTG="Morningstar category",e.INDUSTRY="Industry",e.INDUSTRYGROUP="Industry group",e.SECTOR="Sector",e.SUBINDUSTRY="Sub industry",e.SECURITYTYPE="Security type",e.SECURITYSUBTYPE="Security subtype",e.CALLPUT="Call/put",e.DELTA="Delta",e.EXPIRATION="Expiration",e.GAMMA="Gamma",e.IMPLIEDVOLATILITY="Implied volatility",e.RHO="Rho",e.THETA="Theta",e.TIMEVALUE="Time value",e.VEGA="Vega",e.CONTRACTRANGEVISUAL="Contract range (visual)",e.CONTRACTHIGHDATE="Contract high date",e.CONTRACTLOWDATE="Contract low date",e.INTRINSICVALUE="Intrinsic value",e.VOLATILITY10DAY="10-day volatility",e.VOLATILITY30DAY="30-day volatility",e.VOLATILITY60DAY="60-day volatility",e.VOLATILITY90DAY="90-day volatility",e.VOLATILITY120DAY="120-day volatility",e.VOLATILITY250DAY="250-day volatility"}(s||(t.MY_VIEW_LABEL_MAPPING=s={})),function(e){e.CSTBASSTK="Cost basis total, Average cost basis",e.TODGLSTK="Today's gain/loss $, Today's gain/loss %",e.TOTGLSTK="Total gain/loss $, Total gain/loss %",e.CHANGESTK="Change $, Change %",e.LSTPRSTK="Last Price, Change $",e.DISTYLD="Dist. yield, Distribution yield as of",e.SECYLD="SEC yield, SEC yield as of"}(o||(t.MY_VIEW_EXPORT_MAPPING=o={}))},41356:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebColDefinitions=void 0;const o=s(2940),i=s(17597),a=s(11908),r=s(20438),n=s(17190),l=s(60488),d=s(62199),c=s(93535),p=s(82402);class u{static provideDefaultColumnDefinitions(){return{filter:!1,lockPinned:!0,lockVisible:!0,resizable:!1,sort:!1,suppressHeaderMenuButton:!0,suppressMovable:!1,unSortIcon:!0,width:n.PoswebConstants.DEFAULT_COL_WIDTH}}static provideColumnDefinitions(e,t,s=""){const o=[],i=new Map,a=["slv","basket","groupBySecurity"],r=e.split(",");if(s.length>0){const e=s.split(":");(a.indexOf(e[0])>-1||-1===r.indexOf(e[0]))&&(e[0]="sym"),i.set(e[0],e[1]),3===e.length&&i.set("stkSortOrder",e[2])}const n=u.defaultColumnDefinitions(t,i);return r.forEach(e=>{n.filter(t=>{t&&t.colId===e&&o.push(t)})}),o}static updateColWidth(e,t){const s=e.columnDefs;if(s&&t&&Object.keys(t).length>0){let e;s.forEach(s=>{const o=t[s.colId];e=p.PoswebUtils.isNumber(o)?Number(o):n.PoswebConstants.DEFAULT_COL_WIDTH,s.width=s.minWidth=e})}}static defaultColumnDefinitions(e,t=new Map){let s="asc",n="Symbol";return a.POSWEB_SETTINGS_GROUPBY.SYMBOL===l.PoswebGridUtils.getGroupBy()&&(s=null,n="Account"),i.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW===l.PoswebGridUtils.getCurrentSelectedPresetView()&&(n="Account/Symbol"),[{colId:"slv",comparator:r.PoswebColSort.compareGrpCol,field:"slv.val",hide:!0,rowGroup:!0,sort:t.size>0?this.defaultColSort("sym",t):s,sortable:!0},{colId:"basket",comparator:r.PoswebColSort.compareGrpCol,field:"basket.basketId",hide:!0,rowGroup:!0,sort:t.size>0?this.defaultColSort("sym",t):s,sortable:!0},{colId:"groupBySecurity",comparator:r.PoswebColSort.compareGrpCol,field:"groupBySecurity.id",hide:!0,rowGroup:!0,sort:t.size>0?this.defaultColSort("sym",t):s,sortable:!0},{cellClass:["posweb-cell","posweb-cell-row_header"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["symbol"]),cellRenderer:"poswebSymbolCellRenderer",colId:"sym",comparator:r.PoswebColSort.compareSymbolCol,field:"meta.events",colSpan:l.PoswebGridUtils.getColSpan,headerClass:["posweb-header","posweb-header-symbol"],headerName:n,lockPosition:!0,pinned:!1===(null==e?void 0:e.pinnedSymbol)?"":"left",showRowGroup:!0,sort:t.size>0?this.defaultColSort("sym",t):s,sortable:!0,sortingOrder:["asc","desc"],width:200},{cellClass:["posweb-cell","posweb-cell-last_price"],colId:"lstPrc",comparator:r.PoswebColSort.compareLastPriceCol,field:"lstPrc.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-last_price"],headerName:"Last price",sort:this.defaultColSort("lstPrc",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-last_price_change"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss"]),colId:"lstPrChg",comparator:r.PoswebColSort.compareLastPriceChangeCol,field:"lstPrChg.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-last_price_change"],headerName:i.POSWEB_PRESET_VIEW.MY_VIEW===l.PoswebGridUtils.getCurrentSelectedPresetView()?"Change $":"Last price change",sort:this.defaultColSort("lstPrChg",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-stacked","posweb-cell-stacked-last_price"],colId:"lstPrStk",comparator:r.PoswebColSort.compareStackedLstPrStkCol,field:"lstPrStk.top.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-stacked","posweb-header-stacked-last-price-change"],headerComponent:d.PoswebHeaderStackedComponent,headerComponentParams:{sortByTitle1:"Last price",sortByTitle2:"Change",sortBy:2===t.size?t.get("stkSortOrder"):"",colClass:"stacked-last-price-change"},headerName:i.POSWEB_PRESET_VIEW.MY_VIEW===l.PoswebGridUtils.getCurrentSelectedPresetView()?"Last ($ and chg.)":"Last price",sort:this.defaultColSort("lstPrStk",t),sortable:!1,suppressHeaderKeyboardEvent:l.PoswebGridUtils.stkColHeaderKeyboardEvent,cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorStacked,cellRendererParams:{isStacked:!0,stackColInfo:{colId:"lstPrStk",top:{field:"top",className:"posweb-cell-stack-item-last_price"},bottom:{field:"bottom",className:"posweb-cell-stack-item-last_price_change"}}}},{cellClass:["posweb-cell","posweb-cell-today_gl_currency"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss","not_priced_today"]),cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorTodaysGainLossCurrency,colId:"todGL",comparator:r.PoswebColSort.compareTodayGLCurrencyCol,field:"todGL.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-today_gl_currency"],headerName:"Today's gain/loss $",sort:this.defaultColSort("todGL",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-today_gl_percent"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss","not_priced_today"]),colId:"todGLPct",comparator:r.PoswebColSort.compareTodayGLPercentCol,field:"todGLPct.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-today_gl_percent"],headerName:"Today's gain/loss %",sort:this.defaultColSort("todGLPct",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-stacked","posweb-cell-stacked-today_gl"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["not_priced_today"]),colId:"todGLStk",comparator:r.PoswebColSort.compareStackedTodGLStkCol,field:"todGLStk.top.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-stacked","posweb-header-stacked-today-gain-loss"],headerComponent:d.PoswebHeaderStackedComponent,headerComponentParams:{sortByTitle1:"Dollar",sortByTitle2:"Percent",sortBy:2===t.size?t.get("stkSortOrder"):"",colClass:"stacked-today-gain-loss"},headerName:"Today's gain/loss",sort:this.defaultColSort("todGLStk",t),sortable:!1,suppressHeaderKeyboardEvent:l.PoswebGridUtils.stkColHeaderKeyboardEvent,cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorTodaysGainLossCurrency,cellRendererParams:{isStacked:!0,stackColInfo:{colId:"todGLStk",top:{field:"top",className:"posweb-cell-stack-item-today_gl_currency"},bottom:{field:"bottom",className:"posweb-cell-stack-item-today_gl_percent"}}}},{cellClass:["posweb-cell","posweb-cell-total_gl_currency"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss"]),cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorSuperScript,colId:"totGL",comparator:r.PoswebColSort.compareTotalGLCurrencyCol,field:"totGL.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-total_gl_currency"],headerName:"Total gain/loss $",sort:this.defaultColSort("totGL",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-total_gl_percent"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss"]),cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorSuperScript,comparator:r.PoswebColSort.compareTotalGLPctCol,colId:"totGLPct",field:"totGLPct.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-total_gl_percent"],headerName:"Total gain/loss %",sort:this.defaultColSort("totGLPct",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-stacked","posweb-cell-stacked-total_gl"],colId:"totGLStk",comparator:r.PoswebColSort.compareStackedTotGLStkCol,field:"totGLStk.top.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-stacked","posweb-header-stacked-total-gain-loss"],headerComponent:d.PoswebHeaderStackedComponent,headerComponentParams:{sortByTitle1:"Dollar",sortByTitle2:"Percent",sortBy:2===t.size?t.get("stkSortOrder"):"",colClass:"stacked-total-gain-loss"},headerName:"Total gain/loss",sort:this.defaultColSort("totGLStk",t),sortable:!1,suppressHeaderKeyboardEvent:l.PoswebGridUtils.stkColHeaderKeyboardEvent,cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorStacked,cellRendererParams:{isStacked:!0,stackColInfo:{colId:"totGLStk",top:{field:"top",className:"posweb-cell-stack-item-total_gl_currency"},bottom:{field:"bottom",className:"posweb-cell-stack-item-total_gl_percent"}}}},{cellClass:["posweb-cell","posweb-cell-current_value"],cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorCurrentValue,colId:"curVal",comparator:r.PoswebColSort.compareCurrentValueCol,field:"curVal.disp",headerClass:()=>(null==e?void 0:e.isFiliPyIn)?["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-current_value"]:["posweb-header","posweb-header-movable","posweb-header-current_value"],headerName:"Current value",sort:this.defaultColSort("curVal",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-account_percent"],colId:"actPer",comparator:r.PoswebColSort.compareAccountPercentCol,field:"actPer.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-account_percent"],headerName:"% of account",sort:this.defaultColSort("actPer",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-quantity"],cellRendererSelector:l.PoswebGridUtils.quantityColumnCellRendererSelector,colId:"qty",comparator:r.PoswebColSort.compareQuantityCol,field:"qty.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-quantity"],headerName:"Quantity",sort:this.defaultColSort("qty",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-cost_basis_per_share"],cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorSuperScript,colId:"cstBasShr",comparator:r.PoswebColSort.compareCostBasisShareCol,field:"cstBasShr.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-cost_basis_per_share"],headerName:(null==e?void 0:e.isFiliOnly)?"Average Cost":"Average cost basis",sort:this.defaultColSort("cstBasShr",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-cost_basis"],cellRendererSelector:l.PoswebGridUtils.costBasisTotalColumnCellRendererSelector,colId:"cstBasTot",comparator:r.PoswebColSort.compareCostBasisTotalCol,field:"cstBasTot.disp",headerClass:()=>(null==e?void 0:e.isSingleFPRAH)?["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-cost_basis"]:["posweb-header","posweb-header-movable","posweb-header-cost_basis"],headerName:(null==e?void 0:e.isFiliOnly)?"Total Cost":"Cost basis total",sort:this.defaultColSort("cstBasTot",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-stacked","posweb-cell-stacked-cost_basis"],cellRendererSelector:l.PoswebGridUtils.costBasisTotalColumnCellRendererSelector,colId:"cstBasStk",comparator:r.PoswebColSort.compareStackedCstBasStkCol,field:"cstBasStk.top.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-stacked","posweb-header-stacked-cost-basis"],headerComponent:d.PoswebHeaderStackedComponent,headerComponentParams:{sortByTitle1:"Total",sortByTitle2:"Per Share",sortBy:2===t.size?t.get("stkSortOrder"):"",colClass:"stacked-cost-basis"},headerName:(null==e?void 0:e.isFiliOnly)?e.isSingleFPRAH?"Cost<sup>»</sup>":"Cost":"Cost basis",sort:this.defaultColSort("cstBasStk",t),sortable:!1,suppressHeaderKeyboardEvent:l.PoswebGridUtils.stkColHeaderKeyboardEvent,cellRendererParams:{isStacked:!0,stackColInfo:{colId:"cstBasStk",top:{field:"top",className:"posweb-cell-stack-item-cost_basis"},bottom:{field:"bottom",className:"posweb-cell-stack-item-cost_basis_per_share"}}}},{cellClass:["posweb-cell","posweb-cell-52_week_range"],cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorFiftyTwoWeekRange,colId:"fifTwo",comparator:r.PoswebColSort.compareFiftyTwoWeekCol,field:"fifTwo.lowHigh",headerClass:["posweb-header","posweb-header-movable","posweb-header-52_week_range"],headerName:"52-week range",sort:this.defaultColSort("fifTwo",t),sortable:!0,sortingOrder:["desc","asc"],suppressSizeToFit:!0},{cellClass:["posweb-cell","posweb-cell-ex_div_date"],colId:"exDvDte",comparator:r.PoswebColSort.compareExDivDateCol,field:"exDvDte.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-ex_div_date"],headerName:"Ex-date",sort:this.defaultColSort("exDvDte",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-amount_per_share"],colId:"dvAmt",comparator:r.PoswebColSort.compareAmountPerShareCol,field:"dvAmt.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-amount_per_share"],headerName:"Amount per share",sort:this.defaultColSort("dvAmt",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-pay_date"],colId:"pyDte",comparator:r.PoswebColSort.comparePayDateCol,field:"pyDte.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-pay_date"],headerName:"Pay date",sort:this.defaultColSort("pyDte",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-mng_str_ctg"],colId:"mngCtg",comparator:r.PoswebColSort.compareMngStarCtgCol,field:"mngCtg.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-mng_str_ctg"],headerName:"Morningstar category",sort:this.defaultColSort("mngCtg",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-ytd_dly"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss"]),colId:"ytdDly",comparator:r.PoswebColSort.compareYTDDailyCol,field:"ytdDly.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-ytd_dly"],headerName:"YTD (daily)",sort:this.defaultColSort("ytdDly",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-one_yr"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss"]),colId:"oneYr",comparator:r.PoswebColSort.compareOneYrCol,field:"oneYr.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-one_yr"],headerName:"1 year",sort:this.defaultColSort("oneYr",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-thr_yr"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss"]),colId:"thrYr",comparator:r.PoswebColSort.compareThreeYrCol,field:"thrYr.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-thr_yr"],headerName:"3 year",sort:this.defaultColSort("thrYr",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-fiv_yr"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss"]),colId:"fivYr",comparator:r.PoswebColSort.compareFiveYrCol,field:"fivYr.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-fiv_yr"],headerName:"5 year",sort:this.defaultColSort("fivYr",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-ten_yr"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss"]),colId:"tenYr",comparator:r.PoswebColSort.compareTenYrCol,field:"tenYr.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-ten_yr"],headerName:"10 year",sort:this.defaultColSort("tenYr",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-exp_rt_nt"],colId:"exRtNt",comparator:r.PoswebColSort.compareExpRatioNetCol,field:"exRtNt.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-exp_rt_nt"],headerName:"Expense ratio (net)",sort:this.defaultColSort("exRtNt",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-exp_rt_grs"],colId:"exRtGs",comparator:r.PoswebColSort.compareExpRatioGrossCol,field:"exRtGs.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-exp_rt_grs"],headerName:"Expense ratio (gross)",sort:this.defaultColSort("exRtGs",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-mstar"],cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorMstar,colId:"mngStr",comparator:r.PoswebColSort.compareMstarCol,headerClass:["posweb-header","posweb-header-movable","posweb-header-mstar"],headerName:"Morningstar overall",sort:this.defaultColSort("mngStr",t),sortable:!0,sortingOrder:["desc","asc"],suppressSizeToFit:!0},{cellClass:["posweb-cell","posweb-cell-actcol"],cellRenderer:"poswebAccountCellRenderer",colId:"act",comparator:r.PoswebColSort.compareAccountCol,field:"act.actNum",headerClass:["posweb-header","posweb-header-movable","posweb-header-actcol"],headerName:"Account",lockPosition:!1,sort:this.defaultColSort("act",t),sortable:!0,sortingOrder:["asc","desc"],hide:!u.shouldDisplayActCol(),suppressSizeToFit:!0},{cellClass:["posweb-cell","posweb-cell-est_anu_inc"],colId:"estAnuInc",comparator:r.PoswebColSort.compareEstAnuIncCol,field:"estAnuInc.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-est_anu_inc"],headerName:"Est. annual income",sort:this.defaultColSort("estAnuInc",t),sortable:!0,sortingOrder:["desc","asc"]},{colId:"actGroup",comparator:r.PoswebColSort.compareGrpCol,field:"actNum",hide:!0,rowGroup:!0,sort:t.size>0?this.defaultColSort("sym",t):s,sortable:!0},{cellClass:["posweb-cell","posweb-cell-cost"],colId:"cstBasCloPos",comparator:r.PoswebColSort.compareCstBasCloPos,field:"cstBasCloPos.disp",cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorCostBasisCloPos,headerClass:["posweb-header","posweb-header-movable","posweb-header-cost"],headerName:"Cost",sort:this.defaultColSort("cstBasCloPos",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-proceeds"],colId:"proceedsAmt",field:"proceedsAmt.disp",comparator:r.PoswebColSort.compareProceeds,headerClass:["posweb-header","posweb-header-movable","posweb-header-proceeds"],headerName:"Proceeds",sort:this.defaultColSort("proceedsAmt",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-short_term_gl"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss"]),comparator:r.PoswebColSort.compareStGL,colId:"stGL",field:"stGL.disp",cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorAccountGainLossPopover,headerClass:["posweb-header","posweb-header-movable","posweb-header-short_term_gl"],headerName:"Short-term gain/loss",sort:this.defaultColSort("stGL",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-long_term_gl"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss"]),comparator:r.PoswebColSort.compareLtGL,colId:"ltGL",field:"ltGL.disp",cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorAccountGainLossPopover,headerClass:["posweb-header","posweb-header-movable","posweb-header-long_term_gl"],headerName:"Long-term gain/loss",sort:this.defaultColSort("ltGL",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-total_closed_gl"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss"]),comparator:r.PoswebColSort.compareTotGLCloPos,colId:"totGLCloPos",field:"totGLCloPos.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-total_closed_gl"],headerName:"Total gain/loss",sort:this.defaultColSort("totGLCloPos",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-dist-yield"],colId:"distYld",cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorDistYield,comparator:r.PoswebColSort.compareDistYieldCol,field:"distYld.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-dist-yield"],headerName:"Dist. yield",sort:this.defaultColSort("distYld",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-dist-yield_date"],colId:"distYldDate",field:"distYldDate.disp",headerClass:["posweb-header","posweb-header-movable","posweb-cell-dist-yield_date"],headerName:"Distribution yield as of",sortable:!1,hide:!0},{cellClass:["posweb-cell","posweb-cell-sec-yield"],colId:"secYld",cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorSecYield,comparator:r.PoswebColSort.compareSecYieldCol,field:"secYld.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-sec-yield"],headerName:"SEC yield",sort:this.defaultColSort("secYld",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-sec-yield_date"],colId:"secYldDate",field:"secYldDate.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-sec-yield_date"],headerName:"SEC yield as of",sortable:!1,hide:!0},{cellClass:["posweb-cell","posweb-cell-last_price_previous_close"],colId:"lstPrcPrevCls",comparator:r.PoswebColSort.compareLastPricePreClosCol,field:"lstPrcPrevCls.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-last_price_previous_close"],headerName:"Previous close",sort:this.defaultColSort("lstPrcPrevCls",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-prev_cls_dt"],colId:"prevClsDt",comparator:r.PoswebColSort.comparePreClosedDtCol,field:"prevClsDt.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-prev_cls_dt"],headerName:"Previous close date",sort:this.defaultColSort("prevClsDt",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-isoptionable"],colId:"isOptionable",field:"isOptionable.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-isOptionable"],headerName:"Optionable",sortingOrder:["asc","desc"],comparator:r.PoswebColSort.createComparator("isOptionable"),sortable:!0},{cellClass:["posweb-cell","posweb-cell-ishtb"],colId:"isHTB",field:"isHTB.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-ishtb"],headerName:"Hard to borrow",sortingOrder:["asc","desc"],comparator:r.PoswebColSort.createComparator("isHTB"),sortable:!0},{cellClass:["posweb-cell","posweb-cell-isloaned"],colId:"isLoaned",field:"isLoaned.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-isloaned"],headerName:"Loaned",sortingOrder:["asc","desc"],comparator:r.PoswebColSort.createComparator("isLoaned"),sortable:!0},{cellClass:["posweb-cell","posweb-cell-accttype"],colId:"acctType",field:"meta.holdingType",headerClass:["posweb-header","posweb-header-movable","posweb-header-accttype"],headerName:"Account type",sort:this.defaultColSort("acctType",t),sortable:!0,sortingOrder:["asc","desc"],comparator:r.PoswebColSort.createComparator("acctType")},{cellClass:["posweb-cell","posweb-cell-securitytype"],colId:"securityType",field:"meta.securityTypeSC",headerClass:["posweb-header","posweb-header-movable","posweb-header-securityType"],headerName:"Security type",sort:this.defaultColSort("securityType",t),sortable:!0,sortingOrder:["asc","desc"],comparator:r.PoswebColSort.createComparator("securityType")},{cellClass:["posweb-cell","posweb-cell-securitysubtype"],colId:"securitysubtype",field:"meta.securitySubTypeSC",headerClass:["posweb-header","posweb-header-movable","posweb-header-securitysubtype"],headerName:"Security sub type",sort:this.defaultColSort("securitysubtype",t),sortable:!0,sortingOrder:["asc","desc"],comparator:r.PoswebColSort.createComparator("securitySubType")},{cellClass:["posweb-cell","posweb-cell-industry"],colId:"industry",field:"industry.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-industry"],headerName:"Industry",comparator:r.PoswebColSort.createComparator("industry"),sortable:!0,sortingOrder:["desc","asc"],suppressSizeToFit:!0},{cellClass:["posweb-cell","posweb-cell-sector"],colId:"sector",field:"sector.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-sector"],headerName:"Sector",comparator:r.PoswebColSort.createComparator("sector"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-news"],colId:"news",field:"headlineTime.disp",cellRendererSelector:l.PoswebGridUtils.newsColumnCellRendererSelector,headerClass:["posweb-header","posweb-header-movable","posweb-header-news"],headerName:"News",tooltipField:"headlineTime",tooltipComponent:o.CustomTooltip,comparator:r.PoswebColSort.createComparator("headlineTime"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-market-cap"],colId:"marketCap",field:"marketCap.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-mrkt-cap"],headerName:"Market cap",comparator:r.PoswebColSort.createComparator("marketCap"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-high-dt"],colId:"yearHighDate",field:"yearHighDate.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-high-dt"],headerName:"52-week high date",comparator:r.PoswebColSort.createComparator("yearHighDate"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"yearLowDate",field:"yearLowDate.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"52-week low date",comparator:r.PoswebColSort.createComparator("yearLowDate"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-eq-score-dt"],colId:"equitySummaryScoreDate",field:"equitySummaryScoreDate.disp",comparator:r.PoswebColSort.createComparator("equitySummaryScoreDate"),headerClass:["posweb-header","posweb-header-movable","posweb-header-eq-score-dt"],headerName:"Analyst ratings date",sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-equity-summary"],cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorAnalystRatings,colId:"equitySummaryRating",field:"equitySummaryRating.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-superscript","posweb-header-eq-score"],headerName:"Analyst ratings",comparator:r.PoswebColSort.createComparator("equitySummaryScore"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-volume"],colId:"volume",comparator:r.PoswebColSort.createComparator("volume"),field:"volume.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-volume"],headerName:"Volume",sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-cusip"],colId:"cusip",field:"sym.cusip",comparator:r.PoswebColSort.createComparator("cusip"),headerClass:["posweb-header","posweb-header-movable","posweb-header-cusip"],headerName:"CUSIP",sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-bid_price"],colId:"bidPrice",comparator:r.PoswebColSort.createComparator("bidPrice"),field:"bidPrice.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-bid_price"],headerName:"Bid",sort:this.defaultColSort("bidPrice",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-bid_size"],colId:"bidSize",comparator:r.PoswebColSort.createComparator("bidSize"),field:"bidSize.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-bid_size"],headerName:"Bid size",sort:this.defaultColSort("bidSize",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-ask_price"],colId:"askPrice",comparator:r.PoswebColSort.createComparator("askPrice"),field:"askPrice.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-ask_price"],headerName:"Ask",sort:this.defaultColSort("askPrice",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-ask_size"],colId:"askSize",comparator:r.PoswebColSort.createComparator("askSize"),field:"askSize.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-ask_size"],headerName:"Ask size",sort:this.defaultColSort("askSize",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-open_price"],colId:"openPrice",comparator:r.PoswebColSort.createComparator("openPrice"),field:"openPrice.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-open_price"],headerName:"Open price",sort:this.defaultColSort("openPrice",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-last_price_change_pct"],cellClassRules:l.PoswebGridUtils.getCellClassRules(["gain_loss"]),colId:"lstPrChgPct",comparator:r.PoswebColSort.createComparator("lstPrChgPct"),field:"lstPrChgPct.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-last_price_change_pct"],headerName:i.POSWEB_PRESET_VIEW.MY_VIEW===l.PoswebGridUtils.getCurrentSelectedPresetView()?"Change %":"Last price change %",sort:this.defaultColSort("lstPrChgPct",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-day_range"],cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorDayRange,colId:"dayRange",comparator:r.PoswebColSort.createComparator("dayRange"),field:"dayRange.lowHigh",headerClass:["posweb-header","posweb-header-movable","posweb-header-day_range"],headerName:"Day range",sort:this.defaultColSort("dayRange",t),sortable:!0,sortingOrder:["desc","asc"],suppressSizeToFit:!0},{cellClass:["posweb-cell","posweb-cell-day_low"],colId:"dayLow",comparator:r.PoswebColSort.createComparator("dayLow"),field:"dayRange.low.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-day_low"],headerName:"Day Low",sort:this.defaultColSort("dayLow",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-day_high"],colId:"dayLow",comparator:r.PoswebColSort.createComparator("dayHigh"),field:"dayRange.high.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-day_high"],headerName:"Day High",sort:this.defaultColSort("dayHigh",t),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-industry"],colId:"subIndustry",field:"subIndustry.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-industry"],headerName:"Sub industry",comparator:r.PoswebColSort.createComparator("subIndustry"),sortable:!0,sortingOrder:["desc","asc"],suppressSizeToFit:!0},{cellClass:["posweb-cell","posweb-cell-industry"],colId:"industryGroup",field:"industryGroup.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-industry"],headerName:"Industry Group",comparator:r.PoswebColSort.createComparator("industryGroup"),sortable:!0,sortingOrder:["desc","asc"],suppressSizeToFit:!0},{cellClass:["posweb-cell","posweb-cell-sector"],colId:"dividendFrequency",field:"dividendFrequency.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-sector"],headerName:"Payment frequency",comparator:r.PoswebColSort.createComparator("dividendFrequency"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell"],colId:"contractHighDate",field:"contractHighDate.disp",headerClass:["posweb-header","posweb-header-movable"],headerName:"Contract high date",comparator:r.PoswebColSort.createComparator("contractHighDate"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell"],colId:"contractLowDate",field:"contractLowDate.disp",headerClass:["posweb-header","posweb-header-movable"],headerName:"Contract low date",comparator:r.PoswebColSort.createComparator("contractLowDate"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"avgVol10Day",field:"avgVol10Day.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"10-day avg volume",comparator:r.PoswebColSort.createComparator("avgVol10Day"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"avgVol90Day",field:"avgVol90Day.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"90-day avg volume",comparator:r.PoswebColSort.createComparator("avgVol90Day"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"currency",field:"currency.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"Currency",comparator:r.PoswebColSort.createComparator("currency"),sortingOrder:["asc","desc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"shortInterestRatio",field:"shortInterestRatio.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"Days to cover",comparator:r.PoswebColSort.createComparator("shortInterestRatio"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"prevShortInterestRatio",field:"prevShortInterestRatio.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"Prior days to cover",comparator:r.PoswebColSort.createComparator("prevShortInterestRatio"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"prevShortInterest",field:"prevShortInterest.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"Prior shares short",comparator:r.PoswebColSort.createComparator("prevShortInterest"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"shortInterest",field:"shortInterest.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"Shares short",comparator:r.PoswebColSort.createComparator("shortInterest"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"pctFloat",field:"pctFloat.disp",comparator:r.PoswebColSort.createComparator("pctFloat"),headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"Short %",sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-shr-out"],colId:"sharesOutstanding",field:"sharesOutstanding.disp",headerClass:e=>{var t;const s=["posweb-header","posweb-header-movable","posweb-header-shr-out"];return(null===(t=null==e?void 0:e.context)||void 0===t?void 0:t.isDigitalCurrency)&&s.push("crypto"),s},headerName:"Shares outstanding",comparator:r.PoswebColSort.createComparator("sharesOutstanding"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"volatility10Day",field:"volatility10Day.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"10-day volatility",comparator:r.PoswebColSort.createComparator("volatility10Day"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"volatility30Day",field:"volatility30Day.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"30-day volatility",comparator:r.PoswebColSort.createComparator("volatility30Day"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"volatility60Day",field:"volatility60Day.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"60-day volatility",comparator:r.PoswebColSort.createComparator("volatility60Day"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"volatility90Day",field:"volatility90Day.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"90-day volatility",comparator:r.PoswebColSort.createComparator("volatility90Day"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"volatility120Day",field:"volatility120Day.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"120-day volatility",comparator:r.PoswebColSort.createComparator("volatility120Day"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"volatility250Day",field:"volatility250Day.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"250-day volatility",comparator:r.PoswebColSort.createComparator("volatility250Day"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"earningsAnnouncementDate",field:"earningsAnnouncementDate.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"Earnings announcement date",comparator:r.PoswebColSort.createComparator("earningsAnnouncementDate"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-yr-low-dt"],colId:"peRatio",field:"peRatio.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-yr-low-dt"],headerName:"P/E ratio",comparator:r.PoswebColSort.createComparator("peRatio"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-imp-vol"],colId:"impliedVolatility",field:"impliedVolatility.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-imp-vol"],headerName:"Implied volatality",comparator:r.PoswebColSort.createComparator("impliedVolatility"),sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-intrsc-val"],colId:"intrinsicValue",field:"intrinsicValue.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-intrsc-val"],headerName:"Intrinsic value",comparator:r.PoswebColSort.createComparator("intrinsicValue"),sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-time-val"],colId:"timeValue",field:"timeValue.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-time-val"],headerName:"Time value",comparator:r.PoswebColSort.createComparator("timeValue"),sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-delta-val"],colId:"delta",field:"delta.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-delta-val"],comparator:r.PoswebColSort.createComparator("delta"),headerName:"Delta",sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-gamma-val"],colId:"gamma",field:"gamma.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-gamma-val"],headerName:"Gamma",comparator:r.PoswebColSort.createComparator("gamma"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-vega-val"],colId:"vega",field:"vega.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-vega-val"],headerName:"Vega",comparator:r.PoswebColSort.createComparator("vega"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-theta-val"],colId:"theta",field:"theta.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-theta-val"],headerName:"Theta",comparator:r.PoswebColSort.createComparator("theta"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-rho-val"],colId:"rho",field:"rho.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-rho-val"],headerName:"Rho",comparator:r.PoswebColSort.createComparator("rho"),sortable:!0,sortingOrder:["desc","asc"]},{cellClass:["posweb-cell","posweb-cell-call-put-val"],colId:"callPut",field:"callPut.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-call-put-val"],headerName:"Call/put",comparator:r.PoswebColSort.createComparator("callPut"),sortingOrder:["asc","desc"]},{cellClass:["posweb-cell","posweb-cell-expiration"],colId:"expiration",field:"expiration.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-expiration"],headerName:"Expiration",comparator:r.PoswebColSort.createComparator("expiration"),sortable:!0,sortingOrder:["desc","asc"],suppressSizeToFit:!0},{cellClass:["posweb-cell","posweb-cell-52_week_range"],cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorContractVisualRange,colId:"contractRangeVisual",field:"contractRangeVisual.lowHigh",headerClass:["posweb-header","posweb-header-movable","posweb-header-52_week_range"],headerName:"Contract range (visual)",comparator:r.PoswebColSort.createComparator("contractRange"),sortable:!0,sortingOrder:["desc","asc"],suppressSizeToFit:!0},{cellClass:["posweb-cell","posweb-cell-stacked","posweb-cell-stacked-change"],colId:"changeStk",comparator:r.PoswebColSort.createComparator("changeStk"),field:"changeStk.top.disp",headerClass:["posweb-header","posweb-header-movable","posweb-header-stacked","posweb-header-stacked-change"],headerComponent:d.PoswebHeaderStackedComponent,headerComponentParams:{sortByTitle1:"Change $",sortByTitle2:"Change %",sortBy:2===t.size?t.get("stkSortOrder"):"",colClass:"stacked-change"},headerName:"Change ($ and %)",sort:this.defaultColSort("changeStk",t),sortable:!1,suppressHeaderKeyboardEvent:l.PoswebGridUtils.stkColHeaderKeyboardEvent,cellRendererSelector:l.PoswebGridUtils.cellRendererSelectorStacked,cellRendererParams:{isStacked:!0,stackColInfo:{colId:"changeStk",top:{field:"top",className:"posweb-cell-stack-item-last_price"},bottom:{field:"bottom",className:"posweb-cell-stack-item-last_price_change"}}}}]}static defaultColSort(e,t){return t.size>0?t.get(e):null}static shouldDisplayActCol(){return a.POSWEB_SETTINGS_GROUPBY.NO_GROUPING===l.PoswebGridUtils.getGroupBy()&&c.PoswebMetadata.getInstance().totalNoOfAccts>1}}t.PoswebColDefinitions=u},42095:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResearchCardComponent=void 0;t.ResearchCardComponent=class{static provideSpinner(e){return`<div class="posweb-card-spinner-container"><pvd3pwe-spinner class="posweb-card-spinner" pvd-size="medium"\n                       pvd-primary-text="Loading ${e}" pvd-triggered-by-interaction="false"></pvd3pwe-spinner></div>`}static provideUnderConstruction(e){return`<div class="posweb-card-under-construction">${e}</div>`}}},42457:(e,t,s)=>{var o,i;s(36802),s(84156),s(65726);const a=s(729),r=s(38156),n=s(42898),l="pvd3pwe";(0,a.injectSpriteSheet)(l),a.PvdAlert.defineCustomElement(l),a.PvdPopover.defineCustomElement(l),a.PvdButton.defineCustomElement(l),a.PvdCheckbox.defineCustomElement(l),a.PvdCheckboxGroup.defineCustomElement(l),a.PvdExpandCollapse.defineCustomElement(l),a.PvdFieldGroup.defineCustomElement(l),a.PvdIcon.defineCustomElement(l),a.PvdInlineAlert.defineCustomElement(l),a.PvdLabel.defineCustomElement(l),a.PvdLink.defineCustomElement(l),a.PvdModal.defineCustomElement(l),a.PvdRadio.defineCustomElement(l),a.PvdRadioGroup.defineCustomElement(l),a.PvdSpinner.defineCustomElement(l),a.PvdSelect.defineCustomElement(l),a.PvdTruncateText.defineCustomElement(l),a.PvdInput.defineCustomElement(l),a.PvdTab.defineCustomElement(l),a.PvdTabGroup.defineCustomElement(l),a.PvdTabPanel.defineCustomElement(l),a.PvdTooltip.defineCustomElement(l),customElements.get("pwe-tooltip")||customElements.define("pwe-tooltip",n.PoswebTooltip),window.poswebex=new r.PoswebExperience,(null===(o=window.posweb)||void 0===o?void 0:o.cryptoWatermark)&&document.documentElement.style.setProperty("--crypto-watermark-light-mode",`url(${null===(i=window.posweb)||void 0===i?void 0:i.cryptoWatermark})`)},42898:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebTooltip=void 0;class s extends HTMLElement{constructor(){super(),this._shadowRoot=this.attachShadow({mode:"open"}),this._shadowRoot.innerHTML=this.template(),this.offset=10,this.uniqueId=crypto.randomUUID(),this._showOnHover=!1,this._popoverHideBoundaries={},this._position="top",this._zindex="30",this.hasElement=!1,this.showFunc=this._show.bind(this),this.hideFunc=this._hide.bind(this)}connectedCallback(){this.setAttribute("role","dialog"),this.setAttribute("tabindex","-1"),this.hasAttribute("id")||this.setAttribute("id","pwe-tooltip"+this.uniqueId),this.hasElement||this.setAttribute("for",this.getAttribute("for"))}static get observedAttributes(){return["for","position","text","zindex","show-on-hover"]}attributeChangeCallbackByFor(e,t){this.hasAttribute("id")||this.setAttribute("id","pwe-tooltip-"+this.uniqueId);const s=e.split(",");for(const e of s){const t=e.replace(/\s/g,""),s=Array.from(document.querySelectorAll("#"+t).length>0?document.querySelectorAll("#"+t):document.querySelectorAll("."+t)).filter(e=>e);for(const e of s)this.hasElement=!0,e.setAttribute("aria-describedby",this.getAttribute("id")),this._showOnHover&&(e.addEventListener("mouseover",this._show.bind(this)),e.addEventListener("mouseout",this.hideFunc.bind(this)),e.addEventListener("click",this.hideFunc.bind(this)))}if(t&&t.length){const e=t.split(",");for(const t of e){const e=t.replace(/\s/g,""),s=Array.from(document.querySelectorAll("#"+e).length>0?document.querySelectorAll("#"+e):document.querySelectorAll("."+e));for(const e of s)e&&this._showOnHover&&(e.removeEventListener("mouseover",this._show.bind(this)),e.removeEventListener("mouseout",this.hideFunc.bind(this)),e.removeEventListener("click",this.hideFunc.bind(this)))}}}attributeChangeCallbackByText(e){const t=this._shadowRoot.querySelector(".pwe-tooltip span");return e?t&&(t.innerHTML=e):t&&(t.innerHTML=""),t}getAttributeValue(e,t,s){return e?t:s}attributeChangedCallback(e,t,s){switch(e){case"for":if(!s)return;this.attributeChangeCallbackByFor(s,t);break;case"text":this.attributeChangeCallbackByText(s);break;case"position":this._position=this.getAttributeValue("top"!==s&&"right"!==s&&"bottom"!==s&&"left"!==s,"top",s);break;case"zindex":this._zindex=this.getAttributeValue(!s,"30",Number(s)+1);break;case"show-on-hover":this._showOnHover=this.getAttributeValue(!1,!1,"true"===s),this.offset="true"===s?20:10}}template(){return`<style>${s.styles}</style>\n    <div class="pwe-tooltip hidden">\n        <div class="tooltip-content">\n            <span></span>\n            <slot></slot>\n            <div class="arrow"></div>\n        </div>\n    </div>`}_calculateLeftRightPopoverPosition(e,t,s,o,i){const a=(t.height-e.height)/2;t.top=e.top-a,"left"===s?(t.right=e.left-i,t.left=t.right-t.width):(t.left=e.right+i,t.right=t.left+t.width),t.bottom=t.top+t.height,t.top<0?(t.top=0,t.bottom=t.top+t.height,t.pin="top"):t.bottom>o.height&&(t.bottom=o.height,t.top=t.bottom-t.height,t.pin="bottom")}_calculateTopBottomPopoverPosition(e,t,s,o,i){const a=(t.width-e.width)/2;t.left=e.left-a,t.right=t.left+t.width,t.top="top"===s?e.top-t.height-i:e.bottom+i,t.bottom=t.top+t.height,t.left<=0?(t.pin="left",t.left=0,t.right=t.width):t.right>=o.width&&(t.pin="right",t.left=o.width-t.width,t.right=o.width)}getPositionCurrent(e,t){return e=e?["top","bottom"].indexOf(e)>-1?"top"===e?"bottom":"top":"right"===e?"left":"right":t}_calculatePopoverPosition(e,t,s,o,i){let a=!1,r=0;for(;(!a||!this._verifyWithinWindow(t,o))&&r<3;)r++,t.pin="auto",a=this.getPositionCurrent(a,s),["top","bottom"].indexOf(a)>-1?this._calculateTopBottomPopoverPosition(e,t,a,o,i):this._calculateLeftRightPopoverPosition(e,t,a,o,i);return a}_setArrowPosition(e,t,s,o,i,a){e.classList.add(i),["top","right","bottom","left"].filter(e=>e!==i).forEach(t=>e.classList.remove(t));const r=t.getBoundingClientRect(),n={top:"",right:"",bottom:"",left:""};"top"===s.pin?n.top=o.top+o.height/2+"px":"right"===s.pin?(n.left="auto",n.right=Math.max(a.width-r.width-(o.left+o.width/2),0)+"px"):"bottom"===s.pin?n.top=s.height-(a.height-(o.top+o.height/2))+"px":"left"===s.pin&&(n.left=Math.max(o.left+o.width/2,0)+"px",n.right="auto");for(const e in n)e&&n[e]?t.style[e]=n[e]:delete t.style[e]}_setPopoverPosition(e,t){this.style.top=e.top-t.top+"px",this.style.bottom="auto",["left","auto"].indexOf(e.pin)>-1?(this.style.width="auto",this.style.right="auto",this.style.left=e.left-t.left+"px"):(this.style.width=e.width+"px",this.style.right=t.right-e.right+"px",this.style.left="auto")}_verifyTargetPosition(e,t,s){const o={top:0,right:s.width,bottom:s.height,left:0};for(const e of Object.keys(o))if(t[e]=t[e]||t.all||"default","default"!==t[e]){const s=document.querySelector(t[e]);s&&(o[e]=s.getBoundingClientRect()[e])}const i=e.bottom>Math.max(o.top,0),a=e.left<Math.min(o.right,s.width),r=e.top<Math.min(o.bottom,s.height),n=e.right>Math.max(o.left,0);return i&&a&&r&&n}_verifyWithinWindow(e,t){return e.top>=0&&e.right<=t.width&&e.bottom<=t.height&&e.left>=0}_updatePosition(){let e,t;this._target&&(e=this._target.getBoundingClientRect());const s=this._shadowRoot.querySelector(".pwe-tooltip"),o=this._shadowRoot.querySelector(".arrow"),i={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},a=this.getBoundingClientRect(),r=this.parentElement;if(r&&(t=r.getBoundingClientRect()),e&&this._verifyTargetPosition(e,this._popoverHideBoundaries,i)&&a&&t&&s&&o){const r=JSON.parse(JSON.stringify(a,["top","right","bottom","left","height","width"])),n=this._calculatePopoverPosition(e,r,this._position,i,this.offset);this._setArrowPosition(s,o,r,e,n,i),this._setPopoverPosition(r,t),s.classList.add("visible")}else this.hideFunc()}_initializePopoverPositionSize(){this.style.left=this.style.right=this.style.top="auto",this._hideElem=this.parentElement,this._showElem=this.getAttribute("show-elem")?document.querySelector(this.getAttribute("show-elem")):this.parentElement,this.style.visibility="hidden";this._shadowRoot.querySelector(".pwe-tooltip").classList.remove("hidden");const e=document.createElement("div");e.classList.add("pwe-tooltip-sizer"),e.style.width="0",e.style.height="0",e.style.position="relative",e.style.zIndex=this._zindex,this._showElem.insertBefore(e,this._showElem.firstChild),e.appendChild(this)}_show(e){e.preventDefault(),e.stopImmediatePropagation(),this._target=e.target,this._initializePopoverPositionSize(),this._updatePosition()}_hide(){const e=this._shadowRoot.querySelector(".pwe-tooltip");e.classList.remove("visible"),e.classList.add("hidden");const t=this.parentElement;t&&t.parentElement&&t.parentElement.removeChild(t),this._target&&this._target.focus()}}t.PoswebTooltip=s,s.styles="\n  :host {\n    display: block;\n    position: absolute;\n    outline: none;\n    cursor: default;\n  }\n\n  pwe-tooltip {\n    display: block;\n    position: absolute;\n    outline: none;\n    cursor: default;\n  }\n\n  .pwe-tooltip {\n    display: block;\n    outline: none;\n    background-color: #FFFFFF;\n    color: #000000;\n    border-radius: 0.5rem;\n    font-family:\n      Fidelity Sans,\n      Helvetica,\n      Arial,\n      sans-serif;\n    border: solid 1px #404040;\n    box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.3);\n    max-width: calc(31.25rem - 2px);\n    min-width: 7rem;\n    padding: 0.625rem;\n    overflow: hidden;\n    z-index: -10;\n    opacity: 0;\n    visibility: hidden;\n    transition: opacity 0.2s ease-in-out 0.3s, visibility 0.2s ease-in-out 0.3s;\n  }\n\n  .pwe-tooltip .tooltip-content {\n    text-align:center;\n    display: block;\n    outline: none;\n    color: #000000;\n    max-height: calc(22rem - 10px);\n    overflow: visible;\n    min-width: 3rem;\n    font-weight: 400;\n    font-size: 0.875rem;\n    z-index: -10;\n  }\n\n  .pwe-tooltip .arrow {\n    position: absolute;\n    left: 50%;\n    right: initial;\n    transform: translateX(-50%);\n    border-width: 10px;\n    border-style: solid;\n  }\n\n  .pwe-tooltip .arrow::after {\n    content: '';\n    display: block;\n    position: absolute;\n    width: 12px;\n    height: 12px;\n    background: transparent;\n    border-style: solid;\n    border-width: 1px;\n    transform-origin: 0 0;\n    border-color: transparent transparent #404040\n      #404040;\n  }\n\n  .pwe-tooltip .arrow::after {\n    width: 14px;\n    height: 14px;\n  }\n\n  .pwe-tooltip.top .arrow,\n  .pwe-tooltip.bottom .arrow.arrow-top {\n    top: calc(100% - 1px);\n    bottom: initial;\n    border-color: #ffffff transparent transparent\n      transparent;\n  }\n\n  .pwe-tooltip.top .arrow::after,\n  .pwe-tooltip.bottom .arrow.arrow-top::after {\n    left: -10px;\n    bottom: -6px;\n    top: initial;\n    transform: rotate(-45deg);\n    box-shadow: -2px 4px 4px -2px rgba(0, 0, 0, 0.3);\n  }\n\n  .pwe-tooltip.top .arrow::after,\n  .pwe-tooltip.bottom .arrow.arrow-top::after {\n    box-shadow: none;\n  }\n\n  .pwe-tooltip.bottom .arrow,\n  .pwe-tooltip.top .arrow.arrow-bottom {\n    top: -19px;\n    bottom: initial;\n    border-color: transparent transparent #ffffff\n      transparent;\n  }\n\n  .pwe-tooltip.bottom .arrow::after,\n  .pwe-tooltip.top .arrow.arrow-bottom::after {\n    left: 11px;\n    top: 10px;\n    bottom: initial;\n    transform: rotate(135deg);\n    box-shadow: -1px 1px 4px -3px rgba(0, 0, 0, 0.3);\n  }\n\n  .pwe-tooltip.bottom .arrow::after,\n  .pwe-tooltip.top .arrow.arrow-bottom::after {\n    box-shadow: none;\n  }\n\n  .pwe-tooltip.right .arrow,\n  .pwe-tooltip.left .arrow.arrow-right {\n    right: calc(100% - 1px);\n    top: 50%;\n    transform: translateY(-50%);\n    left: initial;\n    border-color: transparent #ffffff transparent\n      transparent;\n  }\n\n  .pwe-tooltip.right .arrow::after,\n  .pwe-tooltip.left .arrow.arrow-right::after {\n    left: 10px;\n    top: -10px;\n    transform: rotate(45deg);\n    box-shadow: -2px 2px 4px -2px rgba(0, 0, 0, 0.3);\n  }\n\n  .pwe-tooltip.right .arrow::after,\n  .pwe-tooltip.left .arrow.arrow-right::after {\n    box-shadow: none;\n  }\n\n  .pwe-tooltip.right .arrow,\n  .pwe-tooltip.left .arrow.arrow-right {\n    left: -20px;\n    top: 51%;\n  }\n\n  .pwe-tooltip.left .arrow,\n  .pwe-tooltip.right .arrow.arrow-left {\n    right: -19px;\n    top: 50%;\n    transform: translateY(-50%);\n    left: initial;\n    border-color: transparent transparent transparent\n      #ffffff;\n  }\n\n  .pwe-tooltip.left .arrow::after,\n  .pwe-tooltip.right .arrow.arrow-left::after {\n    left: -9px;\n    top: 10px;\n    transform: rotate(-135deg);\n    box-shadow: -2px 2px 4px -2px rgba(0, 0, 0, 0.3);\n  }\n\n  .pwe-tooltip.left .arrow::after,\n  .pwe-tooltip.right .arrow.arrow-left::after {\n    box-shadow: none;\n  }\n\n  .pwe-tooltip.left .arrow,\n  .pwe-tooltip.right .arrow.arrow-left {\n    left: calc(100% - 2px);\n  }\n\n  .hidden {\n    display: none;\n  }\n\n  .pwe-tooltip.visible {\n    opacity: 1;\n    visibility: visible;\n  }\n  "},43870:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebSearch=void 0;const o=s(17190),i=s(60488),a=s(82402),r=s(34140);class n{constructor(){this.eligibleRowTypes=["POSITION","POSITION_CORE"],this.priceColumns=["todGL","totGL","curVal","stGL","ltGL","totGLCloPos","estAnuInc","cstBasCloPos","proceedsAmt","cstBasTot","cstBasStk"],this.recalculateAcctTotalColumns={Overview:["todGL","todGLPct","totGL","totGLPct","totGLStk","todGLStk","curVal","cstBasTot","cstBasStk","actPer"],DividendView:["curVal","estAnuInc"],FundPerfView:[],ClosedPositionsView:["cstBasCloPos","proceedsAmt","stGL","ltGL","totGLCloPos"],MyView:["todGL","todGLPct","totGL","totGLPct","totGLStk","todGLStk","curVal","cstBasTot","cstBasStk","actPer","estAnuInc"]},this.currentViewCalculateColumns=[],this.displayedColIds=[],this.stackedCols=["totGLStk","todGLStk","cstBasStk"],this.gainLossPercentColummns=["curVal","todGL","totGL","cstBasTot","totGLStk","todGLStk","cstBasStk"],this._gridTopContainer=a.PoswebUtils.htmlQuerySelector(".posweb-grid_top-container"),this._buttonsArea=this._gridTopContainer.querySelector(".posweb-grid_top-buttons-area"),this._refreshDatetimeEl=this._buttonsArea.querySelector(".posweb-grid_top-refresh-datetime"),this._searchContainer=this._buttonsArea.querySelector(".posweb-grid_top-buttons-search-container"),this._searchEl=this._searchContainer.querySelector(".posweb-grid_top-search"),this._searchIcon=this._searchEl.querySelector(".posweb-grid_top-search-icon"),this._closeIcon=this._searchEl.querySelector(".posweb-grid_top-search-close"),this._searchBox=this._searchEl.querySelector(".posweb-grid_top-search-input"),this._searchInput=this._searchEl.querySelector(".posweb-grid_top-search-input input"),this.currentViewCalculateColumns=this.recalculateAcctTotalColumns[i.PoswebGridUtils.getCurrentSelectedPresetView()],this._resizeObserver=new ResizeObserver(()=>{clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(this.calculateSize.bind(this),200)})}updateSearchEventListeners(){this.expandAndFocusBound=this.expandAndFocus.bind(this),this.collapseAndCleanBound=this.collapseAndClean.bind(this),this.blurSearchInputBound=this.blurSearchInput.bind(this),this.keydownListenerBound=this.keydownListener.bind(this),this.doSearchBound=this.doSearch.bind(this),this._searchIcon.addEventListener("click",this.expandAndFocusBound),this._closeIcon.addEventListener("click",this.collapseAndCleanBound),this._searchBox.addEventListener("blur",this.blurSearchInputBound),this._searchInput.addEventListener("input",this.doSearchBound),this._searchIcon.addEventListener("keydown",this.keydownListenerBound),this._closeIcon.addEventListener("keydown",this.keydownListenerBound),this._searchEl.classList.contains(n.CLASS_EXPAND)&&this._resizeObserver.observe(this._gridTopContainer);const{searchValue:e}=r.WindowService.getPositionSettings()[o.PoswebConstants.SETTINGS_SEARCH]||{};e&&(this._searchBox.pvdValue=e,this.expandAndFocus())}destroy(){this._searchIcon.removeEventListener("click",this.expandAndFocusBound),this._closeIcon.removeEventListener("click",this.collapseAndCleanBound),this._searchBox.removeEventListener("blur",this.blurSearchInputBound),this._searchInput.removeEventListener("input",this.doSearchBound),this._searchIcon.removeEventListener("keydown",this.keydownListenerBound),this._closeIcon.removeEventListener("keydown",this.keydownListenerBound),this.destroyResizeObserver()}destroyResizeObserver(){this._resizeObserver.disconnect(),clearTimeout(this._resizeTimeout)}isExternalFilterPresent(){const{searchValue:e}=r.WindowService.getPositionSettings()[o.PoswebConstants.SETTINGS_SEARCH]||{};return!(!this._gridApi||this._gridApi.isDestroyed())&&(e?(this.prepareFilterData(),!0):(this.resetGridData(),!1))}doesExternalFilterPass(e){const{searchValue:t="",acctsWithSearchValue:s={},symWithSearchValue:i=[]}=r.WindowService.getPositionSettings()[o.PoswebConstants.SETTINGS_SEARCH]||{},a=e.data;switch(a.actNum&&s[e.data.actNum]&&s[e.data.actNum].basketIds&&"BSK"===a.rowSubType&&"BASKET_SUBTOTAL"!==a.rowType&&s[e.data.actNum].basketIds[e.data.basket.basketId]&&this.updateBasketGroupTotalValues(e.parent,s,e.data.actNum,e.data.basket.basketId),a.actNum&&s[e.data.actNum]&&s[e.data.actNum].groupBySecurityIds&&"GSP"===a.rowSubType&&"GBS_TOTAL"!==a.rowType&&s[e.data.actNum].groupBySecurityIds[e.data.groupBySecurity.id]&&this.updateGroupBySecurityTotalValues(e.parent,s,e.data.actNum,e.data.groupBySecurity.id),a.rowType){case"POSITION_CORE":case"SYMBOL":return this.filterPositionRow(a,t);case"POSITION":return this.updateAccountGroupData(s),this.filterPositionRow(a,t);case"ACCOUNT":return!(!a.actNum||!s[e.data.actNum])&&(this._needSpacer=!0,!0);case"BASKET_SUBTOTAL":return!!(a.actNum&&s[e.data.actNum]&&s[e.data.actNum].basketIds&&s[e.data.actNum].basketIds[e.data.basket.basketId])&&(this.updateBasketGroupTotalValues(e,s,e.data.actNum,e.data.basket.basketId),!0);case"GBS_TOTAL":return!!(a.actNum&&s[e.data.actNum]&&s[e.data.actNum].groupBySecurityIds&&s[e.data.actNum].groupBySecurityIds[e.data.groupBySecurity.id])&&(this.updateGroupBySecurityTotalValues(e,s,e.data.actNum,e.data.groupBySecurity.id),!0);case"ACCOUNT_TOTAL":return!(!a.actNum||!s[e.data.actNum])&&(this._needSpacer=!0,this.updateAccountTotalValues(e,s,{}),!0);case"SPACER":const o=this._needSpacer||!1;return this._needSpacer=!1,o;case"SYMBOL_TOTAL":return!!(a.symNam&&i.indexOf(a.symNam)>-1)&&(this._needSpacer=!0,!0);case"GRAND_TOTAL":return Object.keys(s).length>0&&(this.updateGrandTotals(e),!0);default:return!1}}showNoRowsMessage(){this._gridApi.getDisplayedRowCount()?this._gridApi.hideOverlay():this._gridApi.showNoRowsOverlay()}filterPositionRow(e,t){var s;const o=t.toLowerCase();return e.sym.name.toLowerCase().includes(o)||e.sym.desc.toLowerCase().includes(o)||(null===(s=e.symNam)||void 0===s?void 0:s.toLowerCase().includes(o))||"cash"===o&&"POSITION_CORE"===e.rowType}keydownListener(e){" "!==e.key&&"Enter"!==e.key||(e.target===this._searchIcon?this.expandAndFocus():e.target===this._closeIcon&&this.collapseAndClean())}expandAndFocus(){this._searchEl.classList.add(n.CLASS_EXPAND),this.calculateSize(),this._searchInput.focus(),this._resizeObserver.observe(this._gridTopContainer)}blurSearchInput(){this._searchBox.pvdValue&&!/^\s*$/.test(this._searchBox.pvdValue)||this.collapseAndClean()}collapseAndClean(){this.destroyResizeObserver(),this._searchBox.pvdValue="",this._searchEl.classList.remove(n.CLASS_EXPAND),this._searchBox.style.width="",this._searchEl.style.maxWidth="",this._searchContainer.style.minWidth="",this.doSearch()}calculateSize(){const e=this._searchIcon.offsetWidth,t=this._refreshDatetimeEl.offsetWidth,s=t?t+e:200,o=this._searchContainer.clientWidth;if(this.isFullRowWidth()){this._searchEl.style.maxWidth="";let e=parseFloat(this._searchContainer.style.minWidth);return e=isNaN(e)?0:e,e=Math.max(e,s),this._searchContainer.style.minWidth=o<=e?"":e+"px",void(this._searchBox.style.width="100%")}const i=Math.ceil(t+s);this._searchContainer.style.minWidth=this._searchBox.style.width=s+"px",this._searchEl.style.maxWidth=i>o?"":s+"px"}isFullRowWidth(){const e=a.PoswebUtils.getContentWidth(this._gridTopContainer);return this._buttonsArea.offsetWidth>=e}doSearch(){r.WindowService.getPositionSettings()[o.PoswebConstants.SETTINGS_SEARCH]={searchValue:this._searchBox.pvdValue,acctsWithSearchValue:{},symWithSearchValue:[]},this._gridApi&&!this._gridApi.isDestroyed()||(this._gridApi=r.WindowService.getCurrentPwe().poswebGrid.getPoswebGridApi),this._gridApi.onFilterChanged(),this._gridApi.refreshCells({force:!0,suppressFlash:!0})}resetFilterData(){const e=r.WindowService.getPositionSettings()[o.PoswebConstants.SETTINGS_SEARCH];e.acctsWithSearchValue&&(r.WindowService.getPositionSettings()[o.PoswebConstants.SETTINGS_SEARCH].acctsWithSearchValue={}),e.symWithSearchValue&&(r.WindowService.getPositionSettings()[o.PoswebConstants.SETTINGS_SEARCH].symWithSearchValue=[])}prepareFilterData(){const{searchValue:e,acctsWithSearchValue:t,symWithSearchValue:s}=r.WindowService.getPositionSettings()[o.PoswebConstants.SETTINGS_SEARCH];this.resetFilterData(),this.displayedColIds=this._gridApi.getAllDisplayedColumns().map(e=>e.getColId()),"MyView"===i.PoswebGridUtils.getCurrentSelectedPresetView()&&(this.displayedColIds=["todGL","todGLPct","totGL","totGLPct","totGLStk","todGLStk","curVal","cstBasTot","cstBasStk","actPer","estAnuInc"]),this._gridApi.forEachNode(o=>{var i;if(o.data&&-1!==this.eligibleRowTypes.indexOf(o.data.rowType)){const n={},l=Boolean(r.WindowService.getPositionSettings().isShowForeignStocks)&&"Foreign Securities"===(null===(i=o.data.meta)||void 0===i?void 0:i.securityType);if(this.displayedColIds.forEach(e=>{if(this.currentViewCalculateColumns.indexOf(e)>-1){if(-1===this.stackedCols.indexOf(e)){const t=this.gainLossPercentColummns.indexOf(e)>-1&&l?o.data.meta[e+"USD"]:o.data[e].val;n[e]=a.PoswebUtils.isNumber(t)?t:0}this.stackedCols.indexOf(e)>-1&&(n[e]={},this.gainLossPercentColummns.indexOf(e)>-1&&l?("todGLStk"===e&&(n[e].top=a.PoswebUtils.isNumber(o.data.meta.todGLUSD)?o.data.meta.todGLUSD:0),"totGLStk"===e&&(n[e].top=a.PoswebUtils.isNumber(o.data.meta.totGLUSD)?o.data.meta.totGLUSD:0),"cstBasStk"===e&&(n[e].top=a.PoswebUtils.isNumber(o.data.meta.cstBasTotUSD)?o.data.meta.cstBasTotUSD:0)):n[e].top=a.PoswebUtils.isNumber(o.data[e].top.val)?o.data[e].top.val:0,n[e].bottom=a.PoswebUtils.isNumber(o.data[e].bottom.val)?o.data[e].bottom.val:0)}}),this.filterPositionRow(o.data,e)){t[o.data.actNum]||(t[o.data.actNum]={}),"BSK"===o.data.rowSubType&&(t[o.data.actNum].basketIds||(t[o.data.actNum].basketIds={}),t[o.data.actNum].basketIds[o.data.basket.basketId]||(t[o.data.actNum].basketIds[o.data.basket.basketId]={})),"GSP"===o.data.rowSubType&&(t[o.data.actNum].groupBySecurityIds||(t[o.data.actNum].groupBySecurityIds={}),t[o.data.actNum].groupBySecurityIds[o.data.groupBySecurity.id]||(t[o.data.actNum].groupBySecurityIds[o.data.groupBySecurity.id]={}));const e=t[o.data.actNum];this.currentViewCalculateColumns.forEach(s=>{var i,a,r,l,d;this.displayedColIds.indexOf(s)>-1&&"Custom Fund"!==(null===(i=o.data.meta)||void 0===i?void 0:i.securityType)&&(-1===this.stackedCols.indexOf(s)?(e[s]=(e[s]||0)+n[s],(null===(a=o.data.basket)||void 0===a?void 0:a.basketId)&&(t[o.data.actNum].basketIds[o.data.basket.basketId][s]=(t[o.data.actNum].basketIds[o.data.basket.basketId][s]||0)+n[s]),(null===(r=o.data.groupBySecurity)||void 0===r?void 0:r.id)&&(t[o.data.actNum].groupBySecurityIds[o.data.groupBySecurity.id][s]=(t[o.data.actNum].groupBySecurityIds[o.data.groupBySecurity.id][s]||0)+n[s])):((null===(l=o.data.basket)||void 0===l?void 0:l.basketId)&&(t[o.data.actNum].basketIds[o.data.basket.basketId][s]||(t[o.data.actNum].basketIds[o.data.basket.basketId][s]={}),t[o.data.actNum].basketIds[o.data.basket.basketId][s].top=(t[o.data.actNum].basketIds[o.data.basket.basketId][s].top||0)+n[s].top,e.basketIds[o.data.basket.basketId][s].bottom=(t[o.data.actNum].basketIds[o.data.basket.basketId][s].bottom||0)+n[s].bottom),(null===(d=o.data.groupBySecurity)||void 0===d?void 0:d.id)&&(t[o.data.actNum].groupBySecurityIds[o.data.groupBySecurity.id][s]||(t[o.data.actNum].groupBySecurityIds[o.data.groupBySecurity.id][s]={}),t[o.data.actNum].groupBySecurityIds[o.data.groupBySecurity.id][s].top=(t[o.data.actNum].groupBySecurityIds[o.data.groupBySecurity.id][s].top||0)+n[s].top,e.groupBySecurityIds[o.data.groupBySecurity.id][s].bottom=(t[o.data.actNum].groupBySecurityIds[o.data.groupBySecurity.id][s].bottom||0)+n[s].bottom),e[s]?(e[s].top+=n[s].top,e[s].bottom+=n[s].bottom):e[s]=n[s]))}),s.push(o.data.sym.name)}}}),r.WindowService.getPositionSettings()[o.PoswebConstants.SETTINGS_SEARCH].acctsWithSearchValue=t,r.WindowService.getPositionSettings()[o.PoswebConstants.SETTINGS_SEARCH].symWithSearchValue=s}updateAccountTotalValues(e,t,s){t[e.data.actNum]&&this.currentViewCalculateColumns.forEach(o=>{e.data&&e.data[o]&&-1===this.stackedCols.indexOf(o)&&this.formatUnstackedColumnsData(o,t[e.data.actNum],e,s),e.data&&e.data[o]&&this.stackedCols.indexOf(o)>-1&&this.formatStackedColumnsData(o,t[e.data.actNum],e)})}formatUnstackedColumnsData(e,t,s,o){switch(e){case"todGLPct":const i=t.curVal-t.todGL;t[e]=0===i?0:this.makeConservativeRounding(t.todGL/Math.abs(i)*100),s.data[e].disp=a.PoswebUtils.formatNumericPct(t[e],!0,"0,0.00");break;case"totGLPct":t.cstBasTot?t[e]=this.makeConservativeRounding(t.totGL/Math.abs(t.cstBasTot)*100):t[e]=0,s.data[e].disp=a.PoswebUtils.formatNumericPct(t[e],!0,"0,0.00");break;case"curVal":const r=t[e],n=o[s.data.actNum]||0;s.data[e].disp=a.PoswebUtils.genPriceCol(r+n,!1,!1,!1);break;case"cstBasTot":case"cstBasCloPos":case"proceedsAmt":case"estAnuInc":s.data[e].disp=a.PoswebUtils.genPriceCol(t[e],!1,!1,!1);break;case"actPer":s.data[e].disp=a.PoswebUtils.formatNumericPct(t[e],!1,"0,0.00");break;default:s.data[e].disp=this.priceColumns.indexOf(e)>-1?a.PoswebUtils.genPriceCol(t[e],!0,!1,!1):a.PoswebUtils.formatNumericPct(t[e],!0,"0,0.00")}}formatStackedColumnsData(e,t,s){if(s.data[e].top?s.data[e].top.disp=a.PoswebUtils.genPriceCol(t[e].top,"cstBasStk"!==e,!1,!1):t[e].top=0,s.data[e].bottom)switch(e){case"todGLStk":const o=t.curVal-t.todGLStk.top;t[e].bottom=0===o?0:this.makeConservativeRounding(t.todGLStk.top/Math.abs(o)*100),s.data[e].bottom.disp=a.PoswebUtils.formatNumericPct(t[e].bottom,!0,"0,0.00");break;case"totGLStk":t[e].bottom=0===t.cstBasStk.top?0:this.makeConservativeRounding(t[e].top/Math.abs(t.cstBasStk.top)*100),s.data[e].bottom.disp=a.PoswebUtils.formatNumericPct(t[e].bottom,!0,"0,0.00");break;default:s.data[e].bottom.disp=a.PoswebUtils.formatNumericPct(t[e].bottom,!0,"0,0.00")}}updateAccountGroupData(e){this._gridApi.forEachNode(t=>{t.rowGroupColumn&&"actGroup"===t.rowGroupColumn.colId&&"ClosedPositionsView"===i.PoswebGridUtils.getCurrentSelectedPresetView()&&e[t.data.actNum]&&this.currentViewCalculateColumns.forEach(s=>{t.data&&t.data[s]&&-1===this.stackedCols.indexOf(s)&&(t.data[s].disp=this.priceColumns.indexOf(s)>-1?a.PoswebUtils.genPriceCol(e[t.data.actNum][s],!0,!1,!1):a.PoswebUtils.formatNumericPct(e[t.data.actNum][s],!0,"0,0.00")),t.data&&t.data[s]&&this.stackedCols.indexOf(s)>-1&&this.formatStackedColumnsData(s,e[t.data.actNum],t)})})}onFirstDataRendered(){const e=r.WindowService.getPositionSettings()[o.PoswebConstants.SETTINGS_SEARCH];(null==e?void 0:e.searchValue)&&this.doSearch()}updateGrandTotals(e){const{acctsWithSearchValue:t}=r.WindowService.getPositionSettings()[o.PoswebConstants.SETTINGS_SEARCH],s=Object.keys(t),i={};s.length&&s.forEach(e=>{this.displayedColIds.forEach(s=>{this.currentViewCalculateColumns.indexOf(s)>-1&&(this.stackedCols.indexOf(s)>-1?i[s]?(i[s].top+=a.PoswebUtils.isNumber(t[e][s].top)?t[e][s].top:0,i[s].bottom+=a.PoswebUtils.isNumber(t[e][s].bottom)?t[e][s].bottom:0):(i[s]={},i[s].top=a.PoswebUtils.isNumber(t[e][s].top)?t[e][s].top:0,i[s].bottom=a.PoswebUtils.isNumber(t[e][s].bottom)?t[e][s].bottom:0):i[s]?i[s]+=a.PoswebUtils.isNumber(t[e][s])?t[e][s]:0:i[s]=a.PoswebUtils.isNumber(t[e][s])?t[e][s]:0)})});Object.keys(i).forEach(t=>{e.data[t]&&-1===this.stackedCols.indexOf(t)&&this.formatUnstackedColumnsData(t,i,e,{}),e.data[t]&&this.stackedCols.indexOf(t)>-1&&this.formatStackedColumnsData(t,i,e)})}resetGridData(){this._gridApi.forEachNode(e=>{var t;if(e.data){const s="Foreign Securities"===(null===(t=e.data.meta)||void 0===t?void 0:t.securityType)&&Boolean(r.WindowService.getPositionSettings().isShowForeignStocks);this.displayedColIds.forEach(t=>{this.currentViewCalculateColumns.indexOf(t)>-1&&e.data[t]&&(-1===this.stackedCols.indexOf(t)&&this.resetUnStackedColumnsData(t,e,s),this.stackedCols.indexOf(t)>-1&&this.resetStackedColumnsData(t,e,s))})}})}resetUnStackedColumnsData(e,t,s){t.data[e].disp="curVal"===e||"cstBasTot"===e||"estAnuInc"===e||"cstBasCloPos"===e||"proceedsAmt"===e?a.PoswebUtils.isNumber(t.data[e].val)?a.PoswebUtils.genPriceCol(t.data[e].val,!1,!1,s):t.data[e].val:"actPer"===e?a.PoswebUtils.isNumber(t.data[e].val)?a.PoswebUtils.formatNumericPct(t.data[e].val,!1,"0,0.00"):t.data[e].val:this.priceColumns.indexOf(e)>-1?a.PoswebUtils.isNumber(t.data[e].val)?a.PoswebUtils.genPriceCol(t.data[e].val,!0,!1,s):t.data[e].val:a.PoswebUtils.isNumber(t.data[e].val)?a.PoswebUtils.formatNumericPct(t.data[e].val,!0,"0,0.00"):t.data[e].val}resetStackedColumnsData(e,t,s){var o,i,r;if((null===(o=t.data[e].top)||void 0===o?void 0:o.val)&&(t.data[e].top.disp="cstBasStk"===e?a.PoswebUtils.isNumber(t.data[e].top.val)?a.PoswebUtils.genPriceCol(t.data[e].top.val,!1,!1,s):t.data[e].top.val:a.PoswebUtils.isNumber(t.data[e].top.val)?a.PoswebUtils.genPriceCol(t.data[e].top.val,!0,!1,s):t.data[e].top.val),null===(i=t.data[e].bottom)||void 0===i?void 0:i.val)if("cstBasStk"===e){const o="Digital Currency"===(null===(r=t.data.meta)||void 0===r?void 0:r.securityType)?a.PoswebUtils.getCryptoSymbolPrefix(t.data.sym.name):"Share",i=a.PoswebUtils.isNumber(t.data[e].bottom.val)?a.PoswebUtils.genPriceCol(t.data[e].bottom.val,!1,!1,s):t.data[e].bottom.val,n=a.PoswebUtils.isNAorDoubleDash(t.data[e].bottom.val)?t.data[e].bottom.val:`${i} / `+o;t.data[e].bottom.disp=n}else t.data[e].bottom.disp=a.PoswebUtils.isNumber(t.data[e].bottom.val)?a.PoswebUtils.formatNumericPct(t.data[e].bottom.val,!0,"0,0.00"):t.data[e].bottom.val}updateBasketGroupTotalValues(e,t,s,o){const i=t[s].basketIds[o];this.currentViewCalculateColumns.forEach(t=>{e.data&&e.data[t]&&-1===this.stackedCols.indexOf(t)?this.formatUnstackedColumnsData(t,i,e,{}):e.data&&e.data[t]&&this.stackedCols.indexOf(t)>-1&&this.formatStackedColumnsData(t,i,e)})}updateGroupBySecurityTotalValues(e,t,s,o){const i=t[s].groupBySecurityIds[o];this.currentViewCalculateColumns.forEach(t=>{e.data&&e.data[t]&&-1===this.stackedCols.indexOf(t)?this.formatUnstackedColumnsData(t,i,e,{}):e.data&&e.data[t]&&this.stackedCols.indexOf(t)>-1&&this.formatStackedColumnsData(t,i,e)})}makeConservativeRounding(e){return 0!==Number(e)?e-.005:e}}t.PoswebSearch=n,n.CLASS_EXPAND="posweb-grid_top-search-expand"},48417:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.POSWEB_DRAWER=void 0,function(e){e.CORE="core",e.LOTS="lots",e.RESEARCH="research",e.EVENTS="events"}(s||(t.POSWEB_DRAWER=s={}))},49060:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MY_VIEW_COL_DEFINITIONS=void 0,t.MY_VIEW_COL_DEFINITIONS={account_specifics:["curVal","actPer","qty","cstBasStk","cstBasShr","cstBasTot","acctType","isLoaned","isHTB"],gain_loss:["todGL","todGLPct","todGLStk","totGL","totGLPct","totGLStk"],quote_data:["cusip","lstPrc","lstPrStk","lstPrChg","lstPrChgPct","changeStk","volume","dayRange","fifTwo","yearHighDate","yearLowDate","bidPrice","bidSize","askPrice","askSize","openPrice","lstPrcPrevCls","prevClsDt"],research:["equitySummaryRating","equitySummaryScoreDate","news","avgVol10Day","avgVol90Day","marketCap","earningsAnnouncementDate","peRatio","sharesOutstanding","pctFloat","shortInterest","shortInterestRatio","prevShortInterest","prevShortInterestRatio","currency"],dividends:["exDvDte","dvAmt","pyDte","dividendFrequency","distYld","secYld","estAnuInc"],fund_performance:["ytdDly","oneYr","thrYr","fivYr","tenYr","exRtNt","exRtGs","mngStr","mngCtg"],company_profile:["sector","industry","industryGroup","subIndustry","securityType","securitysubtype"],options:["isOptionable","callPut","expiration","impliedVolatility","intrinsicValue","timeValue","contractRangeVisual","contractHighDate","contractLowDate","delta","gamma","theta","vega","rho"],volatility:["volatility10Day","volatility30Day","volatility60Day","volatility90Day","volatility120Day","volatility250Day"],default:["sym"]}},49386:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebStore=void 0;const o=s(88441),i=s(36737),a=s(21836),r=s(82402),n=s(89396);class l{constructor(){this._store=(0,o.createStore)(a.PoswebReducers.reducer,i.DEF_POSWEB_STATE,(0,o.applyMiddleware)((0,n.createLogger)({diff:!0,duration:!1,timestamp:!0,level:"log",predicate:r.PoswebUtils.ignoreLogging,collapsed:!0}))),this._subscription=this._store.subscribe(this.subscriberCallback)}static getInstance(){return this._instance||(this._instance=new this)}destroy(){this._subscription&&(this._subscription(),delete this._subscription,delete this._store,delete this._instance)}subscriberCallback(){console.info("State dispatch occurred, %s",l.getInstance().store.getState())}get store(){return this._store}}t.PoswebStore=l},50895:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebSymbolCellRenderer=void 0;const o=s(53059),i=s(16186),a=s(17597),r=s(11908),n=s(55221),l=s(79859),d=s(83254),c=s(17190),p=s(60488),u=s(93535),b=s(75870),w=s(82402),h=s(69505);class v extends l.PoswebBaseCellRenderer{constructor(){super(...arguments),this._rowWidth=0}init(e){var t,s,o,i,a;if(this._poswebCommon=d.PoswebCommon.getInstance(),this._eGui=document.createElement("div"),this._params=e,this._widthChangeCallback=this.widthChangeCallback.bind(this),this._updateRowHeight=this.updateRowHeight.bind(this),e.data){let t="";t=e.data.rowType?["ACCOUNT","SYMBOL"].indexOf(e.data.rowType)>-1?"posweb-cell-account_container":["NO_POSITIONS","NO_MATCHED_POSITIONS","NO_CLOSED_POSITIONS","INELIGIBLE_CLOSED_POSITIONS"].indexOf(e.data.rowType)>-1?"posweb-cell-no_positions-container":"posweb-cell-symbol-container":"posweb-cell-group-container",this._eGui.classList.add(t),this._eGui.innerHTML=this.getTemplate(e.data,e.node.id),p.PoswebGridUtils.prepareRowDismissBtns(e),(["NO_POSITIONS","NA_POSITIONS","NO_MATCHED_POSITIONS","UNSUPT_ACCOUNT","ACCOUNT_MSG","NO_CLOSED_POSITIONS","INELIGIBLE_CLOSED_POSITIONS"].indexOf(e.data.rowType)>-1||!e.data.rowType&&e.node.group&&"slv"===e.node.rowGroupColumn.getColId())&&this._poswebCommon.matchElementWidthsToGrid([e.eGridCell]),["ACCOUNT","SYMBOL"].indexOf(e.data.rowType)>-1&&"left"===e.pinned&&this._poswebCommon.matchElementWidthsToGrid([e.eGridCell.parentElement]),"ACCOUNT_MSG"===e.data.rowType&&e.eGridCell.addEventListener("widthChange",this._widthChangeCallback),!e.data.rowType&&e.node.group&&"slv"===e.node.rowGroupColumn.getColId()&&(e.eGridCell.addEventListener("widthChange",this._widthChangeCallback),e.data.sleeveData[e.data.sleeveId].exp&&e.node.setExpanded(!0));let s=this._params.eParentOfValue;const o=e.data.rowType||(!e.data.rowType&&e.node.group&&"basket"===e.node.rowGroupColumn.getColId()?"":"GROUP");if(s){for(;-1===["gridcell","rowheader"].indexOf(s.getAttribute("role"));)s=s.parentElement;p.PoswebGridUtils.isFullWidthRow(o)?e.api.isPinningLeft()||s.setAttribute("aria-colspan",e.api.getColumns().length.toString()):s.setAttribute("role","rowheader")}}else if(null===(t=e.node)||void 0===t?void 0:t.group){const{poswebCurrentView:t}=this._poswebCommon;if("slv"===e.node.rowGroupColumn.getColId()){const{sleeveData:s}=this._poswebCommon,o=e.value.split("-"),i=o.pop(),a=o.join("-");e.data={sleeveAcct:a,sleeveId:i,sleeveData:s,poswebCurrentView:t,node:e.node}}else if("basket"===e.node.rowGroupColumn.getColId()){const s=this._poswebCommon.basketData[e.node.key];s&&(e.data=Object.assign(Object.assign(Object.assign({meta:{}},s),s.accts[e.node.childrenAfterFilter[0].data.actNum]),{poswebCurrentView:t,node:e.node}))}else if("groupBySecurity"===e.node.rowGroupColumn.getColId()){const r=e.node.childrenAfterFilter[0].data.groupBySecurity.id,n=this._poswebCommon.groupBySecurityData[r];n&&(e.data=Object.assign(Object.assign({},n),{poswebCurrentView:t,node:e.node})),this._hasDistributions=Boolean(null===(o=null===(s=e.data)||void 0===s?void 0:s.node)||void 0===o?void 0:o.hasDistributions),this._hasEarnings=Boolean(null===(a=null===(i=e.data)||void 0===i?void 0:i.node)||void 0===a?void 0:a.hasEarnings)}else if("actGroup"===e.node.rowGroupColumn.getColId()){const t=this._poswebCommon.actGroupData[e.node.key];t&&(e.data=Object.assign(Object.assign({},t),{node:e.node}))}e.data&&e.node.setData(e.data)}}refresh(e){var t,s,o,i,a,r;if(!this._hasEarnings&&(null===(s=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.node)||void 0===s?void 0:s.hasEarnings))return this._hasEarnings=!0,!1;if(!this._hasDistributions&&(null===(i=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.node)||void 0===i?void 0:i.hasDistributions))return this._hasDistributions=!0,!1;if(null===(r=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.meta)||void 0===r?void 0:r.events){const t=this._eGui.querySelector(".posweb-cell-symbol-icon_container");if(t){const s=this._eGui.querySelector(".posweb-cell-symbol-event_indicator_container");s&&t.removeChild(s),t.insertAdjacentHTML("afterbegin",v.getEventIndicatorsTemplate(e.data.meta.events,e.data.meta.rowId))}}return!0}destroy(){this._params.eGridCell.removeEventListener("widthChange",this._widthChangeCallback)}static getPoswebPrintGridCell(e,t,s=""){let o="",i="",a=`<td${t?` class="${t}"`:""}>`;return r.POSWEB_SETTINGS_GROUPBY.SYMBOL===p.PoswebGridUtils.getGroupBy()&&e.act?(o=e.act.name||e.act.number||"",i=e.act.name&&e.act.number||"",a+=v.getPositionCellTemplate(e,o,i,"",s)):e.sym&&!e.node?(o=e.sym.optName||e.sym.name||"",i=e.sym.optDesc||e.sym.desc||"",a+=v.getPositionCellTemplate(e,o,i,"",s,v.getFixedIncomeTemplate(e))):(e.sym&&"basket"===e.node.rowGroupColumn.getColId()||e.actNam&&"actGroup"===e.node.rowGroupColumn.getColId()||e.sym&&"groupBySecurity"===e.node.rowGroupColumn.getColId())&&(a+=v.getGroupCellTemplate(e,e.id,e.node.rowGroupColumn.getColId())),a+="</td>",a}getTemplate(e,t){var s,o,i,a,l,d,c,b,h,m,g,_,y,S,P,C;let f="";const E=u.PoswebMetadata.getInstance();if(e)if(e.rowType)if("ACCOUNT"===e.rowType){let t="",r="",d="";const c="";if(e.actNum){if("External"===(null===(s=e.meta)||void 0===s?void 0:s.acctType)?(t=e.actNam,r="",d=`<div class="posweb-trade_links">${n.PoswebActionLinks.buildActionLinks({actNum:e.actNum},E,!1,e.meta)}</div>`):e.actNam&&""!==e.actNam?(t=e.actNam,r=w.PoswebUtils.getAccountNumber(e.actNum)):t=e.actNum,!(null===(o=e.meta)||void 0===o?void 0:o.acctActns)&&!(null===(i=e.meta)||void 0===i?void 0:i.isAcctBasketEligible)||"Crypto"===e.meta.acctType&&!(null===(a=window.toggleMap)||void 0===a?void 0:a.ap126216_PWE_Crypto_Basket)){const t=p.PoswebGridUtils.getAccountBrandingLabel(this._poswebCommon.amc.amcObj,e);t&&(d=t)}else d=`<div class="posweb-trade_links">${n.PoswebActionLinks.buildActionLinks(e.meta.acctActns||{actNum:e.actNum},E,!1,e.meta)}</div>`;f=this.getGroupNameRowTemplate(c,t,r,d,"Account:&nbsp;",null===(l=e.meta)||void 0===l?void 0:l.footnoteNum)}}else if("SYMBOL"===e.rowType)f=this.getGroupNameRowTemplate("",e.sym.name,e.sym.desc,"","Symbol:&nbsp;");else if("NO_MATCHED_POSITIONS"===e.rowType)f='<div class="posweb-cell-no_positions-content">\n                        <div class="posweb-cell-no_positions-message" role="presentation">\n                            <p class="posweb-cell-no_positions-only_text">Positions are currently filtered. Use the filters icon at the top right corner to update.</p>\n                        </div>\n                    </div>';else if("NO_CLOSED_POSITIONS"===e.rowType)f='<div class="posweb-cell-no_positions-content">\n                        <div class="posweb-cell-no_positions-message" role="presentation">\n                            <p class="posweb-cell-no_positions-only_text">You have no closed position information for the account or time period selected.</p>\n                        </div>\n                    </div>';else if("INELIGIBLE_CLOSED_POSITIONS"===e.rowType)f='<div class="posweb-cell-no_positions-content">\n                        <div class="posweb-cell-no_positions-message" role="presentation">\n                            <p class="posweb-cell-no_positions-only_text">This type of account is not eligible for closed positions data.</p>\n                        </div>\n                    </div>';else if("NA_POSITIONS"===e.rowType)f='<div class="posweb-cell-na_positions-content">\n                        <pvd3pwe-inline-alert pvd-variant="critical" pvd-text="Positions for this account are currently unavailable."></pvd3pwe-inline-alert>\n                    </div>';else if("UNSUPT_ACCOUNT"===e.rowType)f='<div class="posweb-cell-unsupt_account-content">\n                        <pvd3pwe-inline-alert pvd-variant="info" pvd-text="You can view the details of your crypto positions in the Fidelity® mobile app."></pvd3pwe-inline-alert>\n                    </div>';else if("ACCOUNT_MSG"===e.rowType)f=v.getAccountMessageTemplate(e,E);else if(e.meta&&"NO_POSITIONS"===e.rowType){let t="none",s="posweb-cell-no_positions-only_text";if(p.PoswebGridUtils.isNoPositionsButtonDisplay(e)&&(t="block",s=E.totalNoOfAccts>1?"posweb-cell-no_positions-text_button_all":"posweb-cell-no_positions-text_button_single"),e.meta.hasPendingActivity)f=`<div class="posweb-cell-no_positions-content">\n                            <div class="posweb-cell-no_positions-pending_activity" role="presentation">\n                                <p class="${s}">Pending activity:&nbsp;</p>\n                                <p class="${s}">${e.meta.pendingActVal}</p>\n                            </div>\n                            <div class="posweb-cell-place_trade_button" role="presentation" style="display: ${t}">\n                                <button class="pvd3pwe-button-root pvd-button--primary pvd-button--small text-bold posweb-header-button" type="button" data-evt-key='place_trade_button' onclick="poswebex.poswebGrid.accessMetrics('pendingBalanceClickTrade'); poswebInitiateTrade(${this.seedingData(e)},'place_trade_button');" data-pii="true"><div class="pvd-button__contents"><span class="pvd-button__text">Place a Trade</span></div></button>\n                            </div>\n                        </div>`;else{f=`<div class="posweb-cell-no_positions-content">\n                            <div class="posweb-cell-no_positions-message" role="presentation">\n                                <p class="${s}">You do not hold any positions or funds in this account.</p>\n                            </div>\n                            <div class="posweb-cell-no_positions-bar" role="presentation" style="display: ${t}">\n                                <button class="posweb-metrics pvd3pwe-button-root pvd-button--primary pvd-button--small" type="button" data-metrics="zeroBalanceClicksFund" onclick="navToTransfer(${this.getTransferLink()})"><div class="pvd-button__contents"><span class="pvd-button__text">Fund This Account</button>\n                                <a class="posweb-metrics" href="javascript:void(0);" data-metrics="zeroBalanceClicksHide" target="_parent" onclick="navToCustomize()">Hide This Account</a>\n                            </div>\n                        </div>`}}else if("PENDING_UPDATE"===e.rowType){const t=(null===(d=e.sym)||void 0===d?void 0:d.name)||"",s=(null===(c=e.sym)||void 0===c?void 0:c.desc)||"";f=(null===(b=e.meta)||void 0===b?void 0:b.intradayEligibilityCode)?v.getPositionCellTemplate(e,t,s,"","",'<div class="posweb-cell-pending-update-content"><p>Pending update C<sup>1</sup></p></div>'):v.getPositionCellTemplate(e,t,s,"","","")}else{let t,s,o,i;const a='<sup aria-label="Income and payout annuity contracts not included in totals">+</sup>',n="<sup>‡‡</sup>",l='<sup aria-label="External account, refer to official account statement. Additional information is available below the positions table">≈</sup>';r.POSWEB_SETTINGS_GROUPBY.SYMBOL===p.PoswebGridUtils.getGroupBy()&&e.act?(s=w.PoswebUtils.getAccountNumber(e.actNum)||"",t=e.act.name||"",o=t,p.PoswebGridUtils.isLowerBrowserWidth()&&p.PoswebGridUtils.isAccountHasFSAndShow()&&["ACCOUNT_TOTAL","GRAND_TOTAL","SYMBOL_TOTAL"].indexOf(e.rowType)>-1&&(t="Total"),"SYMBOL_TOTAL"===e.rowType&&(null===(h=e.meta)||void 0===h?void 0:h.currencyCode)&&(i=e.meta.currencyCode),["ACCOUNT_TOTAL","GRAND_TOTAL"].indexOf(e.rowType)>-1&&p.PoswebGridUtils.isAccountHasFSAndShow()&&(i="USD"),["ACCOUNT_TOTAL","SYMBOL_TOTAL","GRAND_TOTAL"].indexOf(e.rowType)>-1&&(o="","AHA"===e.rowSubType&&(t+=n)),"GRAND_TOTAL"===e.rowType&&(null===(m=e.meta)||void 0===m?void 0:m.isFiliGrandTotal)&&(t+=a),f=v.getPositionCellTemplate(e,t,s,o,i)):e.sym&&(t=(null===(g=e.meta)||void 0===g?void 0:g.symDisplayName)||e.sym.optName||e.sym.name||"",s=e.sym.optDesc||e.sym.desc||"",o=s,["ACCOUNT_TOTAL","GRAND_TOTAL"].indexOf(e.rowType)>-1&&p.PoswebGridUtils.isAccountHasFSAndShow()&&(p.PoswebGridUtils.isLowerBrowserWidth()&&(t="Total"),i="USD"),"POSITION"===e.rowType&&(null===(_=e.meta)||void 0===_?void 0:_.currencyCode)&&(i=e.meta.currencyCode),"GRAND_TOTAL"===e.rowType&&(null===(y=e.meta)||void 0===y?void 0:y.isFiliGrandTotal)&&(t+=a),["ASSETS_HELD_AWAY","AWAY_TOTAL"].indexOf(e.rowType)>-1&&(t+=n),"ACCOUNT_TOTAL"===e.rowType&&"External"===(null===(S=e.meta)||void 0===S?void 0:S.acctType)&&(t+=l),f=v.getPositionCellTemplate(e,t,s,o,i,v.getFixedIncomeTemplate(e)))}else(null===(C=null===(P=e.node)||void 0===P?void 0:P.rowGroupColumn)||void 0===C?void 0:C.getColId())&&(f=v.getGroupCellTemplate(e,t,e.node.rowGroupColumn.getColId()));return f}static getAccountMessageTemplate(e,t){var s;let a="";if("BSK_ACCT_UNKNOWN_QUANTITY"===e.rowSubType&&(i.MetricsService.sendMetricsRequest("basketErrorDisplay",o.MetricsActionTypes.INTERACTION,b.PoswebSettings.getPageVersion()),a='<div class="posweb-cell-account_warning_msg-content">\n                            <pvd3pwe-inline-alert pvd-variant="warning" pvd-text="Up-to-date details are not available for at least one of your baskets. This will be resolved by the next trading day."></pvd3pwe-inline-alert>\n                        </div>'),"PZN_FPL_ACCT_ELIGIBLE"===e.rowSubType&&window[c.PoswebConstants.PWE_PZN_TREATMENTS]){const e=p.PoswebGridUtils.getPznFPLInlineContentAndButton();a=`<div class="posweb-cell-account_warning_msg-content">\n                            <div class="pvd3pwe-inline-alert-root pvd-inline-alert--medium pvd-inline-alert--info posweb-inline-alert--dismiss">\n                                <div class="pvd-inline-alert__icon">\n                                    <img src="${t.assetUrl}assets/${t.version}/coin_icon.svg" alt="Fully Paid Lending icon" />\n                                </div>\n                                <div class="pvd-inline-alert__content">\n                                    <span class="pvd-inline-alert__content-a11y-text">info</span>${e.content} <a class="positions--review-fpl-inline-link" href="javascript:void(0);" onclick="${e.onClick}">${e.button}</a>\n                                </div>\n                                <button aria-label="Dismiss message" class="pvd-btn btn-anchor posweb-row-dismiss-btn">\n                                    <pvd3pwe-icon pvd-name="action__close" pvd-size="extra-small" class="posweb-icon-close"></pvd3pwe-icon>\n                                </button>\n                            </div>\n                        </div>`}if("MATURING_FIXED_INCOME"===e.rowSubType&&(null===(s=e.meta)||void 0===s?void 0:s.msgContentDate)&&(a=p.PoswebGridUtils.getMaturingFixedIncomeMsgSnippet(e)),"BASKET_MSG"===e.rowSubType&&(a=p.PoswebGridUtils.getBasketMsg(t)),"GBS_MSG"===e.rowSubType&&(a=p.PoswebGridUtils.getGbsMsg()),"DISCONNECTED_EXTERNAL"===e.rowSubType&&e.meta.msgContentDate){a=`<div class="posweb-cell-account_warning_msg-content">\n                            <pvd3pwe-inline-alert pvd-variant="warning" pvd-a11y-icon-text="Warning, position information in this account may not be up to date.">Position information last updated ${h.PweSharedUtils.getEasternTimeFromLocal(!1,1e3*Number(e.meta.msgContentDate))}. ET</pvd3pwe-inline-alert>\n                        </div>`;const s=w.PoswebUtils.getHtmlElement("posweb-grid_top-refresh-datetime");1===t.totalNoOfAccts&&s&&(s.style.visibility="hidden")}return a}static getIndTemplate(e){let t="",s="";if(null==e?void 0:e.meta)if(e.meta.isLoaned){const o=u.PoswebMetadata.getInstance().digitalDomain+"/ftgw/digital/securities-finance/lending-positions/?ACCOUNT="+e.actNum+"&bfpsource=personal&Ref_at=ng";s=`scrollbars=yes,resizable=yes,${w.PoswebUtils.getPopupPosition(850,900)}`,t=`<button class="posweb-div-symbol-button"\n                    onclick="poswebex.poswebGrid.onOpenPopupBtnClick('${o}', '${s}', event, false, true)"><div aria-label="Loaned" title="Loaned"\n                    class="posweb-button-loaned pvd3pwe-button-root pvd-button--primary pvd-button--small"\n                    onclick="poswebex.poswebGrid.onOpenPopupBtnClick('${o}', '${s}', event, false, true)"><div class="pvd-button__contents"><span class="pvd-button__text">L</span></div></div></button>`}else if(e.meta.isHTB){const o=u.PoswebMetadata.getInstance().digitalDomain+"/ftgw/digital/securities-finance/hardtoborrow-positions/?ACCOUNT="+e.actNum+"&Ref_at=ng";s=`scrollbars=yes,resizable=yes,${w.PoswebUtils.getPopupPosition(850,900)}`,t=`<div class="posweb-div-symbol-button"\n                    onclick="poswebex.poswebGrid.onOpenPopupBtnClick('${o}', '${s}', event, false, true)"><button type="button" aria-label="Hard to Borrow" title="Hard to Borrow"\n                    class="posweb-button-htb pvd3pwe-button-root pvd-button--primary pvd-button--small"\n                    onclick="poswebex.poswebGrid.onOpenPopupBtnClick('${o}', '${s}', event, false, true)"><div class="pvd-button__contents"><span class="pvd-button__text">HTB</span></div></button</div>`}return t}static getEventIndicatorsTemplate(e,t){var s;let o="",i="",a="";if(e){if(e.hasOpenOrder){const{asOfTime:s,orderActionDesc:o,orderTypeDesc:a,quantity:r,timeInForce:n,totalNoOfOrders:l}=e.orderCardDetails;i=`\n          <pwe-popover class="posweb-cell-symbol_popover" role="dialog" show-elem=".positions-web-experience" for="posweb-cell_open_orders_icon_${t}" id="posweb-cell_open_orders_popover_${t}" zindex="99999" additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport" popover-hide-top_bottom=".ag-body-viewport" popover-hide-left_right=".ag-body-viewport">\n          <div class="posweb-cell-symbol_popover_content">\n              <div class="posweb-events-card-container">\n                <div class="posweb-events-card-header-title">\n                  Open order - <span class="posweb-events-card-header-action">${o}</span>\n                  <hr />\n                </div>\n                <div class="posweb-events-card-body">\n                  <div class="posweb-events-card-row">\n                    <div class="posweb-events-card-label">Quantity</div>\n                    <div class="posweb-events-card-data">${r}</div>\n                  </div>\n                  <div class="posweb-events-card-row">\n                    <div class="posweb-events-card-label">Order type</div>\n                    <div class="posweb-events-card-data">${a}</div>\n                  </div>\n                  <div class="posweb-events-card-row">\n                    <div class="posweb-events-card-label">Time in force</div>\n                    <div class="posweb-events-card-data">${n}</div>\n                  </div>\n                  <div class="posweb-events-card-row">\n                    <div class="posweb-events-card-label">Total</div>\n                    <div class="posweb-events-card-data">\n                      <a href="${`${u.PoswebMetadata.getInstance().digitalDomain}/ftgw/digital/portfolio/activity`}" class="color-link" target="_blank">${l} ${l&&1<l?"open orders":"open order"}</a>\n                    </div>\n                  </div>\n                </div>\n                <div class="posweb-events-card-timestamp">${s}</div>\n              </div>\n            </div>\n          </pwe-popover>\n          <pwe-tooltip\n            show-on-hover="true"\n            show-elem=".positions-web-experience"\n            for="posweb-cell_open_orders_icon_${t}"\n            id="posweb-cell_open_orders_tooltip_${t}"\n            class="posweb-cell_tooltip">\n            <p>Open orders</p>\n            <span>(Click icon for details)</span>\n          </pwe-tooltip>`}if(e.hasEarnings){const o=e.earningsCardDetails[0],i=null!==(s=o.adjustedEPS)&&void 0!==s?s:"",r=`<div class="posweb-events-card-row">\n                    <div class="posweb-events-card-label">Actual EPS</div>\n                    <div class="posweb-events-card-data">\n                      ${i}\n                    </div>\n                  </div>`;let n="";for(let t=e.earningsCardDetails.length-1;t>0;t--){const s=e.earningsCardDetails[t];s.fiscalQuarter&&s.adjustedEPS&&s.beatOrMissed&&s.beatOrMissedBy&&(n+=`<div class="posweb-events-card-earnings-quarter">\n                    <div class="posweb-events-card-label">${s.fiscalQuarter}</div>\n                    <div class="posweb-events-card-earnings-price-label">${s.adjustedEPS}</div>\n                    <div class="posweb-events-card-earnings-${s.beatOrMissed.toLowerCase()}">${s.beatOrMissed}</div>\n                    <div class="posweb-events-card-earnings-footnote">by ${s.beatOrMissedBy}</div>\n                    </div>`)}-1===n.indexOf('"posweb-events-card-earnings-quarter"')&&(n='<div class="posweb-events-card-no-earnings">Previous earnings details for this security are unavailable.</div>'),a=`\n          <pwe-popover class="posweb-cell-symbol_popover" role="dialog" show-elem=".positions-web-experience" for="posweb-cell_earnings_icon_${t}" id="posweb-cell_earnings_popover_${t}" zindex="99999" additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport" popover-hide-top_bottom=".ag-body-viewport" popover-hide-left_right=".ag-body-viewport">\n          <div class="posweb-cell-symbol_popover_content">\n              <div class="posweb-events-card-container">\n                <div class="posweb-events-card-header-title">\n                  Earnings\n                  <hr />\n                </div>\n                <div class="posweb-events-card-body">\n                  <div class="posweb-events-card-row">\n                    <div class="posweb-events-card-label">Fiscal quarter</div>\n                    <div class="posweb-events-card-data">${o.fiscalQuarter}</div>\n                  </div>\n                  <div class="posweb-events-card-row">\n                    <div class="posweb-events-card-label">Report date</div>\n                    <div class="posweb-events-card-data">${o.reportDate}</div>\n                  </div>\n                  <div class="posweb-events-card-row">\n                    <div class="posweb-events-card-label">Consensus</div>\n                    <div class="posweb-events-card-data">${o.consensusEstimate}</div>\n                  </div>\n                    ${i?r:""}\n                </div>\n                <div class="posweb-events-card-footer">\n                  <div class="posweb-events-card-earnings-quarter-container">\n                    ${n}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </pwe-popover>\n          <pwe-tooltip\n            show-on-hover="true"\n            show-elem=".positions-web-experience"\n            for="posweb-cell_earnings_icon_${t}"\n            id="posweb-cell_earnings_tooltip_${t}"\n            class="posweb-cell_tooltip">\n            <p>Earnings</p>\n            <span>(Click icon for details)</span>\n          </pwe-tooltip>`}p.PoswebGridUtils.isMobileDevice()&&1<e.numberOfEvents?e.hasOpenOrder?o+=`<img class="posweb-cell-symbol-event_indicator posweb-cell-symbol-open_order_indicator" title="Open Order, Earnings" alt="Multiple events information exists" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/multiple_events_openorders.svg"/>`:e.hasEarnings&&(o+=`<img class="posweb-cell-symbol-event_indicator posweb-cell-symbol-earnings_indicator" title="Earnings, Dividend/Capital Gain" alt="Multiple events information exists" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/multiple_events_earnings.svg"/>`):o+=(e.hasOpenOrder?`<img class="posweb-cell-symbol-event_indicator posweb-cell-symbol-open_order_indicator" id="posweb-cell_open_orders_icon_${t}" alt="Open orders information exists" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/open_orders_indicator_icon.svg" onclick="event.stopPropagation();"/>\n              ${i}`:"")+(e.hasEarnings?`<img class="posweb-cell-symbol-event_indicator posweb-cell-symbol-earnings_indicator" id="posweb-cell_earnings_icon_${t}" alt="Earnings information exists" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/earnings_indicator_icon.svg" onclick="event.stopPropagation();"/>\n              ${a}`:"")+(e.hasDistributions?`<img class="posweb-cell-symbol-event_indicator posweb-cell-symbol-distributions_indicator" title="Dividend/Capital Gains Distribution" id="posweb-cell_distributions_icon_${t}" alt="Distribution information exists" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/distribution_indicator_icon.svg"/>`:"")}return o?`<div class="posweb-cell-symbol-event_indicator_container">${o}</div>`:""}static getA11yIndicatorsTemplate(e){const t=e=>`<div class="posweb-cell-a11y_indicator screen-reader-only">${e}</div>`,s=(e.isIntradayActivity?t("Has Activity Today"):"")+(e.isUnPriced?t("Not Priced Today"):"")+("Margin"===e.holdingType?t("Margin"):"")+("Short"===e.holdingType?t("Short"):"");return s?`<div class="posweb-cell-a11y-indicator_container">${s}</div>`:""}static getFixedIncomeIndicatorsTemplate(e){var t;let s="";if(!(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.fixedIncDtls))return"";const{fixedIncDtls:o}=e.meta,{isAutoR:i,isLadder:a}=o;return p.PoswebGridUtils.isMobileDevice()&&i&&a?s+=`<img class="posweb-cell-symbol-fixedinc_indicator" title="Auto Roll, Bond Ladder" alt="Auto Roll and Bond Ladder Indicator Icon" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/auto_roll_stack.svg"/>`:s+=(i?`<img class="posweb-cell-symbol-fixedinc_indicator" title="Auto Roll" alt="Auto Roll Indicator Icon" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/auto_roll_single.svg"/>`:"")+(a?`<img class="posweb-cell-symbol-fixedinc_indicator" title="Bond Ladder" alt="Bond Ladder Indicator Icon" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/bond_ladder_single.svg"/>`:""),s.length>1?'<div class="posweb-cell-symbol-fixedinc_indicator_container">'+s+"</div>":s}static getMaturityDatePopoverTemplate(e){var t;let s="";if(!(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.fixedIncDtls))return"";const{fixedIncDtls:o,isRetirement:i,rowId:a}=e.meta,{isAutoR:r,mtDtSoon:n}=o,l=r?`<p>This position is Auto Roll enabled. In the days leading up to maturity, you’ll be able to view an open order in\n            <a href="${u.PoswebMetadata.getInstance().digitalDomain}/ftgw/digital/portfolio/activity#${e.actNum}"\n            onclick="poswebex.poswebGrid.accessMetrics('fixedIncomeMaturingActivityPopOver');">Activity & Orders</a>\n            to automatically purchase a similar investment. If you no longer want Auto Roll for this position,\n            either cancel the open order in <a href="${u.PoswebMetadata.getInstance().digitalDomain}/ftgw/digital/portfolio/activity#${e.actNum}"\n            onclick="poswebex.poswebGrid.accessMetrics('fixedIncomeMaturingActivityPopOver');">Activity & Orders</a>\n            or click on the “Cancel auto roll” button in the position drawer.</p>`:`<p>When your position matures, the proceeds will be added to your account&apos;s cash core position. If you&apos;d like to find a new fixed income investment, please visit <pvd3pwe-link pvd-new-window pvd-href="${u.PoswebMetadata.getInstance().fixedIncomeLandingPageUrl}" onclick="poswebex.poswebGrid.accessMetrics('fixedIncomeMaturingFIResearchPopOver');">Fixed Income, Bonds & CDs</pvd3pwe-link>. To explore more investing ideas, visit <pvd3pwe-link pvd-new-window pvd-href="${u.PoswebMetadata.getInstance().digitalDomain}/ftgw/digital/pathway/fixedincome" onclick="poswebex.poswebGrid.accessMetrics('fixedIncomeMaturingGetInvestedPopOver');">Get Invested</pvd3pwe-link>.</p>`;return s=n?`<button class="posweb-cell-fixedinc_btn pvd-btn btn-anchor" id="posweb-cell-fixedinc_button-${a}" aria-describedby="posweb-cell-fixedinc_popover-${a}" aria-label="Learn more about position maturity" onclick="event.stopPropagation(); "><img class="posweb-cell-symbol-fixedinc_indicator" title="Fixed Income Maturation" alt="Fixed Income Maturation Indicator Icon" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/cd_calendar_icon.svg"/></button>\n            <pwe-popover class="posweb-cell-fixedinc_popover" position="right" role="dialog" show-elem=".positions-web-experience"\n                for="posweb-cell-fixedinc_button-${a}" id="posweb-cell-fixedinc_popover-${a}" zindex="1"\n                additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport" popover-hide-top_bottom=".ag-body-viewport"\n                popover-hide-left_right=".ag-body-viewport">\n                <div class="posweb-cell-fixedinc_popover_content">\n                    ${l}\n                </div>\n            </pwe-popover>`:"",s.length>1?'<div class="posweb-cell-symbol-fixedinc_indicator_container">'+s+"</div>":s}static getBasketIndicatorTemplate(e){let t="";return e&&(t+=`<img class="posweb-cell-symbol-basket_indicator" title="Position is part of a basket" alt="Position is part of a basket" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/basket_indicator_icon.svg"/>`),t?'<div class="posweb-cell-symbol-basket_indicator_container">'+t+"</div>":t}static getManagedIndicatorTemplate(){return`\n                <div class="posweb-cell-symbol-managed_indicator_container">\n                    <img class="posweb-cell-symbol-managed_indicator"\n                        title="This position is held in an account managed by Fidelity"\n                        alt="This position is held in an account managed by Fidelity"\n                        src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/managed_indicator_icon.svg"/>\n                </div>\n        `}static getUnknownQtyIndicatorTemplate(e,t){var s;let o="",i="";if(!(null===(s=null==e?void 0:e.meta)||void 0===s?void 0:s.hasUnknownQuantity))return"";let a=!1;return"BSK"===e.rowSubType?(a=!0,o="<p>The quantity of shares and/or tax lots for this position is pending an update. This will be resolved by the next trading day.</p>",i="View Position Warning Description"):(o="<p>Up-to-date details are not available for at least one of your positions in this basket. The quantity of shares and/or tax lots for the position is pending an update.</p><p>While pending:</p><ul><li>You will be unable to sell the position from your basket dashboard, but you can buy more of your current basket positions.</li><li>You can sell the position outside of the basket dashboard and shares will be sold using your account-level share disposal preferences (typically first-in first-out).</li></ul>",i="View Basket Warning Description"),`\n                <button class="posweb-cell-unknown-qty_button pvd3pwe-inline-alert-root pvd-inline-alert--warning pvd-btn btn-anchor" id="posweb-cell-unknown-qty_button-${t}" aria-describedby="posweb-cell-unknown-qty_popover-${t}" aria-label="${i}" onclick="event.stopPropagation(); poswebex.poswebGrid.accessMetrics('basketErrorIcon', '${b.PoswebSettings.getPageVersion()}')">\n                    <pvd3pwe-icon pvd-name="alert__warning--full-color-yellow" pvd-size="small" aria-hidden="true"></pvd3pwe-icon>\n                </button>\n                <pwe-popover class="posweb-cell-unknown-qty_popover\n                ${a?" posweb-cell-unknown-qty_position_popover":""}"\n                position="right" role="dialog" show-elem=".positions-web-experience"\n                        for="posweb-cell-unknown-qty_button-${t}" id="posweb-cell-unknown-qty_popover-${t}" zindex="1"\n                        additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport" popover-hide-top_bottom=".ag-body-viewport"\n                        popover-hide-left_right=".ag-body-viewport">\n                    <div class="posweb-cell-unknown-qty_popover_content">\n                        ${o}\n                    </div>\n                </pwe-popover>\n            `}seedingData(e){return`{\n            ACCOUNT: '${e.actNum||""}'\n        }`}getTransferLink(){return"{\n            addBank: 'N',\n            fromAccount: '',\n            toAccount: '',\n            pageSource: ''\n        }"}static getFixedIncomeTemplate(e){var t,s,o,i,a;let r="";if(null===(t=e.meta)||void 0===t?void 0:t.isFixedIncome){const t=(null===(o=null===(s=e.meta.fixedIncDtls)||void 0===s?void 0:s.cpRate)||void 0===o?void 0:o.disp)||"0.000%",n=(null===(a=null===(i=e.meta.fixedIncDtls)||void 0===i?void 0:i.mtDate)||void 0===a?void 0:a.disp)||"--/--/----";r=`<p class="posweb-cell-symbol-fixed_income" aria-label="Bond/COD Details">                            <span title="Coupon Rate: ${t}" aria-label="Coupon Rate">${t}</span>&nbsp;                            <span title="Maturity Date: ${n}" aria-label="Maturity Date">${n}</span></p>`}return r}getGroupNameRowTemplate(e,t,s,o,i,a=void 0){return`<div class="posweb-cell-account_flag ${e}"></div>\n                <div class="posweb-cell-account_links_container" role="presentation">\n                    <h3 class="posweb-cell-account${this.setBrandingCssClass(o)}">\n                        <span class="screen-reader-only">${i}</span>\n                        <span class="posweb-cell-account_primary">${t}</span>`+(a?`<sup class="posweb-cell-account_primary_sup" aria-label="Additional information on annuity performance calculations available below the positions table">${a}</sup>`:"")+(s?`<span class="posweb-cell-account_secondary">${s}</span>`:"")+`</h3>\n                    ${o}\n                </div>`}setBrandingCssClass(e){return e.includes("posweb-trade_branding")?" posweb-cell-account_branding":""}static getPositionCellTemplate(e,t,s,o,i,a=""){var r,n,l,d,c,p,u,b,w,h;return`<div class="posweb-cell-symbol-flag_left"></div>\n                <div class="posweb-cell-symbol-name_description" title="${o}">\n                        ${["POSITION","POSITION_CORE"].indexOf(e.rowType)>-1?`<button class="posweb-cell-symbol-name pvd-btn btn-anchor" ${(null===(r=e.meta)||void 0===r?void 0:r.isDrawerDisabled)?"disabled":'aria-expanded="false"'}><div class="posweb-cell-symbol-name_container"><span>${t}</span>`:`<div class="posweb-cell-symbol-name_container"><p class="posweb-cell-symbol-name">${t}</p>`}\n                        ${(null===(n=e.meta)||void 0===n?void 0:n.footnoteNum)?'<sup class="posweb-cell-symbol-name_sup">'+e.meta.footnoteNum+"</sup>":""}\n                        ${i?'<p class="currency-code">('+i+")</p>":""}\n                        ${(null===(l=e.meta)||void 0===l?void 0:l.isUnPriced)||(null===(d=e.meta)||void 0===d?void 0:d.holdingType)?v.getA11yIndicatorsTemplate(e.meta):""}\n                        ${(null===(c=e.meta)||void 0===c?void 0:c.fixedIncDtls)?v.getFixedIncomeIndicatorsTemplate(e):""}\n\n                                <div class="posweb-cell-symbol-icon_container">\n                                    ${(null===(p=e.meta)||void 0===p?void 0:p.isMngAcct)?v.getManagedIndicatorTemplate():""}\n                                    ${(null===(u=e.meta)||void 0===u?void 0:u.hasUnknownQuantity)&&"BSK"===e.rowSubType?v.getUnknownQtyIndicatorTemplate(e,e.meta.rowId):""}\n                                    ${"Option"===(null===(b=e.meta)||void 0===b?void 0:b.securityType)?v.getNearExpirationIndicatorTemplate(e.sym.optDesc):""}\n                                    ${(null===(w=e.meta)||void 0===w?void 0:w.events)?v.getEventIndicatorsTemplate(e.meta.events,e.meta.rowId):""}\n                                    ${(null===(h=e.meta)||void 0===h?void 0:h.isBasketed)&&"BSK"!==e.rowSubType?v.getBasketIndicatorTemplate(e.meta.isBasketed):""}\n                                </div>\n                            </div>\n                            <p class="posweb-cell-symbol-description">${s}</p>\n                            ${a}\n                        ${["POSITION","POSITION_CORE"].indexOf(e.rowType)>-1?"</button>":""}\n                </div>\n                <div class="posweb-cell-symbol-flag_right">${v.getIndTemplate(e)}${v.getMaturityDatePopoverTemplate(e)}</div>`}static getGroupCellTemplate(e,t,s){var o,i,r,n,l;let d="";if("slv"===s&&e.sleeveId&&e.sleeveData[e.sleeveId]){const s=e.poswebCurrentView!==a.POSWEB_PRESET_VIEW.FUND_PERF_VIEW&&(null===(r=null===(i=null===(o=e.sleeveData[e.sleeveId].accts)||void 0===o?void 0:o[e.sleeveAcct])||void 0===i?void 0:i.curVal)||void 0===r?void 0:r.disp)?`<div class="posweb-cell-group-info_secondary"><p>Current Value: <span class="posweb-cell-group-text_curval">                        ${e.sleeveData[e.sleeveId].accts[e.sleeveAcct].curVal.disp}</span></p></div>`:"";d=`<div class="posweb-cell-group">\n                        <button class="posweb-cell-group-exp_col posweb-cell-group-icon pvd-btn btn-anchor" aria-labelledby="sleeve-name-${t}" aria-expanded="false">                            <pvd3pwe-icon pvd-name="drawer__collapse" pvd-size="small" class="posweb-sleeve-collapse_icon"></pvd3pwe-icon>                            <pvd3pwe-icon pvd-name="drawer__expand" pvd-size="small" class="posweb-sleeve-expand_icon"></pvd3pwe-icon>                        </button>\n                        <div class="posweb-cell-group-info">\n                            <div class="posweb-cell-group-info_primary">\n                                <h4 class="posweb-cell-group-info_primary_name" id="sleeve-name-${t}">\n                                    ${e.sleeveData[e.sleeveId].name}\n                                </h4>\n                                <button class="posweb-cell-group-info_primary_button posweb-cell-group-icon pvd-btn btn-anchor"\n                                        id="posweb-cell-group-info_button-${t}" aria-label="View Sleeve Description"\n                                        aria-describedby="posweb-cell-group-info_popover-${t}" onclick="event.stopPropagation();">\n                                        <pvd3pwe-icon pvd-name="alert__info--outline" pvd-size="small" aria-hidden="true"></pvd3pwe-icon>\n                                </button>\n                                <pwe-popover class="posweb-cell-group-info_popover" position="bottom" role="dialog" show-elem=".positions-web-experience"\n                                    for="posweb-cell-group-info_button-${t}" id="posweb-cell-group-info_popover-${t}" zindex="1"\n                                    additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport" popover-hide-top_bottom=".ag-body-viewport"\n                                    popover-hide-left_right=".ag-body-viewport">\n                                    <div class="posweb-cell-group-info_popover_content">\n                                        <p class="posweb-cell-group-info_popover_name text-bold">${e.sleeveData[e.sleeveId].name}</p>\n                                        <p class="posweb-cell-group-info_popover_desc">${e.sleeveData[e.sleeveId].desc}</p>\n                                    </div>\n                                </pwe-popover>\n                            </div>\n                            ${s}\n                        </div>\n                    </div>\n                </div>`}else if("basket"===s){const s=e.poswebCurrentView!==a.POSWEB_PRESET_VIEW.FUND_PERF_VIEW?e.node.childrenAfterFilter.length-1:e.node.childrenAfterFilter.length;d=`<div class="posweb-cell-group">\n                        <div class="posweb-cell-group-info">\n                            <h4 class="posweb-cell-group-info_primary">\n                                <button class="posweb-cell-group-info_primary_name pvd-btn btn-anchor" aria-expanded="false" title="${e.sym.name}">\n                                    <span>${e.sym.name}</span>\n                                </button>\n                                ${(null===(n=e.meta)||void 0===n?void 0:n.isUnPriced)?v.getA11yIndicatorsTemplate(e.meta):""}\n                                <div class="posweb-cell-group-info_primary_logo">\n                                    <img title="Basket Group" alt="Basket Group" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/basket_indicator_icon.svg" />\n                                </div>\n                                ${(null===(l=e.meta)||void 0===l?void 0:l.hasUnknownQuantity)?v.getUnknownQtyIndicatorTemplate(e,t):""}\n                            </h4>\n                            <div class="posweb-cell-group-info_secondary"><p><span class="posweb-cell-group-text_curval">${s} position${1!==s?"s":""}</span>\n                            </p></div>\n                        </div>\n                    </div>\n                </div>`}else if("groupBySecurity"===s){const t=e.poswebCurrentView!==a.POSWEB_PRESET_VIEW.FUND_PERF_VIEW?e.node.childrenAfterFilter.length-1:e.node.childrenAfterFilter.length;d=`<div class="posweb-cell-group-by-security">\n                        <div class="posweb-cell-group-info">\n                            <button class="posweb-cell-group-info_primary_name pvd-btn btn-anchor" aria-expanded="false" title="${e.sym.name}">${e.sym.name}${v.getGroupBySecurityEventIndicatorsTemplate(e)}${v.getNearExpirationIndicatorTemplate(null,e.hasNearExpirationDate)}</button>\n                            <div class="posweb-cell-group-info_secondary"><p><span class="posweb-cell-group-text_curval">${t} position${1!==t?"s":""}</span>\n                            </p></div>\n                        </div>\n                    </div>\n                     <pvd3pwe-icon pvd-name="action__caret-down" pvd-size="extra-small" class="posweb-caret"></pvd3pwe-icon>\n                </div>`}else"actGroup"===s&&(d=`<div class="posweb-cell-group">\n                            <div class="posweb-cell-account_group_flag"></div>\n                            <div class="posweb-cell-group-info">\n                                <h4 class="posweb-cell-group-info_primary" title="${e.actNam}">\n                                <button class="posweb-cell-group-info_primary_name pvd-btn btn-anchor" aria-expanded="false" title="${e.actNam}">\n                                    <span>${e.actNam}</span>\n                                </button>\n                                </h4>\n                                <div class="posweb-cell-group-info_secondary" title="${e.actNum}">\n                                    <span class="posweb-cell-group-acct_num" data-last-four="*${e.actNum.slice(-4)}">\n                                    ${w.PoswebUtils.getAccountNumber(e.actNum)}</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>`);return d}rowExpandToggled(e){var t,s,o,i,a;let r;(null===(t=this._params.data)||void 0===t?void 0:t.rowType)?r=this._eGui.querySelector(".posweb-cell-symbol-name"):(null===(s=this._params.data)||void 0===s?void 0:s.sleeveId)&&this._params.data.sleeveData[this._params.data.sleeveId]?r=this._eGui.querySelector(".posweb-cell-group-exp_col"):(null===(a=null===(i=null===(o=this._params.data)||void 0===o?void 0:o.node)||void 0===i?void 0:i.id)||void 0===a?void 0:a.includes("groupBySecurity"))&&(r=this._eGui.querySelector(".posweb-cell-group-info_primary_name")),r&&r.setAttribute("aria-expanded",e.toString())}widthChangeCallback(){var e;(null===(e=this._params)||void 0===e?void 0:e.eGridCell)&&this._params.eGridCell.clientWidth!==this._rowWidth&&(clearTimeout(this._sizeChangeTimeout),this._sizeChangeTimeout=setTimeout(this._updateRowHeight,400))}updateRowHeight(){this._rowWidth=this._poswebCommon._gridElement.clientWidth;const e=this._eGui.children[0],t=Math.round(e.offsetHeight+1);t!==this._params.node.rowHeight&&(this._params.node.setRowHeight(t),this._params.api.onRowHeightChanged())}static getNearExpirationIndicatorTemplate(e,t=!1){let s="";const o=w.PoswebUtils.getEasternDateFromLocal(),i=w.PoswebUtils.calculateDaysBetween(o,e);return(t||null!=i&&i<=7)&&(s+=`<img class="posweb-cell-symbol-expiration_indicator" title="Option nearing expiration" alt="Nearing expiration indicator" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/near_expiration_indicator.svg"/>`),s}static getGroupBySecurityEventIndicatorsTemplate(e){var t,s;let o="";return o+=((null===(t=null==e?void 0:e.node)||void 0===t?void 0:t.hasEarnings)?`<img class="posweb-cell-group-by-security-event_indicator" title="Earnings" alt="Earnings information exists" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/earnings_indicator_icon.svg"/>`:"")+((null===(s=null==e?void 0:e.node)||void 0===s?void 0:s.hasDistributions)?`<img class="posweb-cell-group-by-security-event_indicator" title="Dividend/Capital Gains Distribution" alt="Distribution information exists" src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/distribution_indicator_icon.svg"/>`:""),o}}t.PoswebSymbolCellRenderer=v},52654:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventCardManager=void 0;const o=s(28198),i=s(38903),a=s(62822);t.EventCardManager=class{constructor(e,t){e&&t&&t.data&&t.data.meta&&t.data.meta.events&&(this._rowId=e,t.data.meta.events.hasOpenOrder&&t.data.meta.events.orderCardDetails&&(this._orderCard=new a.OrderCardComponent(e,t.data.meta.events.orderCardDetails)),t.data.meta.events.hasEarnings&&t.data.meta.events.earningsCardDetails&&(this._earningsCard=new i.EarningsCardComponent(e,t.data.meta.events.earningsCardDetails)),t.data.meta.events.hasDistributions&&t.data.meta.events.distributionDetails&&(t.data.meta.events.distributionDetails.dividend&&(t.data.meta.events.distributionDetails.dividend.securityType&&"Exchange Traded"===t.data.meta.events.distributionDetails.dividend.securityType?this._dividendCard=new o.DistributionCardComponent(e,t.data.meta.events.distributionDetails.dividend,"Distribution"):this._dividendCard=new o.DistributionCardComponent(e,t.data.meta.events.distributionDetails.dividend,"Dividend")),t.data.meta.events.distributionDetails.shortTermCapitalGain&&(this._shortTermCapGainCard=new o.DistributionCardComponent(e,t.data.meta.events.distributionDetails.shortTermCapitalGain,"Short-term capital gain")),t.data.meta.events.distributionDetails.longTermCapitalGain&&(this._longTermCapGainCard=new o.DistributionCardComponent(e,t.data.meta.events.distributionDetails.longTermCapitalGain,"Long-term capital gain"))))}getInitSnippet(){return this._rowId?`<div id="posweb-events-container-${this._rowId}" class="posweb-events-container"><div id="posweb-events-card-container-${this._rowId}" class="posweb-events-card-container">`+(this._orderCard?this._orderCard.getSnippet():"")+(this._earningsCard?this._earningsCard.getSnippet():"")+(this._dividendCard?this._dividendCard.getSnippet():"")+(this._shortTermCapGainCard?this._shortTermCapGainCard.getSnippet():"")+(this._longTermCapGainCard?this._longTermCapGainCard.getSnippet():"")+"</div></div>":""}}},53059:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsActionTypes=void 0,function(e){e.PAGEVIEW="pageview",e.INTERACTION="interaction"}(s||(t.MetricsActionTypes=s={}))},55221:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebActionLinks=void 0;const o=s(83254),i=s(60488),a=s(75870),r=s(82402),n=s(34140);t.PoswebActionLinks=class{static buildActionLinks(e,t,s=!1,i){var a,r;let l="";const d=[];if(e.actNum&&!s){const{amc:s}=o.PoswebCommon.getInstance(),l=(null===(r=null===(a=null==s?void 0:s.amcObj)||void 0===a?void 0:a.accounts)||void 0===r?void 0:r.some(t=>t.accountId===e.actNum&&"Y"===t.borrowFullyPaidCode))||!1;e.isOptSumm&&d.push(this.getOptionSummaryObject(e,t.digitalDomain)),e.isMgDivs&&d.push(this.getManageDividendsObject(t.accountMaintDomain)),e.is529&&e.is529St&&""!==e.is529St&&d.push(this.get529Object(e,t.fundResearchDomain)),e.fndPerfCd&&d.push(this.getFiliFundPerfObject(e,t.fundResearchDomain)),(null==i?void 0:i.isAcctBasketEligible)&&d.push(this.getManageBasketsObject(t.digitalDomain)),"External"===(null==i?void 0:i.acctType)&&d.push(this.getExternalFullView(t.digitalDomain)),(null==i?void 0:i.isFixedIncome)&&"External"!==i.acctType&&d.push(this.getFixedAnalysisUrl(t.digitalDomain)),l&&n.WindowService.getToggle("ap126216_PWE_Loaned_Security_Link")&&d.push(this.getLoanedSecutitiesObject(e,t.digitalDomain))}return d.length>0&&(l=this.buildActionLinksHTML(d)),l}static buildActionLinksHTML(e){let t="",s="";const o=e.length;let a=0;for(const t of e){const e=t.additionalAttributes||"";s+=this.buildItemContainerHTML(t,e,!1,"",a,o),a++}const r=i.PoswebGridUtils.isMobileDevice()&&o>2?e.slice(1):!i.PoswebGridUtils.isMobileDevice()&&o>3?e.slice(2):"";if(r.length>0){const e=r.map(e=>{const t=e.additionalAttributes||"";return this.buildItemContainerHTML(e,t,!1,"",a,o)}).join("");t+=this.buildItemPopoverHTML(e,a,o)}return`${s}${t}`}static buildItemContainerHTML(e,t,s,o,i,a){let r=`<div class="posweb-trade_links-item_container${s?" posweb-trade_links-item_popover-container":""}${i!==a-1?" posweb-trade_links-item_container-border":""}">`;return r+=this.buildItemLinkHTML(e,t),s&&(r+=`<pwe-popover for="tt-trigger-trade_action_links_${e.tsID}" position="bottom" zindex="1" role="dialog" action-on-resize="hide" id="tt-popover-trade_action_links_${e.tsID}" show-elem=".positions-web-experience" additional-scroll-selectors=".ag-body-viewport" popover-hide-top_bottom=".ag-body-viewport" popover-hide-left_right=".ag-body-viewport">${o}</pwe-popover>`),r+="</div>",r}static buildItemLinkHTML(e,t){return`<a target="${e.target}" href="${e.href}" ${t}>${e.text}</a>`}static buildItemPopoverHTML(e,t,s){const o={text:"Related Links",target:"",href:"javascript:void(0);",tsID:(new Date).getTime()},i=`class="posweb-trade_links-menu" id="tt-trigger-trade_action_links_${o.tsID}" aria-describedby="tt-popover-trade_action_links_${o.tsID}"`;return this.buildItemContainerHTML(o,i,!0,e,t,s)}static getManageBasketsObject(e){return{text:"Basket portfolios dashboard",target:"_blank",href:`${e}/ftgw/digital/sdp-dashboard/`,additionalAttributes:`onclick="poswebex.poswebGrid.accessMetrics('BasketDashboard', '${a.PoswebSettings.getPageVersion()}');"`}}static getLoanedSecutitiesObject(e,t){const s=`scrollbars=yes,resizable=yes,${r.PoswebUtils.getPopupPosition(850,900)}`;return{text:"Loaned securities",href:"#",additionalAttributes:`id="loaned-security-url"; onclick="poswebex.poswebGrid.onOpenPopupBtnClick('${t}/ftgw/digital/securities-finance/lending-positions/?ACCOUNT=${e.actNum}', '${s}', event, false, true);poswebex.poswebGrid.accessMetrics('positionLoanedIndicatorLink'); return false"`}}static getManageDividendsObject(e){return{text:"Manage dividends",target:"_blank",href:`${e}/ftgw/Profile/custpref/divncapg/init`}}static getOptionSummaryObject(e,t){return{text:"Option summary",target:"_blank",href:`${t}/ftgw/digital/optsumex?ACCOUNT=${e.actNum}`}}static get529Object(e,t){return{text:"529 Performance",target:"_blank",href:`${t}/college/plan-performance/monthly?state=${e.is529St}`}}static getFiliFundPerfObject(e,t){return{text:"Annuity Funds Research",target:"_blank",href:`${t}/fund-screener/annuities/results/table/overview/averageAnnualReturnsYear3/desc/1?product=${e.fndPerfCd}`}}static getExternalFullView(e){return{text:"Full View®",target:"_blank",href:`${e}/ftgw/digital/emoney/home`}}static getFixedAnalysisUrl(e){return{text:"Fixed income dashboard",target:"_blank",href:`${e}/ftgw/digital/fixed-income-dashboard/summary`,additionalAttributes:'id="fixed-income-url"; onclick="poswebex.poswebGrid.accessMetrics(`Fixed_Income_Dashboard_Acct_Row_Select`)"'}}}},55998:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebSuperscriptCellRenderer=void 0;const o=s(79859);class i extends o.PoswebBaseCellRenderer{init(e){this._eGui=document.createElement("div"),e&&e.value&&(this._eGui.innerHTML=`<span>${e.value}</span>`,e.sup&&(this._eGui.innerHTML+=`<sup>${e.sup}</sup>`))}}t.PoswebSuperscriptCellRenderer=i},56795:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebDistYieldCellRenderer=void 0;const o=s(79859);class i extends o.PoswebBaseCellRenderer{init(e){this._eGui=document.createElement("div"),this._params=e,(null==e?void 0:e.data)&&(this._eGui.innerHTML=i.getDistYieldSnippet(e.data.distYld,e.data.distYldDate))}static getDistYieldSnippet(e,t){let s="";const o=(null==e?void 0:e.disp)||"--",i=(null==t?void 0:t.disp)||"--";return o&&i&&[void 0,"n/a"].indexOf(o)<0&&[void 0,"n/a"].indexOf(i)<0&&(s=`<div class="posweb-cell-dist-yield-container" role="presentation"><span class="posweb-cell-dist-percent">${o}</span><span class="posweb-cell-dist-dates">${i}</span></div>`),s}static getPoswebPrintGridCell(e,t){return`<td${t?` class="${t}"`:""}><div class="posweb-cell-dist-yield_container">`+i.getDistYieldSnippet(e.distYld,e.distYldDate)+"</div></td>"}}t.PoswebDistYieldCellRenderer=i},58294:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventCardComponent=void 0;t.EventCardComponent=class{static provideSpinner(e){return`<div class="posweb-card-spinner-container"><pvd3pwe-spinner class="posweb-card-spinner" pvd-size="medium"\n                       pvd-primary-text="Loading ${e}" pvd-triggered-by-interaction="false"></pvd3pwe-spinner></div>`}}},58677:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebGrandTotalPopoverCellRenderer=void 0;const o=s(79859),i=s(60488);class a extends o.PoswebBaseCellRenderer{static getItemsContainerDiv(e){var t,s;let o='<div class="posweb-popover-grand_total_items_container">';return e&&((null===(t=e.pricedSecuritiesTodaysGainLoss)||void 0===t?void 0:t.disp)&&(o+=a.getItemDivTag(e.pricedSecuritiesTodaysGainLoss,"Securities Priced Today")),(null===(s=e.unpricedSecuritiesTodaysGainLoss)||void 0===s?void 0:s.disp)&&(o+=a.getItemDivTag(e.unpricedSecuritiesTodaysGainLoss,"Securities Not Priced Today",!0))),o+="</div>",o}static getItemDivTag(e,t,s){return`\n            <div class="posweb-popover-grand_total_item_row">\n                <p class="posweb-popover-grand_total_item_label">${t}</p>\n                <p class="posweb-popover-grand_total_item_value${i.PoswebGridUtils.getDisplayColor(null==e?void 0:e.disp)}\n                ${s?" posweb-cell-not_priced_today":""}">${(null==e?void 0:e.disp)?e.disp:""}</p>\n            </div>`}static getPopoverDivInnerHTML(e){return`<div class="posweb-totals-popover">\n                    <p class="posweb-popover-grand_total_title text-bold">GRAND TOTAL</p>\n                    <p class="posweb-popover-grand_total_subtitle">All Accounts</p>\n                    ${a.getItemsContainerDiv(e.grandPop)}\n                    <hr>\n                    ${i.PoswebGridUtils.getDisclaimerSnippet("posweb-popover-grand_total_disclaimer",e.isPriorDayGainLossReset)}\n                </div>`}static getStackItemsSnippet(e,t){return`<span class="posweb-cell-stacked-item posweb-cell-stack-item-today_gl_currency posweb-cell-today_gl_currency_container-stacked">${e||""}</span><span class="posweb-cell-stacked-item-total posweb-cell-stack-item-today_gl_percent${i.PoswebGridUtils.getDisplayColor(t)}">${t||""}</span>`}static getTodayGLCurrencySnippet(e,t,s){return i.PoswebGridUtils.getSearchValue()?`<div class="posweb-cell-popover-trigger posweb-cell-today_gl_currency posweb-metrics ${i.PoswebGridUtils.getDisplayColor(e)}" data-metrics="PortTodayGLPopover" id="posweb-tt-trigger-grand-total-${t}" aria-describedby="posweb-tt-popover-grand-total-${t}">${e}</div>`+(s.isUnPriced?'<div class="posweb-cell-a11y_indicator screen-reader-only">Not Priced Today</div>':""):`\n                <a href="javascript:void(0);"\n                class="posweb-cell-popover-trigger posweb-cell-today_gl_currency posweb-metrics ${i.PoswebGridUtils.getDisplayColor(e)}"\n                data-metrics="PortTodayGLPopover"\n                id="posweb-tt-trigger-grand-total-${t}"\n                aria-describedby="posweb-tt-popover-grand-total-${t}">${e}</a>`+(s.isUnPriced?'<div class="posweb-cell-a11y_indicator screen-reader-only">Not Priced Today</div>':"")+`<pwe-popover class="posweb-popover-grand_total"\n                id="posweb-tt-popover-grand-total-${t}" show-elem=".positions-web-experience"\n                position="bottom" role="dialog" for="posweb-tt-trigger-grand-total-${t}" zindex="1"\n                additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport" popover-hide-top_bottom=".ag-body-viewport"\n                popover-hide-left_right=".ag-center-cols-viewport">\n                    ${a.getPopoverDivInnerHTML(s)}\n                </pwe-popover>`}init(e){var t,s,o,r,n,l;if(this._eGui=document.createElement("div"),this._params=e,(null===(s=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.meta)||void 0===s?void 0:s.grandPop)&&(null===(o=e.node)||void 0===o?void 0:o.id))if((null===(n=null===(r=e.colDef)||void 0===r?void 0:r.cellRendererParams)||void 0===n?void 0:n.isStacked)&&i.PoswebGridUtils.isValidStackColInfo(e.data,e.colDef.cellRendererParams.stackColInfo)){const{colId:t}=e.colDef.cellRendererParams.stackColInfo,s=e.colDef.cellRendererParams.stackColInfo.top.field,o=e.colDef.cellRendererParams.stackColInfo.bottom.field,i=a.getTodayGLCurrencySnippet(e.data[t][s].disp,e.node.id,e.data.meta);this._eGui.classList.add("posweb-cell-stacked-item-container"),this._eGui.innerHTML=a.getStackItemsSnippet(i,e.data[t][o].disp)}else(null===(l=e.data.todGL)||void 0===l?void 0:l.disp)&&(this._eGui.classList.add("posweb-cell-today_gl_currency_container"),this._eGui.innerHTML=a.getTodayGLCurrencySnippet(e.data.todGL.disp,e.node.id,e.data.meta))}static getPoswebPrintGridCell(e,t,s){var o;if((null==s?void 0:s.isStacked)&&i.PoswebGridUtils.isValidStackColInfo(e,s.stackColInfo)){const{colId:o}=s.stackColInfo,r=s.stackColInfo.top.field,n=s.stackColInfo.bottom.field;return`<td class="posweb-cell-print ${t||""}"><div class="posweb-cell-stacked-item-container">`+a.getStackItemsSnippet(""+(`<span class="${i.PoswebGridUtils.getDisplayColor(e[o][r].disp)}">`+e[o][r].disp+'<sup class="posweb-row-grand_total_print_info_indicator">&nbsp;</sup></span>'),e[o][n].disp)+"</div></td>"}return`<td class="posweb-cell-print ${t||""}">`+((null===(o=null==e?void 0:e.todGL)||void 0===o?void 0:o.disp)?e.todGL.disp+'<sup class="posweb-row-grand_total_print_info_indicator">&nbsp;</sup>':"")+"</td>"}}t.PoswebGrandTotalPopoverCellRenderer=a},58805:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebSecYieldCellRenderer=void 0;const o=s(79859);class i extends o.PoswebBaseCellRenderer{init(e){this._eGui=document.createElement("div"),this._params=e,(null==e?void 0:e.data)&&(this._eGui.innerHTML=i.getSecYieldSnippet(e.data.secYld,e.data.secYldDate))}static getSecYieldSnippet(e,t){let s="";const o=(null==e?void 0:e.disp)||"--",i=(null==t?void 0:t.disp)||"--";return o&&i&&[void 0,"n/a"].indexOf(o)<0&&[void 0,"n/a"].indexOf(i)<0&&(s=`<div class="posweb-cell-sec-yield-container" role="presentation"><span class="posweb-cell-sec-percent">${o}</span><span class="posweb-cell-sec-dates">${i}</span></div>`),s}static getPoswebPrintGridCell(e,t){return`<td${t?` class="${t}"`:""}><div class="posweb-cell-sec-yield_container">`+i.getSecYieldSnippet(e.secYield,e.secYieldDate)+"</div></td>"}}t.PoswebSecYieldCellRenderer=i},58836:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebActions=void 0;const o=s(36764);t.PoswebActions=class{static dispatchGridData(e,t,s,i){return{type:o.PoswebActionKeys.GRID_ROW_DATA,rowData:e,slvData:t,basketData:s,groupBySecurityData:i}}static dispatchPresetColumnsOrder(e){return{type:o.PoswebActionKeys.GRID_PRESET_COLUMN_ORDER,presetColumnsOrder:e}}static dispatchColumnSortDetails(e){return{type:o.PoswebActionKeys.GRID_COLUMN_SORT_DETAILS,sortDetails:e}}static dispatchUserTabSelection(e){return{type:o.PoswebActionKeys.GRID_DRAWER_TAB_SELECTED,selectedTab:e}}static dispatchGridSettings(e){return{type:o.PoswebActionKeys.GRID_SETTINGS,settingsDetails:e}}static dispatchMyViewColumnsOrder(e){return{type:o.PoswebActionKeys.MY_VIEW_SEL_COLUMNS,presetColumnsOrder:e}}}},59831:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebStackedColumnCellRenderer=void 0;const o=s(79859),i=s(60488);class a extends o.PoswebBaseCellRenderer{static getStackItemSnippet(e,t,s){return`<span class="posweb-cell-stacked-item ${s||""} ${i.PoswebGridUtils.getDisplayColor(e||"")}">${e||""}${t?`<sup>${t}</sup>`:""}</span>`}static getStackedItemsSnippet(e,t){var s,o,r,n,l,d,c,p;let u="";if(i.PoswebGridUtils.isValidStackColInfo(e,t)){const{colId:i}=t,b=null===(s=t.top)||void 0===s?void 0:s.field,w=null===(o=t.bottom)||void 0===o?void 0:o.field;u=a.getStackItemSnippet(null===(r=e[i][b])||void 0===r?void 0:r.disp,null===(n=e[i][b])||void 0===n?void 0:n.sup,null===(l=t.top)||void 0===l?void 0:l.className)+a.getStackItemSnippet(null===(d=e[i][w])||void 0===d?void 0:d.disp,null===(c=e[i][w])||void 0===c?void 0:c.sup,null===(p=t.bottom)||void 0===p?void 0:p.className)}return u}init(e){var t,s;this._eGui=document.createElement("div"),this._params=e,this._eGui.classList.add("posweb-cell-stacked-item-container"),(null==e?void 0:e.data)&&(null===(s=null===(t=e.colDef)||void 0===t?void 0:t.cellRendererParams)||void 0===s?void 0:s.isStacked)&&e.colDef.cellRendererParams.stackColInfo&&(this._eGui.innerHTML=a.getStackedItemsSnippet(e.data,e.colDef.cellRendererParams.stackColInfo))}static getPoswebPrintGridCell(e,t,s){return e&&(null==s?void 0:s.stackColInfo)?`<td${t?` class="${t}"`:""}><div class="posweb-cell-stacked-item-container">`+a.getStackedItemsSnippet(e,s.stackColInfo)+"</div></td>":`<td${t?` class="${t}"`:""}></td>`}}t.PoswebStackedColumnCellRenderer=a},60132:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebPrintUtils=void 0;const o=s(36737),i=s(17597),a=s(60488),r=s(61430),n=s(82402),l=s(34140);class d{static getPositionRowClassList(e){const t=[];return e&&("POSITION"===e.rowType?t.push("posweb-row-position"):"POSITION_CORE"===e.rowType&&(t.push("posweb-row-position"),t.push("posweb-row-core")),e.meta&&(!0===e.meta.isIntradayActivity&&t.push("posweb-row-intraday"),!0===e.meta.isFixedIncome&&t.push("posweb-row-fixed_income"),!0===e.meta.isDrawerDisabled&&t.push("posweb-row-position_drawer_disabled"))),t.join(" ")}static getCellClassListFromRules(e,t){const s=[],o=(null==t?void 0:t.cellClassRules)&&Object.keys(t.cellClassRules)?Object.keys(t.cellClassRules):[];return e&&Array.isArray(o)&&o.forEach(o=>{var i,r,n;switch(o){case"posweb-cell-gain":case"posweb-cell-loss":o===(null===(r=a.PoswebGridUtils.getDisplayColor(null===(i=e[t.colId])||void 0===i?void 0:i.disp))||void 0===r?void 0:r.trim())&&s.push(o);break;case"posweb-cell-not_priced_today":(null===(n=e.meta)||void 0===n?void 0:n.isUnPriced)&&s.push(o)}}),s}static beforePrint(){var e,t;const s=n.PoswebUtils.getHtmlElement("posweb-grid-print");if(s&&l.WindowService.getCurrentPwe()){const{poswebGrid:n}=l.WindowService.getCurrentPwe(),d=null==n?void 0:n._poswebPresetView,c=s.querySelector("#posweb-print-table");if(n&&d&&!c){const c=null===(t=null===(e=l.WindowService.getCurrentPwe().poswebStore)||void 0===e?void 0:e.store)||void 0===t?void 0:t.getState(),p=null==c?void 0:c.slvData,u=n.getPoswebGridApi,b=document.createElement("div");let w;w=d===i.POSWEB_PRESET_VIEW.MY_VIEW?l.WindowService.getPositionSettings().myViewSelCols||"":(null==c?void 0:c.presetColumnsOrder[d])||o.DEF_POSWEB_STATE.presetColumnsOrder[d],w=-1===w.search(/\bact\b/)?w+",act":w,w=a.PoswebGridUtils.updateColumnOrder(w,d),"object"==typeof p&&(p.currentView=d),b.innerHTML=r.PoswebPrint.getPrintTableSnippet(u,w,p),s.appendChild(b)}}else d.updatePrintListener(!1,!0)}static printGrid(){d.beforePrint(),setTimeout(()=>{window.print()},1e3)}static updatePrintListener(e,t){t&&window["ap126216-pwe-beforeprint"]&&(window.removeEventListener("beforeprint",window["ap126216-pwe-beforeprint"]),window["ap126216-pwe-beforeprint"]=void 0),t&&window["ap126216-pwe-afterprint"]&&(window.removeEventListener("afterprint",window["ap126216-pwe-afterprint"]),window["ap126216-pwe-afterprint"]=void 0),e&&(window["ap126216-pwe-beforeprint"]=d.beforePrint,window["ap126216-pwe-afterprint"]=d.afterPrint,window.addEventListener("beforeprint",window["ap126216-pwe-beforeprint"]),window.addEventListener("afterprint",window["ap126216-pwe-afterprint"]))}static afterPrint(){const e=n.PoswebUtils.getHtmlElement("posweb-grid-print");(null==e?void 0:e.childNodes)&&e.childNodes.length>0&&e.removeChild(e.childNodes[e.childNodes.length-1])}}t.PoswebPrintUtils=d},60451:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MFTopTenCardComponent=void 0;const o=s(60942),i=s(60488),a=s(93535),r=s(42095);class n extends r.ResearchCardComponent{constructor(e,t,s){super(),this._rowId=e,this._gridRowData=t,this._posweb=a.PoswebMetadata.getInstance(),this._tabPanel=s}static retrieveTopTen(e,t,s){const i=t.querySelector(`#posweb-research-card-content-mf-top-ten-${e}`);let a;i.innerHTML=n.provideSpinner("Top 10 holdings data");let r=s.data.meta.acctType;switch(r){case"Brokerage":a=s.data.sym.cusip,r="retail";break;case"Annuity":a=s.data.sym.name,r="fili";break;case"WPS":a=s.data.meta.investmentCode,r="workplace";break;default:a=""}return a?(new o.PoswebGridService).retrieveMFTopTenCardData({investmentId:a,fundUniverse:r}).subscribe({next:e=>{i.innerHTML=e||this.getMessageSnippet(this.TOP_TEN_NOT_SUPPORT_MSG)},error:e=>{i.innerHTML=this.getMessageSnippet(this.TOP_TEN_UNAVAILABLE_MSG),console.error("Error occurred retrieving top10 data, and error is %o",e)}}):(i.innerHTML=this.getMessageSnippet(this.TOP_TEN_NOT_SUPPORT_MSG),null)}static getMessageSnippet(e){return`<div class="posweb-mf-top-ten-container">\n                    <div class="posweb-research-card-header">\n                        <div role="heading" aria-level="6" id="posweb-mf-top-ten-header-label" class="posweb-mf-top-ten-header-label">Top 10 holdings<sup>§</sup></div>\n                    </div>\n                </div>\n                <div class="posweb-research-message">\n                    <div class="posweb-research-message-icon"><pvd3pwe-icon pvd-name="alert__critical--outline" pvd-size="large" class="color-black"></pvd3pwe-icon></div>\n                    <div class="posweb-research-message-text">${e}</div>\n                </div>`}retrieveCardData(){this.$mfTopTenSubscription&&this.$mfTopTenSubscription.unsubscribe(),this.$mfTopTenSubscription=n.retrieveTopTen(this._rowId,this._tabPanel,this._gridRowData),i.PoswebGridUtils.updateLegendElement(!0,"posweb-legend-mf-top-ten-disclosure")}getInitSnippet(){return`<div id="posweb-research-card-mf-top-ten-${this._rowId}" class="posweb-research-card posweb-research-card-mf-top-ten">\n                     <div id="posweb-research-card-content-mf-top-ten-${this._rowId}" class="posweb-research-card-content">`+n.provideSpinner("Top 10 holdings data")+"</div></div>"}}t.MFTopTenCardComponent=n,n.TOP_TEN_UNAVAILABLE_MSG="Sorry, top 10 holdings for this mutual fund are currently unavailable. Please try again later.",n.TOP_TEN_NOT_SUPPORT_MSG="Sorry, top 10 holdings for this mutual fund are not supported."},60488:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebGridUtils=void 0;const o=s(53059),i=s(16186),a=s(73889),r=s(17597),n=s(11908),l=s(83254),d=s(17190),c=s(60942),p=s(93535),u=s(75870),b=s(49386),w=s(82402),h=s(34140);class v{static cellRendererSelectorCurrentValue(e){return(null==e?void 0:e.data)&&"PENDING"===e.data.rowType&&e.data.curVal&&e.data.curVal.disp&&e.data.meta&&e.data.meta.pendPop?{component:"poswebPendingActivityPopoverCellRenderer"}:null}static cellRendererSelectorTodaysGainLossCurrency(e){var t,s,o,i,a,r,n;if((null==e?void 0:e.data)&&((null===(t=e.data.todGL)||void 0===t?void 0:t.disp)||(null===(o=null===(s=e.colDef)||void 0===s?void 0:s.cellRendererParams)||void 0===o?void 0:o.isStacked)&&v.isValidStackColInfo(e.data,e.colDef.cellRendererParams.stackColInfo))){if(["ACCOUNT_TOTAL","SYMBOL_TOTAL"].indexOf(e.data.rowType)>-1&&(null===(i=e.data.meta)||void 0===i?void 0:i.acctTotalPop))return{component:"poswebAccountTotalPopoverCellRenderer"};if("GRAND_TOTAL"===e.data.rowType&&(null===(a=e.data.meta)||void 0===a?void 0:a.grandPop))return{component:"poswebGrandTotalPopoverCellRenderer"};if((null===(n=null===(r=e.colDef)||void 0===r?void 0:r.cellRendererParams)||void 0===n?void 0:n.isStacked)&&v.isValidStackColInfo(e.data,e.colDef.cellRendererParams.stackColInfo))return{component:"poswebStackedCellRenderer"}}return null}static cellRendererSelectorFiftyTwoWeekRange(){return{component:"poswebRangeCellRenderer",params:{is52Week:!0}}}static cellRendererSelectorContractVisualRange(){return{component:"poswebRangeCellRenderer",params:{isContractVisualRange:!0}}}static cellRendererSelectorDayRange(){return{component:"poswebRangeCellRenderer",params:{is52Week:!1}}}static cellRendererSelectorAnalystRatings(){return{component:"poswebAnalystRatingsCellRenderer"}}static cellRendererSelectorMstar(e){var t;return(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.mstar)&&e.data.mstar.rate&&e.data.mstar.cnt?{component:"poswebMstarCellRenderer"}:null}static cellRendererSelectorSuperScript(e){var t;return(null==e?void 0:e.value)&&(null===(t=e.column)||void 0===t?void 0:t.colId)&&e.data&&e.data[e.column.colId.split(".")[0]]&&e.data[e.column.colId.split(".")[0]].sup?{component:"poswebSuperscriptCellRenderer",params:{value:e.value,sup:e.data[e.column.colId.split(".")[0]].sup}}:null}static costBasisTotalColumnCellRendererSelector(e){var t,s,o,i,a,r;return!h.WindowService.getToggle("ap126216_PWE_COST_BASIS_TOTAL")&&["AWAY_TOTAL","SLEEVE_SUBTOTAL","BASKET_SUBTOTAL","ACCOUNT_TOTAL","SYMBOL_TOTAL","GRAND_TOTAL","GBS_TOTAL"].indexOf(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.rowType)>-1||(null===(o=null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.cstBasTot)||void 0===o?void 0:o.disp)&&((null===(i=e.data.meta)||void 0===i?void 0:i.isWash)||e.data.cstBasTot.sup)||(null===(r=null===(a=null==e?void 0:e.colDef)||void 0===a?void 0:a.cellRendererParams)||void 0===r?void 0:r.isStacked)&&v.isValidStackColInfo(e.data,e.colDef.cellRendererParams.stackColInfo)?{component:"poswebCostBasisTotalCellRenderer"}:null}static quantityColumnCellRendererSelector(e){var t;return(null==e?void 0:e.data)&&(null===(t=e.data.qty)||void 0===t?void 0:t.disp)?{component:"poswebQuantityCellRenderer"}:null}static newsColumnCellRendererSelector(e){return(null==e?void 0:e.data)&&e.data.headlineTime?{component:"poswebNewsCellRenderer"}:null}static cellRendererSelectorStacked(e){var t,s;return(null==e?void 0:e.data)&&(null===(s=null===(t=e.colDef)||void 0===t?void 0:t.cellRendererParams)||void 0===s?void 0:s.isStacked)&&v.isValidStackColInfo(e.data,e.colDef.cellRendererParams.stackColInfo)?{component:"poswebStackedCellRenderer"}:null}static cellRendererSelectorAccountGainLossPopover(e){var t,s;return(null==e?void 0:e.node.group)&&"actGroup"===e.node.rowGroupColumn.getColId()&&(null===(s=null===(t=e.data)||void 0===t?void 0:t[e.colDef.colId])||void 0===s?void 0:s.detail)?{component:"poswebAccountGainLossPopoverCellRenderer"}:null}static cellRendererSelectorCostBasisCloPos(e){var t,s;return(null===(s=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.meta)||void 0===s?void 0:s.isWash)&&"POSITION"===e.data.rowType?{component:"poswebCloPosCostBasisCellRenderer"}:null}static cellRendererSelectorDistYield(e){var t,s;return"POSITION"===(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.rowType)||"POSITION_CORE"===(null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.rowType)?{component:"poswebDistYieldCellRenderer"}:null}static cellRendererSelectorSecYield(e){var t,s;return"POSITION"===(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.rowType)||"POSITION_CORE"===(null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.rowType)?{component:"poswebSecYieldCellRenderer"}:null}static isValidStackColInfo(e,t){var s,o,i,a;if(e&&t){const{colId:r}=t,n=null===(s=t.top)||void 0===s?void 0:s.field,l=null===(o=t.bottom)||void 0===o?void 0:o.field;return Boolean(r&&e[r]&&(n||l)&&((null===(i=e[r][n])||void 0===i?void 0:i.disp)||(null===(a=e[r][l])||void 0===a?void 0:a.disp)))}return!1}static getColSpan(e){var t,s;let o=1;return!e.api.isPinningLeft()&&v.isFullWidthRow((null===(t=e.data)||void 0===t?void 0:t.rowType)||((null===(s=e.data)||void 0===s?void 0:s.rowType)||!e.node.group||"basket"!==e.node.rowGroupColumn.getColId()&&"actGroup"!==e.node.rowGroupColumn.getColId()&&"groupBySecurity"!==e.node.rowGroupColumn.getColId()?"GROUP":""))&&(o=e.api.getColumns().length),o}static stkColHeaderKeyboardEvent(e){if("Enter"===e.event.key){const t=`.posweb-header-${e.colDef.headerComponentParams.colClass}`,s=w.PoswebUtils.htmlQuerySelector(t);s&&s.click()}}static getCellClassRules(e){if(void 0!==e&&""!==e&&e.length){const t={};return e.indexOf("symbol")>-1&&(t["posweb-cell-symbol"]=e=>{var t;return Boolean((null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.rowType)&&["ACCOUNT","SYMBOL"].indexOf(e.data.rowType)<0)}),e.indexOf("gain_loss")>-1&&(t["posweb-cell-gain"]='x && (x.indexOf("+") > -1)',t["posweb-cell-loss"]='x && (x.indexOf("-") > -1) && (x.indexOf("--") < 0)'),e.indexOf("not_priced_today")>-1&&(t["posweb-cell-not_priced_today"]=e=>{var t,s;return Boolean(null===(s=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.meta)||void 0===s?void 0:s.isUnPriced)}),t}return{}}static getRowClassRules(){return{"posweb-row-account":"data && data.rowType && (('ACCOUNT' === data.rowType) || ('SYMBOL' === data.rowType))","posweb-row-position":"data && data.rowType && (('POSITION'  === data.rowType) || ('POSITION_CORE' === data.rowType))","posweb-row-core":"data && data.rowType && ('POSITION_CORE'  === data.rowType)","posweb-row-intraday":"data && data.meta && (true === data.meta.isIntradayActivity)","posweb-row-pending_activity":"data && data.rowType && ('PENDING' === data.rowType)","posweb-row-fixed_income":"data && data.meta && (true === data.meta.isFixedIncome)","posweb-row-crypto":"data && data.meta && ('Crypto' === data.meta.acctType)","posweb-row-ungrouped":e=>e.context&&"2"===e.context.groupBy,"posweb-row-total":"data && data.rowType && (('ACCOUNT_TOTAL' === data.rowType) || ('SYMBOL_TOTAL' === data.rowType))","posweb-row-spacer":"data && data.rowType && ('SPACER' === data.rowType)","posweb-row-spacer-aha-symbol":"data && data.rowType && data.rowSubType && ('SPACER' === data.rowType) && ('AHAS' === data.rowSubType)","posweb-row-grand_total":"data && data.rowType && ('GRAND_TOTAL' === data.rowType)","posweb-row-assets_held_away":"data && data.rowType && ('ASSETS_HELD_AWAY' === data.rowType)","posweb-row-assets_held_away-symbol":"data && data.rowType && data.rowSubType && ('ASSETS_HELD_AWAY' === data.rowType) && ('SAHA' === data.rowSubType)","posweb-row-away_total":"data && data.rowType && ('AWAY_TOTAL' === data.rowType)","posweb-row-position_drawer_disabled":"data && data.meta && (true === data.meta.isDrawerDisabled)","posweb-row-no_positions":"data && data.rowType && (['NO_POSITIONS', 'NO_MATCHED_POSITIONS', 'NO_CLOSED_POSITIONS', 'INELIGIBLE_CLOSED_POSITIONS'].indexOf(data.rowType) > -1)","posweb-row-na_positions":"data && data.rowType && ('NA_POSITIONS' === data.rowType)","posweb-row-unsupt_account":"data && data.rowType && ('UNSUPT_ACCOUNT' === data.rowType)","posweb-row-account_msg":"data && data.rowType && ('ACCOUNT_MSG' === data.rowType)","posweb-row-sleeve_group":'node && node.group && (true === node.group) && (node.rowGroupColumn.getColId() === "slv")',"posweb-row-sleeve":"data && data.rowSubType && ('SLV' === data.rowSubType)","posweb-row-sleeve_subtotal":"data && data.rowType && ('SLEEVE_SUBTOTAL' === data.rowType)","posweb-row-basket_group":'node && node.group && (true === node.group) && (node.rowGroupColumn.getColId() === "basket")',"posweb-row-basket":"data && data.rowSubType && ('BSK' === data.rowSubType)","posweb-row-basket_subtotal":"data && data.rowType && ('BASKET_SUBTOTAL' === data.rowType)","posweb-row-gsp_subtotal":"data && data.rowType && ('GBS_TOTAL' === data.rowType)","posweb-row-security_group":'node && node.group && (true === node.group) && (node.rowGroupColumn.getColId() === "groupBySecurity")',"posweb-row-security-pos":"data && data.rowSubType && ('GSP' === data.rowSubType)","posweb-row-closed-pos-account-group":'node && node.group && (true === node.group) && (node.rowGroupColumn.getColId() === "actGroup")',"posweb-row-closed-position":"data && data.meta && (true === data.meta.isClosedPositions)","posweb-row-closed-pos-pending-update":"data && data.rowType && ('PENDING_UPDATE' === data.rowType)"}}static getRowHeight(e,t=r.POSWEB_PRESET_VIEW.OVERVIEW){var s,o,i,a,n,l,d;let c=r.POSWEB_PRESET_VIEW.STACK_OVERVIEW===t?40:38;if(e)if(null===(s=e.node)||void 0===s?void 0:s.detail)c=48;else if(null===(o=e.data)||void 0===o?void 0:o.rowType)if("PENDING"===e.data.rowType)c=30;else if("SPACER"===e.data.rowType)c=56;else if("ACCOUNT"!==e.data.rowType&&"SYMBOL"!==e.data.rowType||!(null===(i=e.data.meta)||void 0===i?void 0:i.acctActns)&&!(null===(a=e.data.meta)||void 0===a?void 0:a.isAcctBasketEligible)&&"External"!==(null===(n=e.data.meta)||void 0===n?void 0:n.acctType)||"Crypto"===e.data.meta.acctType&&!h.WindowService.getToggle("ap126216_PWE_Crypto_Basket"))if("NO_POSITIONS"===e.data.rowType){const t=4;c=v.isNoPositionsButtonDisplay(e.data)?e.totalNoOfAccts>1?87+t:91+t:50}else"POSITION"!==e.data.rowType&&"POSITION_CORE"!==e.data.rowType||!(null===(l=e.data.meta)||void 0===l?void 0:l.isFixedIncome)?"NO_MATCHED_POSITIONS"!==e.data.rowType&&"NO_CLOSED_POSITIONS"!==e.data.rowType&&"INELIGIBLE_CLOSED_POSITIONS"!==e.data.rowType||(c=50):c=51;else c=48;else(null===(d=e.node)||void 0===d?void 0:d.group)&&!e.data&&"slv"===e.node.rowGroupColumn.getColId()&&(c=62);return c}static isFullWidthRow(e){return["ACCOUNT","SYMBOL","NO_POSITIONS","UNSUPT_ACCOUNT","NO_MATCHED_POSITIONS","NA_POSITIONS","SPACER","GROUP","ACCOUNT_MSG","NO_CLOSED_POSITIONS","INELIGIBLE_CLOSED_POSITIONS"].indexOf(e)>-1}static prepareRowDismissBtns(e){const t=w.PoswebUtils.htmlQuerySelectorAll(".posweb-row-dismiss-btn"),s=w.PoswebUtils.getHtmlElement("positions--dismiss-row-id");t&&t.forEach(t=>{t.onclick=()=>{const a=t.getAttribute("dismiss-target"),r=u.PoswebSettings.getPageVersion();if("basket-promotion-row"===a){e.api.forEachNode(e=>{var t;e.setSelected("BASKET_MSG"===(null===(t=e.data)||void 0===t?void 0:t.rowSubType))}),i.MetricsService.sendMetricsRequest("Basket_Promotion_Dismiss",o.MetricsActionTypes.INTERACTION,r);(new c.PoswebGridService).saveStateData({entry:[{key:"showBasketMsg",value:"false"}]}).subscribe(),h.WindowService.getPositionSettings().showBasketMsg=!1}else if("gbs-setting-row"===a){e.api.forEachNode(e=>{var t;e.setSelected("GBS_MSG"===(null===(t=e.data)||void 0===t?void 0:t.rowSubType))}),i.MetricsService.sendMetricsRequest("GroupBySecurity_Row_Msg_Dismiss",o.MetricsActionTypes.INTERACTION,r);(new c.PoswebGridService).saveStateData({entry:[{key:"showGbsMsg",value:"false"}]}).subscribe(),h.WindowService.getPositionSettings().showGbsMsg=!1}else e.api.forEachNode(e=>{var t;e.setSelected("PZN_FPL_ACCT_ELIGIBLE"===(null===(t=e.data)||void 0===t?void 0:t.rowSubType))});const n=e.api.getSelectedRows();e.api.applyTransaction({remove:n});const l=v.getCurrentFplTreatment();l&&(i.MetricsService.sendMetricsRequest("FPLInlineDismiss",o.MetricsActionTypes.INTERACTION,r,i.MetricsService.setMetricsTrans([l],"dismiss")),v.removeFplTreatmentFromPznArray()),s&&s.click()}})}static getCurrentFplTreatment(){if(!h.WindowService.getProperty(d.PoswebConstants.PWE_PZN_TREATMENTS))return null;const e=h.WindowService.getProperty(d.PoswebConstants.PWE_PZN_TREATMENTS).filter(e=>v.FPL_TREATMENT_NAMES_ARRAY.indexOf(e.name)>-1);return e&&e.length>0?e[0]:null}static removeFplTreatmentFromPznArray(){h.WindowService.getWindow()[d.PoswebConstants.PWE_PZN_TREATMENTS]=h.WindowService.getProperty(d.PoswebConstants.PWE_PZN_TREATMENTS).filter(e=>v.FPL_TREATMENT_NAMES_ARRAY.indexOf(e.name)<0)}static isNoPositionsButtonDisplay(e){var t;let s=!0;return(n.POSWEB_SETTINGS_GROUPBY.SYMBOL===v.getGroupBy()||e.meta&&(e.meta.hasPendingActivity&&(0===(null===(t=e.meta.pendingActVal)||void 0===t?void 0:t.indexOf("-"))||!e.meta.isTradable)||!e.meta.hasPendingActivity&&(e.meta.isSelfDrtBrkAccount||e.meta.isNotAccountOwner||e.meta.isWIAccount)||"External"===e.meta.acctType))&&(s=!1),s}static setupVisibilityForPortfolioEventsDisclosure(e,t=!1){switch(e){case r.POSWEB_PRESET_VIEW.OVERVIEW:case r.POSWEB_PRESET_VIEW.STACK_OVERVIEW:case r.POSWEB_PRESET_VIEW.DIVIDEND_VIEW:case r.POSWEB_PRESET_VIEW.MY_VIEW:v.updateLegendElement(h.WindowService.getToggle("ap126216_Open_Orders_Enabled")&&t,"posweb-legend-openOrder-crypto"),v.updateLegendElement(h.WindowService.getToggle("ap126216_Open_Orders_Enabled")&&!t,"posweb-legend-openOrder"),v.updateLegendElement(!0,"posweb-legend-earnings"),v.updateLegendElement(!0,"posweb-legend-distribution");break;case r.POSWEB_PRESET_VIEW.FUND_PERF_VIEW:default:v.updateLegendElement(!1,"posweb-legend-openOrder"),v.updateLegendElement(!1,"posweb-legend-openOrder-crypto"),v.updateLegendElement(!1,"posweb-legend-earnings"),v.updateLegendElement(!1,"posweb-legend-distribution")}}static updateLegendElement(e,t){w.PoswebUtils.updateElementStyle(t,e?"table-row":"none")}static enterMasterDetailRow(e,t=void 0){if(e){const s=w.PoswebUtils.getHtmlElement("posweb-drawer-header-navigation-"+e.id);if(s){const o=s.parentElement,i=Array.from(o.parentElement.querySelectorAll('button, a, [tabindex]:not([tabindex="-1"]):not([hidden="hidden"]'));void 0===t||t.rowIndex===e.rowIndex?i[0].focus():i[i.length-1].focus(),o.addEventListener("keydown",e=>{if("Escape"===e.key){s.nextElementSibling.querySelector('[aria-label="Close Drawer"]').click()}})}}}static exitMasterDetailRow(e,t="up"){if(e){const s="up"===t?e.rowIndex:e.rowIndex+2;e.beans.gridApi.setFocusedCell(s,"sym"),v.focusCellActionableElements(e.beans.gridApi,e.beans.gridApi.getDisplayedRowAtIndex(s),"sym","up"===t)}}static gridCellKeyDown(e,t){const s=[" ","Enter"];if(null==t?void 0:t.event){const{ctrlKey:o,key:i,metaKey:a}=t.event,{api:r,node:n}=t,l=r,d=l.getColumn("sym"),c=l.getAllDisplayedColumns().slice(-1)[0],p=t.node;if((a||o)&&(i&&"ArrowLeft"===i&&v.focusCellActionableElements(l,n,d.colId),i&&"ArrowRight"===i&&l.setFocusedCell(p.rowIndex,c)),s.indexOf(i)>-1){t.event.preventDefault();const{target:s}=t.event,o=null==s?void 0:s.querySelector(".posweb-cell-popover-trigger");"header"===e?s.click():o&&o.click()}}}static navigateToNextPrevHeader(e){var t;const{api:s,nextHeaderPosition:o,previousHeaderPosition:i}=e,a=s,r=a.getAllDisplayedColumns().slice(-1)[0],n=a.getDisplayedRowAtIndex(0),l=(null===(t=n.data)||void 0===t?void 0:t.rowType)||"GROUP";let d=(null==o?void 0:o.column)||i.column;return(null==o?void 0:o.headerRowIndex)&&-1===o.headerRowIndex?(v.isFullWidthRow(l)&&"sym"!==d.colId&&(d=a.getColumn("sym")),v.focusCellActionableElements(a,n,d.colId),{headerRowIndex:-1,column:d}):o||i.column.colId!==r.colId?e.nextHeaderPosition:(d=a.getColumn("sym"),v.focusCellActionableElements(a,n,d.colId),{headerRowIndex:-1,column:d})}static navigateToNextPrevCell(e,t){var s,o,i,a;const r={ArrowLeft:"left",ArrowUp:"up",ArrowRight:"right",ArrowDown:"down"},{api:n,nextCellPosition:l,previousCellPosition:d}=t,c=n;let p="";if(p="navigate"===e?r[t.key]:t.backwards?"tab-left":"tab-right",!l&&"tab-right"===p)return!1;if(!l&&0===d.rowIndex&&"sym"===d.column.colId){return{rowIndex:-1,rowPinned:null,column:c.getAllDisplayedColumns().slice(-1)[0]}}if(l&&d){let e=!1;for(;!e;){const t=l.rowIndex,r=c.getDisplayedRowAtIndex(t),n=t>-1?(null===(s=r.data)||void 0===s?void 0:s.rowType)||("basket"===(null===(o=r.rowGroupColumn)||void 0===o?void 0:o.getColId())||"actGroup"===(null===(i=r.rowGroupColumn)||void 0===i?void 0:i.getColId())||"groupBySecurity"===(null===(a=r.rowGroupColumn)||void 0===a?void 0:a.getColId())?"":"GROUP"):"HEADER";let u=l.column;(null==r?void 0:r.detail)?(l.column=c.getColumn("sym"),setTimeout(()=>v.enterMasterDetailRow(r.parent,d)),e=!0):v.isFullWidthRow(n)?"sym"===u.colId?"SPACER"!==n&&(e=!0):(u=l.column=c.getColumn("sym"),["up","down","right","left","tab-left"].indexOf(p)>-1&&"SPACER"!==n&&(e=!0)):e=!0,e?r&&!r.detail&&v.focusCellActionableElements(c,r,u.colId,["left","up","tab-left"].indexOf(p)>-1):["up","tab-left"].indexOf(p)>-1?l.rowIndex--:l.rowIndex++}}return l}static focusCellActionableElements(e,t,s,o=!1){const i=e.getCellRendererInstances({columns:[s],rowNodes:[t]});i[0]&&i[0].focusActionableItems(o)}static toggleRowExpanded(e){var t,s,a,r,n;if((null==e?void 0:e.node)&&!e.node.detail&&(e.data&&["POSITION","POSITION_CORE"].indexOf(e.data.rowType)>-1&&(!e.data.meta||!e.data.meta.isDrawerDisabled)||e.node.group)){const d=e.api.getCellRendererInstances({columns:["sym"],rowNodes:[e.node]});if(d[0].rowExpandToggled(!e.node.expanded),e.node.setExpanded(!e.node.expanded),null===(a=null===(s=null===(t=e.data)||void 0===t?void 0:t.node)||void 0===s?void 0:s.id)||void 0===a?void 0:a.includes("groupBySecurity")){const t=null===(r=d[0]._eGui)||void 0===r?void 0:r.querySelector(".posweb-caret");null==t||t.setAttribute("pvd-name","action__caret-"+(e.node.expanded?"up":"down"))}if(e.node.expanded||l.PoswebCommon.getInstance().historyData.delete(e.node.id),void 0===e.node.parent.expanded||e.node.parent.id.includes("groupBySecurity")){let t="Drawer";const s=u.PoswebSettings.getPageVersion();if(e.node.group&&(t=e.node.data.sleeveId?"Sleeve":e.node.data.totGLCloPos?"ClosedPositions":"groupBySecurity"===(null===(n=e.node.rowGroupColumn)||void 0===n?void 0:n.colId)?"SecurityTypeGroup":"Basket"),e.node.expanded){const a="POSITION_CORE"===e.data.rowType?"expandDrawerCore":"expand"+t;i.MetricsService.sendMetricsRequest(a,o.MetricsActionTypes.INTERACTION,s)}else i.MetricsService.sendMetricsRequest("collapse"+t,o.MetricsActionTypes.INTERACTION,s)}}}static isMobileDevice(){return window.screen.width<512}static constructLWCPosSystemMessages(e,t,s=!1,o=!0,i=!1){let a,r,n;const l=[],d=w.PoswebUtils.htmlQuerySelector("#posweb-banner #posweb-lwc-error-banner"),c=(e,t,s,o)=>`<pvd3pwe-alert                 class="${e}" pvd-variant="${s}" posweb-errors="${o}">${t}</pvd3pwe-alert>`,p=e=>`\n<span>${e}</span>`;if("brkg"===e&&s&&l.push(c("posweb-columnorder-banner",p("We were unable to retrieve your custom preferences. Any customization you make to the layout in this session will not be saved."),"warning","colorder")),!0===(null==t?void 0:t.basErr)&&(v.isGroupByBasket(i)?l.push(c("posweb-basket-warning-banner",p("Grouping details for some baskets are currently unavailable. We are urgently working to restore service."),"warning","basket")):l.push(c("posweb-basket-warning-banner",p("Basket details are currently unavailable. We are urgently working to restore service."),"warning","basket")),t.basErr=!1),t){for(const e in t)t[e]&&"balErr"!==e&&(a=a?o?"posErr":"lwcErr":e);if("brkgErr"!==a&&t.balErr&&(a?n="balErr":a="balErr"),a){r=a+(n?","+n:"");let t="critical";switch(a){case"lwcErr":default:a="Positions for some accounts are currently unavailable. We are urgently working to restore service.";break;case"balErr":t="warning",a="Pending debit and credit balances are currently unavailable. We are urgently working to restore service.";break;case"brkgErr":a="Positions for your brokerage accounts are currently unavailable. We are urgently working to restore service.";break;case"extErr":a="Positions for external accounts are currently unavailable. We are urgently working to restore service.";break;case"filiErr":a="Positions for some annuity accounts are currently unavailable. We are urgently working to restore service.";break;case"fundErr":a="Fund Performance is currently unavailable. We are urgently working to restore service.";break;case"rmaErr":a="Positions for some managed accounts are currently unavailable. We are urgently working to restore service.";break;case"wiErr":a="Positions for some workplace accounts are currently unavailable. We are urgently working to restore service.";break;case"spsErr":a="Details for some stock plans are currently unavailable. We are urgently working to restore service.";break;case"cryptoErr":a="Cryptocurrency positions are currently unavailable. We are working urgently to restore service.";break;case"cloPosErr":a="Closed Positions for some accounts are currently unavailable. We are urgently working to restore service.";break;case"qteErr":a="Quote details are currently unavailable for Myview. We are urgently working to restore service.";break;case"newsErr":a="News service is currently unavailable for MyView. We are urgently working to restore service."}a=p(a),n=n?p("Pending debit and credit balances are currently unavailable. We are urgently working to restore service."):"",l.unshift(c(`posweb-${e}-error-banner`,a+n,t,r))}}l.length>0&&d&&(d.insertAdjacentHTML("brkg"===e?"afterbegin":"beforeend",(t=>`<div class="posweb-${e}-error-banners">${t}</div>`)(l.join("\n"))),w.PoswebUtils.updateElementStyle("posweb-lwc-error-banner","block"))}static resetLWCPosSystemMessages(){const e=w.PoswebUtils.htmlQuerySelector("#posweb-banner #posweb-lwc-error-banner");if(e){const t=e.querySelector(".posweb-sps-error-banners"),s=e.querySelector(".posweb-brkg-error-banners");t&&e.removeChild(t),s&&e.removeChild(s)}}static resetEventsSystemMessages(){w.PoswebUtils.updateElementStyle("posweb-open-order-warning-banner","none"),w.PoswebUtils.updateElementStyle("posweb-open-order-individual-account-warning-banner","none"),w.PoswebUtils.updateElementStyle("posweb-earnings-warning-banner","none"),w.PoswebUtils.updateElementStyle("posweb-closed-lots-download-warning-banner","none"),w.PoswebUtils.updateElementStyle("posweb-closed-lots-download-progress-banner","none"),this.setLwcErrorBannerDisplay()}static setLwcErrorBannerDisplay(){const e=w.PoswebUtils.htmlQuerySelector("#posweb-banner #posweb-lwc-error-banner");if(5===e.children.length){let t=!1;for(let s=0;s<5;s++){"none"!==e.children[s].style.display&&(t=!0)}t||w.PoswebUtils.updateElementStyle("posweb-lwc-error-banner","none")}}static getDisplayColor(e){let t="";return e&&(e.indexOf("+")>-1?t=" posweb-cell-gain":e.indexOf("-")>-1&&e.indexOf("--")<0&&(t=" posweb-cell-loss")),t}static getPweContainerWidth(){const e=w.PoswebUtils.htmlQuerySelector(".positions-web-experience");return e&&e.parentElement?e.parentElement.clientWidth:0}static getRowID(e){var t;return(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.meta)?e.data.meta.rowId.toString():"0"}static attachClickListener(e,t,s){const o=e.querySelector(t);return o&&(o.onclick=s),o}static closeSortPopOver(e=""){var t;const s=e?document.getElementById(`posweb-tt-popover-header-${e}`):null===(t=document.querySelector(".pwe-popover-sizer"))||void 0===t?void 0:t.firstElementChild;null==s||s.hideFunc()}static getGroupBy(){return h.WindowService.getPositionSettings().groupBy||n.POSWEB_SETTINGS_GROUPBY.ACCOUNT}static getCurrentSelectedPresetView(){return w.PoswebUtils.getHtmlElement("posweb-grid_top-presetviews-dropdown").pvdSelectedValue}static shouldUseStackView(){var e;const t=b.PoswebStore.getInstance().store.getState().settings;return window.innerWidth<1600&&(null===(e=null==t?void 0:t.stackedPosition)||void 0===e||e)}static setGridCaptionSummary(e,t,s){if(t){const o="Positions screen reader user recommendations - "+(s?'For best screen reader user experience, please unpin the symbol column. You can do that by going to settings and unchecking the "Pin Symbol column to the left" checkbox. ':"")+"The grid can be navigated using either screen reader browse mode, (using table navigation commands), or using the arrow keys to navigate between cells (in application/forms mode). Pressing spacebar or enter with focus on a cell in a position row opens a drawer in the following row, focus is placed on the first button in that drawer. It's best to navigate the drawer using screen reader browse mode, especially if you want to review the static research data under the tabs.",i=e.parentElement.querySelector("#brokerage-positions-recommendations");i?i.innerHTML=o:(e.insertAdjacentHTML("beforebegin",`<h3 id="brokerage-positions-recommendations" class="screen-reader-only">${o}</h3>`),e.insertAdjacentHTML("beforebegin",'<div id="brokerage-positions-description" style="display: none;">Navigate to the previous h3 heading for screen reader user recommendations.</div>')),t.setGridAriaProperty("label","Brokerage Positions"),t.setGridAriaProperty("describedby","brokerage-positions-description")}else console.error("--- Unable to set Grid accessibility caption/summary")}static getSubscribeObserver(e,t,s){return{next:s,error:o=>{console.error(e,o),s(new Error(t))}}}static retrieveSettings(e=!1,t=d.PoswebConstants.SETTINGS_FILTER_KEY){const s={groupBy:v.getGroupBy(),filter:h.WindowService.getPositionSettings()[t]||"",gbsMsgSeenDates:h.WindowService.getPositionSettings().gbsMsgSeenDates||"",isUnadjusted:h.WindowService.getPositionSettings().isUnadjusted||!1,isShowForeignStocks:h.WindowService.getPositionSettings().isShowForeignStocks||!1,showBasketMsg:h.WindowService.getPositionSettings().showBasketMsg||!1,showGbsMsg:h.WindowService.getPositionSettings().showGbsMsg||!1,isPriorDayGL:h.WindowService.getPositionSettings().isPriorDayGL||!1},o=v.isGroupByBasket(e);return t===d.PoswebConstants.SETTINGS_FILTER_KEY&&v.getCurrentSelectedPresetView()!==r.POSWEB_PRESET_VIEW.FUND_PERF_VIEW&&(s.additionalFilter=h.WindowService.getPositionSettings()[d.PoswebConstants.SETTINGS_ADDITIONAL_FILTER_KEY]||""),void 0!==o&&(s.isGroupByBasket=o),s}static retrieveToggles(){return{ap126216_PWE_Baskets_Row_Message:h.WindowService.getToggle("ap126216_PWE_Baskets_Row_Message")||!1,ap126216_PWE_Alt_Inv_Cost_Basis_Info:h.WindowService.getToggle("ap126216_PWE_Alt_Inv_Cost_Basis_Info")||!1,ap126216_PWE_Custom_Columns:h.WindowService.getToggle("ap126216_PWE_Custom_Columns")||!1}}static getGroupByBasketInSettings(){return void 0===h.WindowService.getPositionSettings().isGroupByBasket||h.WindowService.getPositionSettings().isGroupByBasket}static getGroupBySecurityTypeInSettings(){return h.WindowService.getPositionSettings().isGroupBySecurityType}static isGroupByBasket(e=!1){let t;return e&&n.POSWEB_SETTINGS_GROUPBY.ACCOUNT===v.getGroupBy()&&(t=v.getGroupByBasketInSettings()),t}static isAccountHasFSAndShow(){return p.PoswebMetadata.getInstance().hasForeignSecurities&&v.retrieveSettings().isShowForeignStocks}static isLowerBrowserWidth(){return window.innerWidth<550}static initialGroupOrderComparator(e){var t,s;if("groupBySecurity"===(null===(t=e.nodeA.rowGroupColumn)||void 0===t?void 0:t.colId)&&"groupBySecurity"===(null===(s=e.nodeB.rowGroupColumn)||void 0===s?void 0:s.colId)){const t=v.getSecurityGroupSortingOrder(e.nodeA),s=v.getSecurityGroupSortingOrder(e.nodeB);if(v.getSecurityGroupAcctNumber(e.nodeA)===v.getSecurityGroupAcctNumber(e.nodeB))return t<s?-1:t>s?1:0}const o=v.getLowestIdFromNode(e.nodeA),i=v.getLowestIdFromNode(e.nodeB);return o<i?-1:o>i?1:0}static getLowestIdFromNode(e){if(e.childrenAfterGroup){let t;return e.childrenAfterGroup.forEach(e=>{const s=v.getLowestIdFromNode(e);(void 0===t||s<t)&&(t=s)}),t}return e.data.meta.rowId}static getPznFPLInlineContentAndButton(){let e="",t="",s="";const o=p.PoswebMetadata.getInstance().pznFPLReviewLinkUrl,i=v.getCurrentFplTreatment(),a="FPLInlineLearnMore",r="FPLInlineReview";return i?("PWE-FPL-Banner-Inline-Review"===i.name?(e="Review",t="This account could earn you additional income by lending eligible securities.",s=`poswebex.poswebGrid.accessMetrics('${r}','',true);window.open('${o}', '_blank')`):"PWE-FPL-Inline-Review"===i.name?(e="Review",t="Did you know this account could earn you additional income by lending securities you already own?",s=`poswebex.poswebGrid.accessMetrics('${r}','',true);window.open('${o}', '_blank')`):"PWE-FPL-Banner-Inline-Learn-More"===i.name?(e="Learn more",t="This account could earn you additional income by lending eligible securities.",s=`poswebex.poswebGrid.accessMetrics('${a}');poswebex.poswebGrid.openFplLearnMoreModal()`):(e="Learn more",t="Did you know this account could earn you additional income by lending securities you already own?",s=`poswebex.poswebGrid.accessMetrics('${a}');poswebex.poswebGrid.openFplLearnMoreModal()`),{content:t,button:e,onClick:s}):{content:t,button:e,onClick:s}}static getMaturingFixedIncomeMsgSnippet(e){var t;if(i.MetricsService.sendMetricsRequest("fixedIncomeMaturingImpression",o.MetricsActionTypes.INTERACTION,u.PoswebSettings.getPageVersion()),!(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.msgContentDate))return"";const s=p.PoswebMetadata.getInstance(),a=` After maturity, proceeds can be viewed in <a href="${`${s.digitalDomain}/ftgw/digital/portfolio/activity#${e.actNum}`}" target="_blank" class="posweb-metrics" data-metrics="fixedIncomeMaturingActivityRowMsg">Activity & Orders</a>.`,r=` To explore more investing ideas, visit <pvd3pwe-link pvd-new-window pvd-href="${`${s.digitalDomain}/ftgw/digital/pathway/fixedincome`}" onclick="poswebex.poswebGrid.accessMetrics('fixedIncomeMaturingGetInvestedRowMsg');">Get Invested</pvd3pwe-link>.`,n=new Date(1e3*Number(e.meta.msgContentDate)).toLocaleDateString("en-US",{timeZone:"America/New_York",month:"long",day:"2-digit",year:"numeric"});let l;l=e.meta.msgMultipleAffected?`This account has multiple investments maturing starting on ${n}.`:`This account has an investment maturing on ${n}.`,l+=a+r;return`<div class="posweb-cell-maturing_fixed_income_msg-content">\n            <div class="pvd3pwe-inline-alert-root pvd-inline-alert--medium pvd-inline-alert--info">\n                <div class="pvd-inline-alert__icon">\n                    <img class="posweb-cell-symbol-fixedinc_indicator" title="Fixed Income Maturation" src="${p.PoswebMetadata.getInstance().assetUrl}assets/${p.PoswebMetadata.getInstance().version}/cd_calendar_icon.svg"/>\n                </div>\n                <div class="pvd-inline-alert__content">\n                    <span class="pvd-inline-alert__content-a11y-text">info</span>${l}\n                </div>\n            </div>\n        </div>`}static getBasketMsg(e){return i.MetricsService.sendMetricsRequest("Basket_Promotion_Impression",o.MetricsActionTypes.INTERACTION,u.PoswebSettings.getPageVersion()),`<div class="posweb-cell-account_warning_msg-content basket-promotion-row">\n                    <div class="pvd3pwe-inline-alert-root pvd-inline-alert--medium pvd-inline-alert--info posweb-inline-alert--dismiss">\n                        <div class="pvd-inline-alert__icon" >\n                            <img src="${e.assetUrl}assets/${e.version}/basket_indicator_icon.svg" title="Account basket eligible"/>\n                        </div>\n                        <div class="pvd-inline-alert__content">\n                            <span class="pvd-inline-alert__content-a11y-text">link opens in new window</span>\n                            Managing your positions is easier and faster than ever. Group your positions into customizable portfolios with Fidelity Basket Portfolios.\n                            <a href="javascript:void(0);" onclick="poswebex.poswebGrid.accessMetrics('Basket_Promotion_Learn_More_Click','Account');window.open('https://www.fidelity.com/direct-indexing/customized-investing/overview', '_blank')" >Learn more</a>\n                        </div>\n                        <button aria-label="Dismiss message" class="pvd-btn btn-anchor posweb-row-dismiss-btn" dismiss-target="basket-promotion-row">\n                            <pvd3pwe-icon pvd-name="action__close" pvd-size="extra-small" class="posweb-icon-close"></pvd3pwe-icon>\n                        </button>\n                    </div>\n                </div>`}static getGbsMsg(){return i.MetricsService.sendMetricsRequest("GroupBySecurity_Row_Msg_Impression",o.MetricsActionTypes.INTERACTION,u.PoswebSettings.getPageVersion()),'<div class="posweb-cell-account_warning_msg-content">\n                    <div class="pvd3pwe-inline-alert-root pvd-inline-alert--medium pvd-inline-alert--info posweb-inline-alert--dismiss">\n                        <div class="posweb-gbs-list__icon">\n                          <pvd3pwe-icon pvd-name="action__sort-by-list" pvd-size="small" class="posweb-gbs-list-icon" >\n                        </div>\n                        </pvd3pwe-icon>\n                        <div class="pvd-inline-alert__content">\n                            <span class="pvd-inline-alert__content-a11y-text">available by accessing settings menu</span>\n                            You can now view your positions grouped by investment type.  This view can be enabled in settings.\n                        </div>\n                        <button aria-label="Dismiss message" class="pvd-btn btn-anchor posweb-row-dismiss-btn" dismiss-target="gbs-setting-row">\n                            <pvd3pwe-icon pvd-name="action__close" pvd-size="extra-small" class="posweb-icon-close"></pvd3pwe-icon>\n                        </button>\n                    </div>\n                </div>'}static getWashSalesPopover(e,t){const s=e?"unadjusted":"adjusted",o=crypto.randomUUID();return`<button class="pvd-btn btn-anchor posweb-cell-cost_basis_btn" id="posweb-cell-cost_basis_button-${t}-${o}" aria-label="Learn more about cost basis wash sale" onclick="event.stopPropagation();">${e?`<img alt="Unadjusted Wash Sale" id="posweb-cell-cost_basis-${s}-wash_sale_icon-${t}-${o}" class="posweb-cell-wash_sale" data-testid="unadjwashsale-icon"src="${p.PoswebMetadata.getInstance().assetUrl}assets/${p.PoswebMetadata.getInstance().version}/unadjusted_wash_sale_icon.svg"/>`:`<img alt="Adjusted Wash Sale" id="posweb-cell-cost_basis-${s}-wash_sale_icon-${t}-${o}" class="posweb-cell-wash_sale" data-testid="washsale-icon" src="${p.PoswebMetadata.getInstance().assetUrl}assets/${p.PoswebMetadata.getInstance().version}/wash_sale_icon.svg"/>`}</button>\n        <pwe-popover class="posweb-cell-cost_basis_popover" role="dialog" show-elem=".positions-web-experience" for="posweb-cell-cost_basis_button-${t}-${o}" id="posweb-cell-cost_basis_popover-${t}-${o}" zindex="40" additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport" popover-hide-top_bottom=".ag-body-viewport" popover-hide-left_right=".ag-body-viewport">\n        <div class="posweb-cell-cost_basis_popover_content">\n            <h5>${e?"Unadjusted wash sale":"Wash sale"}</h5>\n            <hr>\n            <p id="posweb-cell-cost_basis_popover-${t}-${o}">${e?"You have selected to view unadjusted cost basis for positions with a wash sale. You can change this preference in settings above the positions table.":"The cost basis is adjusted by a disallowed loss from a wash sale. Select the position to view Purchase History for more details."}</p>\n        </div>\n        </pwe-popover>\n        <pwe-tooltip\n            show-on-hover="true"\n            show-elem=".positions-web-experience"\n            for="posweb-cell-cost_basis-${s}-wash_sale_icon-${t}-${o}"\n            id="posweb-cell-cost_basis_tooltip-${t}-${o}"\n            class="posweb-cell_tooltip">\n            <p>${e?"Unadjusted by wash sale":"Wash sale"}</p>\n            <span>(Click icon for details)</span>\n        </pwe-tooltip>\n        `}static getMarginShortPopover(e,t,s){if(!t||!s||["Margin","Short"].indexOf(t)<0)return"";const o=`<img alt="${t} position" id="posweb-cell-${t.toLowerCase()}_icon-${e}" class="posweb-cell-${t.toLowerCase()}_icon" src="${p.PoswebMetadata.getInstance().assetUrl}assets/${p.PoswebMetadata.getInstance().version}/${t.toLowerCase()}_icon.svg"/>`,i="Margin"===t?"This position is held in margin in your account. This does not automatically mean you are borrowing on margin. To view more details, please visit":"This position is held short in your account. To view more details, please visit";return`<button class="pvd-btn btn-anchor posweb-cell-quantity_btn" id="posweb-cell-quantity_button-${e}" aria-label="Learn more about your ${t.toLowerCase()} position" onclick="event.stopPropagation();">${o}</button>\n        <pwe-popover class="posweb-cell-quantity_popover" role="dialog" show-elem=".positions-web-experience" for="posweb-cell-quantity_button-${e}" id="posweb-cell-quantity_popover-${e}" zindex="40" additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport" popover-hide-top_bottom=".ag-body-viewport" popover-hide-left_right=".ag-body-viewport">\n        <div class="posweb-cell-quantity_popover_content">\n            <h5>${t} position</h5>\n            <hr>\n            <p id="posweb-cell-quantity_popover-${e}">${i} <a class="posweb-cell-quantity_link href="javascript:void(0);" onclick= "event.preventDefault();poswebex.poswebGrid.navigateToBalances()">Balances</a>.</p>\n        </div>\n        </pwe-popover>\n        <pwe-tooltip\n          show-on-hover="true"\n          show-elem=".positions-web-experience"\n          for="posweb-cell-${t.toLowerCase()}_icon-${e}"\n          id="posweb-cell-${t.toLowerCase()}_tooltip-${e}"\n          class="posweb-cell_tooltip">\n          <p>${t} position</p>\n          <span>(Click icon for details)</span>\n        </pwe-tooltip>\n        `}static getGroupOpenByDefault(){if(v.getCurrentSelectedPresetView()===r.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW){const e=Object.keys(l.PoswebCommon.getInstance().actGroupData);if(e&&1===e.length)return!0}return!1}static getDisclaimerSnippet(e,t){return`<p class=${e}>${t?"Today's gain/loss data resets daily before the market opens. Some securities, such as mutual funds, are not priced until after the market closes.":"Some securities, such as mutual funds, are not priced until after the market closes."}</p>`}static getAccountBrandingLabel(e,t){let s,o,i,a="";return e&&(i=e.accounts.find(e=>{var s;return e.accountId===t.actNum&&(null===(s=t.meta)||void 0===s?void 0:s.isMngAcct)})),i=i||t,i&&(i.isMngAcct||i.portfolioAdvisoryServicesAccount)&&(["UFD","FGO","DMA","PPA"].includes(i.productCode)||"1ON1"!==i.svcModelCode?"MASMA"===i.productCode&&"DIGITAL"===i.svcModelCode?s=i.strategyName&&i.productFullName?`${i.productFullName}: ${i.strategyName}`:i.productFullName:["DMA","UFD","FGO"].indexOf(i.productCode)>-1&&(s=i.productFullName):s=i.strategyName,s&&(o=s.replace(/℠/g,"<sup>℠</sup>").replace(/®/g,"<sup>®</sup>"),a=`<div class="posweb-trade_branding">\n                <div class="posweb-trade_branding-item_container">\n                    <img class="branding-icon"\n                    src="${p.PoswebMetadata.getInstance().assetUrl}assets/${p.PoswebMetadata.getInstance().version}/managed_indicator_icon.svg"\n                    alt="The positions held in this account are being managed by Fidelity"\n                    title="The positions held in this account are being managed by Fidelity">\n                    <div class="branding-content">${o}</div>\n                </div></div>`)),a}static updateColumnOrder(e,t){return r.POSWEB_PRESET_VIEW.DIVIDEND_VIEW===t&&(e=-1===(null==(e=-1===(null==(e=-1===(null==e?void 0:e.search(/\bestAnuInc\b/))?e+",estAnuInc":e)?void 0:e.search(/\bdistYld\b/))?e.replace(/\byld\b/,"distYld"):e)?void 0:e.search(/\bsecYld\b/))?e.replace(/\bdistYld\b/,"distYld,secYld"):e),e}static getSearchValue(){const{searchValue:e=""}=h.WindowService.getPositionSettings()[d.PoswebConstants.SETTINGS_SEARCH]||{};return e}static getNewIconTemplate(e){return`<img\n          title="New"\n          class="${e||""}"\n          src="${p.PoswebMetadata.getInstance().assetUrl}assets/${p.PoswebMetadata.getInstance().version}/new_icon_notifier.svg"\n          alt="New icon" />`}static getSecurityGroupSortingOrder(e){const t=e.key.split("-")[1];return["EQUITY","ETF","REIT_UIT_LPS","OPTION","WARRANTS","MUTUAL_FUND","CERTIFICATE_OF_DEPOSIT_BOND","ANNUITY","DIGITAL_CURRENCY","CORE","FOREIGN_CASH","OTHERS"].indexOf(t)}static getSecurityGroupAcctNumber(e){return e.key.split("-")[0]}static displayOnlyVisibleColumns(e,t){const s=e.getColumnDefs(),r=["slv","basket","groupBySecurity"],{myViewSelCols:n}=h.WindowService.getPositionSettings(),l=n?n.split(","):[],d=s.map(e=>!l.includes(e.colId)||r.includes(e.colId)?Object.assign(Object.assign({},e),{hide:!0}):Object.assign(Object.assign({},e),{hide:!1}));if(e.setColumnsVisible(l,!0),e.applyColumnState({state:d,applyOrder:!0}),n)i.MetricsService.sendMetricsRequest("my view loading completed",o.MetricsActionTypes.PAGEVIEW,"my view",void 0,"has view"),w.PoswebUtils.updateElementStyle("posweb-message-box-no-cols","none");else{w.PoswebUtils.updateElementStyle("posweb-grid","none"),w.PoswebUtils.updateElementStyle("posweb-message-box-no-cols","flex"),w.PoswebUtils.updateElementStyle("posweb-legend-main","none");const e=w.PoswebUtils.htmlQuerySelector(".posweb-my-view-btn");e.setAttribute("pvd-disabled","false"),i.MetricsService.sendMetricsRequest("create my view",o.MetricsActionTypes.INTERACTION,"my view",void 0,"no view yet"),e&&!e.onclick&&(e.onclick=()=>{a.MyViewModalComponent.initializeMyViewModal(t)})}}}t.PoswebGridUtils=v,v.FPL_TREATMENT_NAMES_ARRAY=["PWE-FPL-Inline-Review","PWE-FPL-Inline-Learn-More","PWE-FPL-Banner-Inline-Review","PWE-FPL-Banner-Inline-Learn-More"]},60942:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebGridService=void 0;const o=s(88554);t.PoswebGridService=class{constructor(){this._httpClient=new o.PoswebHttpFactoryService}retrieveOpenLotsData(e){return this._httpClient.post("api/openlots",e)}retrieveOpenOrders(e){return this._httpClient.post("api/openorders",e)}retrieveEarningsData(e){return this._httpClient.post("api/earnings",e)}retrievePositionsData(e,t){return this._httpClient.post("api/positions",t,e)}retrieveSPSPositionsData(e){return this._httpClient.post("api/spspositions",e)}retrieveFundPerfData(e){return this._httpClient.post("api/fundperformance",e)}saveStateData(e){return this._httpClient.post("api/state/save",e)}saveSessionStateData(e){return this._httpClient.post("api/state/session/save",e)}retrieveCustomStateData(e){return this._httpClient.post("api/state/custom/retrieve",e)}retrieveChangeCoreStatus(e){return this._httpClient.post("api/changecoreeligibility",e)}retrieveQuoteCardData(e){return this._httpClient.post("api/quotescard",e)}retrieveNewsCardData(e){return this._httpClient.post("api/news/headlines",e)}retrieveNewsDataMyView(e){return this._httpClient.post("api/newscolumn",e)}retrieveNewsStoryData(e){return this._httpClient.post("api/news/story",e)}retrieveMFTopTenCardData(e){return this._httpClient.post("api/mftopten",e)}retrieveClosedPositionsData(e){return this._httpClient.post("api/closedpositions",e)}retrievePznData(e){return this._httpClient.post("api/pzn",e)}retrieveClosedLotsData(e){return this._httpClient.post("api/closedlots",e)}retrieveQuoteColumnData(e){return this._httpClient.post("api/quotescolumn",e)}}},61430:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebPrint=void 0;const o=s(11908),i=s(41356),a=s(60488),r=s(35576),n=s(60132);class l{static getPrintTableSnippet(e,t,s){let o="";if(t&&e){const i=l.getPrintColList(t);o='<div class="pvd3pwe-table-root pvd-table--disable-body-text-wrap pvd-table--dense pvd-table--small"><div class="pvd-table__container"><table id="posweb-print-table" class="pvd-table__table">'+l.getColHeadersRowSnippet(i,e)+'<tbody class="pvd-table__body">',e.forEachNodeAfterFilterAndSort(e=>{o+=l.getRowSnippet(e,i,s)}),o+="</tbody></table></div></div></div>"}return o}static getPrintColList(e){let t,s,o,a,r,n=[];return e&&(n=e.split(","),(t=n.indexOf("slv"))>-1&&n.splice(t,1),(s=n.indexOf("basket"))>-1&&n.splice(s,1),(r=n.indexOf("groupBySecurity"))>-1&&n.splice(r,1),(a=n.indexOf("actGroup"))>-1&&n.splice(a,1),!i.PoswebColDefinitions.shouldDisplayActCol()&&(o=n.indexOf("act"))>-1&&n.splice(o,1)),n}static getRowSnippet(e,t,s){var i,l,d,c,p,u,b;const w=t.length;let h="";if(null==e?void 0:e.group)return"slv"===e.rowGroupColumn.getColId()?r.PoswebPrintTemplate.getSleeveAccountRowSnippet(null===(i=e.groupData)||void 0===i?void 0:i.sym,w,s):"basket"===e.rowGroupColumn.getColId()?r.PoswebPrintTemplate.getPositionsRowSnippet(e.data,t,"posweb-row-basket_group"):"actGroup"===e.rowGroupColumn.getColId()?r.PoswebPrintTemplate.getPositionsRowSnippet(e.data,t,"posweb-row-account_group"):"";switch(null===(l=null==e?void 0:e.data)||void 0===l?void 0:l.rowType){case"SYMBOL":return r.PoswebPrintTemplate.getAccountRowSnippet(null===(d=e.data.sym)||void 0===d?void 0:d.name,null===(c=e.data.sym)||void 0===c?void 0:c.desc,w,"SYMBOL");case"ACCOUNT":return r.PoswebPrintTemplate.getAccountRowSnippet(e.data.actNam,e.data.actNum,w,"ACCOUNT",null===(p=e.data.meta)||void 0===p?void 0:p.footnoteNum,e.data.meta);case"POSITION":case"POSITION_CORE":return o.POSWEB_SETTINGS_GROUPBY.SYMBOL!==a.PoswebGridUtils.getGroupBy()&&e.data.meta&&(h=e.data.meta.currencyCode,"POSITION_CORE"===e.data.rowType&&e.data.meta.symDisplayName&&(e.data.sym.name=e.data.sym.name.replace("**",""))),r.PoswebPrintTemplate.getPositionsRowSnippet(e.data,t,n.PoswebPrintUtils.getPositionRowClassList(e.data),e.id,h);case"PENDING":return r.PoswebPrintTemplate.getPendingActivityRowsSnippet(e.data,t);case"ACCOUNT_TOTAL":return a.PoswebGridUtils.isAccountHasFSAndShow()&&(h="USD"),r.PoswebPrintTemplate.getAccountTotalRowsSnippet(e.data,t,h);case"SYMBOL_TOTAL":return e.data.meta&&(h=e.data.meta.currencyCode),r.PoswebPrintTemplate.getPositionsRowSnippet(e.data,t,"posweb-row-total",null,h);case"GRAND_TOTAL":return a.PoswebGridUtils.isAccountHasFSAndShow()&&(h="USD"),r.PoswebPrintTemplate.getGrandTotalRowsSnippet(e.data,t,h);case"NA_POSITIONS":return r.PoswebPrintTemplate.getNAPositionsRowSnippet(w);case"UNSUPT_ACCOUNT":return r.PoswebPrintTemplate.getUnsuptAccountRowSnippet(w);case"ACCOUNT_MSG":return r.PoswebPrintTemplate.getAcctMsgRowSnippet(w,e.data);case"SPACER":return"AHAS"===e.data.rowSubType?r.PoswebPrintTemplate.getAssetsHeldAwaySpacerRowSnippet(w):r.PoswebPrintTemplate.getSpacerRowSnippet(w);case"SLEEVE_SUBTOTAL":return r.PoswebPrintTemplate.getPositionsRowSnippet(e.data,t,"posweb-row-sleeve_subtotal");case"BASKET_SUBTOTAL":return r.PoswebPrintTemplate.getPositionsRowSnippet(e.data,t,"posweb-row-basket_subtotal");case"GBS_TOTAL":return r.PoswebPrintTemplate.getPositionsRowSnippet(e.data,t,"posweb-row-gsp_subtotal");case"NO_POSITIONS":case"NO_MATCHED_POSITIONS":return r.PoswebPrintTemplate.getNoPosOrNoMatchPosSnippet(w,e.data);case"ASSETS_HELD_AWAY":return"SAHA"===e.data.rowSubType?r.PoswebPrintTemplate.getSymbolAssetsHeldAwayRowSnippet(null===(u=e.data.sym)||void 0===u?void 0:u.name,w):r.PoswebPrintTemplate.getAssetsHeldAwayRowSnippet(null===(b=e.data.sym)||void 0===b?void 0:b.name,w);case"AWAY_TOTAL":return r.PoswebPrintTemplate.getPositionsRowSnippet(e.data,t,"posweb-row-away_total");case"NO_CLOSED_POSITIONS":return r.PoswebPrintTemplate.getNoCloPosSnippet(w);case"PENDING_UPDATE":return r.PoswebPrintTemplate.getPendingUpdateRowSnippet(e.data,w);default:return""}}static getColHeadersRowSnippet(e,t){let s='<thead class="pvd-table__head"><tr class="pvd-table__row">';return t&&e.forEach(e=>{var o;const i=t.getColumnDef(e);if(i){const a=null===(o=t.getColumn(e))||void 0===o?void 0:o.getSort(),r="function"==typeof i.headerClass?i.headerClass():i.headerClass;let n=Array.isArray(r)?" "+r.join(" "):"";n+=a?` sort-${a}`:"",s+=`<th class="pvd-table__column-header-cell${n}" scope="col"><span class="pvd-table__column-header-cell-content">${i.headerName}</span></th>`}}),s+="</tr></thead>",s}}t.PoswebPrint=l},62199:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebHeaderStackedComponent=void 0;const o=s(60488),i=s(93535);class a{init(e){var t;this._params=e,this.elem=document.createElement("div"),this.elem.classList.add("ag-cell-label-container","ag-header-cell-sorted-none"),this.elem.setAttribute("role","presentation"),this.elem.innerHTML=this.getHTML(e),this.sortDownButton=this.elem.querySelector(".ag-sort-descending-icon"),this.sortUpButton=this.elem.querySelector(".ag-sort-ascending-icon"),this.unSortButton=this.elem.querySelector(".ag-sort-none-icon"),this.attachToolTipListeners(e),this._onSortChangedListener=this.updateIconVisibility.bind(this),null===(t=null==e?void 0:e.column)||void 0===t||t.addEventListener("sortChanged",this._onSortChangedListener)}getGui(){return this.elem}refresh(e){return!1}getHTML(e){const t=e.column.isSortAscending()?"":"ag-hidden",s=e.column.isSortDescending()?"":"ag-hidden",o=e.column.isSortAscending()||e.column.isSortDescending()?"ag-hidden":"";return`<div "aria-haspopup"="menu" "aria-controls"="posweb-header-stacked" ontouchend="poswebex.poswebUtilsHTML.stkColHdTouchEnd('.posweb-header-${e.colClass}');" ontouchstart="poswebex.poswebUtilsHTML.stkColHdTouchStart(event);" ontouchmove="poswebex.poswebUtilsHTML.stkColHdTouchMove(event);" class="posweb-stacked-header"><div ref="eLabel" class="ag-header-cell-label" role="presentation" unselectable="on"><span ref="eText" class="ag-header-cell-text" unselectable="on">${e.displayName}</span><span class="screen-reader-only">, (press Enter to open sort menu)</span><span id="asc-icon-${e.colClass}" class="ag-header-icon ag-sort-ascending-icon ${t}" aria-hidden="true"><span class="ag-icon ag-icon-asc" unselectable="on"></span></span><span id="desc-icon-${e.colClass}" class="ag-header-icon ag-sort-descending-icon ${s}" aria-hidden="true"><span class="ag-icon ag-icon-desc" unselectable="on"></span></span><span id="none-icon-${e.colClass}" class="ag-header-icon ag-sort-none-icon ${o}" aria-hidden="true"><span class="ag-icon ag-icon-none" unselectable="on"></span></span></div>${this.getPopoverHTML(e)}</div>`}getPopoverHTML(e){const t=i.PoswebMetadata.getInstance().assetUrl,{version:s}=i.PoswebMetadata.getInstance(),{sortBy:o}=e.api.getColumn(e.column.colId).colDef.headerComponentParams,a=e.column.isSortAscending(),r=e.column.isSortDescending();return`<pwe-popover close-outside="mousedown" hide-close-button="true" position="bottom" role="button" aria-haspopup="menu" aria-controls="sortMenu" show-elem=".positions-web-experience"for="posweb-header-${e.colClass}" id="posweb-tt-popover-header-${e.colClass}" zindex="1"additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport"><div class="posweb-stacked-header-popover"><div class="posweb-header-popover-title" id="menuTitle" aria-hidden="true">SORT BY</div><div class="posweb-header-popover-container" role="menu" id="sortMenu" aria-labelledby="menuTitle"><div class="posweb-header-popover-row" role="menuitem"><button id="posweb-header-popover-asc-1-${e.colClass}" class="posweb-header-popover-button posweb-header-popover-asc-1 ${"top"===o&&a?"posweb-header-popover-button-selected":""}"><img class="posweb-header-popover-asc-image" alt="" src="${t}assets/${s}/sort_ascending_black.svg"/>${e.sortByTitle1}: Lowest to Highest</button></div><div class="posweb-header-popover-row desc1" role="menuitem"><button id="posweb-header-popover-desc-1-${e.colClass}"class="posweb-header-popover-button posweb-header-popover-desc-1 ${"top"===o&&r?"posweb-header-popover-button-selected":""}"><img class="posweb-header-popover-desc-image" alt="" src="${t}assets/${s}/sort_descending_black.svg"/>${e.sortByTitle1}: Highest to Lowest</button></div><div class="posweb-header-popover-row" role="menuitem"><button id="posweb-header-popover-asc-2-${e.colClass}" class="posweb-header-popover-button posweb-header-popover-asc-2 ${"bottom"===o&&a?"posweb-header-popover-button-selected":""}"><img class="posweb-header-popover-asc-image" alt="" src="${t}assets/${s}/sort_ascending_black.svg"/>${e.sortByTitle2}: Lowest to Highest</button></div><div class="posweb-header-popover-row" role="menuitem"><button id="posweb-header-popover-desc-2-${e.colClass}" class="posweb-header-popover-button posweb-header-popover-desc-2 ${"bottom"===o&&r?"posweb-header-popover-button-selected":""}"><img class="posweb-header-popover-desc-image" alt="" src="${t}assets/${s}/sort_descending_black.svg"/>${e.sortByTitle2}: Highest to Lowest</button></div></div></pwe-popover>`}attachToolTipListeners(e){if(e&&this.getGui()){const t=e.column.colDef.headerComponentParams.colClass;o.PoswebGridUtils.attachClickListener(this.getGui(),".posweb-header-popover-asc-1",s=>{s.target.classList.add("posweb-header-popover-button-selected"),s.target.ariaPressed="true",a.removeBtnSelectionStyling([`posweb-header-popover-asc-2-${t}`,`posweb-header-popover-desc-1-${t}`,`posweb-header-popover-desc-2-${t}`]),e.column.colDef.headerComponentParams.sortBy="top",o.PoswebGridUtils.closeSortPopOver(t),e.setSort("asc")}),o.PoswebGridUtils.attachClickListener(this.getGui(),".posweb-header-popover-desc-1",s=>{s.target.classList.add("posweb-header-popover-button-selected"),s.target.ariaPressed="true",a.removeBtnSelectionStyling([`posweb-header-popover-asc-2-${t}`,`posweb-header-popover-asc-1-${t}`,`posweb-header-popover-desc-2-${t}`]),e.column.colDef.headerComponentParams.sortBy="top",o.PoswebGridUtils.closeSortPopOver(t),e.setSort("desc")}),o.PoswebGridUtils.attachClickListener(this.getGui(),".posweb-header-popover-asc-2",s=>{s.target.classList.add("posweb-header-popover-button-selected"),s.target.ariaPressed="true",a.removeBtnSelectionStyling([`posweb-header-popover-desc-1-${t}`,`posweb-header-popover-asc-1-${t}`,`posweb-header-popover-desc-2-${t}`]),e.column.colDef.headerComponentParams.sortBy="bottom",o.PoswebGridUtils.closeSortPopOver(t),e.setSort("asc")}),o.PoswebGridUtils.attachClickListener(this.getGui(),".posweb-header-popover-desc-2",s=>{s.target.classList.add("posweb-header-popover-button-selected"),s.target.ariaPressed="true",a.removeBtnSelectionStyling([`posweb-header-popover-desc-1-${t}`,`posweb-header-popover-asc-1-${t}`,`posweb-header-popover-asc-2-${t}`]),e.column.colDef.headerComponentParams.sortBy="bottom",o.PoswebGridUtils.closeSortPopOver(t),e.setSort("desc")})}}updateIconVisibility(){this._params.column.isSortAscending()?(this.sortUpButton.classList.remove("ag-hidden"),this.sortDownButton.classList.add("ag-hidden"),this.unSortButton.classList.add("ag-hidden"),this.elem.classList.remove("ag-header-cell-sorted-none","ag-header-cell-sorted-desc"),this.elem.classList.add("ag-header-cell-sorted-asc")):this._params.column.isSortDescending()?(this.sortUpButton.classList.add("ag-hidden"),this.sortDownButton.classList.remove("ag-hidden"),this.unSortButton.classList.add("ag-hidden"),this.elem.classList.remove("ag-header-cell-sorted-none","ag-header-cell-sorted-asc"),this.elem.classList.add("ag-header-cell-sorted-desc")):(this.sortUpButton.classList.add("ag-hidden"),this.sortDownButton.classList.add("ag-hidden"),this.unSortButton.classList.remove("ag-hidden"),this.elem.classList.remove("ag-header-cell-sorted-asc","ag-header-cell-sorted-desc"),this.elem.classList.add("ag-header-cell-sorted-none"),a.removeBtnSelectionStyling([`posweb-header-popover-desc-1-${this._params.column.colDef.headerComponentParams.colClass}`,`posweb-header-popover-desc-2-${this._params.column.colDef.headerComponentParams.colClass}`,`posweb-header-popover-asc-1-${this._params.column.colDef.headerComponentParams.colClass}`,`posweb-header-popover-asc-2-${this._params.column.colDef.headerComponentParams.colClass}`]))}static removeBtnSelectionStyling(e){e.forEach(e=>{document.getElementById(e)&&(document.getElementById(e).classList.remove("posweb-header-popover-button-selected"),document.getElementById(e).ariaPressed="false")})}}t.PoswebHeaderStackedComponent=a},62822:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrderCardComponent=void 0;const o=s(58294),i=s(93535);class a extends o.EventCardComponent{constructor(e,t){super(),this._rowId=e,this._posweb=i.PoswebMetadata.getInstance(),this._orderDetails=t||void 0}getSnippet(){return this._orderDetails?this.getHeaderSnippet(this._orderDetails)+this.getBodySnippet(this._orderDetails)+this.getFooterSnippet(this._orderDetails):""}getBodySnippet(e){let t="",s="",o="",i=0;const a=e.orderTypeDesc.split("\n");return e&&e.orderTypeDesc&&e.orderTypeDesc.indexOf("Trailing")>-1&&(t=`<div class="posweb-events-card-row"><div class="posweb-events-card-label">Trail Amount</div><div class="posweb-events-card-data">${e.trailAmount}</div></div>`),a.forEach(e=>{o=0===i?'<div class="posweb-events-card-label">Order type</div>':"",s+=`<div class="posweb-events-card-row">${o}<div class="posweb-events-card-data">${e}</div></div>`,i++}),`<div class="posweb-events-card-body"><div class="posweb-events-card-row"><div class="posweb-events-card-label">Quantity</div><div class="posweb-events-card-data">${e.quantity}</div></div>`+s+t+'<div class="posweb-events-card-row">'+`<div class="posweb-events-card-label">Time in force</div><div class="posweb-events-card-data">${e.timeInForce}</div></div></div>`}getHeaderSnippet(e){return`<div class="posweb-events-card posweb-events-open-orders-card">\n                    <div class="posweb-events-card-header">\n                        <div class="posweb-events-card-header-top">\n                            <img class="posweb-events-card-icon" alt="Open Order Event exists" src="${this._posweb.assetUrl}assets/${this._posweb.version}/open_orders_card_icon.svg"/>\n                            <div class="posweb-events-card-header-title">Open order -</div>\n                            <div class="posweb-events-card-header-action">${e.orderActionDesc}</div>\n                        </div>\n                        <div class="posweb-events-card-timestamp">${e.asOfTime}</div>\n                    </div>`}getFooterSnippet(e){const t=e.totalNoOfOrders&&1<e.totalNoOfOrders?"open orders":"open order",s=`${this._posweb.digitalDomain}/ftgw/digital/portfolio/activity`;return`<div class="posweb-events-card-footer"><div class="posweb-events-card-label">Total of <span>${e.totalNoOfOrders}</span> ${t}</div><div class="posweb-events-card-data"><a href="${s}" class="color-link" target="_blank">Orders<pvd3pwe-icon pvd-name="action__caret-right" pvd-size="small" pvd-a11y-label="link to orders page"></pvd3pwe-icon></a></div></div></div>`}}t.OrderCardComponent=a},63858:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GridSettingsModel=void 0;t.GridSettingsModel=class{}},64101:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FixedIncomeCardComponent=void 0;const o=s(60942),i=s(60488),a=s(93535),r=s(42095);class n extends r.ResearchCardComponent{constructor(e,t,s){super(),this._rowId=e,this._gridRowData=t,this._poswebGridService=new o.PoswebGridService,this._posweb=a.PoswebMetadata.getInstance(),this._tabPanel=s}retrieveCardData(){}getInitSnippet(){return'<div class="posweb-research-card-fixed-income-desc-container'+(i.PoswebGridUtils.isMobileDevice()?" mobile":"")+'"></div>'+`<div class="posweb-research-card-fixed-income-details-link"><a aria-label="View details" target="_blank" href="${this._posweb.fixedIncomeResearchDomain}/ftgw/fi/FIFrameset.do?page=FIBondDetails.do?cusip=${this._gridRowData.data.sym.name}">View details for ${this._gridRowData.data.sym.desc}</a></div><div class="posweb-research-card-fixed-income-analysis-link"><a aria-label="View fixed income analysis" target="_blank" href="${this._posweb.digitalDomain}/ftgw/digital/fixed-income-dashboard/summary">View fixed income analysis for your bond holdings</a></div>`}}t.FixedIncomeCardComponent=n},67106:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebGridQuoteColumns=void 0;const o=s(17597),i=s(17190),a=s(60942),r=s(82402);t.PoswebGridQuoteColumns=class{constructor(){this._poswebGridService=new a.PoswebGridService}static getInstance(){return this._instance||(this._instance=new this)}getQuoteColumnData(e){var t,s;this.$quoteSubscriptions&&this.$quoteSubscriptions.forEach(e=>e.unsubscribe()),this.asOfDate="",this.$quoteSubscriptions=[];const a=[];o.POSWEB_PRESET_VIEW.MY_VIEW!==(null===(t=window[i.PoswebConstants.SETTINGS_PROPERTY_NAME])||void 0===t?void 0:t.presetView)&&(null===(s=r.PoswebUtils.getHtmlElement("posweb-spinner"))||void 0===s||s.setAttribute("pvd-hidden","false"));for(let t=0;t<e.length;t+=50)a.push(new Promise((s,o)=>{this.$quoteSubscriptions.push(this._poswebGridService.retrieveQuoteColumnData({symbol:e.slice(t,t+50),isQuoteColumn:!0}).subscribe({next:e=>{e?s(e):o(new Error("No response from Quote API"))},error:o,complete:s}))}));let n=[];return Promise.all(a).then(e=>{var t;const s={};for(const o of e){const{rowData:e,columnWidthData:i}=o;n=n.concat(...e),o.rowData.forEach(e=>{!this.asOfDate&&e.equitySummaryScoreDate&&(this.asOfDate=e.equitySummaryScoreDate,r.PoswebUtils.getHtmlElement("posweb-legend-eq-score-date").textContent=this.asOfDate)});for(const e in i)if(Object.hasOwn(i,e)){const o=i[e];s[e]=Math.max(null!==(t=s[e])&&void 0!==t?t:0,o)}}return{rowData:n,hasAnalystRatings:Boolean(this.asOfDate),columnWidthData:s}})}}},67452:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResearchCardManager=void 0;const o=s(90239),i=s(37557),a=s(64101),r=s(60451),n=s(36043),l=s(79383);t.ResearchCardManager=class{constructor(e,t,s,d){var c,p,u,b,w;this.STABLECOIN_NOT_SUPPORT_MSG="Charting is not supported for this position.",this._rowId=e,this._isStableCoin=null===(c=t.data.meta)||void 0===c?void 0:c.isStableCoinInd,(null===(p=t.data.meta)||void 0===p?void 0:p.isFixedIncome)?(this._isFI=!0,this._FICard=new a.FixedIncomeCardComponent(e,t,d)):(null===(u=window.toggleMap)||void 0===u?void 0:u.ap126216_PWE_Alt_Inv_NonU_Commitment_Card)&&(null===(b=t.data.meta)||void 0===b?void 0:b.isAltProp)&&!1===t.data.meta.isAltUnitized?(this._isCDAlt=!0,this._CommitmentDetailsCard=new i.CommitmentDetailsCardComponent(e,t,d)):(this._isFI=!1,this._researchLink=s,this._QuoteCard=new l.QuoteCardComponent(e,t,d),this._ChartCard=new o.ChartCardComponent(e,t,d),-1<["Mutual Fund","Annuity"].indexOf(null===(w=t.data.meta)||void 0===w?void 0:w.securityType)?(this._MFTopTenCard=new r.MFTopTenCardComponent(e,t,d),this._isMF=!0):(this._NewsCard=new n.NewsCardComponent(e,t,d),this._isMF=!1))}getInitSnippet(){let e="";if(this._isFI)e=`<div id="posweb-research-container-${this._rowId}" class="posweb-research-container"><div id="posweb-research-card-fixed-income-container-${this._rowId}" class="posweb-research-card-fixed-income-container">`+this._FICard.getInitSnippet()+"</div></div>";else if(this._isCDAlt)e=`<div id="posweb-research-container-${this._rowId}" class="posweb-research-container"><div id="posweb-research-card-container-${this._rowId}" class="posweb-research-card-container">`+this._CommitmentDetailsCard.getInitSnippet()+'<div class="posweb-research-card"></div><div class="posweb-research-card"></div>';else{const t=this._isStableCoin?this._ChartCard.getMessageSnippet(this.STABLECOIN_NOT_SUPPORT_MSG):this._ChartCard.getInitSnippet();e=`<div id="posweb-research-container-${this._rowId}" class="posweb-research-container"><div id="posweb-research-card-container-${this._rowId}" class="posweb-research-card-container${this._ChartCard.isAnnuity()?"":" posweb-research-card-chartiq-container"}">`+this._QuoteCard.getInitSnippet()+t+(this._NewsCard?this._NewsCard.getInitSnippet():"")+(this._MFTopTenCard?this._MFTopTenCard.getInitSnippet():"")+`</div></div><button class="posweb-research-drawer-button pvd3pwe-button-root pvd-button--primary pvd-button--small pvd-button--with-icon" type="button" title="opens in new window" role="link" onclick="window.open('${this._researchLink}')"><div class="pvd-button__contents"><span class="pvd-button__text">Research</span><span class="pvd-button__icon pvd-button__icon--right"><pvd3pwe-icon pvd-name="action__open-link" pvd-size="extra-small"></pvd3pwe-icon></span></div></button>`}return e}initCards(){this._isFI||this._isCDAlt||(this._QuoteCard.retrieveCardData(),this._isStableCoin?this._ChartCard.getMessageSnippet(this.STABLECOIN_NOT_SUPPORT_MSG):this._ChartCard.retrieveCardData(),this._NewsCard&&this._NewsCard.retrieveCardData(),this._MFTopTenCard&&this._MFTopTenCard.retrieveCardData())}get isFI(){return this._isFI}get isMF(){return this._isMF}}},68763:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebDetailSnippets=void 0;const o=s(48417),i=s(74005),a=[o.POSWEB_DRAWER.LOTS,o.POSWEB_DRAWER.RESEARCH,o.POSWEB_DRAWER.EVENTS];t.PoswebDetailSnippets=class{constructor(e,t){this._id=e,this._eGui=t}addNotification(e,t,s,o){const a=this._eGui.querySelector(`#posweb-drawer-notifications-${e}-${this._id}`);if(a)switch(a.classList.remove("pwe-hidden"),a.removeAttribute("hidden"),t){case i.POSWEB_NOTIFY.CONF:a.insertAdjacentHTML("afterbegin",this.getNotificationTemplate("confirm",s,o));break;case i.POSWEB_NOTIFY.WARN:a.insertAdjacentHTML("afterbegin",this.getNotificationTemplate("warning",s,o));break;case i.POSWEB_NOTIFY.ERR:a.insertAdjacentHTML("afterbegin",this.getNotificationTemplate("error",s,o));break;default:a.classList.add("pwe-hidden")}}clearAllNotifications(){a.forEach(e=>{const t=this._eGui.querySelector(`#posweb-drawer-notifications-${e}-${this._id}`);t&&(t.classList.add("pwe-hidden"),t.setAttribute("hidden","hidden"),t.innerHTML="")})}baseNotifications(e){let t='<div class="posweb-drawer-notifications"><div class="posweb-drawer-notifications-container">';return e.forEach(e=>{t+=e?`<div class="posweb-drawer-notification pwe-hidden" id="posweb-drawer-notifications-${e}-${this._id}" tabindex="0" hidden="hidden"></div>`:""}),t+"</div></div>"}baseFooter(e){let t='<div class="posweb-drawer-footer">';return e.forEach(e=>{t+=e?`<div class="posweb-drawer-footer-item pwe-hidden" id="posweb-drawer-footer-${e}-${this._id}" tabindex="0"></div>`:""}),t+"</div>"}baseDrawerBody(e){let t='<div class="posweb-drawer-body-container">';return e.forEach(e=>{t+=e?`<div class="posweb-drawer-body pwe-hidden" id="posweb-drawer-tabpanel-${e}-${this._id}" role="tabpanel" aria-labelledby="posweb-header-${o.POSWEB_DRAWER.LOTS===e?"purchase-history":e}-tab-${this._id}" `+(o.POSWEB_DRAWER.LOTS===e?"":'tabindex="0" ')+'hidden="hidden"></div>':""}),t+"</div>"}getNotificationTemplate(e,t,s){return`<div class="posweb-msg-${e||"error"}">\n                    <pvd3pwe-icon pvd-name="alert__${"confirm"===e?"info":"critical"}" pvd-size="small"></pvd3pwe-icon>\n                    <div class="posweb-msg-content">\n                        <div class="posweb-alert-heading">${t||""}</div>\n                        <div>${s||""}</div>\n                    </div>\n                </div>`}}},69233:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebRangeCellRenderer=void 0;const o=s(79859),i=s(93535),a=s(82402);class r extends o.PoswebBaseCellRenderer{init(e){var t,s,o,a,n;this._poswebMetadata=i.PoswebMetadata.getInstance(),this._eGui=document.createElement("div"),this._params=e,this._eGui.classList.add("posweb-cell-fifty_two_week_range_container"),(null==e?void 0:e.is52Week)&&(null===(t=e.data)||void 0===t?void 0:t.fifTwo)?this._eGui.innerHTML=r.getRangeSnippet(e.data.fifTwo,this._poswebMetadata.assetUrl,this._poswebMetadata.version,null===(s=e.data.meta)||void 0===s?void 0:s.isSimpCore):!1===(null==e?void 0:e.is52Week)&&(null===(o=e.data)||void 0===o?void 0:o.dayRange)?this._eGui.innerHTML=r.getRangeSnippet(e.data.dayRange,this._poswebMetadata.assetUrl,this._poswebMetadata.version,null===(a=e.data.meta)||void 0===a?void 0:a.isSimpCore,!1):(null==e?void 0:e.isContractVisualRange)&&(null===(n=e.data)||void 0===n?void 0:n.contractRangeVisual)&&(this._eGui.innerHTML=r.getContractRangeSnippet(e.data.contractRangeVisual,this._poswebMetadata.assetUrl,this._poswebMetadata.version))}static getRangeSnippet(e,t,s,o,i=!0){var r,n;let l=o?"":"--";return a.PoswebUtils.isNumber(e.lowHigh)&&(null===(r=e.low)||void 0===r?void 0:r.disp)&&(null===(n=e.high)||void 0===n?void 0:n.disp)&&[void 0,"--","n/a"].indexOf(e.low.disp)<0&&[void 0,"--","n/a"].indexOf(e.high.disp)<0&&(l=`<div class="posweb-cell-fifty_two_week_range" role="presentation"><img class="posweb-cell-fifty_two_week_indicator" alt="${i?"52-Week-":"Day "}Indicator is at ${e.lowHigh}%" style="left:${e.lowHigh}%" src="${t}assets/${s}/52-week-range-diamond.svg"/><span class="screen-reader-only">Low</span><span class="posweb-cell-fifty_two_week_low">${e.low.disp}</span><span class="screen-reader-only">High</span><span class="posweb-cell-fifty_two_week_high">${e.high.disp}</span></div>`),l}static getPoswebPrintGridCell(e,t,s=!0){var o,a;let n=`<td${t?` class="${t}"`:""}><div class="posweb-cell-fifty_two_week_range_container">`;return s&&(null==e?void 0:e.fifTwo)?n+=r.getRangeSnippet(e.fifTwo,i.PoswebMetadata.getInstance().assetUrl,i.PoswebMetadata.getInstance().version,null===(o=e.meta)||void 0===o?void 0:o.isSimpCore):!s&&(null==e?void 0:e.dayRange)&&(n+=r.getRangeSnippet(e.dayRange,i.PoswebMetadata.getInstance().assetUrl,i.PoswebMetadata.getInstance().version,null===(a=e.meta)||void 0===a?void 0:a.isSimpCore,!1)),n+="</div></td>",n}static getContractRangeSnippet(e,t,s){var o,i;let r="--";return a.PoswebUtils.isNumber(e.lowHigh)&&(null===(o=e.low)||void 0===o?void 0:o.disp)&&(null===(i=e.high)||void 0===i?void 0:i.disp)&&[void 0,"--","n/a"].indexOf(e.low.disp)<0&&[void 0,"--","n/a"].indexOf(e.high.disp)<0&&(r=`<div class="posweb-cell-fifty_two_week_range" role="presentation"><img class="posweb-cell-fifty_two_week_indicator" alt="Contract Visual Indicator is at ${e.lowHigh}%" style="left:${e.lowHigh}%" src="${t}assets/${s}/52-week-range-diamond.svg"/><span class="screen-reader-only">Low</span><span class="posweb-cell-fifty_two_week_low">${e.low.disp}</span><span class="screen-reader-only">High</span><span class="posweb-cell-fifty_two_week_high">${e.high.disp}</span></div>`),r}}t.PoswebRangeCellRenderer=r},69436:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebFplModal=void 0;const o=s(75228),i=s(89065),a=s(93535);t.PoswebFplModal=class{constructor(){this._posweb=a.PoswebMetadata.getInstance()}static getInstance(){return this._instance||(this._instance=new this)}getFplIntro(){return'<p>Fidelity’s Fully Paid Lending Program provides you with the opportunity to lend securities in your portfolio and earn income. If there is demand in the securities lending market, generally due to short selling, scarce lending supply, or corporate events, Fidelity may borrow certain eligible securities until either you or Fidelity elect to close the loan.</p>\n        <ul class="pvd3pwe-list-group-root pvd-list-group--unordered" role="list">\n            <li class="pvd-list-group__list-item">\n                <span class="pvd-list-group__list-item-style">\n                    <span class="pvd-list-group__list-item-a11y-text">Bullet</span>\n                </span>\n                <span class="pvd-list-group__list-item-text"><span class="pvd-list-group__list-item-heading">Earn incremental income</span>Income accrues daily and is credited to your account monthly.</span>\n            </li>\n            <li class="pvd-list-group__list-item">\n                <span class="pvd-list-group__list-item-style">\n                    <span class="pvd-list-group__list-item-a11y-text">Bullet</span>\n                </span>\n                <span class="pvd-list-group__list-item-text"><span class="pvd-list-group__list-item-heading">Maintain full economic ownership</span>Sell your shares or recall the loan at any time.</span>\n            </li>\n            <li class="pvd-list-group__list-item">\n                <span class="pvd-list-group__list-item-style">\n                    <span class="pvd-list-group__list-item-a11y-text">Bullet</span>\n                </span>\n                <span class="pvd-list-group__list-item-text"><span class="pvd-list-group__list-item-heading">Monitor activity online</span>Securities on loan, lending interest rates, and program activity can be viewed on your Fidelity.com positions page</span>\n            </li>\n        </ul>'}getFplReviewBtn(){return this._posweb=a.PoswebMetadata.getInstance(),'<pvd3pwe-button pvd-variant="primary" pvd-size="medium" title="opens in new window" role="link" class="posweb-fpl-modal-review--button">Review</pvd3pwe-button>'}getFplLendingScenario(){return`<p>Hypothetical lending scenario of how interest income is calculated</p>\n        <div class="posweb-fpl-modal-img__container">\n            <img class="posweb-fpl-modal-img--lg" src="${this._posweb.assetUrl}assets/${this._posweb.version}/hypothetical_lendingscenario_large.svg" alt="Fully Paid Lending Scenario image" />\n            <img class="posweb-fpl-modal-img--sm" src="${this._posweb.assetUrl}assets/${this._posweb.version}/hypothetical_lendingscenario_small.svg" alt="Fully Paid Lending Scenario image" />\n        </div>\n        <p class="posweb-fpl-modal-disclaimer"><sup>1</sup>The lending interest rate is based on the relative value of the loaned security, which is determined by several factors including borrowing demand and short selling, and general market conditions.</p>\n        `}getFplFAQs(){return'<p>Frequently asked questions</p>\n        <div class="posweb-fpl-modal-faq__container">\n        <pvd3pwe-expand-collapse pvd-size="medium" pvd-title-heading-size="3">\n            <span slot="heading" class="pvd-expand-collapse__heading">What are the risks associated with full paid lending?</span>\n            <div class="pvd-expand-collapse__content"><p>Shares on loan are not covered under SIPC. However, Fidelity provides collateral at a minimum of 100% of the loan value. In any securities lending transaction, counterparty default is a risk. Fidelity is your counterparty on all fully paid loans. If Fidelity were to default on its obligations as defined in the MSLA, you would have the right to withdraw the collateral from the custodian bank.</p><p>In addition, voting rights are relinquished, and dividends are paid as cash-in-lieu payments which may have different tax consequences than actual dividends. And, short selling activity may impact the price of your security.</p></div>\n        </pvd3pwe-expand-collapse>\n        <pvd3pwe-expand-collapse pvd-size="medium" pvd-title-heading-size="3">\n            <span slot="heading" class="pvd-expand-collapse__heading">Will I still receive cash dividends while securities are on loan?</span>\n            <div class="pvd-expand-collapse__content"><p>Dividends paid on securities borrowed by Fidelity pursuant to the Fully Paid Lending Program will be credited to your Fidelity Account in the form of a “cash-in-lieu” payment if shares are borrowed over a dividend record date. Receipt of cash-in-lieu payments may have different taxable consequences than receipt of the actual dividends from the issuer.</p><p>In order to mitigate the impact of cash-in-lieu payments to taxable accounts, Fidelity may return shares prior to a dividend record date. To help offset the potential tax burden associated with the receipt of cash-in-lieu payments in place of qualified dividends (as defined in the Jobs and Growth Tax Relief Reconciliation Act of 2003), Fidelity will credit participating taxable accounts with an additional credit adjustment equal to 26.98% of the qualified portion of the distribution. This adjustment will occur annually after all reclassification information is made available.</p></div>\n        </pvd3pwe-expand-collapse>\n        <pvd3pwe-expand-collapse pvd-size="medium" pvd-title-heading-size="3">\n            <span slot="heading" class="pvd-expand-collapse__heading">Will the lending rate change over the life of the loan?</span>\n            <div class="pvd-expand-collapse__content"><p>Changing market conditions may necessitate a change in the lending rate. If a rate changes, you will receive a detailed trade confirmation. You can also view the rates in real-time on the Loaned Securities page. As always, you maintain the right to “recall” or request to have shares returned at any time. Please refer to the Master Securities Lending Agreement (MSLA) for more details on how the lending rate is determined.</p></div>\n        </pvd3pwe-expand-collapse>\n        <pvd3pwe-expand-collapse pvd-size="medium" pvd-title-heading-size="3">\n            <span slot="heading" class="pvd-expand-collapse__heading">How can I monitor my securities on loan?</span>\n            <div class="pvd-expand-collapse__content"><p>You can monitor your securities on loan in the same manner as the rest of your portfolio through Fidelity.com.</p><p>You can view your securities on loan and real-time lending rates on the Loaned Securities page, which can be accessed from your Positions page. You also will receive a detailed monthly statement, which is available on the Statements page under Account Records.</p></div>\n        </pvd3pwe-expand-collapse>\n        </div>\n        '}getFplLink(){return`<p>For more information, you can review the <span class="pvd3pwe-link-root pvd-link--icon-right pvd-link--new-window pvd-link--undefined">\n        <a class="pvd-link__link" href="${this._posweb.domains.fidelityDomain}/trading/fully-paid-lending" target="_blank" rel="noopener">\n        <span class="pvd-link__text">Fully Paid Lending Program page</span>\n        <span class="pvd-link__icon pvd-link__icon--right">\n            <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-icon--small" focusable="false">\n                <use href="#pvd3pwe-action__open-link" xlink:href="#pvd3pwe-action__open-link"></use>\n            </svg>\n        </span>\n        <span class="pvd-link__screen-reader-text">Opens in a new window</span>\n        </a></span></p>`}getFplDisclaimer(){return'<p class="posweb-fpl-modal-disclaimer"><pvd3pwe-truncate-text pvd-limit="150" pvd-more-text="Show more" pvd-less-text="Show less" pvd-text="Fully paid securities are securities in a customer\'s account that have been completely paid for. Excess-margin securities are securities that have not been completely paid for, but whose market value exceeds 140% of the customer\'s margin debit balance to National Financial Services LLC. Securities on loan are available to sell online from the “cash” account type. Positions held in cash must be sold separately from positions held in margin. Proceeds from sales of securities on loan may not be immediately available for new purchases. The credit adjustment percentage may be increased or decreased from time to time by Fidelity due to changes in federal and/or state tax law and the classification of the dividend distribution. Fidelity does not guarantee that this adjustment will be sufficient to eliminate the full additional tax burden associated with all dividend distributions. Fidelity reserves the right to deny credit adjustments to any customer whom Fidelity determines would have been otherwise ineligible to receive the tax benefit of a reduced dividend tax rate. The Fully Paid Lending Program is only a means to realize increased income on certain securities and does not provide any downside protection or “hedge” against the customer’s lending position(s) or portfolio. Fidelity and its representatives may have a conflict of interest in the products or services mentioned in this material because they have a financial interest in and receive compensation, directly or indirectly, in connection with the management, distribution, and/or servicing of these products or services, including Fidelity funds, certain third-party funds and products, and certain investment services. All references to Fidelity include National Financial Services LLC (“NFS”) and Fidelity Brokerage Services LLC (“FBS”), Members NYSE, SIPC. Fidelity Capital Markets is a division of National Financial Services LLC. Fidelity Family Office Services is a division of Fidelity Brokerage Services LLC."></pvd3pwe-truncate-text></p>'}fplLearnMoreModal(){o.CommonModal.getInstance().constructAndShowModal('<div class="posweb-fpl-modal-heading"><h3>Fidelity Fully Paid Lending Program</h3></div>',`<div class="posweb-fpl-modal-body">\n        ${this.getFplIntro()}\n        ${this.getFplReviewBtn()}\n        ${this.getFplLendingScenario()}\n        ${this.getFplFAQs()}\n        ${this.getFplLink()}\n        ${this.getFplDisclaimer()}\n        <div>`,"",i.POSWEB_MODAL_SIZE.LARGE)}}},69505:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PweSharedUtils=void 0;t.PweSharedUtils=class{static getEasternTimeFromLocal(e=!1,t){let s=t?new Date(t):new Date;return e&&(s=new Date(s.getTime()-9e5)),s.toLocaleString("en-US",{timeZone:"America/New_York",hour12:!0,month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"2-digit"}).replace(", ","-").replace(" ","-").replace(",","").replace(" "," ").replace(/\bAM|PM\b/g,e=>e.toLocaleLowerCase().split("").join("."))}static getEasternDateFromLocal(){return(new Date).toLocaleString("en-US",{timeZone:"America/New_York",month:"short",day:"2-digit",year:"numeric"}).replace(", ","-").replace(" ","-")}}},69593:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebAccountTotalPopoverCellRenderer=void 0;const o=s(79859),i=s(60488),a=s(82402);class r extends o.PoswebBaseCellRenderer{static getPopoverDivInnerHTML(e,t,s){return`<p class="posweb-popover-account_total_account_name text-bold">${e}</p>\n        ${"External"!==s.acctType?`<p class="posweb-popover-account_total_account_number">${a.PoswebUtils.getAccountNumber(t)}</p>`:""}${r.getPopoverContent(s.acctTotalPop)}<hr>\n        ${i.PoswebGridUtils.getDisclaimerSnippet("posweb-popover-account_total_disclaimer",s.isPriorDayGainLossReset)}`}static getPopoverContent(e){var t,s;let o="";return(null===(t=null==e?void 0:e.pricedTodayGL)||void 0===t?void 0:t.disp)&&(null===(s=e.unpricedTodayGL)||void 0===s?void 0:s.disp)&&(o=`<div class="posweb-popover-account_total_items_container">\n                    <div class="posweb-popover-account_total_item_row">\n                        <p class="posweb-popover-account_total_item_label">Securities Priced Today</p>\n                        ${r.getPopoverValue(e.pricedTodayGL.disp,!0)}\n                    </div>\n                    <div class="posweb-popover-account_total_item_row">\n                        <p class="posweb-popover-account_total_item_label">Securities Not Priced Today</p>\n                        ${r.getPopoverValue(e.unpricedTodayGL.disp,!1)}\n                    </div>\n                </div>`),o}static getPopoverValue(e,t){return`<p class="posweb-popover-account_total_item_value${i.PoswebGridUtils.getDisplayColor(e)}${t?"":" posweb-cell-not_priced_today"}">\n            ${e}\n        </p>`}static getStackItemsSnippet(e,t){return`<span class="posweb-cell-stacked-item posweb-cell-stack-item-today_gl_currency posweb-cell-today_gl_currency_container-stacked">${e||""}</span><span class="posweb-cell-stacked-item-total posweb-cell-stack-item-today_gl_percent${i.PoswebGridUtils.getDisplayColor(t)}">${t||""}</span>`}static getTodayGLCurrencySnippet(e,t,s,o,a){return i.PoswebGridUtils.getSearchValue()?`<div class="posweb-cell-popover-trigger posweb-cell-today_gl_currency posweb-metrics${i.PoswebGridUtils.getDisplayColor(e)}" data-metrics="AcctTodayGLPopover" id="posweb-tt-trigger-account-total-${t}" aria-describedby="posweb-tt-popover-account-total-${t}">${e}</div>`:`\n            <a href="javascript:void(0);"\n                class="posweb-cell-popover-trigger posweb-cell-today_gl_currency posweb-metrics${i.PoswebGridUtils.getDisplayColor(e)}"\n                data-metrics="AcctTodayGLPopover"\n                id="posweb-tt-trigger-account-total-${t}" aria-describedby="posweb-tt-popover-account-total-${t}">${e}</a>`+(a.isUnPriced?'<div class="posweb-cell-a11y_indicator screen-reader-only">Not Priced Today</div>':"")+`<pwe-popover class="posweb-popover-account_total" position="bottom" role="dialog" show-elem=".positions-web-experience"\n                for="posweb-tt-trigger-account-total-${t}" id="posweb-tt-popover-account-total-${t}" zindex="1"\n                additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport" popover-hide-top_bottom=".ag-body-viewport"\n                popover-hide-left_right=".ag-center-cols-viewport">\n                <div class="posweb-totals-popover">\n                    ${r.getPopoverDivInnerHTML(s||"",o,a)}\n                </div>\n            </pwe-popover>`}init(e){var t,s,o,a,n,l,d;if(this._eGui=document.createElement("div"),this._params=e,(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.actNum)&&(null===(s=e.node)||void 0===s?void 0:s.id)&&(null===(a=null===(o=e.data.meta)||void 0===o?void 0:o.acctTotalPop)||void 0===a?void 0:a.pricedTodayGL)&&e.data.meta.acctTotalPop.unpricedTodayGL)if((null===(l=null===(n=e.colDef)||void 0===n?void 0:n.cellRendererParams)||void 0===l?void 0:l.isStacked)&&i.PoswebGridUtils.isValidStackColInfo(e.data,e.colDef.cellRendererParams.stackColInfo)){const{colId:t}=e.colDef.cellRendererParams.stackColInfo,s=e.colDef.cellRendererParams.stackColInfo.top.field,o=e.colDef.cellRendererParams.stackColInfo.bottom.field,i=r.getTodayGLCurrencySnippet(e.data[t][s].disp,e.node.id,e.data.actNam,e.data.actNum,e.data.meta);this._eGui.classList.add("posweb-cell-stacked-item-container"),this._eGui.innerHTML=r.getStackItemsSnippet(i,e.data[t][o].disp)}else if(null===(d=e.data.todGL)||void 0===d?void 0:d.disp){const t=r.getTodayGLCurrencySnippet(e.data.todGL.disp,e.node.id,e.data.actNam,e.data.actNum,e.data.meta);this._eGui.classList.add("posweb-cell-today_gl_currency_container"),this._eGui.innerHTML=t}}static getPoswebPrintGridCell(e,t,s){var o;if((null==s?void 0:s.isStacked)&&i.PoswebGridUtils.isValidStackColInfo(e,s.stackColInfo)){const{colId:o}=s.stackColInfo,a=s.stackColInfo.top.field,n=s.stackColInfo.bottom.field;return`<td class="posweb-cell-print ${t||""}"><div class="posweb-cell-stacked-item-container">`+r.getStackItemsSnippet(""+(`<span class="${i.PoswebGridUtils.getDisplayColor(e[o][a].disp)}">`+e[o][a].disp+'<sup class="posweb-row-total_print_info_indicator">&nbsp;</sup></span>'),e[o][n].disp)+"</div></td>"}return`<td class="posweb-cell-print ${t||""}">`+((null===(o=null==e?void 0:e.todGL)||void 0===o?void 0:o.disp)?e.todGL.disp+'<sup class="posweb-row-total_print_info_indicator">&nbsp;</sup>':"")+"</td>"}}t.PoswebAccountTotalPopoverCellRenderer=r},70207:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebSettingsFilterBaseComponent=void 0;const o=s(16186),i=s(17597),a=s(17190),r=s(60488),n=s(82402),l=s(34140);class d{constructor(){this.settingsAdditionalFilterKey=a.PoswebConstants.SETTINGS_ADDITIONAL_FILTER_KEY,this.settingsAdditionalFilterItemsSetKey=a.PoswebConstants.SETTINGS_ADDITIONAL_FILTER_ITEMS_SET_KEY,this.hasSelectedFilters=!1}prepareFilterBody(){if(!this.shouldShowFilters())return"";const e=d.shouldDisableFilters();let t="";e&&(t='\n                <div class="posweb-settings-modal-filter-msg">\n                    <pvd3pwe-icon pvd-name="alert__critical" pvd-size="small" class="posweb-settings-modal-filter-msg-icon"></pvd3pwe-icon>\n                    <span class="posweb-settings-modal-filter-msg-txt">Filtering by security type is available on the Overview and Dividend View.</span>\n                </div>');return`<div class="posweb-settings-modal-container posweb-settings-modal-filter">\n                <div class="posweb-settings-modal-section-header-container posweb-settings-modal-filter-header"><div role="heading" aria-level="5" class="pvd-paragraph posweb-settings-modal-section-header">Filter your positions</div>\n                </div>${t}\n                <div class="posweb-settings-modal-filter-content">`+(r.PoswebGridUtils.getCurrentSelectedPresetView()!==i.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW?`<div role="heading" aria-level="5" class="pvd-paragraph posweb-settings-modal-section-type">Investment types</div> <div id="posweb-settings-modal-section-security_types" class="posweb-settings-modal-filter-content-fieldset"> ${this.prepareFilterCheckboxes(e,!1)}</div><div role="heading" aria-level="5" class="pvd-paragraph posweb-settings-modal-attribute-type">Investment attributes</div> <div class="posweb-settings-modal-filter-content-fieldset" id="posweb-settings-modal-section-event_types">\n        ${this.prepareFilterCheckboxes(e,!0)?this.prepareFilterCheckboxes(e,!0):'<p class= "investment-filters-not-present-msg"> Additional filters are not applicable for your positions.</p>'} </div>`:`<div id="posweb-settings-modal-section-security_types" class="posweb-settings-modal-filter-content-fieldset"> ${this.prepareFilterCheckboxes(e,!1)} </div>`)+"</div>"+(this.hasSelectedFilters?'<p class= "selected-filters-present-msg">Some selected filters may not apply to the positions in this account.</p>':"")+"</div>"}prepareFilterMsgSnippet(e){return`<div class="posweb-grid_top-filter-msg" tabindex="0">\n                <span class="posweb-grid_top-filter-msg-txt">${e}</span>\n            </div>`}onLoad(){this.shouldShowFilters()&&(d.setupActionListeners(),this.loadFilterSettings())}onApplyButton(){if(this.shouldShowFilters()&&!d.shouldDisableFilters()){const e=[],t=[];let s=!0;s=!1;const a=d.getEventTypeFilterCheckboxes();if(a.length>0){let e;a.forEach(s=>{s.checked&&!s.disabled&&(e=d.extractKeyFromCheckboxId(s.id),e&&t.push(e))})}const n=d.getSecurityTypeFilterCheckboxes();if(n.length>0){let t;n.forEach(s=>{s.checked&&!s.disabled&&(t=d.extractKeyFromCheckboxId(s.id),t&&e.push(t))})}const c=l.WindowService.getPositionSettings();c[this.settingsFilterKey]=e.join(","),i.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW!==r.PoswebGridUtils.getCurrentSelectedPresetView()&&(c[this.settingsAdditionalFilterKey]=t.join(",")),o.MetricsService.sendMetricsRequest((e.length>0||t.length>0)&&!s?"positionsFilteredYes":"positionsFilteredNo");const p=[{key:this.settingsFilterStateKey,value:c[this.settingsFilterKey]}];return i.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW!==r.PoswebGridUtils.getCurrentSelectedPresetView()&&p.push({key:this.additionalFilterStateKey,value:c[this.settingsAdditionalFilterKey]}),this.hasSelectedFilters&&(this.hasSelectedFilters=!1),(void 0===t||t.length<=0)&&(this.hasSelectedFilters=!1),p}return null}static uncheckAll(){d.getFilterCheckboxes().forEach(e=>e.checked=!1)}static focusFirstCheckbox(){const e=d.getFilterCheckboxes();e.length&&setTimeout(()=>{e[0].focus()})}static shouldDisableFilters(){return i.POSWEB_PRESET_VIEW.FUND_PERF_VIEW===r.PoswebGridUtils.getCurrentSelectedPresetView()}static prepareFilterCheckbox(e,t,s,o){const i=d.generateCheckboxId(e);if(!i)return"";let r="",n="";return s&&(r=" posweb-settings-modal-filter-disabledCheckbox",n=a.PoswebConstants.DISABLE_SNIPPET),`<div class="pvd3pwe-checkbox-root pvd-checkbox--small posweb-settings-modal-filter-checkbox${r}">\n                <input class="pvd-checkbox__checkbox" type="checkbox" name="posweb-settings-modal-filter-checkboxes" id="${i}" ${n} ${o?"disabled ":""}/>\n                <label class="pvd-checkbox__label" for="${i}">\n                    <div aria-hidden="true" class="pvd-checkbox__checkbox-wrap">\n                        <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-checkbox__checkbox-wrap-icon pvd-checkbox__checkbox-wrap-icon--checked pvd-icon--extra-small" focusable="false">\n                            <use href="#pvd3pwe-action__check" xlink:href="#pvd3pwe-action__check"></use>\n                        </svg>\n                    </div>\n                    <div class="pvd-checkbox__label-text">${t}</div>\n                </label>\n            </div>`}static generateCheckboxId(e){return(null==e?void 0:e.trim())?`${d.FILTER_CHECKBOX_ID_PREFIX}${e.trim()}`:""}isAllChecked(){const e=d.getFilterCheckboxes();return!this.hasSelectedFilters&&Array.from(e).every(e=>e.checked)}static extractKeyFromCheckboxId(e){return(null==e?void 0:e.trim())?e.replace(d.FILTER_CHECKBOX_ID_PREFIX,"").trim():""}static getFilterAllCheckBox(){return n.PoswebUtils.getHtmlElement(d.FILTER_CHECKBOX_ID_PREFIX+"all")}static getFilterCheckboxes(){return n.PoswebUtils.htmlQuerySelectorAll("input[name='posweb-settings-modal-filter-checkboxes']")}static setupActionListeners(){if(d.shouldDisableFilters())return;const e=n.PoswebUtils.htmlQuerySelector(".posweb-settings-modal-filter-choice-all"),t=n.PoswebUtils.htmlQuerySelectorAll(".posweb-settings-modal-filter-checkbox"),s=d.getFilterAllCheckBox(),o=d.getFilterCheckboxes();e&&!e.onclick&&(e.onclick=()=>{d.chooseFilterItemsByCheckboxAll(s,o)}),t.forEach(e=>{e.onclick=()=>{d.chooseCheckboxAllByFilterItems(s,o)}})}static chooseFilterItemsByCheckboxAll(e,t){e&&t&&t.forEach(t=>{t.checked=e.checked})}static chooseCheckboxAllByFilterItems(e,t){if(e&&t){let s=!0;t.forEach(e=>{s=s&&e.checked}),e.checked=s}}shouldShowFilters(){var e,t;const s=l.WindowService.getPositionSettings();return Boolean((null===(e=s[this.settingsFilterItemsSetKey])||void 0===e?void 0:e.length)>0||(null===(t=s[this.settingsAdditionalFilterItemsSetKey])||void 0===t?void 0:t.length)>0)}prepareFilterCheckboxes(e,t){var s,o;const i=l.WindowService.getPositionSettings();i[this.settingsFilterItemsSetKey]=i[this.settingsFilterItemsSetKey]||this.securityTypeKeyLabelArr.map(e=>e[0]),i[this.settingsAdditionalFilterItemsSetKey]=i[this.settingsAdditionalFilterItemsSetKey]||this.eventTypeKeyLabelArr.map(e=>e[0]);const a=i[this.settingsFilterItemsSetKey],r=i[this.settingsAdditionalFilterItemsSetKey],n=new Set(null===(s=i[this.settingsFilterKey])||void 0===s?void 0:s.split(",")),c=new Set(null===(o=i[this.settingsAdditionalFilterKey])||void 0===o?void 0:o.split(",")),p=t?c:n,u=new Set(a.concat(r));u.size<a.length+r.length&&(a.forEach(e=>{u.add(e)}),r.forEach(e=>{u.add(e)}));const b=t?this.eventTypeKeyLabelArr:this.securityTypeKeyLabelArr;let w="";return b.forEach(([t,s])=>{if(u.has(t)||p.has(t)){const o=p.has(t)&&!u.has(t);this.hasSelectedFilters||(this.hasSelectedFilters=o),w+=d.prepareFilterCheckbox(t,s,e,o)}}),w}loadFilterSettings(){var e,t;let s;const o=null!==(e=l.WindowService.getPositionSettings()[this.settingsFilterKey])&&void 0!==e?e:"",i=null!==(t=l.WindowService.getPositionSettings()[this.settingsAdditionalFilterKey])&&void 0!==t?t:"";let a,r;s=o.split(","),i&&(s=s.concat(i.split(","))),s.forEach(e=>{a=d.generateCheckboxId(e),a&&(r=n.PoswebUtils.getHtmlElement(a),r&&(r.checked=!0))})}static getSecurityTypeFilterCheckboxes(){return n.PoswebUtils.htmlQuerySelectorAll("#posweb-settings-modal-section-security_types input[name='posweb-settings-modal-filter-checkboxes']")}static getEventTypeFilterCheckboxes(){return n.PoswebUtils.htmlQuerySelectorAll("#posweb-settings-modal-section-event_types input[name='posweb-settings-modal-filter-checkboxes']")}}t.PoswebSettingsFilterBaseComponent=d,d.FILTER_CHECKBOX_ID_PREFIX="posweb-settings-modal-filter-checkbox-"},71147:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebDescriptionWindow=void 0;const o=s(75228),i=s(82402);t.PoswebDescriptionWindow=class{constructor(){this._commonModal=o.CommonModal.getInstance()}static getInstance(){return this._instance||(this._instance=new this)}popupEstAnuIncFootnoteModal(){this._commonModal.constructAndShowModal('<h4 class="pvd-heading-M posweb-est-disclosure-modal-header"><b>How EAI is Calculated</b></div>','<div class="posweb-est-disclosure-modal-body">\n                <p class="small pvd-paragraph">EAI is calculated by Refinitiv, a third-party data provider.  Refinitiv provides annualized gross dividend amount for all companies that report regular dividend payments. The annualized gross dividend is calculated based on the following methods described below:  IAD, TTM and LFY.  The annualization type for each company is based on the reporting cycle and market practices.  Annualization type will be IAD for most US and Canadian companies and TTM for Global markets and some US and Canadian companies where the dividend amount is not consistent throughout the year.\n                <br/><br/>\n                </p>\n                <p class="small pvd-paragraph"><b>Indicated Annual Dividend (IAD):</b>  The IAD is a derived total dividend amount. For North American market ISINs, International Securities Identification Numbers, that begin with either a CA or US, Refinitiv will calculate by multiplying Dividend Amount and Dividend Frequency.  The calculation is based on payment date for North American markets; for other markets it is based on the period end date.  Special and extra dividends are not taken into consideration.  Calculation = (Latest Dividend * Dividend Frequency)\n                <br/><br/>\n                </p>\n                <p class="small pvd-paragraph"><b>Trailing Twelve Month (TTM):</b>  The TTM amount or \'Standard Calculation\' is the sum of all records whose pay dates are within the Last 12 months using the most recent pay date (the actual day).  The calculation is based on payment date for North American markets; for other markets it is based on the period end date.  Special and extra dividends are not taken into consideration.  Calculation = (Div. #1 + Div. #2 + Div. #3 + Div. #4) assuming 4 payment dates in the previous 12-month period.\n                <br/><br/>\n                </p>\n                <p class="small pvd-paragraph"><b>Latest Fiscal Year (LFY):</b>  -   The LFY amount is calculated as the sum of the dividends paid during the fiscal year of the company.   Special and extra dividends are not taken into consideration.  Calculation = (Interim Dividend + Final Dividend)\n                <br/><br/>\n                </p>\n                <p class="small pvd-paragraph"><b>Split Adjusted Dividends:</b>  Refinitiv does not provide split adjusted dividends following forward and reverse stock splits.  To create the Adjusted Dividend value, Fidelity Enterprise Market Data will multiply the Unadjusted Gross Annualized Dividend value by the Split Factor value when the Split Date is less than or equal to the current day and greater than the Dividend Period End Date.  When the next dividend after the Split Date is announced it is already adjusted for the split and presented as reported by Refinitiv.\n                <br/>\n                </p>\n                <ul class="small">\n                    <li>\n                        <p class="small pvd-paragraph">Split Factor is determined by the company’s board of directors.  There are two types of stock splits, forward stock splits and reverse stock splits.  Forward stock splits (e.g. 2-for-1) will increase the total amount of shares outstanding in the company by the split factor while decreasing share price.  Where reverse splits (e.g. 1-for-10) will decrease the amount of shares outstanding in the company by the split factor while increasing the share price.\n                        <br/><br/>\n                        </p>\n                    </li>\n                </ul>\n                <p class="small pvd-paragraph"><b>Third Party Disclosure:</b>  Dividend data are sourced from third party vendors believed to be reliable, Fidelity makes no assurances or guarantees regarding their accuracy. This third party data may not be promptly updated to reflect various corporate actions(for example, when an issuer has missed a scheduled dividend payment, announced changes to a payment schedule, or declared a stock split) and, as a result, the EAI and may be over or understated. Interest and dividend rates are subject to change at any time, and may be affected by current and future economic, political, and business conditions. You should carefully research and evaluate other data related to possible estimated income and consider your personal circumstances before making any investment decisions.</p>\n            </div>','<div class="posweb-est-disclosure-modal-footer">\n                <div class="posweb-btn-row">\n                    <button class="pvd3pwe-button-root pvd-button--primary pvd-button--small posweb-est-disclosure-modal-close" type="button"><div class="pvd-button__contents"><span class="pvd-button__text">Close</span></div></button>\n                </div>\n            </div>');i.PoswebUtils.htmlQuerySelector(".posweb-est-disclosure-modal-close").onclick=()=>{this._commonModal.closeModal()}}}},71706:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebSettingsFilterFactory=void 0;const o=s(17597),i=s(60488),a=s(99342),r=s(21147);t.PoswebSettingsFilterFactory=class{static getFilterComponentInstance(){return i.PoswebGridUtils.getCurrentSelectedPresetView()===o.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW?a.PoswebSettingsFilterClosedComponent.getInstance():r.PoswebSettingsFilterComponent.getInstance()}}},72317:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebGrid=void 0;const o=s(34629),i=s(99769),a=s(49501),r=s(3274),n=s(95906),l=s(36737),d=s(80409),c=s(33829),p=s(49060),u=s(53059),b=s(16186),w=s(73889),h=s(17597),v=s(94561),m=s(77965),g=s(74705),_=s(69593),y=s(58836),S=s(17693),P=s(83577),C=s(41356),f=s(83254),E=s(17190),T=s(10069),I=s(71147),O=s(78902),A=s(56795),k=s(78996),D=s(69436),R=s(58677),L=s(96097),G=s(8939),M=s(73989),N=s(74509),x=s(924),B=s(67106),U=s(60942),W=s(60488),F=s(93535),V=s(74186),$=s(20045),H=s(25661),Y=s(76836),q=s(60132),j=s(30181),z=s(69233),K=s(43870),Q=s(58805),Z=s(75870),X=s(59831),J=s(49386),ee=s(55998),te=s(50895),se=s(82402),oe=s(19637),ie=s(69505),ae=s(79383),re=s(94625),ne=s(34140),le=s(27334),de=s(37427),ce=s(3976);class pe{constructor(){this._isInGridLayoutMode=!1,this._showSps=!1,this._isSpsOnly=!1,this._showFundTabInSession=!1,this.eventTypeKeyArr=["isOptionable","isIntradayActivity","isDividendsEvent","isLargestFiveHoldings","isNearFiftyTwoWeekHigh","isNearFiftyTwoWeekLow","isOptionNearExpiration","isSharesHeldShort","isSharesHeldLong","isSoonMaturingBond"],this.viewTypes=[{value:h.POSWEB_PRESET_VIEW.OVERVIEW,text:v.POSWEB_PRESET_VIEW_VALUES.OVERVIEW},{value:h.POSWEB_PRESET_VIEW.DIVIDEND_VIEW,text:v.POSWEB_PRESET_VIEW_VALUES.DIVIDEND_VIEW},{value:h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW,text:v.POSWEB_PRESET_VIEW_VALUES.FUND_PERF_VIEW},{value:h.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW,text:v.POSWEB_PRESET_VIEW_VALUES.CLOSED_POSITIONS_VIEW},{value:h.POSWEB_PRESET_VIEW.MY_VIEW,text:v.POSWEB_PRESET_VIEW_VALUES.MY_VIEW},{value:h.POSWEB_PRESET_VIEW.EDIT_MY_VIEW,text:v.POSWEB_PRESET_VIEW_VALUES.EDIT_MY_VIEW}],this.addAriaToColumnsHeaders={DividendView:["posweb-header-ex_div_date","posweb-header-amount_per_share","posweb-header-pay_date","posweb-header-yield","posweb-header-est_anu_inc","posweb-header-current_value","posweb-header-dist-yield","posweb-header-sec-yield"],FundPerfView:["posweb-header-one_yr","posweb-header-thr_yr","posweb-header-fiv_yr","posweb-header-ten_yr","posweb-header-ytd_dly","posweb-header-exp_rt_grs","posweb-header-exp_rt_nt"]},this.keysToExcludeFromQuoteCall=["news","peRatio","securityType","securitysubtype","isOptionable","callPut","expiration","underlying_last","underlying_change"],this._posweb=F.PoswebMetadata.getInstance(),this._poswebCommon=f.PoswebCommon.getInstance(),this._poswebGridFundPerf=M.PoswebGridFundPerformance.getInstance(),this._poswebGridQuoteColumns=B.PoswebGridQuoteColumns.getInstance(),this._poswebGridNewsColumns=N.PoswebGridNewsColumns.getInstance(),this._poswebGridClosedPositions=G.PoswebGridClosedPositions.getInstance(),this._poswebStore=J.PoswebStore.getInstance(),this._prefManager=oe.PreferenceManager.getInstance(),this._poswebExport=k.PoswebExport.getInstance(),this.initialize(),this._poswebGridService=new U.PoswebGridService,this.checkAccountNumMasking().then(e=>this._posweb.isMaskAcctNum=e).catch(()=>this._posweb.isMaskAcctNum=!1);const e=(0,i.iconOverrides)({type:"image",icons:{asc:{url:`${this._posweb.assetUrl}assets/${this._posweb.version}/sort_ascending.svg`},desc:{url:`${this._posweb.assetUrl}assets/${this._posweb.version}/sort_descending.svg`},none:{url:`${this._posweb.assetUrl}assets/${this._posweb.version}/sort_unsorting.svg`}}});this._poswebGridOptions={tooltipShowDelay:0,columnDefs:C.PoswebColDefinitions.provideColumnDefinitions(l.DEF_POSWEB_STATE.presetColumnsOrder[this._poswebPresetView],!1,""),components:{poswebDetailCellRenderer:O.PoswebDetailCellRenderer,poswebSymbolCellRenderer:te.PoswebSymbolCellRenderer,poswebCostBasisTotalCellRenderer:T.PoswebCostBasisTotalCellRenderer,poswebQuantityCellRenderer:j.PoswebQuantityCellRenderer,poswebNewsCellRenderer:$.PoswebNewsCellRenderer,poswebPendingActivityPopoverCellRenderer:H.PoswebPendingActivityPopoverCellRenderer,poswebSuperscriptCellRenderer:ee.PoswebSuperscriptCellRenderer,poswebGrandTotalPopoverCellRenderer:R.PoswebGrandTotalPopoverCellRenderer,poswebAccountTotalPopoverCellRenderer:_.PoswebAccountTotalPopoverCellRenderer,poswebRangeCellRenderer:z.PoswebRangeCellRenderer,poswebAnalystRatingsCellRenderer:S.PoswebAnalystRatingsCellRenderer,poswebStackedCellRenderer:X.PoswebStackedColumnCellRenderer,poswebMstarCellRenderer:V.PoswebMstarCellRenderer,poswebAccountCellRenderer:m.PoswebAccountCellRenderer,poswebAccountGainLossPopoverCellRenderer:g.PoswebAccountGainLossPopoverCellRenderer,poswebCloPosCostBasisCellRenderer:P.PoswebCloPosCostBasisCellRenderer,poswebDistYieldCellRenderer:A.PoswebDistYieldCellRenderer,poswebSecYieldCellRenderer:Q.PoswebSecYieldCellRenderer},context:{groupBy:W.PoswebGridUtils.getGroupBy()},defaultColDef:C.PoswebColDefinitions.provideDefaultColumnDefinitions(),detailCellRenderer:"poswebDetailCellRenderer",doesExternalFilterPass:e=>this._poswebSearch&&this._poswebSearch.doesExternalFilterPass(e),domLayout:"autoHeight",embedFullWidthRows:!0,enableCellTextSelection:!0,ensureDomOrder:!0,getRowHeight:e=>W.PoswebGridUtils.getRowHeight(e,this._poswebPresetView),getRowId:W.PoswebGridUtils.getRowID,groupDisplayType:"custom",headerHeight:38,isExternalFilterPresent:()=>this._poswebSearch&&this._poswebSearch.isExternalFilterPresent(),initialGroupOrderComparator:e=>W.PoswebGridUtils.initialGroupOrderComparator(e),onFirstDataRendered:()=>this._poswebSearch&&this._poswebSearch.onFirstDataRendered(),masterDetail:!0,navigateToNextCell:e=>W.PoswebGridUtils.navigateToNextPrevCell("navigate",e),navigateToNextHeader:e=>W.PoswebGridUtils.navigateToNextPrevHeader(e),onBodyScroll:e=>this.resetCenterColsViewportShadow(e),onCellKeyDown:e=>W.PoswebGridUtils.gridCellKeyDown("cellkeydown",e),onDragStopped:e=>this.dispatchColumnsOrder(e),onFilterChanged:()=>this._poswebSearch&&this._poswebSearch.showNoRowsMessage(),onGridReady:e=>this.initializeOnGridReady(),onGridSizeChanged:e=>this.adjustGridOnResize(),onRowClicked:W.PoswebGridUtils.toggleRowExpanded,onSortChanged:e=>this.dispatchColumnSortDetails(e),overlayNoRowsTemplate:'<div class="posweb-no-rows-message"\n            ">No positions match your search. Try modifying your search term.</div>',rowBuffer:20,rowClassRules:W.PoswebGridUtils.getRowClassRules(),rowData:[],rowHeight:38,groupAllowUnbalanced:!0,suppressAggFuncInHeader:!0,suppressCellFocus:!1,suppressColumnMoveAnimation:!0,suppressContextMenu:!0,suppressMultiSort:!0,suppressRowDrag:!0,suppressGroupRowsSticky:!0,tabToNextCell:e=>W.PoswebGridUtils.navigateToNextPrevCell("tab",e),tabToNextHeader:e=>W.PoswebGridUtils.navigateToNextPrevHeader(e),isGroupOpenByDefault:()=>W.PoswebGridUtils.getGroupOpenByDefault(),theme:i.themeMaterial.withParams({spacing:0,fontFamily:["Arial","sans-serif"],focusShadow:"#141414 0px 0px 0px 2px",borderColor:"#CCCCCC",cellHorizontalPadding:"5px",fontSize:"13px",headerHeight:"31px",headerTextColor:"#000000",iconSize:"10px",rangeSelectionBorderColor:"#000000",rowHeight:"30px",rowHoverColor:"transparent"}).withPart(e)},this._poswebGridDiv=se.PoswebUtils.getHtmlElement("posweb-grid"),this._pweContainerDiv=se.PoswebUtils.getHtmlElement("posweb-main-container"),x.PoswebGridPreloadMeta.getInstance().invoke().then(()=>{this.getDataForGridRendering(!1,!1)}),this.expandCollapseGbsEventListeners()}static getInstance(){return this._instance||(this._instance=new this)}expandCollapseGbsEventListeners(){var e,t,s,o,i,a,r;this._gridTopContainer=null!==(e=se.PoswebUtils.htmlQuerySelector(".posweb-grid_top-container"))&&void 0!==e?e:null,this._expandGroupsButton=null!==(s=null===(t=this._gridTopContainer)||void 0===t?void 0:t.querySelector(".posweb-grid_top-expand-groups"))&&void 0!==s?s:null,this._collapseGroupsButton=null!==(i=null===(o=this._gridTopContainer)||void 0===o?void 0:o.querySelector(".posweb-grid_top-collapse-groups"))&&void 0!==i?i:null,this.expandGroupsBound=this.expandCollapseAllGroups.bind(this,!0),this.collapseGroupsBound=this.expandCollapseAllGroups.bind(this,!1),null===(a=this._expandGroupsButton)||void 0===a||a.addEventListener("click",this.expandGroupsBound),null===(r=this._collapseGroupsButton)||void 0===r||r.addEventListener("click",this.collapseGroupsBound)}static calculateInGridLayoutHeight(){const e=se.PoswebUtils.htmlQuerySelector("#pgnb"),t=se.PoswebUtils.htmlQuerySelector("#action-bar--container"),s=se.PoswebUtils.htmlQuerySelector("#acct-notification-wrapper"),o=se.PoswebUtils.htmlQuerySelector(".page-content-title"),i=se.PoswebUtils.htmlQuerySelector("#moretab-area > .tabs--nav"),a=se.PoswebUtils.htmlQuerySelector("#posweb-banner"),r=se.PoswebUtils.htmlQuerySelector(".posweb-grid_top"),n=se.PoswebUtils.htmlQuerySelector(".pwe-standalone-heading"),l=se.PoswebUtils.htmlQuerySelector("#dockedTicketContainer"),d=se.PoswebUtils.htmlQuerySelector(".dtt-expand-collapse-toggle"),c=se.PoswebUtils.htmlQuerySelector(".ag-body-horizontal-scroll"),p=se.PoswebUtils.getHtmlElement("posweb-grid");if(p){const u=window.innerHeight-((e?e.offsetHeight:0)+(t?t.offsetHeight:0)+(s?s.offsetHeight+16:0)+(o?o.offsetHeight+15:0)+(i?i.offsetHeight+7:0)+(a&&a.offsetHeight>0?a.offsetHeight+11:0)+(r?r.offsetHeight+4.8:0)+(n?n.offsetHeight+85:0)+(d?d.offsetHeight:0)+(l?l.offsetHeight:0)+(c&&c.offsetHeight>0?c.offsetHeight+1:20));p.style.height=(u>420?u:.8*window.innerHeight)+"px",p.style.boxShadow="0 5px 10px rgba(0, 0, 0, 0.2)"}}getDataForGridRendering(e,t,s){return o.__awaiter(this,void 0,void 0,function*(){this._poswebCommon.amc||(this._poswebCommon.amc=new r.AccountMiniContext,yield this._poswebCommon.amc.retrieveAccountInfo(h.POSWEB_PRESET_VIEW.OVERVIEW)),this._poswebPresetView=this.determineTargetViewWithoutCommonData(this._poswebCommon.amc,s),yield this._poswebCommon.amc.retrieveAccountInfo(this._poswebPresetView),W.PoswebGridUtils.resetLWCPosSystemMessages(),W.PoswebGridUtils.resetEventsSystemMessages(),Y.PoswebPerfMetrics.mark(E.PoswebConstants.MK_GRID_ST),(t=!!this.isViewChanged()||t)&&(this._poswebCommon.historyData=new Map),this._showSps=!1;const o=ne.WindowService.getPositionSettings();if(this._poswebPresetView===h.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW){this._poswebGridClosedPositions.updateSelectedYear();const e=this._poswebGridClosedPositions.checkAccountIsManagedAndTradable();se.PoswebUtils.updateElementStyle("posweb-sps-grid","none"),se.PoswebUtils.updateElementStyle("posweb-grid-closed-position-links","flex"),se.PoswebUtils.updateElementStyle("posweb-grid-reassign-lots-links","flex"),e?se.PoswebUtils.updateElementStyle("posweb-grid-tax-lots-links","flex"):se.PoswebUtils.updateElementStyle("posweb-grid-tax-lots-links","none");const s=[this._poswebGridClosedPositions.getClosedPositionsData(this._poswebCommon.amc)];try{const e=(yield Promise.all(s))[0];e.secTypes&&(o[E.PoswebConstants.SETTINGS_FILTER_ITEMS_SET_CLOSED_KEY]=e.secTypes),this.renderGridForPositions(e,t)}catch(e){this.destroyGrid(),this.noPositionsErrorHandling(e,{cloPosErr:!0})}}else{this._poswebGridFundPerf.positionDirtyFlag=!0;const s=this._poswebCommon.amc,o=[],i=s.hasBrokerageEligibleAccounts||s.hasFiliAccounts||s.hasCrytpoAccounts;this._isSpsOnly=!i;const a=this._posweb.spsToggle&&s.hasSPSAccounts&&(h.POSWEB_PRESET_VIEW.OVERVIEW===this._poswebPresetView||h.POSWEB_PRESET_VIEW.STACK_OVERVIEW===this._poswebPresetView||this._isSpsOnly);if(this._showSps=a,this._posweb.isBasketEnabled=s.hasSubscribedBasket,this._poswebCommon.isHideFundView=void 0,(ne.WindowService.getToggle("ap126216_PWE_PG1_Switch_Enabled")||s.hasSPS&&ne.WindowService.getToggle("ap126216_PWE_PG1_SPS_Switch_Enabled"))&&(se.PoswebUtils.updateElementStyle("posweb-grid_top-beta_view-toggle_on","flex"),se.PoswebUtils.updateElementStyle("posweb-grid_top-toggle-divider","block")),i){const i=[];i.push(this.getPositionsData(e,s));const a=Promise.all(i).then(e=>{this.addTypesToSettings(e[0]),this._poswebPresetView=this.determineTargetViewWithCommonData(e[0]),this.prepareCommonData(e[0]),h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW===this._poswebPresetView?this.getFundDataForGridRendering(t):h.POSWEB_PRESET_VIEW.MY_VIEW===this._poswebPresetView&&e[0].allSymbols&&e[0].allSymbols.length?this.getAdditionalDataForGridRendering(e[0]).then(()=>{this.renderGridForPositions(e[0],t,s)}):this.renderGridForPositions(e[0],t,s)});o.push(a)}a&&o.push(this.getSPSPositionsData(s));const r=yield Promise.allSettled(o);let n=0;if(i){const e=r[n];"rejected"===e.status&&(this.destroyGrid(),this.noPositionsErrorHandling(e.reason,{lwcErr:!0})),n++}else this.destroyGrid();if(a){const e=r[n];"fulfilled"===e.status?this.renderSPSPositions(e.value):(console.error("Error occurred retrieving stock plans data, and error is %o",e.reason),W.PoswebGridUtils.constructLWCPosSystemMessages("sps",{spsErr:!0}),this.postDataReceivedActions("sps"),se.PoswebUtils.updateElementStyle("posweb-sps-grid","none"))}else se.PoswebUtils.updateElementStyle("posweb-sps-grid","none");"function"==typeof ne.WindowService.getProperty("clearPWEUnsupportedTimer")&&ne.WindowService.getProperty("clearPWEUnsupportedTimer")()}})}getAdditionalDataForGridRendering(e){return o.__awaiter(this,void 0,void 0,function*(){const t=ne.WindowService.getPositionSettings().myViewSelCols,{research:s,company_profile:o,options:i,volatility:a,fund_performance:r}=p.MY_VIEW_COL_DEFINITIONS,n=[...s,...o,...i,...a,"yearHighDate","yearLowDate"].filter(e=>!this.keysToExcludeFromQuoteCall.includes(e)),{newsSymbols:l,rowMap:d}=this.getSymbolsFromRows(e),{quoteData:c,fundData:u,newsData:b}=yield this.fetchDataSource(t,n,r,e,l);e.columnWidthData=this.getFinalColumnWidths(c,u,e),e.legendVisibility.hasAnalystRatings=!!(null==c?void 0:c.rowData.length)&&c.hasAnalystRatings,this.mapRowDataWithFetchedInfo(e,d,c,u,b)})}getFinalColumnWidths(e,t,s){const o={},i=(null==e?void 0:e.columnWidthData)||{},a=(null==t?void 0:t.columnWidthData)||{},r=(null==s?void 0:s.columnWidthData)||{};return new Set([...Object.keys(i),...Object.keys(a),...Object.keys(r)]).forEach(e=>{const t=[i[e],a[e],r[e]].filter(e=>"number"==typeof e);o[e]=Math.max(...t)}),o}getSymbolsFromRows(e){var t;const s=[],o={};return null===(t=e.rowData)||void 0===t||t.forEach((e,t)=>{if("POSITION"===e.rowType&&e.sym){const i="Digital Currency"===e.meta.securityType,a=!0===e.meta.isStableCoinInd,r=e.sym.name.split("/")[0];i&&!a?s.push("FI/DigCurr."+r):a?s.push("FI/DigCurr.STABLECO"):s.push(e.sym.name+".NAE"),o[t]={row:e,cryptoSymbol:r,isStable:a}}}),{newsSymbols:s,rowMap:o}}fetchDataSource(e,t,s,i,a){return o.__awaiter(this,void 0,void 0,function*(){const o="string"==typeof e?e.split(","):[],r=o.filter(e=>s.includes(e)),n=o.filter(e=>t.includes(e)),l=o.filter(e=>e.includes("news")),[d,c,p]=yield Promise.all([n.length?this._poswebGridQuoteColumns.getQuoteColumnData(i.allSymbols).catch(()=>W.PoswebGridUtils.constructLWCPosSystemMessages("brkg",{qteErr:!0})):Promise.resolve(null),r.length?this._poswebGridFundPerf.getFundPerformanceData().catch(()=>W.PoswebGridUtils.constructLWCPosSystemMessages("brkg",{fundErr:!0})):Promise.resolve(null),l.length?this._poswebGridNewsColumns.getNewsColumnData(a).catch(()=>W.PoswebGridUtils.constructLWCPosSystemMessages("brkg",{newsErr:!0})):Promise.resolve(null)]);return{quoteData:d,fundData:c,newsData:p}})}mapRowDataWithFetchedInfo(e,t,s,o,i){var a,r,n;const l=null!==(a=null==i?void 0:i.flat().flatMap(e=>{var t;return null!==(t=e.newsData)&&void 0!==t?t:[]}))&&void 0!==a?a:[];for(const i in t){if(!Object.prototype.hasOwnProperty.call(t,i))continue;const{row:a,cryptoSymbol:d,isStable:c}=t[i],p=(null===(r=null==s?void 0:s.rowData)||void 0===r?void 0:r.find(e=>{var t,s;return(null===(t=e.sym)||void 0===t?void 0:t.cusip)===a.sym.cusip||(null===(s=e.sym)||void 0===s?void 0:s.name)===a.sym.name}))||{},u=l.find(e=>{var t,s,o,i,r,n;return e.symbol===a.sym.name||(null===(o=null===(s=null===(t=e.symbol)||void 0===t?void 0:t.split("."))||void 0===s?void 0:s.pop())||void 0===o?void 0:o.toUpperCase())===(null==d?void 0:d.toUpperCase())||"STABLECO"===(null===(n=null===(r=null===(i=e.symbol)||void 0===i?void 0:i.split("."))||void 0===r?void 0:r.pop())||void 0===n?void 0:n.toUpperCase())&&c})||{},b=(null===(n=null==o?void 0:o.rowData)||void 0===n?void 0:n.find(e=>{var t,s;return(null===(t=e.sym)||void 0===t?void 0:t.cusip)===a.sym.cusip||(null===(s=e.sym)||void 0===s?void 0:s.name)===a.sym.name}))||{};e.rowData[i]=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,le.createMyFundViewTemplate)()),(0,de.createQuoteTemplate)()),b),p),u),e.rowData[i])}}getFundDataForGridRendering(e){return se.PoswebUtils.updateElementStyle("posweb-sps-grid","none"),this._poswebGridFundPerf.getFundPerformanceData().then(t=>{const s=t;"Not Applicable"===(null==s?void 0:s.grid)?(se.PoswebUtils.updateElementStyle("posweb-grid-reassign-Lots-link","none"),se.PoswebUtils.updateElementStyle("posweb-grid-legacy-link","none"),se.PoswebUtils.updateElementStyle("posweb-grid","none"),se.PoswebUtils.updateElementStyle("posweb-message-box-no-funds","block"),se.PoswebUtils.updateElementStyle("posweb-legend-main","none"),this._portfolioActns={},this.postDataReceivedActions("brkg",s),this.postRenderGridActions(),this.destroyGrid()):this.renderGridForPositions(s,e)}).catch(e=>{this.destroyGrid(),this.noPositionsErrorHandling(e,{fundErr:!0})})}overviewOrStackview(){return W.PoswebGridUtils.shouldUseStackView()?h.POSWEB_PRESET_VIEW.STACK_OVERVIEW:h.POSWEB_PRESET_VIEW.OVERVIEW}accessMetrics(e,t,s){if(s){const s=W.PoswebGridUtils.getCurrentFplTreatment();b.MetricsService.sendMetricsRequest(e,u.MetricsActionTypes.INTERACTION,t,b.MetricsService.setMetricsTrans([s]))}else b.MetricsService.sendMetricsRequest(e,u.MetricsActionTypes.INTERACTION,t)}getPopup(e){window.open(e,"_blank",`toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=yes,${se.PoswebUtils.getPopupPosition(850,900)}`)}navigateToBalances(){const e=se.PoswebUtils.htmlQuerySelector("#portsum-tab-balances");null==e||e.click()}onOpenPopupBtnClick(e,t,s,o,i){if(!o&&s&&s.stopPropagation(),!e)throw new Error("open page url is not valid");if(-1!==e.indexOf("%")&&(e=encodeURI(e)),window.open(e,"_blank",t),i&&s){const e=s.target||s.srcElement;e&&e.blur()}}onBtnClose(e,t){if(e.stopPropagation(),this._poswebGrid){const e=this._poswebGrid.getRowNode(t);if(e&&!0===e.expanded){e.beans.gridApi.getCellRendererInstances({columns:["sym"],rowNodes:[e]})[0].rowExpandToggled(!1),e.setExpanded(!1),this._poswebCommon.historyData.delete(e.id),W.PoswebGridUtils.exitMasterDetailRow(e),b.MetricsService.sendMetricsRequest("collapseDrawer")}}}drawerExitNavigate(e,t,s){if(e.stopPropagation(),this._poswebGrid){const e=this._poswebGrid.getRowNode(t);e&&W.PoswebGridUtils.exitMasterDetailRow(e,s)}}onChartTimeframeClick(e,t){const s=se.PoswebUtils.getHtmlElement(e+t);let o;if(s&&!s.classList.contains("posweb-current-chart-time")){const e=s.getAttribute("data-chartTime"),i=s.getAttribute("data-chartFreq"),a=se.PoswebUtils.getHtmlElement("researchChartImage-"+t);o=a.getAttribute("src");const r=o.substring(0,o.indexOf("&time"))+"&time="+e+"&freq="+i;a.setAttribute("src",r);se.PoswebUtils.getHtmlElement("poswebResearchChart-"+t).getElementsByClassName("posweb-current-chart-time")[0].classList.remove("posweb-current-chart-time"),s.classList.add("posweb-current-chart-time")}}refreshQuotes(e,t,s,o){ae.QuoteCardComponent.retrieveQuotes(s,this._poswebGridDiv,e,t,o)}openFplLearnMoreModal(){D.PoswebFplModal.getInstance().fplLearnMoreModal();const e=se.PoswebUtils.htmlQuerySelector(".posweb-fpl-modal-review--button"),t=W.PoswebGridUtils.getCurrentFplTreatment();["PWE-FPL-Inline-Learn-More","PWE-FPL-Banner-Inline-Learn-More"].indexOf(null==t?void 0:t.name)>-1&&e&&!e.onclick&&(e.onclick=()=>{b.MetricsService.sendMetricsRequest("FPLModalReview",u.MetricsActionTypes.INTERACTION,"",b.MetricsService.setMetricsTrans([t],"clickthru")),window.open(this._posweb.pznFPLReviewLinkUrl,"_blank")})}noPositionsErrorHandling(e,t){console.error("Error occurred retrieving positions data, and error is %o",e);const s=ne.WindowService.getPositionSettings().presetView;this._poswebPresetView===s&&h.POSWEB_PRESET_VIEW.OVERVIEW!==this._poswebPresetView&&h.POSWEB_PRESET_VIEW.STACK_OVERVIEW!==this._poswebPresetView&&(this._poswebPresetView=h.POSWEB_PRESET_VIEW.OVERVIEW,this.savePresetViewInSessionState()),W.PoswebGridUtils.constructLWCPosSystemMessages("brkg",t),se.PoswebUtils.updateElementStyle("posweb-grid","none"),se.PoswebUtils.updateElementStyle("posweb-sps-grid","none"),se.PoswebUtils.updateElementStyle("posweb-legend-main","none"),this._portfolioActns={},this.postDataReceivedActions("brkg"),this.postRenderGridActions()}getPositionsData(e,t){var s;const o=Boolean(t.hasSubscribedBasket),i=Boolean(ne.WindowService.getPositionSettings().isGroupBySecurityType),a=W.PoswebGridUtils.retrieveSettings(o,E.PoswebConstants.SETTINGS_FILTER_KEY),r=W.PoswebGridUtils.retrieveToggles(),n=[h.POSWEB_PRESET_VIEW.OVERVIEW,h.POSWEB_PRESET_VIEW.STACK_OVERVIEW,h.POSWEB_PRESET_VIEW.DIVIDEND_VIEW,h.POSWEB_PRESET_VIEW.MY_VIEW].indexOf(this._poswebPresetView)>-1?this._poswebPresetView:this.overviewOrStackview();return this._poswebGrid&&(null===(s=se.PoswebUtils.getHtmlElement("posweb-spinner"))||void 0===s||s.setAttribute("pvd-hidden","false")),this.$openPositionsSubscription&&this.$openPositionsSubscription.unsubscribe(),new Promise((s,l)=>{this.$openPositionsSubscription=this._poswebGridService.retrievePositionsData(se.PoswebUtils.addToHeaders([{key:"preset-view",value:n}]),{accts:t.accts,amc:t.amc,externalCustId:t.externalCustId,isRefresh:e,settings:a,isBasketEnable:o,isGroupBySecurityEnable:i,toggles:r,pzn:ne.WindowService.getProperty(E.PoswebConstants.PWE_PZN_TREATMENTS)}).subscribe({next:e=>{e?s(e):l(new Error("No response from Open Positions API"))},error:l,complete:s})})}getSPSPositionsData(e){var t;const s=se.PoswebUtils.getHtmlElement("posweb-sps-grid");"block"===(null==s?void 0:s.style.display)&&(null===(t=se.PoswebUtils.getHtmlElement("posweb-sps-spinner"))||void 0===t||t.setAttribute("pvd-hidden","false"));const o=W.PoswebGridUtils.retrieveSettings(!1,E.PoswebConstants.SETTINGS_FILTER_KEY);return this.$spsPositionsSubscription&&this.$spsPositionsSubscription.unsubscribe(),new Promise((t,s)=>{this.$spsPositionsSubscription=this._poswebGridService.retrieveSPSPositionsData({accts:e.spsAccts,amc:e.amc,settings:o}).subscribe({next:e=>{e?t(e):s(new Error("No response from SPS Positions API"))},error:s,complete:t})})}prepareCommonData(e){var t;this._poswebCommon.basketData=e.basketData||{},this._poswebCommon.groupBySecurityData=e.groupBySecurityData||{},e.slvData&&(this._poswebCommon.sleeveData=e.slvData),this._portfolioActns=e.portfolioActions,this._poswebStore.store.dispatch(y.PoswebActions.dispatchGridData(e.rowData,this._poswebCommon.sleeveData,this._poswebCommon.basketData,this._poswebCommon.groupBySecurityData)),this._posweb.acctfndPerfCd=null===(t=e.portfolioActions)||void 0===t?void 0:t.fndPerfCd}renderGridForPositions(e,t,s){var o,r,n,d,c,p;const w=Boolean((null===(o=e.rowData)||void 0===o?void 0:o.length)&&e.rowData.length>0);this.destroyGrid(),!t&&w||(se.PoswebUtils.updateElementStyle("posweb-message-box-no-funds","none"),se.PoswebUtils.updateElementStyle("posweb-message-box-no-cols","none")),this._posweb.totalNoOfAccts=e.totalNoOfAccts,this._posweb.hasForeignSecurities=(null===(r=e.allSecurityTypes)||void 0===r?void 0:r.indexOf("Foreign Securities"))>-1,this._posweb.hasPriorDaySecurities=e.isPriorDayGainLossReset&&(null===(n=e.allSecurityTypes)||void 0===n?void 0:n.some(e=>["Annuity","Bond","Custom Fund","Certificate Of Deposit","Mutual Fund","Others","Nonquotable Equity","Unclassified"].includes(e)));const v=this._poswebStore.store.getState().columnSortDetails[this._poswebPresetView]||l.DEF_POSWEB_STATE.columnSortDetails[this._poswebPresetView];let m=!1,g=this._poswebStore.store.getState().presetColumnsOrder[this._poswebPresetView]||l.DEF_POSWEB_STATE.presetColumnsOrder[this._poswebPresetView];g=-1===g.search(/\bslv\b/)?"slv,"+g:g,g=-1===g.search(/\bbasket\b/)?"basket,"+g:g,g=-1===g.search(/\bact\b/)?g+",act":g,g=-1===g.search(/\bgroupBySecurity\b/)?"groupBySecurity,"+g:g,g=W.PoswebGridUtils.updateColumnOrder(g,this._poswebPresetView);const _=this._poswebStore.store.getState().settings.pinnedSymbol,S="boolean"==typeof _?_:l.DEF_POSWEB_STATE.settings.pinnedSymbol;e.meta=e.meta||{},e.meta.pinnedSymbol=S,this._posweb.allSymTotInfos=e.meta.allSymTotInfos,this._poswebGridOptions.columnDefs=C.PoswebColDefinitions.provideColumnDefinitions(g,e.meta,v),this._poswebGridOptions.context.groupBy=W.PoswebGridUtils.getGroupBy();const P=null===(d=e.allSecurityTypes)||void 0===d?void 0:d.includes("Digital Currency");this._poswebGridOptions.context={isDigitalCurrency:P},e.legendVisibility&&(this._legendVisibility=e.legendVisibility,e.legendVisibility.isCustomerProvidedPosition=this._poswebGridOptions.context.isDigitalCurrency,this.setupVisibilityForSuperscriptDisclosure(e.legendVisibility,e.fundPerfAsOfDate,e.isPriorDayGainLossReset,P),W.PoswebGridUtils.setupVisibilityForPortfolioEventsDisclosure(this._poswebPresetView,null==s?void 0:s.hasCrytpoAccounts),m=!0===e.legendVisibility.isLegend),e.columnWidthData&&(W.PoswebGridUtils.isMobileDevice()&&(e.columnWidthData.sym=140),this._poswebColData=e.columnWidthData,C.PoswebColDefinitions.updateColWidth(this._poswebGridOptions,this._poswebColData)),W.PoswebGridUtils.constructLWCPosSystemMessages("brkg",e.systemMessages,this._prefManager.isSafeMode,w,null==s?void 0:s.hasSubscribedBasket),this._poswebCommon.poswebCurrentView=this._poswebPresetView,h.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW===this._poswebPresetView?(this._poswebCommon.actGroupData=e.actGroupData||{},this._poswebCommon.groupBySecurityData=e.groupBySecurityData||{},se.PoswebUtils.updateElementStyle("posweb-grid-closed-position-links","flex"),se.PoswebUtils.updateElementStyle("posweb-grid-reassign-Lots-link","none")):(se.PoswebUtils.updateElementStyle("posweb-grid-legacy-link","none"),se.PoswebUtils.updateElementStyle("posweb-grid-reassign-Lots-link","none"),se.PoswebUtils.updateElementStyle("posweb-grid-tax-Lots-links","none")),this._poswebStore.store.dispatch(y.PoswebActions.dispatchGridData(e.rowData,this._poswebCommon.sleeveData,this._poswebCommon.basketData,this._poswebCommon.groupBySecurityData)),this.postDataReceivedActions("brkg",e),Y.PoswebPerfMetrics.mark(E.PoswebConstants.MK_GRID_PAINT_ST),this._poswebGridOptions.rowData=e.rowData,w&&(this.determineInGridLayoutMode(e.rowData.length),this._poswebGrid=(0,i.createGrid)(this._poswebGridDiv,this._poswebGridOptions,{modules:[i.ClientSideRowModelModule,i.AllCommunityModule,a.RowGroupingModule,a.RowGroupingPanelModule,a.GroupFilterModule,a.TreeDataModule,a.PivotModule,a.MasterDetailModule]}),this._pweContainerDiv.removeEventListener("click",this.clickEventDelegator),this._pweContainerDiv.addEventListener("click",this.clickEventDelegator)),Y.PoswebPerfMetrics.mark(E.PoswebConstants.MK_GRID_PAINT_END),Y.PoswebPerfMetrics.measure(E.PoswebConstants.MES_GRID_PAINT,E.PoswebConstants.MK_GRID_PAINT_ST,E.PoswebConstants.MK_GRID_PAINT_END),W.PoswebGridUtils.setGridCaptionSummary(this._poswebGridDiv,this._poswebGrid,e.meta.pinnedSymbol),se.PoswebUtils.updateElementStyle("posweb-grid","block"),this._showSps&&(se.PoswebUtils.updateElementStyle("posweb-sps-grid","block"),se.PoswebUtils.updateElementStyle("posweb-sps-sub-header","flex"),null===(c=se.PoswebUtils.getHtmlElement("posweb-sps-spinner"))||void 0===c||c.setAttribute("pvd-hidden","false")),m?se.PoswebUtils.updateElementStyle("posweb-legend-main","block"):se.PoswebUtils.updateElementStyle("posweb-legend-main","none"),this.postRenderGridActions(e),this.savePresetViewInSessionState(),this.saveBannerSeenDateInState(e.gbsBannerExists);const f=Z.PoswebSettings.getPageVersion(),T=this.getMetricsAcctType(),I=(null===(p=ne.WindowService.getProperty(E.PoswebConstants.PWE_PZN_TREATMENTS))||void 0===p?void 0:p.length)>0?b.MetricsService.setMetricsTrans(ne.WindowService.getProperty(E.PoswebConstants.PWE_PZN_TREATMENTS),"impression"):void 0;setTimeout(()=>{b.MetricsService.sendMetricsRequest("Grid loading completed",u.MetricsActionTypes.PAGEVIEW,f,I,T)},4e3),[h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW,h.POSWEB_PRESET_VIEW.DIVIDEND_VIEW,h.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW].indexOf(this._poswebPresetView)>-1&&setTimeout(()=>{b.MetricsService.sendMetricsRequest(this._poswebPresetView)},4e3),h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW!==this._poswebPresetView&&h.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW!==this._poswebPresetView&&L.PoswebGridAfterLoadEvents.getInstance().invoke(),this.showFPLBanner()}getMetricsAcctType(){var e,t;const{rowData:s}=this._poswebGridOptions;return Array.isArray(s)&&1===this._posweb.totalNoOfAccts?null===(t=null===(e=s[0])||void 0===e?void 0:e.meta)||void 0===t?void 0:t.acctType:"multi"}renderSPSPositions(e){var t;if(null===(t=se.PoswebUtils.getHtmlElement("posweb-sps-spinner"))||void 0===t||t.setAttribute("pvd-hidden","true"),(null==e?void 0:e.snippet)&&""!==e.snippet){if(this.postDataReceivedActions("sps",e),se.PoswebUtils.updateInnerHtml("posweb-sps-container",e.snippet),se.PoswebUtils.updateElementStyle("posweb-sps-grid","block"),W.PoswebGridUtils.constructLWCPosSystemMessages("sps",e.systemMessages,this._prefManager.isSafeMode,!0),this._isSpsOnly){const e=this.getMetricsAcctType();setTimeout(()=>{b.MetricsService.sendMetricsRequest("SPS Grid loading completed",u.MetricsActionTypes.PAGEVIEW,void 0,void 0,e)},4e3)}}else W.PoswebGridUtils.constructLWCPosSystemMessages("sps",{spsErr:!0},this._prefManager.isSafeMode,!1),this.postDataReceivedActions("sps"),se.PoswebUtils.updateInnerHtml("posweb-sps-container",""),se.PoswebUtils.updateElementStyle("posweb-sps-grid","none")}postRenderGridActions(e){var t,s;if(this._poswebPresetView===h.POSWEB_PRESET_VIEW.MY_VIEW){const s=null===(t=null==e?void 0:e.otherFilters)||void 0===t?void 0:t.isOptionable;W.PoswebGridUtils.displayOnlyVisibleColumns(this._poswebGrid,s)}if(this.sizeColumnsToFit(),document.dispatchEvent(new CustomEvent("pweGridLoaded")),null===(s=se.PoswebUtils.getHtmlElement("posweb-spinner"))||void 0===s||s.setAttribute("pvd-hidden","true"),Y.PoswebPerfMetrics.mark(E.PoswebConstants.MK_GRID_END),Y.PoswebPerfMetrics.measure(E.PoswebConstants.MES_GRID,E.PoswebConstants.MK_GRID_ST,E.PoswebConstants.MK_GRID_END),this.setColumnSuperScriptDesc(),setTimeout(()=>{se.PoswebUtils.htmlQuerySelector("#fixed-income-url")&&this.accessMetrics("Fixed_Income_Dashboard_Acct_Row_Impression")}),this._poswebGrid){this._poswebGrid.refreshCells({force:!0});const{myViewSelCols:e}=ne.WindowService.getPositionSettings();!e&&ne.WindowService.getPositionSettings().showMyViewIntro&&ne.WindowService.getToggle("ap126216_PWE_Custom_Columns_Intro")&&(this._poswebGridService.saveStateData({entry:[{key:"showMyViewIntro",value:"false"}]}).subscribe(),ne.WindowService.getPositionSettings().showMyViewIntro=!1,b.MetricsService.sendMetricsRequest("my view intro modal",u.MetricsActionTypes.PAGEVIEW,"my view intro modal"),se.PoswebUtils.renderCCBanner())}}postDataReceivedActions(e,t){var s;if(this.updateGridTopRefreshButton(),this.updateGridTopAsOfDate(),"brkg"===e){(h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW===this._poswebPresetView||Boolean((null===(s=null==t?void 0:t.rowData)||void 0===s?void 0:s.length)&&t.rowData.length>0))&&(this.updateGridTopPresetViews(t),this.updateGridTopYearSelect(),this.updateGridTopKebabItems(),this.updateKebabKeydownListeners(),this._poswebSearch&&this._poswebSearch.destroy(),this._poswebSearch=new K.PoswebSearch,this._poswebSearch.updateSearchEventListeners(),d.FilterPopoverComponent.initializeFilterPopover(this._poswebPresetView),this.updateGridTopSettingsButton(t))}n.AccountSelector.updateAccountTotals(null==t?void 0:t.acctTot,null==t?void 0:t.grandTotBalance),this.updateGridTopDisplay(e,t),this._isSpsOnly&&(document.dispatchEvent(new CustomEvent("pweGridLoaded")),this.updateGridTopPresetViews(t),this.updateGridTopKebabItems(),this.updateKebabKeydownListeners(),this.hideNonSPSButtons(),this.updateGridTopSettingsButton(t))}updateGridTopKebabItems(){const e=se.PoswebUtils.htmlQuerySelector("#kebabmenuitem-print");e&&!e.onclick&&(e.onclick=()=>{this.kebabCloseMenu(),q.PoswebPrintUtils.printGrid()});const t=se.PoswebUtils.htmlQuerySelector("#kebabmenuitem-download");t&&!t.onclick&&(t.onclick=()=>{this.kebabCloseMenu(),this._poswebExport.exportGrid(this._poswebPresetView)});const s=se.PoswebUtils.htmlQuerySelector("#kebabmenuitem-userguide");s&&!s.onclick&&(s.onclick=()=>{this.kebabCloseMenu(),window.open(this._posweb.domains.pweGuideUrl,"_blank","toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no")})}updateKebabKeydownListeners(){se.PoswebUtils.htmlQuerySelectorAll(".posweb-kebabmenu_item").forEach(e=>{e.addEventListener("keydown",this.kebabElementKeydownCallback)})}kebabCloseMenu(){const e=se.PoswebUtils.htmlQuerySelector(".posweb-grid_top-popover-trigger"),t=se.PoswebUtils.htmlQuerySelector(".posweb-grid_top-kebab_popover");t&&t.setAttribute("pvd-open","false"),null==e||e.focus()}kebabElementKeydownCallback(e){e.preventDefault();const t=e.target,s=se.PoswebUtils.htmlQuerySelectorAll(".posweb-kebabmenu_item");if(!s.length)return;const o=Array.from(s).indexOf(t);if(["Tab","Escape"," ","Enter"].indexOf(e.key)>-1)" "!==e.key&&"Enter"!==e.key||t.click(),pe.getInstance().kebabCloseMenu();else if("ArrowUp"===e.key||"ArrowDown"===e.key){s["ArrowUp"===e.key?0===o?s.length-1:o-1:o===s.length-1?0:o+1].focus()}}updateGridTopDisplay(e,t){var s;const o={brkg:"posweb-grid_top-brokerage",sps:"posweb-grid_top-sps"},i="brkg"!==e||h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW===this._poswebPresetView||Boolean((null===(s=null==t?void 0:t.rowData)||void 0===s?void 0:s.length)&&t.rowData.length>0),a=se.PoswebUtils.getHtmlElement("posweb-grid_top");a&&(t&&i?a.classList.add(o[e]):a.classList.remove(o[e])),se.PoswebUtils.updateElementStyle("posweb-grid_top","block")}initializeOnGridReady(){c.HorizontalScrollBarBehavior.initializeHorizontalScrollBarBehavior(!this._isInGridLayoutMode),re.StickyHeaderBehavior.initialize(!this._isInGridLayoutMode),ne.WindowService.getProperty("ap126216-pwe-ingrid-resize")&&window.removeEventListener("resize",ne.WindowService.getProperty("ap126216-pwe-ingrid-resize")),this.processGridResizeModifications(),this._isInGridLayoutMode&&(ne.WindowService.getWindow()["ap126216-pwe-ingrid-resize"]=pe.calculateInGridLayoutHeight,window.addEventListener("resize",ne.WindowService.getProperty("ap126216-pwe-ingrid-resize")));document.querySelector('[data-ref="eGridRoot"]').setAttribute("role","grid")}processGridResizeModifications(){this._isInGridLayoutMode&&pe.calculateInGridLayoutHeight(),this.adjustColsOnResize()}adjustColsOnResize(){this.sizeColumnsToFit(),this.sizeElementsClosedPosInSmallerScreens(),this._poswebCommon.matchElementWidthsToGrid([".posweb-row-no_positions .posweb-cell-row_header",".posweb-row-na_positions .posweb-cell-row_header",".posweb-row-unsupt_account .posweb-cell-row_header",".posweb-row-account_msg .posweb-cell-row_header",".posweb-row-sleeve_group .posweb-cell-row_header",".posweb-row-position .posweb-drawer-detail",".ag-pinned-left-cols-container .posweb-row-account",".ag-pinned-left-cols-container .posweb-row-symbol"])}dispatchColumnsOrder(e){if(W.PoswebGridUtils.closeSortPopOver(),this._prefManager.checkColOrderChangeSubscription()||this._prefManager.subscribeColOrderChange(),this._poswebPresetView===h.POSWEB_PRESET_VIEW.MY_VIEW&&(this._prefManager.checkMyViewSelColumnsChangSubscription()||this._prefManager.subscribeMyViewSelectColumnsChange()),null==e?void 0:e.api){const t=Object.assign({},this._poswebStore.store.getState().presetColumnsOrder);if(t[this._poswebPresetView]=e.api.getAllGridColumns().map(e=>e.getId()).join(),this._poswebPresetView===h.POSWEB_PRESET_VIEW.MY_VIEW){const{myViewSelCols:e}=ne.WindowService.getPositionSettings(),s=e?e.split(","):[],o=se.PoswebUtils.sortMyViewColumns(s,t.MyView.split(",")).join(",");this._poswebStore.store.dispatch(y.PoswebActions.dispatchMyViewColumnsOrder(o)),ne.WindowService.getPositionSettings().myViewSelCols=o,t[h.POSWEB_PRESET_VIEW.MY_VIEW]=o,this._poswebStore.store.dispatch(y.PoswebActions.dispatchPresetColumnsOrder(t))}else this._poswebStore.store.dispatch(y.PoswebActions.dispatchPresetColumnsOrder(t))}}dispatchColumnSortDetails(e){if(W.PoswebGridUtils.closeSortPopOver(),this._prefManager.subscribeColSortChange(),null==e?void 0:e.api){const t=Object.assign({},this._poswebStore.store.getState().columnSortDetails);e.api.getAllGridColumns().filter(e=>{var s;const o=e.getSort();if(o&&!e.colDef.hide){const i=null===(s=e.colDef.headerComponentParams)||void 0===s?void 0:s.sortBy;t[this._poswebPresetView]=e.getId()+":"+o,i&&(t[this._poswebPresetView]=t[this._poswebPresetView]+":"+i),this._poswebStore.store.dispatch(y.PoswebActions.dispatchColumnSortDetails(t))}})}}determineInGridLayoutMode(e){e>(se.PoswebUtils.isIE()||se.PoswebUtils.isEdge()?this._posweb.inGridThresholdIEEdge:this._posweb.inGridThreshold)&&(this._poswebGridOptions.domLayout="normal",this._isInGridLayoutMode=!0)}initialize(){q.PoswebPrintUtils.updatePrintListener(!0,!0),this._poswebPresetView=this.overviewOrStackview()}isViewChanged(){return W.PoswebGridUtils.shouldUseStackView()&&h.POSWEB_PRESET_VIEW.OVERVIEW===this._poswebPresetView?(this._poswebPresetView=h.POSWEB_PRESET_VIEW.STACK_OVERVIEW,!0):!W.PoswebGridUtils.shouldUseStackView()&&h.POSWEB_PRESET_VIEW.STACK_OVERVIEW===this._poswebPresetView&&(this._poswebPresetView=h.POSWEB_PRESET_VIEW.OVERVIEW,!0)}clickEventDelegator(e){e&&e.target&&e.target.matches(".posweb-metrics")&&e.srcElement&&e.srcElement.hasAttribute("data-metrics")&&b.MetricsService.sendMetricsRequest(e.srcElement.getAttribute("data-metrics"))}setupVisibilityForSuperscriptDisclosure(e,t,s,o){e&&e.isLegend&&se.PoswebUtils.getHtmlElement("posweb-legend-main")&&(W.PoswebGridUtils.updateLegendElement(e.isThirdPartyPosition,"posweb-legend-thirdParty"),W.PoswebGridUtils.updateLegendElement(e.isDefaultPosition,"posweb-legend-defaultPosition"),o?W.PoswebGridUtils.updateLegendElement(e.isCustomerProvidedPosition,"posweb-legend-customerProvidedPosition-crypto"):W.PoswebGridUtils.updateLegendElement(e.isCustomerProvidedPosition,"posweb-legend-customerProvidedPosition"),W.PoswebGridUtils.updateLegendElement(e.isInvestmentAdvisorPosition,"posweb-legend-investmentAdvisorPosition"),W.PoswebGridUtils.updateLegendElement(e.isEstimatedCostPosition,"posweb-legend-estimatedCostPosition"),W.PoswebGridUtils.updateLegendElement(e.isACSCPosition,"posweb-legend-ACSCPosition"),W.PoswebGridUtils.updateLegendElement(e.isFootNoteOne,"posweb-legend-footNote1"),W.PoswebGridUtils.updateLegendElement(e.isFootNoteTwo,"posweb-legend-footNote2"),W.PoswebGridUtils.updateLegendElement(e.isFootNoteThree,"posweb-legend-footNote3"),W.PoswebGridUtils.updateLegendElement(e.isCorePosition,"posweb-legend-corePosition"),W.PoswebGridUtils.updateLegendElement(e.isCryptoCorePosition,"posweb-legend-cryptoCorePosition"),W.PoswebGridUtils.updateLegendElement(e.isCustomerProvidedPosition,"posweb-legend-cryptoshroutPosition"),W.PoswebGridUtils.updateLegendElement(e.isPositionNotPricedToday&&!s,"posweb-legend-notPricedToday"),W.PoswebGridUtils.updateLegendElement(e.isPositionNotPricedToday&&s,"posweb-legend-notPricedToday-reset"),W.PoswebGridUtils.updateLegendElement(e.isWashSaleAdjInd&&!ne.WindowService.getPositionSettings().isUnadjusted,"posweb-legend-washSaleAdj"),W.PoswebGridUtils.updateLegendElement(e.isWashSaleAdjInd&&ne.WindowService.getPositionSettings().isUnadjusted,"posweb-legend-washSaleUnadj"),W.PoswebGridUtils.updateLegendElement(e.hasNearExpirationDate,"posweb-legend-near-expiration"),W.PoswebGridUtils.updateLegendElement(e.isIntradayActivity,"posweb-legend-intraday"),W.PoswebGridUtils.updateLegendElement(e.isDividendCol,"posweb-legend-dividend-disclosure"),se.PoswebUtils.updateElementStyle("posweb-legend-dividend-disclosure-yield","none"),se.PoswebUtils.getHtmlElement("posweb-legend-dividend-disclosure-yield").classList.remove("posweb-legend-padding-bottom"),se.PoswebUtils.updateElementStyle("posweb-legend-dividend-disclosure-dist-yield","block"),se.PoswebUtils.updateElementStyle("posweb-legend-dividend-disclosure-sec-yield","block"),W.PoswebGridUtils.updateLegendElement(e.isDividendCol,"posweb-legend-est-disclosure"),W.PoswebGridUtils.updateLegendElement(e.hasAnalystRatings,"posweb-legend-eq-score"),W.PoswebGridUtils.updateLegendElement(e.isFiliPContract,"posweb-legend-annuity-contract"),W.PoswebGridUtils.updateLegendElement(e.isFiliPCurVal,"posweb-legend-annuity-curVal"),W.PoswebGridUtils.updateLegendElement(e.isFundPerformance,"posweb-legend-mf-desc"),W.PoswebGridUtils.updateLegendElement(e.isFundPerformance,"posweb-legend-exp-ratio-net"),W.PoswebGridUtils.updateLegendElement(e.isFundPerformance,"posweb-legend-exp-ratio-grs"),W.PoswebGridUtils.updateLegendElement(e.isFundPerformance,"posweb-legend-ytd"),W.PoswebGridUtils.updateLegendElement(e.isFundPerformance,"posweb-legend-yr"),W.PoswebGridUtils.updateLegendElement(e.isFundPerformance,"posweb-legend-star"),W.PoswebGridUtils.updateLegendElement(e.isSingleFPRAH,"posweb-legend-fprah-annuity-contract"),W.PoswebGridUtils.updateLegendElement(e.isSaleDate,"posweb-legend-sale-date"),W.PoswebGridUtils.updateLegendElement(e.isMarginInd,"posweb-legend-margin"),W.PoswebGridUtils.updateLegendElement(e.isShortInd,"posweb-legend-short"),W.PoswebGridUtils.updateLegendElement(e.isBasketed,"posweb-legend-basket"),W.PoswebGridUtils.updateLegendElement(e.hasExternalAccount,"posweb-legend-external-account"),W.PoswebGridUtils.updateLegendElement(e.isMngAcct,"posweb-legend-managed-account"),e.isFundPerformance&&t&&(se.PoswebUtils.htmlQuerySelector(".posweb-legend-yr-asofDate").textContent="Yearly fund performance as of "+se.PoswebUtils.formatDate(t)+"."),(0,ce.range)(1,17).forEach(t=>{W.PoswebGridUtils.updateLegendElement(e.filiDisclosures.indexOf(t)>-1,"posweb-legend-fili-"+t)}),W.PoswebGridUtils.updateLegendElement(e.isEWSDataUnavailable,"posweb-legend-unavailabWashSaleUnadj"),W.PoswebGridUtils.updateLegendElement(!1,"posweb-legend-mf-top-ten-disclosure"),pe.estAnuIncFootnoteLink(),W.PoswebGridUtils.updateLegendElement(e.isStatementsRecords,"posweb-legend-tax-reporting-statements"),W.PoswebGridUtils.updateLegendElement(e.isShareIdentification,"posweb-legend-specific-share-identification"),W.PoswebGridUtils.updateLegendElement(e.isMarkToMarket,"posweb-legend-mark-to-market"),W.PoswebGridUtils.updateLegendElement(e.isOrdinaryIncome,"posweb-legend-ordinary-income"),W.PoswebGridUtils.updateLegendElement(e.isClosedAvailableToday,"posweb-legend-closed-foot-note1"),W.PoswebGridUtils.updateLegendElement(e.isTradeWithUnknown,"posweb-legend-trades-with-unknown"),W.PoswebGridUtils.updateLegendElement(e.isNonUnitizedAlt,"posweb-legend-non-unitized-alt"),W.PoswebGridUtils.updateLegendElement(e.isClosedPositionWashSaleAdjInd&&!ne.WindowService.getPositionSettings().isUnadjusted,"posweb-legend-closed-position-washSaleAdj"),W.PoswebGridUtils.updateLegendElement(e.isClosedPositionWashSaleAdjInd&&ne.WindowService.getPositionSettings().isUnadjusted,"posweb-legend-closed-position-washSaleUnadj"),W.PoswebGridUtils.updateLegendElement(e.isCustomerProvidedClosedPosition,"posweb-legend-customer-provided-closed-position"),W.PoswebGridUtils.updateLegendElement(e.isDefaultClosedPosition,"posweb-legend-default-closed-position"))}static estAnuIncFootnoteLink(){se.PoswebUtils.getHtmlElement("posweb-legend-est-disclosure-modal_link").onclick=()=>{I.PoswebDescriptionWindow.getInstance().popupEstAnuIncFootnoteModal()}}updateGridTopAsOfDate(){var e;const t=`${ie.PweSharedUtils.getEasternTimeFromLocal()}`,s=`<span class="rtq-as-of">As of </span><span class="rtq-date">${t.substring(0,11)}</span><span class="rtq-time">${t.substring(12)}. ET</span>`,o=se.PoswebUtils.getHtmlElement("posweb-grid_top-refresh"),i=se.PoswebUtils.htmlQuerySelector(".posweb-grid_top-refresh-datetime");if(!o)return;const a=null===(e=ne.WindowService.getWindow().posweb)||void 0===e?void 0:e.rtqEnabled;!1===a&&h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW!==this._poswebPresetView&&(this.getRtqTime(),this.setRtqLinkListener()),i&&(i.innerHTML=s,i.style.display=!1===a||h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW===this._poswebPresetView?"none":"")}updateGridTopRefreshButton(){const e=se.PoswebUtils.getHtmlElement("posweb-grid_top-refresh"),t=null==e?void 0:e.querySelector(".posweb-grid_top-refresh-button button");t&&(t.onclick||(t.onclick=()=>{t.setAttribute("disabled","true"),this.getDataForGridRendering(!0,!1),b.MetricsService.sendMetricsRequest("refreshQuotes")}),t.removeAttribute("disabled"),e.style.display=h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW===this._poswebPresetView?"none":"")}getRtqTime(){const e=`${ie.PweSharedUtils.getEasternTimeFromLocal(!0)}`,t=`<span class="rtq-as-of">As of </span><span class="rtq-date">${e.substring(0,11)}</span><span class="rtq-time">${e.substring(12)}. ET</span>`,s=se.PoswebUtils.htmlQuerySelector(".posweb-grid_top-rtq-container"),o=se.PoswebUtils.htmlQuerySelector(".posweb-grid_top-rtq-datetime");s&&o&&(s.style.display="flex",o.innerHTML=t,o.onclick=()=>{b.MetricsService.sendMetricsRequest("positionsRealTimeQuoteMsgPopover")})}setRtqLinkListener(){const e=`${F.PoswebMetadata.getInstance().digitalDomain}/ftgw/digital/agreements/quotes/select`,t=`scrollbars=yes,resizable=yes,${se.PoswebUtils.getPopupPosition(900,800)}`,s=se.PoswebUtils.htmlQuerySelector(".popover-rtq-link");s&&(s.onclick=s=>{this.onOpenPopupBtnClick(`${e}`,`${t}`,s,!1,!0),b.MetricsService.sendMetricsRequest("positionsRealTimeQuoteSignUpLink")})}updateGridTopSettingsButton(e){const t=se.PoswebUtils.htmlQuerySelector("#kebabmenuitem-settings");t&&(t.onclick=()=>{Z.PoswebSettings.getInstance().popupSettingsModal(e),this.kebabCloseMenu()})}updateGridTopPresetViews(e){const t=se.PoswebUtils.getHtmlElement("posweb-grid_top-presetviews-dropdown"),s=se.PoswebUtils.getHtmlElement("print-grid_top-presetviews-label"),o=se.PoswebUtils.getHtmlElement("posweb-my-view-btn");if(!t||!s)return;this.displayEligiblePresetViews(t,e);const i=h.POSWEB_PRESET_VIEW.STACK_OVERVIEW===this._poswebPresetView?h.POSWEB_PRESET_VIEW.OVERVIEW:this._poswebPresetView,a=t.pvdSelectedValue;t.onclick=()=>{b.MetricsService.sendMetricsRequest("view options")},t.setAttribute("pvd-selected-value",i),t.onchange=()=>{var s,r;const n=t.pvdSelectedValue;if(this.presetViewMetrics(n),n===h.POSWEB_PRESET_VIEW.EDIT_MY_VIEW)return t.setAttribute("pvd-selected-value",i),void w.MyViewModalComponent.initializeMyViewModal(null===(s=null==e?void 0:e.otherFilters)||void 0===s?void 0:s.isOptionable);this._poswebPresetView=t.pvdSelectedValue,t.setAttribute("pvd-selected-value",this._poswebPresetView),this._poswebPresetView===h.POSWEB_PRESET_VIEW.MY_VIEW?o.setAttribute("pvd-disabled","false"):o.setAttribute("pvd-disabled","true"),a!==this._poswebPresetView&&(null===(r=window[E.PoswebConstants.SETTINGS_PROPERTY_NAME])||void 0===r||delete r.presetView),this.getDataForGridRendering(!1,!0)},s.innerText=this.viewTypes.find(e=>e.value===i).text}displayEligiblePresetViews(e,t){var s;const o=h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW===this._poswebPresetView||Boolean((null===(s=null==t?void 0:t.rowData)||void 0===s?void 0:s.length)&&t.rowData.length>0),i=[];pe.shouldHideDividendView(this._poswebCommon.amc)&&i.push(h.POSWEB_PRESET_VIEW.DIVIDEND_VIEW),o&&!this.shouldHideFundView(t)||i.push(h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW),pe.shouldHideClosedPositions(this._poswebCommon.amc)&&i.push(h.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW),pe.shouldHideMyView()&&(i.push(h.POSWEB_PRESET_VIEW.MY_VIEW),i.push(h.POSWEB_PRESET_VIEW.EDIT_MY_VIEW));const a=this.viewTypes.filter(e=>!i.includes(e.value));e.setAttribute("pvd-options",JSON.stringify(a))}static shouldHideDividendView(e){return!(null==e?void 0:e.hasBrokerageEligibleAccounts)}static shouldHideMyView(){return!ne.WindowService.getToggle("ap126216_PWE_Custom_Columns")}shouldHideFundView(e){var t;if(this._showFundTabInSession)return!1;if(void 0!==this._poswebCommon.isHideFundView)return this._poswebCommon.isHideFundView;if(ne.WindowService.getPositionSettings().presetView===h.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW)return this._showFundTabInSession=!0,!1;const s=ne.WindowService.getPositionSettings()[E.PoswebConstants.SETTINGS_FILTER_ITEMS_SET_KEY]||[],o=ne.WindowService.getPositionSettings()[E.PoswebConstants.SETTINGS_FILTER_KEY],i=null==e?void 0:e.meta,a=(null==i?void 0:i.isFiliPyInOnly)||(null==i?void 0:i.isFiliSPDAOnly)||!this._posweb.fundPerfViewToggle,r=o&&0>o.indexOf("MutualFunds")&&0>o.indexOf("ETFs")&&0>o.indexOf("Annuities"),n=!o&&0>s.indexOf("MutualFunds")&&0>s.indexOf("ETFs")&&0>s.indexOf("Annuities"),l=0===(null===(t=null==e?void 0:e.rowData)||void 0===t?void 0:t.filter(e=>{var t;return"POSITION"===e.rowType&&!(null===(t=e.meta)||void 0===t?void 0:t.isNotQuotable)}).length);return this._poswebCommon.isHideFundView=Boolean(a||r||n||l),this._poswebCommon.isHideFundView}static shouldHideClosedPositions(e){const t=!((null==e?void 0:e.hasBrokerageEligibleAccounts)||(null==e?void 0:e.hasFiliAccounts)||(null==e?void 0:e.hasCrytpoAccounts));return(null==e?void 0:e.isSingleIneligibleForCloPos)||t}updateGridTopYearSelect(){if(h.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW!==this._poswebPresetView)se.PoswebUtils.updateElementStyle("posweb-grid_top-year-selection","none");else{se.PoswebUtils.updateElementStyle("posweb-grid_top-year-selection","flex");const e=se.PoswebUtils.getHtmlElement("posweb-grid_top-year-dropdown"),t=se.PoswebUtils.getHtmlElement("posweb-grid_top-date-select-button");t&&(t.onclick=t.onclick||(()=>{const{startDate:e,endDate:t}=G.PoswebGridClosedPositions.validateCustomDate();e&&t&&(this._poswebGridClosedPositions.saveYearSelection(`${e}_${t}`),this.getDataForGridRendering(!1,!0))})),e&&(e.onchange=e.onchange||(()=>{const t=e.pvdSelectedValue;"custom"===t?se.PoswebUtils.updateElementStyle("posweb-grid_top-date-select","flex"):(se.PoswebUtils.updateElementStyle("posweb-grid_top-date-select","none"),this._poswebGridClosedPositions.saveYearSelection(t),this.getDataForGridRendering(!1,!0))}))}}showFPLBanner(){const e="positions--pzn-fpl-banner";if(se.PoswebUtils.updateElementStyle(e,"none"),ne.WindowService.getToggle("ap126216_PWE_PZN_Enable")&&ne.WindowService.getProperty(E.PoswebConstants.PWE_PZN_TREATMENTS)){const t=["PWE-FPL-Banner-Inline-Review","PWE-FPL-Banner-Inline-Learn-More"],s=W.PoswebGridUtils.getCurrentFplTreatment(),o=se.PoswebUtils.htmlQuerySelector("#positions--review-fpl-id .pvd-button__text"),i=se.PoswebUtils.htmlQuerySelector("#positions--dismiss-row-id");t.indexOf(null==s?void 0:s.name)>-1&&o&&i&&("PWE-FPL-Banner-Inline-Learn-More"===s.name&&(o.textContent="Learn More",o.onclick=o.onclick||(()=>{b.MetricsService.sendMetricsRequest("FPLBannerLearnMore",u.MetricsActionTypes.INTERACTION,""),this.openFplLearnMoreModal()})),"PWE-FPL-Banner-Inline-Review"===s.name&&(o.onclick=o.onclick||(()=>{b.MetricsService.sendMetricsRequest("FPLBannerReview",u.MetricsActionTypes.INTERACTION,"",b.MetricsService.setMetricsTrans([s],"clickthru")),window.open(this._posweb.pznFPLReviewLinkUrl,"_blank")})),i.onclick=i.onclick||(()=>{se.PoswebUtils.updateElementStyle(e,"none"),W.PoswebGridUtils.getCurrentFplTreatment()&&(b.MetricsService.sendMetricsRequest("FPLBannerDismiss",u.MetricsActionTypes.INTERACTION,"",b.MetricsService.setMetricsTrans([s],"dismiss")),W.PoswebGridUtils.removeFplTreatmentFromPznArray());const t=se.PoswebUtils.htmlQuerySelectorAll(".posweb-row-dismiss-btn");t&&t.length>0&&t.forEach(e=>{e.click()})}),se.PoswebUtils.updateElementStyle(e,"flex"))}}savePresetViewInSessionState(){const e=this._poswebPresetView===h.POSWEB_PRESET_VIEW.STACK_OVERVIEW?h.POSWEB_PRESET_VIEW.OVERVIEW:this._poswebPresetView;e===ne.WindowService.getPositionSettings().presetView||this._prefManager.isSafeMode||this._poswebGridService.saveSessionStateData({entry:[{key:E.PoswebConstants.SETTINGS_PRESET_VIEW_STATE_KEY,value:e}]}).subscribe({next:e=>{e||console.warn("No response from State API during saving view in session state")},error:e=>{console.error("Error occurred saving view in session state, and error is %o",e)}})}saveBannerSeenDateInState(e){const t=ne.WindowService.getPositionSettings().gbsMsgSeenDates,s=t?t.split(","):[],o=se.PoswebUtils.getEasternDateFromLocal();!this._prefManager.isSafeMode&&e&&s.length<2&&!s.includes(o)&&(s.push(o),this._poswebGridService.saveStateData({entry:[{key:E.PoswebConstants.GBS_MSG_SEEN_DATES,value:s.join(",")}]}).subscribe({next:e=>{e||console.warn("No response from State API during saving group by security banner seen dates in state")},error:e=>{console.error("Error occurred saving group by security banner seen dates in state, and error is %o",e)}}))}sizeColumnsToFit(){const e=se.PoswebUtils.getHtmlElement("ag-body-viewport");this._poswebGrid&&e&&this._poswebGrid.sizeColumnsToFit(e.clientWidth-1)}sizeElementsClosedPosInSmallerScreens(){const e=se.PoswebUtils.htmlQuerySelector(".posweb-grid_top-year-dropdown"),t=se.PoswebUtils.htmlQuerySelector(".posweb-grid_top-start-date"),s=se.PoswebUtils.htmlQuerySelector(".posweb-grid_top-end-date"),o=se.PoswebUtils.htmlQuerySelector(".posweb-grid_top-date-select-button");W.PoswebGridUtils.isLowerBrowserWidth()?(e&&(e.setAttribute("pvd-size","large"),e.setAttribute("pvd-full-width","true")),t&&s&&(t.setAttribute("pvd-size","medium"),s.setAttribute("pvd-size","medium")),o&&(o.classList.remove("pvd-button--small"),o.classList.add("pvd-button--medium"))):(e&&(e.setAttribute("pvd-size","medium"),e.setAttribute("pvd-full-width","false")),t&&s&&(t.setAttribute("pvd-size","small"),s.setAttribute("pvd-size","small")),o&&(o.classList.remove("pvd-button--medium"),o.classList.add("pvd-button--small")))}resetCenterColsViewportShadow(e){if("vertical"===(null==e?void 0:e.direction))return;const t=se.PoswebUtils.htmlQuerySelector(".ag-header-viewport"),s=se.PoswebUtils.htmlQuerySelector(".ag-center-cols-container"),o=se.PoswebUtils.htmlQuerySelector(".ag-center-cols-viewport"),i=se.PoswebUtils.htmlQuerySelector(".ag-body-horizontal-scroll-viewport"),a=["posweb-div-leftside_shadow","posweb-div-rightside_shadow","posweb-div-bothsides_shadow"];if(!(s&&void 0!==s.offsetWidth&&o&&void 0!==o.offsetWidth&&i&&void 0!==i.offsetWidth&&this._poswebGrid))return;const r=this._poswebGrid.getHorizontalPixelRange();let n="";o.offsetWidth<s.offsetWidth&&r&&void 0!==r.left&&(n=0===r.left?"posweb-div-rightside_shadow":r.left>=s.offsetWidth-i.offsetWidth?"posweb-div-leftside_shadow":"posweb-div-bothsides_shadow"),n&&(t.classList.add(n),o.classList.add(n),a.splice(a.indexOf(n),1)),t.classList.remove(...a),o.classList.remove(...a)}adjustGridOnResize(){this.adjustColsOnResize(),this.resetCenterColsViewportShadow()}destroyGrid(){this._poswebGrid&&(this._poswebGrid.destroy(),this._poswebGrid=void 0),this._poswebSearch&&(this._poswebSearch.destroy(),this._poswebSearch=void 0)}determineTargetViewWithoutCommonData(e,t){const s=ne.WindowService.getPositionSettings().presetView,o=t||s||this._poswebPresetView;return h.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW===o&&pe.shouldHideClosedPositions(e)||h.POSWEB_PRESET_VIEW.DIVIDEND_VIEW===o&&e&&pe.shouldHideDividendView(e)||h.POSWEB_PRESET_VIEW.MY_VIEW===o&&pe.shouldHideMyView()?this.overviewOrStackview():o}determineTargetViewWithCommonData(e){const t=ne.WindowService.getPositionSettings().presetView;if(h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW===this._poswebPresetView&&e&&this.shouldHideFundView(e)){if(h.POSWEB_PRESET_VIEW.FUND_PERF_VIEW===t)return this.overviewOrStackview();this._poswebStore.store.dispatch(y.PoswebActions.dispatchGridData(!1,{},{},{})),this._poswebCommon.isHideFundView=!1}return this._poswebPresetView}get getPoswebGridOptions(){return this._poswebGridOptions}get getPoswebGridApi(){return this._poswebGrid}get legendVisibility(){return this._legendVisibility}setColumnSuperScriptDesc(){(this.addAriaToColumnsHeaders[this._poswebPresetView]||[]).forEach(e=>{const t=se.PoswebUtils.htmlQuerySelector(`.${e}`),s=null==t?void 0:t.querySelector(".ag-header-cell-text");let o=null==s?void 0:s.textContent;"posweb-header-dist-yield"===e&&(o="Distribution Yield"),null==s||s.setAttribute("aria-label",o)})}hideNonSPSButtons(){const e=document.querySelector(".posweb-grid_top-buttons-search-container");null==e||e.style.setProperty("display","none");const t=document.querySelector(".posweb-grid_top-filter-container.desktop");null==t||t.style.setProperty("display","none");const s=document.querySelector(".posweb-grid_top-filter-container.mobile");null==s||s.style.setProperty("display","none");const o=document.querySelector(".kebab-menu-settings");null==o||o.style.setProperty("display","none");const i=document.querySelector(".kebab-menu-download");null==i||i.style.setProperty("display","none");const a=document.querySelector(".kebab-menu-userguide");null==a||a.style.setProperty("display","none")}addTypesToSettings(e){if(e.secTypes){const t=[];this.eventTypeKeyArr.forEach(s=>{var o;(null===(o=e.otherFilters)||void 0===o?void 0:o[s])&&t.push(s)});const s=ne.WindowService.getPositionSettings();s[E.PoswebConstants.SETTINGS_FILTER_ITEMS_SET_KEY]=e.secTypes,s[E.PoswebConstants.SETTINGS_ADDITIONAL_FILTER_ITEMS_SET_KEY]=t}}checkAccountNumMasking(){const e=ne.WindowService.getWindow();return new Promise(t=>t(e.PortSumContainer.StatePreferences.get("/user/digital/portfolio-summary/hideAcctNum").then(e=>{var t,s,o;return"true"===(null===(o=null===(s=null===(t=e[0])||void 0===t?void 0:t.values)||void 0===s?void 0:s.hideAcctNum)||void 0===o?void 0:o.value)})))}groupBySecurityToggle(){const e=W.PoswebGridUtils.getGroupBySecurityTypeInSettings(),t=ne.WindowService.getPositionSettings().groupBy,s=ne.WindowService.getPositionSettings().isGroupBySecurityExpandAll;"0"===t&&e?s?se.PoswebUtils.updateElementStyle("collapse-all-gbs","block"):se.PoswebUtils.updateElementStyle("expand-all-gbs","block"):(se.PoswebUtils.updateElementStyle("expand-all-gbs","none"),se.PoswebUtils.updateElementStyle("collapse-all-gbs","none"))}expandCollapseAllGroups(e){this._poswebGrid=ne.WindowService.getCurrentPwe().poswebGrid.getPoswebGridApi;se.PoswebUtils.htmlQuerySelectorAll(".posweb-cell-group-info_primary_name").forEach(t=>{t.setAttribute("aria-expanded",`${e}`)}),this._poswebGrid&&!this._poswebGrid.isDestroyed()&&(this._poswebGrid.forEachNode(t=>{var s;t&&t.group&&!0===t.group&&"groupBySecurity"===(null===(s=t.rowGroupColumn)||void 0===s?void 0:s.getColId())&&t.setExpanded(e)}),this._poswebGridService.saveStateData({entry:[{key:E.PoswebConstants.GBS_EXPAND_ALL,value:JSON.stringify(e)}]}).subscribe({next:e=>{e||console.warn("No response from State API during saving my view selected columns in state")},error:e=>{console.error("Error occurred saving my view selected columns in state, and error is %o",e)}}),ne.WindowService.getPositionSettings().isGroupBySecurityExpandAll=e,this.expandCollapseMetrics(e),e?(se.PoswebUtils.updateElementStyle("collapse-all-gbs","block"),se.PoswebUtils.updateElementStyle("expand-all-gbs","none")):(se.PoswebUtils.updateElementStyle("collapse-all-gbs","none"),se.PoswebUtils.updateElementStyle("expand-all-gbs","block")))}expandCollapseMetrics(e){e?b.MetricsService.sendMetricsRequest("expandAllSecurityTypeGroups"):b.MetricsService.sendMetricsRequest("collapseAllSecurityTypeGroups")}presetViewMetrics(e){e===h.POSWEB_PRESET_VIEW.MY_VIEW?b.MetricsService.sendMetricsRequest("select my view"):e===h.POSWEB_PRESET_VIEW.EDIT_MY_VIEW&&b.MetricsService.sendMetricsRequest("open col edit")}}t.PoswebGrid=pe},73889:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MyViewModalComponent=void 0;const o=s(75228),i=s(49060),a=s(15),r=s(40584),n=s(53059),l=s(16186),d=s(89065),c=s(17597),p=s(58836),u=s(17190),b=s(72317),w=s(924),h=s(60942),v=s(60488),m=s(49386),g=s(82402),_=s(65210),y=s(34140);class S{static initializeMyViewModal(e){this.isOptionable=e,this._poswebGridService=new h.PoswebGridService,this.sortable=_.Sortable,S.myViewModal=o.CommonModal.getInstance(),S.myViewModal.constructAndShowModal("","","<br>",d.POSWEB_MODAL_SIZE.LARGE),this.resetModalData(),this.initColArrsAndLookup(),this.renderMyViewModalBody(),this.updateResizeObserver(),this.updateRemoveAllButton(),this.updateSaveButton(),this.initializeCancelBehavior(),S.accessMetricsData("col edit loading completed",n.MetricsActionTypes.PAGEVIEW,"col edit modal","modal")}static updateResizeObserver(){this.observer=new ResizeObserver(this.handleResize),this.observer.observe(S.myViewModal._bodyElement)}static toggleDisplayMode(){S.isMobile?S.myViewModal._headerElement.innerHTML=`<div class="my-view-modal-title">Create My View<pvd3pwe-popover  pvd-placement= "bottom" pvd-disable-trigger-slot-button >\n    <div class="pvd-popover__popover-content-reset">\n        <p> ${S.toolTipContent} </p>\n    </div>\n    <pvd3pwe-link slot="trigger" pvd-class="my-view-help-icon" pvd-size="large"  pvd-icon-left="help"   pvd-trigger ></pvd3pwe-link></pvd3pwe-popover></div>`:S.myViewModal._headerElement.innerHTML=`<div class="my-view-modal-title">Create My View<pvd3pwe-tooltip pvd-disable-trigger-slot-button  pvd-placement ="bottom" id="my-view-model-help-icon">\n    <span class="pvd-tooltip__tooltip-content-reset my-view-tooltip">${S.toolTipContent}</span>\n    <pvd3pwe-link slot="trigger" pvd-class="my-view-help-icon" pvd-size="large" pvd-trigger pvd-icon-left="help"  ></pvd3pwe-link></pvd3pwe-tooltip></div>`}static handleResize(e){for(const t of e){const{width:e}=t.contentRect;S.isMobile=e<=700;const s=S.renderColumnShell(),o=g.PoswebUtils.htmlQuerySelector(".my-view-main-column-container");if(!o)return;o.innerHTML=s,S.renderColumns(!0),S.renderColumns(!1),S.updateSearchboxListeners(),S.updateDragDropListeners(),S.toggleDisplayMode(),S.isMobile&&S.addMyViewTabSelectListeners()}}static updateSearchboxListeners(){this._closeIcon=g.PoswebUtils.htmlQuerySelector(".posweb-edit-view-search-close"),this._searchInput=g.PoswebUtils.htmlQuerySelector(".posweb-edit-view-search-input"),this.doSearchBound=this.doSearch.bind(this),this.collapseAndCleanBound=this.collapseAndClean.bind(this),this._searchInput.addEventListener("input",this.doSearchBound),this._closeIcon.addEventListener("click",this.collapseAndCleanBound)}static updateDragDropListeners(){const e=g.PoswebUtils.htmlQuerySelector(".my-view-selected-columns-container");this.sortable.create(e,{draggable:".posweb-my-view-checkbox-container",handle:".posweb-my-view-drag-icon",ghostClass:"dragging",chosenClass:"drop-target",touchStartThreshold:5,animation:150,onEnd:this.handleDragEnd,onMove:this.handleDragMove})}static initColArrsAndLookup(){const e=y.WindowService.getPositionSettings().myViewSelCols;if(e){const t=e.split(",");this.selColArr=t.filter(e=>!i.MY_VIEW_COL_DEFINITIONS.default.includes(e))}Object.entries(i.MY_VIEW_COL_DEFINITIONS).forEach(([e,t])=>{t.forEach(t=>{this.selColArr.includes(t)||this.allColArr.push(t),this.reverseLookup[t]=e})})}static updateCheckboxListeners(){g.PoswebUtils.htmlQuerySelectorAll(".my-view-checkbox-input").forEach(e=>{e.addEventListener("change",S.onCheckboxChange)})}static updateAllColumnsKeydownListeners(){Array.from(g.PoswebUtils.htmlQuerySelectorAll(".col-group-container")).forEach((e,t,s)=>{e.addEventListener("keydown",S.onAllColumnsGroupKeydown(t,s))})}static updateSelectedColumnsKeydownListeners(){g.PoswebUtils.htmlQuerySelector(".my-view-selected-container").addEventListener("keydown",S.onSelectedColumnsKeydown)}static updateAllCheckboxListeners(){g.PoswebUtils.htmlQuerySelectorAll(".my-view-checkbox-input-all").forEach(e=>{e.addEventListener("change",S.onAllCheckboxChange)})}static unselectAll(){var e;this.selColArr.forEach(e=>{this.moveRightToLeftData(e)}),S.renderColumns(!0),S.renderColumns(!1),(null===(e=this._searchInput)||void 0===e?void 0:e.value)&&S.setTabIndex()}static onCheckboxChange(e){var t,s;const o=e.target,i=S.extractShortId(o.id);if(S.selColArr.includes(i)){const e=S.getNextCheckboxId(o);S.moveRightToLeftData(i),S.renderColumns(!0),S.renderColumns(!1);const s=document.querySelector(`.my-view-selected-container #${e}`);s&&s.focus(),(null===(t=S._searchInput)||void 0===t?void 0:t.value)&&S.setTabIndex(),S.toggleDragHandlesIcon()}else{const e=S.getNextCheckboxIndex(o);S.moveLeftToRightData(i),S.renderColumns(!0),S.renderColumns(!1);const t=Array.from(document.querySelectorAll(".my-view-all-container input[type='checkbox']")),a=S.findNextCheckbox(t,e);a&&a.focus(),(null===(s=S._searchInput)||void 0===s?void 0:s.value)&&S.setTabIndex(),S.toggleDragHandlesIcon()}}static onAllCheckboxChange(e){const t=e.target,s=S.extractShortId(t.id),o=i.MY_VIEW_COL_DEFINITIONS[s];let a=Array.from(document.querySelectorAll(".my-view-main-column-container input[type='checkbox']"));const r=a.indexOf(t);-1!==r&&o&&(o.forEach(e=>{if(t.checked){if(S.selColArr.includes(e))return;S.moveLeftToRightData(e),S.isMobile||S.scrollIntoView()}else S.moveRightToLeftData(e)}),S.renderColumns(!0),S.renderColumns(!1),a=Array.from(document.querySelectorAll(".my-view-main-column-container input[type='checkbox']")),a[r].focus(),S.toggleDragHandlesIcon())}static handleDragEnd(e){const{oldIndex:t,newIndex:s}=e;if(null===t||null===s||t===s)return;const o=S.selColArr[e.oldIndex-1];S.selColArr.splice(t-1,1),S.selColArr.splice(s-1,0,o),S.renderColumns(!0)}static handleDragMove(e){return!e.related.classList.contains("fixed")}static moveRightToLeftData(e){S.selColArr=S.selColArr.filter(t=>t!==e),S.allColArr.push(e)}static moveLeftToRightData(e){S.allColArr=S.allColArr.filter(t=>t!==e),S.selColArr.push(e)}static selectMyViewDefinitionColumns(){if(this.isOptionable)this.myViewColDefinition=i.MY_VIEW_COL_DEFINITIONS;else{const e={account_specifics:[],gain_loss:[],quote_data:[],research:[],dividends:[],fund_performance:[],company_profile:[],volatility:[],default:[]};Object.entries(i.MY_VIEW_COL_DEFINITIONS).map(([t,s])=>{"options"!==t&&(e[t]=s)}),this.myViewColDefinition=e}}static renderColumns(e){var t;if(this.selectMyViewDefinitionColumns(),e){const e=g.PoswebUtils.htmlQuerySelector(".my-view-selected-columns-container");let t="";this.myViewColDefinition.default.forEach(e=>{const s=r.MY_VIEW_LABEL_MAPPING[e.toUpperCase()];t+=this.getCheckbox(e,s,-1,{isRight:!1,isAll:!1,isDisabled:!0,isChecked:!0})}),this.selColArr.forEach((e,s)=>{const o=r.MY_VIEW_LABEL_MAPPING[e.toUpperCase()];t+=this.getCheckbox(e,o,s,{isRight:!0,isAll:!1,isDisabled:!1,isChecked:!0})}),e.innerHTML=t,this.updateRemoveAllButton(),this.updateCheckboxListeners(),this.updateSelectedColumnsKeydownListeners()}else{const e=(null===(t=this._searchInput)||void 0===t?void 0:t.value)?this.filteredColumns:this.myViewColDefinition;let s="";const o=g.PoswebUtils.htmlQuerySelector(".my-view-columns-container");if(!o)return;Object.keys(e).length<=0?(o.innerHTML="",s+='<div class="no-columns-container"><p>There are no results matching your search criteria. Please try again.</p></div>'):Object.keys(e).filter(e=>"default"!==e).forEach((t,o)=>{var i;const r=a.MY_VIEW_GROUPS[t],n=this.checkGroupAllAdded(t);s+=`<div class="col-group-container">  <div class="col-group_name-container"><div class="col-group_name">${r}</div>${(null===(i=this._searchInput)||void 0===i?void 0:i.value)?"":this.getCheckbox(t,r,o,{isRight:!1,isAll:!0,isDisabled:!1,isChecked:n})}</div> <div class="col-checkbox-fragment">\n          ${this.getCheckboxGroup(t,e)}\n        </div></div> `}),o.innerHTML=s,this.updateCheckboxListeners(),this.updateAllColumnsKeydownListeners(),this.updateAllCheckboxListeners()}}static checkGroupAllAdded(e){let t=!0;const s=i.MY_VIEW_COL_DEFINITIONS[e];return!!s&&(s.forEach(e=>{S.allColArr.includes(e)&&(t=!1)}),t)}static onTabSelect(e){if(e){S.renderColumns(!0),this.updateDragDropListeners();const e=g.PoswebUtils.htmlQuerySelector(".my-view-all-container");g.PoswebUtils.htmlQuerySelector(".my-view-selected-container").style.display="block",e.style.display="none"}else{S.renderColumns(!1),this.updateSearchboxListeners();const e=g.PoswebUtils.htmlQuerySelector(".my-view-all-container"),t=g.PoswebUtils.htmlQuerySelector(".my-view-selected-container");e.style.display="block",t.style.display="none"}this.addMyViewTabSelectListeners()}static addMyViewTabSelectListeners(){const e=g.PoswebUtils.htmlQuerySelector(".posweb-my-view-tabs");v.PoswebGridUtils.attachClickListener(e,"#posweb-my-view-all-tab",()=>{this.onTabSelect(!1)}),v.PoswebGridUtils.attachClickListener(e,"#posweb-my-view-selected-tab",()=>{this.onTabSelect(!0)})}static renderColumnShell(){const e=""+(this.isMobile?"":'<div class="my-view-all-columns-title">All columns</div><div class="my-view-selected-columns-title">Selected columns</div>'),t=`<div class="my-view-all-container">\n    <div class="my-view-search-container">${this.getSearchboxHtmlSnippet()}</div>\n    <div class="my-view-all-columns-container">\n      <div class="my-view-columns-container"></div>\n    </div>\n</div>`,s='<div class="my-view-selected-container">\n    <div class="my-view-selected-columns-main-container">\n      <div class="my-view-selected-columns-header">\n        <div class="col-selected-columns-name">Columns</div>\n        <div class="my-view-selected-columns-remove-all"><button class="pvd3pwe-button-root pvd-button--tertiary pvd-button--small text-bold my-view-remove-all" type="button"><div class="pvd-button__contents"><span class="pvd-button__text">Remove all</span></div></button></div>\n      </div>\n      <div class="my-view-selected-columns-container">\n      </div>\n    </div>\n</div>',o=`\n        ${e}\n        ${t}\n        ${s}\n    `,i=`\n   <div id="posweb-my-view-tabs" class="posweb-my-view-tabs" role="tablist">\n    <pvd3pwe-tab-group pvd-aria-label="My View">\n    <pvd3pwe-tab slot="tab" pvd-id="posweb-my-view-all-tab" class="posweb-my-view-all-tabs">All columns</pvd3pwe-tab>\n    <pvd3pwe-tab slot="tab" pvd-id="posweb-my-view-selected-tab" class="posweb-my-view-selected-tabs">Selected columns</pvd3pwe-tab>\n    <pvd3pwe-tab-panel pvd-aria-labelledby="posweb-my-view-all-tab">${t}</pvd3pwe-tab-panel>\n    <pvd3pwe-tab-panel pvd-aria-labelledby="posweb-my-view-selected-tab">${s} </pvd3pwe-tab-panel>\n</pvd3pwe-tab-group>\n</div>`;return this.isMobile?i:o}static renderMyViewModalBody(){const e=S.myViewModal._bodyElement,t=w.PoswebGridPreloadMeta.retrieveErrorFlag,s=`<pvd3pwe-alert\n      pvd-disable-a11y-attributes\n      pvd-dismissible="true"\n      pvd-variant = "warning"\n      id="posweb-myview-banner"\n      style="display: ${t?"block":"none"}">\n      ${t?"We cannot retrieve your saved My View.  Any custom selections made during this time will only be saved for this login session.":""}\n    </pvd3pwe-alert>`;e.innerHTML=`<div class= "my-view-modal-content"><div class="my-view-modal-instructions">\n        Choose the columns you would like to see in My View and click 'Save'.</div>\n           <span class= "my-view-icon">\n            <pvd3pwe-link pvd-class ="my-view-icon" id="glossary-link" pvd-new-window pvd-href="https://www.fidelity.com/glossary/overview">Glossary of terms</pvd3pwe-link> </span> <div class="my-view-main-column-container">${this.renderColumnShell()}</div>${s}</div><div class="my-view-modal-footer-buttons"><pvd3pwe-button class="my-view-modal-cancel menu-indicator" pvd-variant="secondary" id="my-view-modal-cancel">Cancel</pvd3pwe-button><pvd3pwe-button class="my-view-modal-save menu-indicator" pvd-variant="primary" id="my-view-modal-save">Save</pvd3pwe-button></div>`}static insertAlertBanner(e){const t=`\n    <pvd3pwe-alert\n      pvd-disable-a11y-attributes\n      pvd-dismissible="true"\n      pvd-variant="warning"\n      id="posweb-myview-banner">\n      ${e}\n    </pvd3pwe-alert>\n  `;g.PoswebUtils.htmlQuerySelector(".my-view-modal-content").insertAdjacentHTML("beforeend",t)}static showAlert({type:e="warning",message:t=""}){let s=g.PoswebUtils.htmlQuerySelector("#posweb-myview-banner");if(s){const e=g.PoswebUtils.htmlQuerySelector("#posweb-myview-banner s-assigned-wrapper");e&&(e.textContent=t)}else S.insertAlertBanner(t),s=g.PoswebUtils.htmlQuerySelector("#posweb-myview-banner");s.setAttribute("pvd-variant",e),g.PoswebUtils.updateElementStyle("posweb-myview-banner","block");const o=s.querySelector(".pvd-alert__dismiss-button");o&&(o.addEventListener("click",()=>{this.state.cancelBannerDismissed=!0}),o.focus())}static getCheckboxGroup(e,t){var s;let o="";return null===(s=t[e])||void 0===s||s.forEach(e=>{const t=r.MY_VIEW_LABEL_MAPPING[e.toUpperCase()],s=this.selColArr.includes(e);o+=this.getCheckbox(e,t,-1,{isRight:!1,isAll:!1,isDisabled:s,isChecked:s})}),o}static getCheckbox(e,t,s,o){const{isRight:i,isAll:a,isDisabled:r,isChecked:n}=o,l=`${this.CHECKBOX_PREFIX}${e.replace(/[^a-zA-Z0-9-_]/g,"")}${i?"-right":""}`;return void 0===t?"":`<div class= "posweb-my-view-checkbox-container ${r?"fixed":""}" data-idx=${s}>\n      <div class="pvd3pwe-checkbox-root pvd-checkbox--small posweb-my-view-checkbox ${a?"select-all-checkbox":""}">\n                <input class="pvd-checkbox__checkbox my-view-checkbox-input${a?"-all":""}" type="checkbox" value="${l}" ${r?"disabled":""} ${n?"checked":""} name="posweb-my-view-checkbox" id="${l}" tabindex=${0===s?0:-1} />\n                <label class="pvd-checkbox__label" for="${l}">\n                    <div aria-hidden="true" class="pvd-checkbox__checkbox-wrap">\n                        <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-checkbox__checkbox-wrap-icon pvd-checkbox__checkbox-wrap-icon--checked pvd-icon--extra-small" focusable="false">\n                            <use href="#pvd3pwe-action__check" xlink:href="#pvd3pwe-action__check"></use>\n                        </svg>\n                    </div>\n                    <div class="pvd-checkbox__label-text">${a?"Select All":t}</div>\n                </label>\n            </div>\n      ${i?'<div class="posweb-my-view-drag-icon"></div>':""}\n    </div>`}static scrollIntoView(){const e=g.PoswebUtils.htmlQuerySelector(".my-view-selected-columns-container");setTimeout(()=>{e.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"})},500)}static initializeCancelBehavior(){const e=S.myViewModal._modalElement,t=g.PoswebUtils.htmlQuerySelector(".my-view-modal-cancel");let s=!1;this.state.cancelBannerDismissed=!1,this.state.errorFlag=!1;const o=()=>{if(this.state.errorFlag)return void S.myViewModal.closeModal();let e=i.MY_VIEW_COL_DEFINITIONS.default.join(",");this.selColArr.length&&(e+=","+this.selColArr.join(",")),e===y.WindowService.getPositionSettings().myViewSelCols||"sym"===e?S.myViewModal.closeModal():!s||this.state.cancelBannerDismissed?(s=!0,this.state.cancelBannerDismissed=!1,S.accessMetricsData("cancel edit",n.MetricsActionTypes.INTERACTION,"col edit modal","modal"),S.showAlert({type:"warning",message:"Cancel will not save your changes."})):S.myViewModal.closeModal()};t&&!t.onclick&&(t.onclick=()=>o.call(this)),e.addEventListener("pvd-modal-change",t=>{t.detail.open||(e.setAttribute("pvd-open","true"),o.call(this))})}static updateSaveButton(){const e=g.PoswebUtils.htmlQuerySelector(".my-view-modal-save"),t=g.PoswebUtils.htmlQuerySelector(".posweb-my-view-btn");if(e&&!e.onclick){const s=g.PoswebUtils.htmlQuerySelector("#pwe-toast");e.onclick=()=>{let e="";if(g.PoswebUtils.updateElementStyle("posweb-grid","block"),g.PoswebUtils.updateElementStyle("posweb-message-box-no-cols","none"),this.selColArr.length&&(e=i.MY_VIEW_COL_DEFINITIONS.default.join(",")+","+this.selColArr.join(",")),S.accessMetricsData("save edit",n.MetricsActionTypes.INTERACTION,"col edit modal","modal"),e===y.WindowService.getPositionSettings().myViewSelCols)return S.myViewModal.closeModal(),void s.popToast("Positions My View has been saved successfully","success");const o=y.WindowService.getPositionSettings().GRID_PRESET_COLUMN_ORDER||{},a="Changes saved only to this session. Please try again later.";o.MyView=e,this._poswebGridService.saveStateData({entry:[{key:u.PoswebConstants.GRID_PRESET_COLUMN_ORDER,value:JSON.stringify(o)},{key:u.PoswebConstants.MY_VIEW_SEL_COLS,value:e}]}).subscribe({next:e=>{e?s.popToast("Positions My View has been saved successfully","success"):(console.warn("No response from State API during saving my view selected columns in state"),s.popToast(a,"warning"))},error:e=>{this.state.errorFlag=!0,console.error("Error occurred saving my view selected columns in state, and error is %o",e),s.popToast(a,"warning")}});g.PoswebUtils.getHtmlElement("posweb-grid_top-presetviews-dropdown").setAttribute("pvd-selected-value",c.POSWEB_PRESET_VIEW.MY_VIEW),m.PoswebStore.getInstance().store.dispatch(p.PoswebActions.dispatchPresetColumnsOrder(o)),b.PoswebGrid.getInstance().getDataForGridRendering(!0,!1,c.POSWEB_PRESET_VIEW.MY_VIEW),y.WindowService.getPositionSettings().myViewSelCols=e,S.myViewModal.closeModal(),t.setAttribute("pvd-disabled","true")}}}static updateRemoveAllButton(){const e=g.PoswebUtils.htmlQuerySelector(".my-view-remove-all");e&&!e.onclick&&(e.onclick=()=>{S.unselectAll()})}static extractShortId(e){return e.replace(this.CHECKBOX_PREFIX,"").replace("-right","")}static resetModalData(){this.allColArr=[],this.selColArr=[],this.reverseLookup={}}static getSearchboxHtmlSnippet(){return'<div class="pvd3pwe-field-group-root pvd-field-group--full-width pvd-field-group--vertical-align-top posweb-edit-view-field-group">\n    <div class="pvd-field-group__field-group">\n        <div class="pvd3pwe-input-root pvd-input--icon-left pvd-input--icon-right pvd-input--medium pvd-input--text-left posweb-edit-view-search-icon">\n            <span class="pvd-input__icon pvd-input__icon--left">\n                <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-icon--small" focusable="false">\n                    <use href="#pvd3pwe-action__search" xlink:href="#pvd3pwe-action__search"></use>\n                </svg>\n            </span><input class="pvd-input__input posweb-edit-view-search-input" id="icon-exampl-both" placeholder="Filter by column name" type="text">\n            <span class="pvd-input__icon pvd-input__icon--right">\n                <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-icon--small posweb-edit-view-search-close" focusable="false">\n                    <use href="#pvd3pwe-action__cancel" xlink:href="#pvd3pwe-action__cancel"></use>\n                </svg>\n            </span>\n        </div>\n    </div>\n</div>\n    '}static doSearch(){var e;this.filteredColumns=this.findColumnValuesInGroups(),S.renderColumns(!1),(null===(e=this._searchInput)||void 0===e?void 0:e.value)&&S.setTabIndex()}static findColumnValuesInGroups(){var e;const t={},s=null===(e=this._searchInput.value)||void 0===e?void 0:e.toLowerCase().trim();return Object.entries(this.reverseLookup).forEach(([e,o])=>{var i,a;(null!==(a=null===(i=r.MY_VIEW_LABEL_MAPPING[e.toUpperCase()])||void 0===i?void 0:i.toLowerCase())&&void 0!==a?a:"").includes(s)&&(t[o]=t[o]||[],t[o].push(e))}),t}static collapseAndClean(){this._searchInput.value="",S.renderColumns(!1)}static onAllColumnsGroupKeydown(e,t){return s=>{const o=Array.from(g.PoswebUtils.htmlQuerySelectorAll(".my-view-all-container input[type='checkbox']:not(:disabled)")),i=s.target,a=o.indexOf(i);if(-1!==a){if("ArrowDown"===s.key||"ArrowUp"===s.key){s.preventDefault();const e=o[(a+("ArrowDown"===s.key?1:-1)+o.length)%o.length];e.focus({preventScroll:!0});const t=e.closest(".posweb-my-view-checkbox-container");t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}if("ArrowRight"===s.key||"ArrowLeft"===s.key){const o="ArrowRight"===s.key?1:-1,i=(e+o+t.length)%t.length,a=this.findNextCheckboxAcrossGroups(t,i,o);a&&a.focus()}}}}static onSelectedColumnsKeydown(e){if("ArrowDown"===e.key||"ArrowUp"===e.key){const t=Array.from(g.PoswebUtils.htmlQuerySelectorAll(".my-view-selected-container input[type='checkbox']:not(:disabled)")),s=e.target,o=t.indexOf(s);if(-1===o)return;e.preventDefault();t[(o+("ArrowDown"===e.key?1:-1)+t.length)%t.length].focus()}if("ArrowUp"!==e.key&&"ArrowDown"!==e.key)return;const t=g.PoswebUtils.htmlQuerySelectorAll(".my-view-selected-columns-container")[0],s=e.target.closest(".posweb-my-view-checkbox-container");if(e.shiftKey&&(e.altKey||e.ctrlKey)){if(e.repeat)return void e.preventDefault();if(s.classList.contains("fixed"))return;const o=S.getPreferredFocusTarget(s,document.activeElement);if(e.preventDefault(),"ArrowUp"===e.key){const e=S.previousEnabledRow(s);e&&t.insertBefore(s,e)}else{const e=S.nextEnabledRow(s);e&&t.insertBefore(s,e.nextElementSibling)}o.focus({preventScroll:!0}),S.selColArr.length>=2&&(S.reindexVisualOrder(t),S.selColArr=S.collectOrderedShortIds(t))}}static getPreferredFocusTarget(e,t){var s;return t&&e.contains(t)?t:null!==(s=e.querySelector('input,button,select,textarea,[tabindex]:not([tabindex="-1"])'))&&void 0!==s?s:e}static previousEnabledRow(e){let t=e.previousElementSibling;for(;t;){if(t.matches(".posweb-my-view-checkbox-container")&&!t.classList.contains("fixed"))return t;t=t.previousElementSibling}return null}static nextEnabledRow(e){let t=e.nextElementSibling;for(;t;){if(t.matches(".posweb-my-view-checkbox-container")&&!t.classList.contains("fixed"))return t;t=t.nextElementSibling}return null}static reindexVisualOrder(e){let t=0;for(const s of Array.from(e.children))s.matches(".posweb-my-view-checkbox-container")&&(s.dataset.idx=String(t++))}static collectOrderedShortIds(e){const t=Array.from(e.querySelectorAll(".posweb-my-view-checkbox-container")),s=[];for(const e of t){const t=e.querySelector(".my-view-checkbox-input:not(:disabled)");if(!t)continue;const o=S.extractShortId(t.value);o&&s.push(o)}return s}static findNextCheckboxAcrossGroups(e,t,s){let o=t;const i=e.length;for(let t=0;t<i-1;++t){const t=e[o].querySelector(".my-view-checkbox-input:not(:disabled)");if(t)return t;o=(o+s+i)%i}return null}static findNextCheckbox(e,t,s=1){let o=t;const i=e.length;for(let t=0;t<i-1;++t){const t=e[o];if(!(null==t?void 0:t.disabled))return t;o=(o+1*s+i)%i}return null}static setTabIndex(){const e=document.querySelector(".my-view-all-columns-container .my-view-checkbox-input:not(:disabled)");e&&e.setAttribute("tabindex","0")}static getNextCheckboxId(e){const t=Array.from(document.querySelectorAll(".my-view-selected-container input[type='checkbox']")),s=t.indexOf(e);if(-1===s)return null;let o;return o=s===t.length-1?(s-1+t.length)%t.length:(s+1+t.length)%t.length,t[o].id}static getNextCheckboxIndex(e){const t=Array.from(document.querySelectorAll(".my-view-all-container input[type='checkbox']")),s=t.indexOf(e);return-1===s?null:(s+1+t.length)%t.length}static accessMetricsData(e,t,s,o){l.MetricsService.sendMetricsRequest(e,t,s,void 0,o)}static toggleDragHandlesIcon(){const e=g.PoswebUtils.htmlQuerySelector(".my-view-selected-columns-container");e.children.length<=2&&e.querySelectorAll(".posweb-my-view-drag-icon").forEach(e=>{e.style.display="none"})}}t.MyViewModalComponent=S,S.allColArr=[],S.selColArr=[],S.CHECKBOX_PREFIX="posweb-my-view-checkbox-",S.reverseLookup={},S.filteredColumns={},S.state={cancelBannerDismissed:!1,errorFlag:!1},S.toolTipContent="Use the tab key to navigate through interactive elements, the up/down arrows to navigate the available items and the space bar to check/uncheck the selection checkbox.<br>Rearrange selected columns by dragging the grabber icon or holding down the alt + shift key then using the up/down arrows."},73989:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebGridFundPerformance=void 0;const o=s(17597),i=s(11908),a=s(17190),r=s(60942),n=s(60488),l=s(93535),d=s(49386),c=s(82402),p=s(34140);t.PoswebGridFundPerformance=class{constructor(){this._positionDirtyFlag=!0,this._poswebGridService=new r.PoswebGridService,this._poswebStore=d.PoswebStore.getInstance()}static getInstance(){return this._instance||(this._instance=new this)}getFundPerformanceData(){return this._positionDirtyFlag&&this.setReqBody(this._poswebStore.store.getState().rowData),this.$funPerfSubscription&&this.$funPerfSubscription.unsubscribe(),new Promise((e,t)=>{var s,i;this.isMutualFundExist()?(-1===[o.POSWEB_PRESET_VIEW.FUND_PERF_VIEW,o.POSWEB_PRESET_VIEW.MY_VIEW].indexOf(null===(s=window[a.PoswebConstants.SETTINGS_PROPERTY_NAME])||void 0===s?void 0:s.presetView)&&(null===(i=c.PoswebUtils.getHtmlElement("posweb-spinner"))||void 0===i||i.setAttribute("pvd-hidden","false")),this._reqBody.groupBy=n.PoswebGridUtils.getGroupBy(),this._reqBody.isGroupBySecurityEnabled=Boolean(p.WindowService.getPositionSettings().isGroupBySecurityType),this.$funPerfSubscription=this._poswebGridService.retrieveFundPerfData(this._reqBody).subscribe({next:s=>{s?e(s):t(new Error("No response from Fund Performance API"))},error:t,complete:e})):e({grid:"Not Applicable"})})}setReqBody(e){this._reqBody={pos:{}};const t=(e,t,s)=>{e[t]?e[t].push(s):e[t]=[s]},s=(e,s,o,i)=>{e[s]||(e[s]={}),t(e[s],o,i)},o={},a={},r={},d={};if(e){let c,p,u=1;if(this._posweb=l.PoswebMetadata.getInstance(),this._posweb.acctfndPerfCd){const t=i.POSWEB_SETTINGS_GROUPBY.SYMBOL===n.PoswebGridUtils.getGroupBy()?e[1].actNum:e[0].actNum;o[t]={fndPerfCd:this._posweb.acctfndPerfCd}}e.filter(e=>{var l,b;if("BSK_ACCT_UNKNOWN_QUANTITY"===(null==e?void 0:e.rowSubType)&&(a[e.actNum]=!0),"PZN_FPL_ACCT_ELIGIBLE"===(null==e?void 0:e.rowSubType)&&(d[e.actNum]=!0),(null===(l=null==e?void 0:e.meta)||void 0===l?void 0:l.isAcctBasketEligible)&&(r[e.actNum]=!0),(null==e?void 0:e.meta)&&["Brokerage","Annuity","WPS"].indexOf(e.meta.acctType)>-1)if("ACCOUNT"===e.rowType&&e.meta.acctActns)o[e.actNum]=e.meta.acctActns;else if(["POSITION","POSITION_CORE"].indexOf(e.rowType)>-1){const l=n.PoswebGridUtils.getGroupBy();i.POSWEB_SETTINGS_GROUPBY.SYMBOL!==l&&i.POSWEB_SETTINGS_GROUPBY.NO_GROUPING!==l||!e.meta.acctActns||(o[e.actNum]=e.meta.acctActns);if(["Mutual Fund","MUTUAL FUND","Core","Annuity","Exchange Traded"].indexOf(e.meta.securityType)>-1&&e.sym.name!==e.sym.cusip&&-1===["CORE**","FCASH**","CORE","FCASH",void 0,"N/A"].indexOf(e.sym.name)){this._reqBody.pos[e.actNum]?o[e.actNum]&&!this._reqBody.pos[e.actNum].acctActns&&(this._reqBody.pos[e.actNum].acctActns=o[e.actNum]):(this._reqBody.pos[e.actNum]={actTyp:e.meta.acctType,acctActns:o[e.actNum],actNam:e.actNam,isMngAcct:e.meta.isMngAcct,productCode:e.meta.productCode,productFullName:e.meta.productFullName,svcModelCode:e.meta.svcModelCode,strategyName:e.meta.strategyName,portfolioAdvisoryServicesAccount:e.meta.portfolioAdvisoryServicesAccount,order:u},u++);const l=i.POSWEB_SETTINGS_GROUPBY.SYMBOL===n.PoswebGridUtils.getGroupBy()&&"Core"===e.meta.securityType?`${e.sym.name}**`:e.sym.name;e.basket&&(this._reqBody.pos[e.actNum].basket||(this._reqBody.pos[e.actNum].basket={}),this._reqBody.pos[e.actNum].basket[e.basket.basketId]||(this._reqBody.pos[e.actNum].basket[e.basket.basketId]=[]),this._reqBody.pos[e.actNum].basket[e.basket.basketId].push(l)),t(this._reqBody.pos[e.actNum],"tkr",l),this._reqBody.pos[e.actNum].tkrProps||(this._reqBody.pos[e.actNum].tkrProps={}),this._reqBody.pos[e.actNum].tkrProps[l]={isSimplifyCorePosition:!!e.meta.symDisplayName};const w=this._reqBody.pos[e.actNum].tkr.lastIndexOf(l);e.tradActns&&(this._reqBody.pos[e.actNum].tradActns||(this._reqBody.pos[e.actNum].tradActns={}),c=this._reqBody.pos[e.actNum].tradActns,c[w]=e.tradActns),this._reqBody.pos[e.actNum].meta||(this._reqBody.pos[e.actNum].meta={}),p=this._reqBody.pos[e.actNum].meta,p[w]=e.meta,r[e.actNum]&&!this._reqBody.pos[e.actNum].isAcctBasketEligible&&(this._reqBody.pos[e.actNum].isAcctBasketEligible=!0),a[e.actNum]&&!this._reqBody.pos[e.actNum].hasUnknownQuantity&&(this._reqBody.pos[e.actNum].hasUnknownQuantity=!0),d[e.actNum]&&!this._reqBody.pos[e.actNum].hasPZNFPLInline&&(this._reqBody.pos[e.actNum].hasPZNFPLInline=!0),e.meta.isDrawerDisabled&&t(this._reqBody.pos[e.actNum],"isDrawerDisabled",w),"Core"===e.meta.securityType&&(this._reqBody.pos[e.actNum].registrationType=e.meta.registrationType,this._reqBody.pos[e.actNum].isCashAccount=e.meta.isCashAccount),"Core"===e.meta.securityType||e.meta.isEligibleForLots||t(this._reqBody.pos[e.actNum],"notEligibleForLots",w),e.meta.slvCd&&(null===(b=e.slv)||void 0===b?void 0:b.val)&&s(this._reqBody.pos[e.actNum],"slvDetails",`${e.slv.val}-${e.meta.slvCd}`,w),e.meta.holdingType&&s(this._reqBody.pos[e.actNum],"holdingTypeDetails",e.meta.holdingType,w),e.meta.sysOfRec&&s(this._reqBody.pos[e.actNum],"sysOfRecDetails",e.meta.sysOfRec,w)}}})}this._positionDirtyFlag=!1}isMutualFundExist(){return Boolean(this._reqBody&&"object"==typeof this._reqBody&&"object"==typeof this._reqBody.pos&&Object.keys(this._reqBody.pos).length>0)}set positionDirtyFlag(e){this._positionDirtyFlag=e}get positionDirtyFlag(){return this._positionDirtyFlag}}},74005:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.POSWEB_NOTIFY=void 0,function(e){e.ERR="error",e.WARN="warn",e.CONF="confirm"}(s||(t.POSWEB_NOTIFY=s={}))},74186:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebMstarCellRenderer=void 0;const o=s(79859),i=s(93535);class a extends o.PoswebBaseCellRenderer{init(e){var t;this._poswebMetadata=i.PoswebMetadata.getInstance(),this._eGui=document.createElement("div"),this._params=e,this._eGui.classList.add("posweb-cell-mstar_container"),(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.mstar)&&(this._eGui.innerHTML=a.getMstarSnippet(e.data.mstar,this._poswebMetadata.assetUrl,this._poswebMetadata.version))}static getPoswebPrintGridCell(e,t){let s=`<td${t?` class="${t}"`:""}><div class="posweb-cell-mstar_container">`;return(null==e?void 0:e.mstar)&&(s+=a.getMstarSnippet(e.mstar,i.PoswebMetadata.getInstance().assetUrl,i.PoswebMetadata.getInstance().version)),s+="</div></td>",s}static getMstarSnippet(e,t,s){var o;return t&&s&&e&&e.rate&&"--"!==e.rate&&(null===(o=e.cnt)||void 0===o?void 0:o.disp)&&"--"!==e.cnt.disp?`<span class="screen-reader-only">${e.rate} star rating</span><div class="posweb-mstar-stars"><img class="posweb-mstar-star" alt="" src="${t}assets/${s}/mstar.svg"/><img class="posweb-mstar-star" alt="" src="${t}assets/${s}/mstar${2>e.rate?"_empty":""}.svg"/><img class="posweb-mstar-star" alt="" src="${t}assets/${s}/mstar${3>e.rate?"_empty":""}.svg"/><img class="posweb-mstar-star" alt="" src="${t}assets/${s}/mstar${4>e.rate?"_empty":""}.svg"/><img class="posweb-mstar-star" alt="" src="${t}assets/${s}/mstar${5>e.rate?"_empty":""}.svg"/></div><div class="posweb-mstar-fund-count">out of ${e.cnt.disp} funds</div>`:"--"}}t.PoswebMstarCellRenderer=a},74509:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebGridNewsColumns=void 0;const o=s(17597),i=s(17190),a=s(60942),r=s(82402);t.PoswebGridNewsColumns=class{constructor(){this._poswebGridService=new a.PoswebGridService}static getInstance(){return this._instance||(this._instance=new this)}getNewsColumnData(e){var t,s;this.$newsSubscriptions&&this.$newsSubscriptions.unsubscribe();const a=[];o.POSWEB_PRESET_VIEW.MY_VIEW!==(null===(t=window[i.PoswebConstants.SETTINGS_PROPERTY_NAME])||void 0===t?void 0:t.presetView)&&(null===(s=r.PoswebUtils.getHtmlElement("posweb-spinner"))||void 0===s||s.setAttribute("pvd-hidden","false"));for(let t=0;t<e.length;t+=100){const s=new Promise((s,o)=>{this.$newsSubscriptions=this._poswebGridService.retrieveNewsDataMyView({symbol:e.slice(t,t+100).join(","),headlinesCount:1,type:"SimpleSearch"}).subscribe({next:e=>{e&&s(e)},error:e=>{o(e)},complete:s})});a.push(s)}return Promise.all(a)}}},74705:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebAccountGainLossPopoverCellRenderer=void 0;const o=s(79859),i=s(60488);class a extends o.PoswebBaseCellRenderer{static getPopoverContent(e){return`\n            <div class="posweb-popover-account_gl_data_container">\n                <div class="posweb-popover-account_gl_data_snippet">\n                    <div class="posweb-popover-account_gl_data_item">\n                        <div>Realized gain</div>\n                        <div class="posweb-popover-account_gl_data_detail${i.PoswebGridUtils.getDisplayColor(e.realizedGain.disp)}">${e.realizedGain.disp}</div>\n                    </div>\n                    <div class="posweb-popover-account_gl_data_item">\n                        <div>Realized loss</div>\n                        <div class="posweb-popover-account_gl_data_detail${i.PoswebGridUtils.getDisplayColor(e.realizedLoss.disp)}">${e.realizedLoss.disp}</div>\n                    </div>\n                    <div class="posweb-popover-account_gl_data_item">\n                        <div>Disallowed loss</div>\n                        <div class="posweb-popover-account_gl_data_detail${i.PoswebGridUtils.getDisplayColor(e.disallowedLoss.disp)}">${e.disallowedLoss.disp}</div>\n                    </div>\n                </div>\n                <div class="posweb-popover-account_gl_data_item">\n                    <div>Net gain/loss</div>\n                    <div class="posweb-popover-account_gl_data_detail${i.PoswebGridUtils.getDisplayColor(e.totalGainLoss.disp)}">${e.totalGainLoss.disp}</div>\n                </div>\n            </div>`}static getGainLossPopover(e,t,s,o){return i.PoswebGridUtils.getSearchValue()?`<div class="posweb-cell-popover-trigger posweb-tt-trigger-account-group-gl-${s}-${o} posweb-metrics${i.PoswebGridUtils.getDisplayColor(t)}" id="posweb-tt-trigger-account-group-gl-${s}-${o}" aria-describedby="posweb-tt-popover-account-group-gl-${s}-${o}">${t}</div>`:`\n            <a href="javascript:void(0);"\n                class="posweb-cell-popover-trigger posweb-tt-trigger-account-group-gl-${s}-${o} posweb-metrics${i.PoswebGridUtils.getDisplayColor(t)}"\n                id="posweb-tt-trigger-account-group-gl-${s}-${o}" aria-describedby="posweb-tt-popover-account-group-gl-${s}-${o}" onclick="event.stopPropagation();">${t}</a><pwe-popover class="posweb-popover-account-gl" position="bottom" role="dialog" show-elem=".positions-web-experience"\n                for="posweb-tt-trigger-account-group-gl-${s}-${o}" id="posweb-tt-popover-account-group-gl-${s}-${o}" zindex="1"\n                additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport" popover-hide-top_bottom=".ag-body-viewport"\n                popover-hide-left_right=".ag-center-cols-viewport">\n                <div class="posweb-account-gl-popover">\n                    ${this.getPopoverContent(e)}\n                </div>\n            </pwe-popover>`}init(e){this._eGui=document.createElement("div"),this._eGui.classList.add("posweb-cell-account-gl-popover-container");const t=e.data[e.colDef.colId].detail,s=e.data[e.colDef.colId].disp;t&&s&&(this._eGui.innerHTML=a.getGainLossPopover(t,s,e.node.id,e.colDef.colId))}}t.PoswebAccountGainLossPopoverCellRenderer=a},75228:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommonModal=void 0;t.CommonModal=class{constructor(){this._modalElement=document.querySelector(".posweb-common-modal"),this._modalElement.style.display="block",this._headerElement=this.modalElement.querySelector(".posweb-common-modal-header"),this._bodyElement=this.modalElement.querySelector(".posweb-common-modal-body")}get modalElement(){return this._modalElement}static getInstance(){return this._instance||(this._instance=new this)}constructAndShowModal(e,t,s,o){this._headerElement.innerHTML=e||"",this._bodyElement.innerHTML=t+(s||""),o?this.modalElement.setAttribute("pvd-modal-width",o):this.modalElement.removeAttribute("pvd-modal-width"),setTimeout(()=>{this._modalElement.setAttribute("pvd-open","true"),this._modalElement.setAttribute("pvd-return-focus-el",null)},500)}closeModal(e){this.modalElement.setAttribute("pvd-open",!1),e&&this.modalElement.setAttribute("pvd-return-focus-el",e)}}},75870:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebSettings=void 0;const o=s(75228),i=s(36737),a=s(63858),r=s(53059),n=s(16186),l=s(89065),d=s(17597),c=s(11908),p=s(36764),u=s(58836),b=s(17190),w=s(72317),h=s(60942),v=s(60488),m=s(93535),g=s(71706),_=s(49386),y=s(82402),S=s(19637),P=s(34140);class C{constructor(){this._poswebGridService=new h.PoswebGridService,this._poswebStore=_.PoswebStore.getInstance()}static getInstance(){var e;return null!==(e=this._instance)&&void 0!==e||(this._instance=new this),this._instance.filterComponent=g.PoswebSettingsFilterFactory.getFilterComponentInstance(),this._instance}static getPageVersion(){switch(v.PoswebGridUtils.getGroupBy()){case c.POSWEB_SETTINGS_GROUPBY.SYMBOL:return"Symbol";case c.POSWEB_SETTINGS_GROUPBY.NO_GROUPING:return"NoGrouping";default:return P.WindowService.getPositionSettings().isGroupByBasket&&m.PoswebMetadata.getInstance().isBasketEnabled?"Basket":P.WindowService.getPositionSettings().isGroupBySecurityType?"SecurityType":"Account"}}popupSettingsModal(e){var t,s,i;this._currState=this._poswebStore.store.getState(),o.CommonModal.getInstance().constructAndShowModal('<h4 class="pvd-heading-M posweb-settings-modal-header">Settings</div>','<div class="posweb-settings-modal">'+this.prepareColumnsBody()+(m.PoswebMetadata.getInstance().hasPriorDaySecurities?this.preparePriorDayGLBody():"")+(d.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW===v.PoswebGridUtils.getCurrentSelectedPresetView()||(null===(t=null==e?void 0:e.legendVisibility)||void 0===t?void 0:t.isWashSaleAdjInd)||(null===(s=null==e?void 0:e.legendVisibility)||void 0===s?void 0:s.isClosedPositionWashSaleAdjInd)?this.prepareEWSBody():"")+(m.PoswebMetadata.getInstance().hasForeignSecurities?this.prepareForeignStocksBody():"")+this.prepareGroupByBody(m.PoswebMetadata.getInstance().isBasketEnabled,null===(i=null==e?void 0:e.portfolioActions)||void 0===i?void 0:i.isBskAv)+"</div>",'<div class="posweb-settings-modal-footer">\n                        <div class="posweb-btn-row">\n                            <div>\n                                <pvd3pwe-button class="posweb-settings-modal-close" pvd-variant="secondary" pvd-size="small">Cancel</pvd3pwe-button>\n                            </div>\n                            <div class="button-group">\n                                <pvd3pwe-button class="posweb-settings-modal-apply" pvd-size="small" data-testid="settings-applybutton">Apply</pvd3pwe-button>\n                            </div>\n                        </div>\n                    </div>',l.POSWEB_MODAL_SIZE.SMALL),document.querySelector(".posweb-settings-modal-close").onclick=()=>{o.CommonModal.getInstance().closeModal()},C.updateGroupbyCheckboxStatus(),this.setupSettingsChoices(),this.updateSettingsApplyButton()}prepareGroupByBody(e,t){let s="",o="",i="",a="";v.PoswebGridUtils.getCurrentSelectedPresetView()===d.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW&&(a=" posweb-settings-modal-groupby-hidden"),C.shouldDisableGroupBySection(e,t)&&(o='\n            <div class="posweb-settings-modal-groupby-basket-msg">\n                <pvd3pwe-icon pvd-name="alert__critical" pvd-size="small" class="posweb-settings-modal-groupby-basket-msg-icon"></pvd3pwe-icon>\n                <span class="posweb-settings-modal-groupby-basket-msg-txt">Adjusting position grouping is available on the Overview and Dividend View.</span>\n            </div>',i=b.PoswebConstants.DISABLE_SNIPPET),e&&(s='\n                        <div class="pvd3pwe-checkbox-root pvd-checkbox--small">\n                            <input class="pvd-checkbox__checkbox" type="checkbox" name="posweb-settings-modal-groupby-account-checkbox" id="posweb-settings-modal-groupby-baskets-checkbox"/>\n                            <label class="pvd-checkbox__label" for="posweb-settings-modal-groupby-baskets-checkbox">\n                                <div aria-hidden="true" class="pvd-checkbox__checkbox-wrap">\n                                    <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-checkbox__checkbox-wrap-icon pvd-checkbox__checkbox-wrap-icon--checked pvd-icon--extra-small" focusable="false">\n                                        <use href="#pvd3pwe-action__check" xlink:href="#pvd3pwe-action__check"></use>\n                                    </svg>\n                                </div>\n                                <div class="pvd-checkbox__label-text">Basket positions</div>\n                            </label>\n                        </div>');return`<div class="posweb-settings-modal-container posweb-settings-modal-groupby${a}">\n            <div class="posweb-settings-modal-section-header-container">\n                <img class="posweb-settings-modal-section-header-img" alt="" src="${m.PoswebMetadata.getInstance().assetUrl}assets/${m.PoswebMetadata.getInstance().version}/settings_groupby_icon.svg"/>\n                <div role="heading" aria-level="5" class="pvd-paragraph posweb-settings-modal-section-header">Group by</div>\n            </div>${o}\n            <div class="posweb-settings-modal-groupby-content">\n                <div class="posweb-settings-modal-groupby-content-fieldset" role="group">\n                    <div class="posweb-settings-modal-groupby-content-fragment">\n                        <div class="pvd3pwe-radio-root pvd-radio--small posweb-settings-modal-groupby-choice1">\n                            <input class="pvd-radio__radio" type="radio" name="posweb-settings-modal-groupby-choice" id="posweb-settings-modal-groupby-account" checked="checked"${i}>\n                            <label class="pvd-radio__label" for="posweb-settings-modal-groupby-account">\n                                <div aria-hidden="true" class="pvd-radio__radio-wrap"></div>\n                                <div class="pvd-radio__label-text">Account</div>\n                            </label>\n                         </div>${s}\n                        <div class="pvd3pwe-checkbox-root pvd-checkbox--small">\n                            <input class="pvd-checkbox__checkbox" type="checkbox" name="posweb-settings-modal-groupby-account-checkbox" id="posweb-settings-modal-groupby-securitytype-checkbox" ariadisabled="false"/>\n                            <label class="pvd-checkbox__label" for="posweb-settings-modal-groupby-securitytype-checkbox">\n                                <div aria-hidden="true" class="pvd-checkbox__checkbox-wrap">\n                                    <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-checkbox__checkbox-wrap-icon pvd-checkbox__checkbox-wrap-icon--checked pvd-icon--extra-small" focusable="false">\n                                        <use href="#pvd3pwe-action__check" xlink:href="#pvd3pwe-action__check"></use>\n                                    </svg>\n                                </div>\n                                <div class="pvd-checkbox__label-text">Investment type</div>\n                            </label>\n                        </div>\n                        <div class="pvd3pwe-radio-root pvd-radio--small posweb-settings-modal-groupby-choice3">\n                            <input class="pvd-radio__radio" type="radio" name="posweb-settings-modal-groupby-choice" id="posweb-settings-modal-groupby-nogroup"${i}>\n                            <label class="pvd-radio__label" for="posweb-settings-modal-groupby-nogroup">\n                                <div aria-hidden="true" class="pvd-radio__radio-wrap"></div>\n                                <div class="pvd-radio__label-text">No grouping</div>\n                            </label>\n                        </div>\n                    </div>\n                    <div class="posweb-settings-modal-groupby-content-fragment">\n                        <div class="pvd3pwe-radio-root pvd-radio--small posweb-settings-modal-groupby-choice2">\n                            <input class="pvd-radio__radio" type="radio" name="posweb-settings-modal-groupby-choice" id="posweb-settings-modal-groupby-symbol"${i}>\n                            <label class="pvd-radio__label" for="posweb-settings-modal-groupby-symbol">\n                                <div aria-hidden="true" class="pvd-radio__radio-wrap"></div>\n                                <div class="pvd-radio__label-text">Symbol</div>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}prepareColumnsBody(){return`<div class="posweb-settings-modal-container posweb-settings-modal-column-container">\n                <div class="posweb-settings-modal-section-header-container">\n                    <img class= "posweb-settings-modal-section-header-img" alt=""\n                     src="${m.PoswebMetadata.getInstance().assetUrl}assets/${m.PoswebMetadata.getInstance().version}/settings_columns_icon.svg"/>\n                    <div role="heading" aria-level="5" class="pvd-paragraph posweb-settings-modal-section-header">Columns</div>\n                </div>\n                <div class="pvd3pwe-checkbox-root pvd-checkbox--small">\n                    <input class="pvd-checkbox__checkbox" type="checkbox" name="posweb-settings-modal-restore-columns" id="posweb-settings-modal-restore-columns"/>\n                    <label class="pvd-checkbox__label" for="posweb-settings-modal-restore-columns">\n                        <div aria-hidden="true" class="pvd-checkbox__checkbox-wrap">\n                            <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-checkbox__checkbox-wrap-icon pvd-checkbox__checkbox-wrap-icon--checked pvd-icon--extra-small" focusable="false">\n                                <use href="#pvd3pwe-action__check" xlink:href="#pvd3pwe-action__check"></use>\n                            </svg>\n                        </div>\n                        <div class="pvd-checkbox__label-text">Restore columns to default</div>\n                    </label>\n                </div>\n                <div class="pvd3pwe-checkbox-root pvd-checkbox--small">\n                    <input class="pvd-checkbox__checkbox" type="checkbox" name="posweb-settings-enable-compact-mode" id="posweb-settings-enable-compact-mode-checkbox" aria-describedby="posweb-settings-enable-compact-mode"/>\n                    <label class="pvd-checkbox__label" for="posweb-settings-enable-compact-mode-checkbox">\n                        <div aria-hidden="true" class="pvd-checkbox__checkbox-wrap">\n                            <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-checkbox__checkbox-wrap-icon pvd-checkbox__checkbox-wrap-icon--checked pvd-icon--extra-small" focusable="false">\n                                <use href="#pvd3pwe-action__check" xlink:href="#pvd3pwe-action__check"></use>\n                            </svg>\n                        </div>\n                        <div class="pvd-checkbox__label-text">Enable compact mode for small screens</div>\n                    </label>\n                    <div class="pvd-checkbox__microcopy">\n                        <div class="pvd3pwe-microcopy-root" id="posweb-settings-enable-compact-mode-checkbox-microcopy">\n                            <p class="pvd-microcopy__microcopy posweb-settings-modal-label-note">Compact mode dynamically combines position data into fewer columns to save space on smaller screens.</p>\n                        </div>\n                    </div>\n                </div>\n                <div class="pvd3pwe-checkbox-root pvd-checkbox--small">\n                    <input class="pvd-checkbox__checkbox" type="checkbox" name="posweb-settings-modal-pinned-symbol-checkbox" id="posweb-settings-modal-pinned-symbol-checkbox" aria-describedby="posweb-settings-modal-pinned-symbol-checkbox-microcopy"/>\n                    <label class="pvd-checkbox__label" for="posweb-settings-modal-pinned-symbol-checkbox">\n                        <div aria-hidden="true" class="pvd-checkbox__checkbox-wrap">\n                            <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-checkbox__checkbox-wrap-icon pvd-checkbox__checkbox-wrap-icon--checked pvd-icon--extra-small" focusable="false">\n                                <use href="#pvd3pwe-action__check" xlink:href="#pvd3pwe-action__check"></use>\n                            </svg>\n                        </div>\n                        <div class="pvd-checkbox__label-text">Pin Symbol column to the left</div>\n                    </label>\n                    <div class="pvd-checkbox__microcopy">\n                        <div class="pvd3pwe-microcopy-root" id="posweb-settings-modal-pinned-symbol-checkbox-microcopy">\n                            <p class="pvd-microcopy__microcopy posweb-settings-modal-label-note">Unchecking this box will improve the accessibility of the positions page.</p>\n                        </div>\n                    </div>\n                </div>\n            </div>`}prepareEWSBody(){return`<div class="posweb-settings-modal-container posweb-settings-modal-washsales">\n                <div class="posweb-settings-modal-section-header-container">\n                    <img class= "posweb-settings-modal-section-header-img" alt=""\n                     src="${m.PoswebMetadata.getInstance().assetUrl}assets/${m.PoswebMetadata.getInstance().version}/wash_sale_icon.svg"/>\n                    <div role="heading" aria-level="5" class="pvd-paragraph posweb-settings-modal-section-header" data-testid="washsales-header">Wash sales</div>\n                </div>\n                <div class="pvd3pwe-checkbox-root pvd-checkbox--small">\n                    <input class="pvd-checkbox__checkbox" type="checkbox" name="posweb-settings-modal-washsales-checkbox" id="posweb-settings-modal-washsales-checkbox" aria-describedby="posweb-settings-modal-washsales-checkbox-microcopy"/>\n                    <label class="pvd-checkbox__label" for="posweb-settings-modal-washsales-checkbox" data-testid="washsales-checkbox">\n                        <div aria-hidden="true" class="pvd-checkbox__checkbox-wrap" data-testid="washsales-checkmark">\n                            <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-checkbox__checkbox-wrap-icon pvd-checkbox__checkbox-wrap-icon--checked pvd-icon--extra-small" focusable="false">\n                                <use href="#pvd3pwe-action__check" xlink:href="#pvd3pwe-action__check"></use>\n                            </svg>\n                        </div>\n                        <div class="pvd-checkbox__label-text">Unadjusted cost basis</div>\n                    </label>\n                    <div class="pvd-checkbox__microcopy">\n                        <div class="pvd3pwe-microcopy-root" id="posweb-settings-modal-washsales-checkbox-microcopy">\n                            <p class="pvd-microcopy__microcopy posweb-settings-modal-label-note">Check this box to exclude wash sales from your cost basis data. This will allow you to see unadjusted gain/loss figures for your account.</p>\n                        </div>\n                    </div>\n                </div>\n            </div>`}prepareForeignStocksBody(){return`<div class="posweb-settings-modal-container posweb-settings-modal-foreignstocks">\n                <div class="posweb-settings-modal-section-header-container">\n                    <img class= "posweb-settings-modal-section-header-img" alt=""\n                     src="${m.PoswebMetadata.getInstance().assetUrl}assets/${m.PoswebMetadata.getInstance().version}/foreign_stocks_icon.svg"/>\n                    <div role="heading" aria-level="5" class="pvd-paragraph posweb-settings-modal-section-header">International position</div>\n                </div>\n                <div class="pvd3pwe-checkbox-root pvd-checkbox--small">\n                    <input class="pvd-checkbox__checkbox" type="checkbox" name="posweb-settings-modal-foreignstocks-checkbox" id="posweb-settings-modal-foreignstocks-checkbox" aria-describedby="posweb-settings-modal-foreignstocks-checkbox-microcopy" />\n                    <label class="pvd-checkbox__label" for="posweb-settings-modal-foreignstocks-checkbox">\n                        <div aria-hidden="true" class="pvd-checkbox__checkbox-wrap">\n                            <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-checkbox__checkbox-wrap-icon pvd-checkbox__checkbox-wrap-icon--checked pvd-icon--extra-small" focusable="false">\n                                <use href="#pvd3pwe-action__check" xlink:href="#pvd3pwe-action__check"></use>\n                            </svg>\n                        </div>\n                        <div class="pvd-checkbox__label-text">Show foreign currency</div>\n                    </label>\n                    <div class="pvd-checkbox__microcopy">\n                        <div class="pvd3pwe-microcopy-root" id="posweb-settings-modal-foreignstocks-checkbox-microcopy">\n                            <p class="pvd-microcopy__microcopy posweb-settings-modal-label-note">See foreign positions in their local currency.</p>\n                        </div>\n                    </div>\n                </div>\n            </div>`}preparePriorDayGLBody(){return`<div class="posweb-settings-modal-container posweb-settings-modal-priordaygl">\n                <div class="posweb-settings-modal-section-header-container">\n                    <img class= "posweb-settings-modal-section-header-img " alt=""\n                     src="${m.PoswebMetadata.getInstance().assetUrl}assets/${m.PoswebMetadata.getInstance().version}/not_priced_indicator_settings.svg"/>\n                    <div role="heading" aria-level="5" class="pvd-paragraph posweb-settings-modal-section-header">Prior day gain/loss</div>\n                </div>\n                <div class="pvd3pwe-checkbox-root pvd-checkbox--small">\n                    <input class="pvd-checkbox__checkbox" type="checkbox" name="posweb-settings-modal-priordaygl-checkbox" id="posweb-settings-modal-priordaygl-checkbox" aria-describedby="posweb-settings-modal-priordaygl-checkbox-microcopy" />\n                    <label class="pvd-checkbox__label" for="posweb-settings-modal-priordaygl-checkbox">\n                        <div aria-hidden="true" class="pvd-checkbox__checkbox-wrap">\n                            <svg aria-hidden="true" class="pvd3pwe-icon-root pvd-checkbox__checkbox-wrap-icon pvd-checkbox__checkbox-wrap-icon--checked pvd-icon--extra-small" focusable="false">\n                                <use href="#pvd3pwe-action__check" xlink:href="#pvd3pwe-action__check"></use>\n                            </svg>\n                        </div>\n                        <div class="pvd-checkbox__label-text">Display prior day gain/loss</div>\n                    </label>\n                    <div class="pvd-checkbox__microcopy">\n                        <div class="pvd3pwe-microcopy-root" id="posweb-settings-modal-priordaygl-checkbox-microcopy">\n                            <p class="pvd-microcopy__microcopy posweb-settings-modal-label-note">Display prior day’s gain/loss for positions that haven't updated their price intraday. This applies to positions which update their price once per day.</p>\n                        </div>\n                    </div>\n                </div>\n            </div>`}setupSettingsChoices(){var e,t;const s=v.PoswebGridUtils.getGroupBy();if(c.POSWEB_SETTINGS_GROUPBY.SYMBOL===s){y.PoswebUtils.getHtmlElement("posweb-settings-modal-groupby-symbol").checked=!0,C.updateGroupbyCheckboxStatus()}else if(c.POSWEB_SETTINGS_GROUPBY.NO_GROUPING===s){y.PoswebUtils.getHtmlElement("posweb-settings-modal-groupby-nogroup").checked=!0,C.updateGroupbyCheckboxStatus()}const o=y.PoswebUtils.getHtmlElement("posweb-settings-modal-groupby-baskets-checkbox"),i=y.PoswebUtils.getHtmlElement("posweb-settings-modal-groupby-securitytype-checkbox");o&&(o.checked=v.PoswebGridUtils.getGroupByBasketInSettings()),i&&(i.checked=v.PoswebGridUtils.getGroupBySecurityTypeInSettings()),null===(e=y.PoswebUtils.htmlQuerySelectorAll("input[name='posweb-settings-modal-groupby-choice']"))||void 0===e||e.forEach(e=>{e.onclick||(e.onclick=()=>{C.updateGroupbyCheckboxStatus()})});const a=y.PoswebUtils.getHtmlElement("posweb-settings-modal-priordaygl-checkbox");a&&(a.checked=Boolean(P.WindowService.getPositionSettings().isPriorDayGL));const r=y.PoswebUtils.getHtmlElement("posweb-settings-modal-washsales-checkbox");r&&(r.checked=Boolean(P.WindowService.getPositionSettings().isUnadjusted));const n=y.PoswebUtils.getHtmlElement("posweb-settings-modal-foreignstocks-checkbox");n&&(n.checked=Boolean(P.WindowService.getPositionSettings().isShowForeignStocks));const l=y.PoswebUtils.getHtmlElement("posweb-settings-modal-pinned-symbol-checkbox");l&&(l.checked=Boolean(this._currState.settings.pinnedSymbol));const d=y.PoswebUtils.getHtmlElement("posweb-settings-enable-compact-mode-checkbox");d&&(d.checked=Boolean(null===(t=this._currState.settings.stackedPosition)||void 0===t||t))}prepareGroupBySettingsData(){const e=y.PoswebUtils.getHtmlElement("posweb-settings-modal-groupby-symbol"),t=y.PoswebUtils.getHtmlElement("posweb-settings-modal-groupby-nogroup"),s=e.checked?c.POSWEB_SETTINGS_GROUPBY.SYMBOL:(null==t?void 0:t.checked)?c.POSWEB_SETTINGS_GROUPBY.NO_GROUPING:c.POSWEB_SETTINGS_GROUPBY.ACCOUNT;return P.WindowService.getPositionSettings().groupBy=s,{key:b.PoswebConstants.SETTINGS_GROUPBY_STATE_KEY,value:String(s)}}prepareWashSalesSettingsData(){const e=y.PoswebUtils.getHtmlElement("posweb-settings-modal-washsales-checkbox"),t=Boolean(null==e?void 0:e.checked);return P.WindowService.getPositionSettings().isUnadjusted=t,{key:b.PoswebConstants.SETTINGS_WASHSALES_STATE_KEY,value:String(t)}}preparePriorDayGLSettingsData(){const e=y.PoswebUtils.getHtmlElement("posweb-settings-modal-priordaygl-checkbox"),t=Boolean(null==e?void 0:e.checked);return P.WindowService.getPositionSettings().isPriorDayGL=t,{key:b.PoswebConstants.SETTINGS_PRIORDAYGL_STATE_KEY,value:String(t)}}prepareGroupByBasketsSettingsData(){const e=y.PoswebUtils.getHtmlElement("posweb-settings-modal-groupby-baskets-checkbox"),t=Boolean(null==e?void 0:e.checked);return e?(P.WindowService.getPositionSettings().isGroupByBasket=t,{key:b.PoswebConstants.SETTINGS_GROUPBY_BASKET_STATE_KEY,value:String(t)}):{key:b.PoswebConstants.SETTINGS_GROUPBY_BASKET_STATE_KEY,value:String(!1)}}prepareGroupBySecurityTypeSettingsData(){const e=y.PoswebUtils.getHtmlElement("posweb-settings-modal-groupby-securitytype-checkbox"),t=Boolean(null==e?void 0:e.checked);return e?(P.WindowService.getPositionSettings().isGroupBySecurityType=t,{key:b.PoswebConstants.SETTINGS_GROUPBY_SECURITYTYPE_STATE_KEY,value:String(t)}):{key:b.PoswebConstants.SETTINGS_GROUPBY_SECURITYTYPE_STATE_KEY,value:String(!1)}}prepareForeignStocksSettingsData(){const e=y.PoswebUtils.getHtmlElement("posweb-settings-modal-foreignstocks-checkbox"),t=Boolean(null==e?void 0:e.checked);return P.WindowService.getPositionSettings().isShowForeignStocks=t,{key:b.PoswebConstants.SETTINGS_FOREIGNSTOCKS_STATE_KEY,value:String(t)}}prepareRestoreColumnsOrderSettingsData(){return{key:p.PoswebActionKeys.GRID_PRESET_COLUMN_ORDER,value:JSON.stringify(i.DEF_POSWEB_STATE.presetColumnsOrder)}}prepareRestoreColumnsSortSettingsData(){return{key:p.PoswebActionKeys.GRID_COLUMN_SORT_DETAILS,value:JSON.stringify(i.DEF_POSWEB_STATE.columnSortDetails)}}updateSettingsApplyButton(){const e=y.PoswebUtils.htmlQuerySelector(".posweb-settings-modal-apply");e&&!e.onclick&&(e.onclick=()=>{const e=[],t=this.prepareGroupBySettingsData(),s=v.PoswebGridUtils.getGroupBy(),i=this.prepareGroupByBasketsSettingsData(),l=this.prepareGroupBySecurityTypeSettingsData();t&&"0"!==s&&e.push(t,i,l),i&&"0"===s&&e.push(t,i),l&&"0"===s&&e.push(l),o.CommonModal.getInstance().closeModal();const d=y.PoswebUtils.getHtmlElement("posweb-settings-modal-restore-columns"),p=v.PoswebGridUtils.getCurrentSelectedPresetView();if(null==d?void 0:d.checked){n.MetricsService.sendMetricsRequest("restoreDefaultColumns");const e=JSON.parse(this.prepareRestoreColumnsOrderSettingsData().value),t=JSON.parse(this.prepareRestoreColumnsSortSettingsData().value);S.PreferenceManager.getInstance().subscribeColOrderChange(),S.PreferenceManager.getInstance().subscribeColSortChange(),this._poswebStore.store.dispatch(u.PoswebActions.dispatchPresetColumnsOrder(e)),this._poswebStore.store.dispatch(u.PoswebActions.dispatchColumnSortDetails(t))}else if((c.POSWEB_SETTINGS_GROUPBY.ACCOUNT===s||c.POSWEB_SETTINGS_GROUPBY.SYMBOL===s)&&-1!==this._currState.columnSortDetails[p].search(/\bact\b/)){const e=JSON.parse(this.prepareRestoreColumnsSortSettingsData().value);S.PreferenceManager.getInstance().subscribeColSortChange(),this._poswebStore.store.dispatch(u.PoswebActions.dispatchColumnSortDetails(e))}const b=y.PoswebUtils.getHtmlElement("posweb-settings-modal-pinned-symbol-checkbox"),h=y.PoswebUtils.getHtmlElement("posweb-settings-enable-compact-mode-checkbox");let m=!1;if(b&&b.checked!==this._currState.settings.pinnedSymbol&&(n.MetricsService.sendMetricsRequest(b.checked?"repinSymbolCol":"unpinSymbolCol"),m=!0),h&&h.checked!==this._currState.settings.stackedPosition&&(n.MetricsService.sendMetricsRequest(h.checked?"stackPositionDataDynamically":"unstackPositionDataAlways"),m=!0),m){const e=new a.GridSettingsModel;e.pinnedSymbol=Boolean(b.checked),e.stackedPosition=Boolean(h.checked),S.PreferenceManager.getInstance().subscribeSettingsChange(),this._poswebStore.store.dispatch(u.PoswebActions.dispatchGridSettings(e))}const g=y.PoswebUtils.getHtmlElement("posweb-settings-modal-priordaygl-checkbox");g&&g.checked!==P.WindowService.getPositionSettings().hasPriorDaySecurities&&(e.push(this.preparePriorDayGLSettingsData()),g.checked?n.MetricsService.sendMetricsRequest("seePriorDayGainLoss"):n.MetricsService.sendMetricsRequest("todaysGainLossResets"));const _=y.PoswebUtils.getHtmlElement("posweb-settings-modal-washsales-checkbox");_&&_.checked!==P.WindowService.getPositionSettings().isUnadjusted&&(e.push(this.prepareWashSalesSettingsData()),n.MetricsService.sendMetricsRequest(_.checked?"ExcludeWashSalesYes":"ExcludeWashSalesNo")),w.PoswebGrid.getInstance().groupBySecurityToggle();const f=C.getPageVersion();n.MetricsService.sendMetricsRequest("groupBy"+f,r.MetricsActionTypes.INTERACTION,f);const E=y.PoswebUtils.getHtmlElement("posweb-settings-modal-foreignstocks-checkbox");E&&E.checked!==P.WindowService.getPositionSettings().isShowForeignStocks&&(e.push(this.prepareForeignStocksSettingsData()),E.checked&&n.MetricsService.sendMetricsRequest("foreignLocalCurrencySelected")),e.length>0&&this.saveSettingsInUserState(e).catch(e=>{console.error("Error occurred saving positions settings in user state and get data for Grid Rendering, and error is %o",e)}),w.PoswebGrid.getInstance().getDataForGridRendering(!1,!0,p)})}saveSettingsInUserState(e){return new Promise((t,s)=>{this._poswebGridService.saveStateData({entry:e}).subscribe({next:e=>{e?t(e):s(new Error("No response from State API during saving positions settings in user state"))},error:s,complete:t})})}saveSettingsInSessionState(e){return new Promise((t,s)=>{this._poswebGridService.saveSessionStateData({entry:e}).subscribe({next:e=>{e?t(e):s(new Error("No response from State API during saving positions settings in session state"))},error:s,complete:t})})}static shouldDisableGroupBySection(e,t){return e&&t&&d.POSWEB_PRESET_VIEW.FUND_PERF_VIEW===v.PoswebGridUtils.getCurrentSelectedPresetView()}static updateGroupbyCheckboxStatus(){const e=y.PoswebUtils.getHtmlElement("posweb-settings-modal-groupby-account"),t=!(null==e?void 0:e.checked)||e.disabled;y.PoswebUtils.updateInputElementDisabledStatus("posweb-settings-modal-groupby-baskets-checkbox",t),y.PoswebUtils.updateInputElementDisabledStatus("posweb-settings-modal-groupby-securitytype-checkbox",t),y.PoswebUtils.selectbyCheckboxButtonStatus("input[name='posweb-settings-modal-groupby-account-checkbox']")}}t.PoswebSettings=C},76836:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebPerfMetrics=void 0;const o=s(17190),i=s(82402),a={connectStart:0,duration:0,startTime:0};class r{static mark(e){try{window.performance.clearMarks(e),window.performance.mark(e)}catch(e){console.warn("Measuring performance has threw an error %s",e)}}static measure(e,t,s){try{window.performance.clearMeasures(e),window.performance.measure(e,t,s),window.performance.clearMarks(t),window.performance.clearMarks(s)}catch(e){console.warn("Measuring performance has threw an error %s",e)}}static getEntry(e){try{return i.PoswebUtils.pickFirst(window.performance.getEntriesByName(e,"measure"),a)}catch(t){console.warn("Retrieving performance measure entry %s has threw an error %s",e,t)}return a}static getResEntry(e){try{return i.PoswebUtils.pickFirst(window.performance.getEntriesByName(e,"resource"),a)}catch(t){console.warn("Retrieving performance resource timing entry %s has threw an error %s",e,t)}return a}static getNavEntry(e){try{return i.PoswebUtils.pickFirst(window.performance.getEntriesByName(e,"navigation"),a)}catch(t){console.warn("Retrieving performance navigation timing entry %s has threw an error %s",e,t)}return a}static getWebResp(e){return(window[e]||"").replace("ms","").trim()}static getPweStats(e,t){const s={app:0,lwc:0,web:0,api:0,assets:0,grid:0,total:0};try{const i=Number(r.getWebResp(o.PoswebConstants.POS_APP_TIME)||"0"),a=Number(r.getWebResp(o.PoswebConstants.POS_LWC_TIME)||"0"),n=r.getEntry(o.PoswebConstants.MES_GRID),l=r.getEntry(o.PoswebConstants.MES_GRID_PAINT),d=window.location.href.split("/").slice(0,3).join("/"),c=r.getResEntry(d+o.PoswebConstants.API_POSITIONS),p=e?d+o.PoswebConstants.BASE_API_PATH+"?snippet=Y":window.location.href,u=e?r.getResEntry(p):r.getNavEntry(p);s.assets=t?0:Math.round(n.startTime-u.connectStart),s.lwc=a,s.app=i-a,s.web=Math.round(c.duration-i),s.api=Math.round(c.duration),s.grid=Math.round(l.duration),s.total=Math.round(s.assets+n.duration),window.performance.clearResourceTimings()}catch(e){console.warn("Error occurred while populating stats and error is ",e)}return s}}t.PoswebPerfMetrics=r},77965:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebAccountCellRenderer=void 0;const o=s(79859),i=s(82402);class a extends o.PoswebBaseCellRenderer{init(e){this._eGui=document.createElement("div"),this._params=e,e.data&&(this._eGui.classList.add("posweb-cell-actcol_container"),this._eGui.innerHTML=this.getTemplate(e.data))}static getPoswebPrintGridCell(e,t){let s=`<td${t?` class="${t}"`:""}>`;return s+=e?a.getPositionCellTemplate(e,e.actNam||"",e.actNum||"",""):"",s+="</td>",s}getTemplate(e){const t=i.PoswebUtils.getAccountNumber(e.actNum),s=e.actNam||"",o=s;return a.getPositionCellTemplate(e,s,t,o)}static getPositionCellTemplate(e,t,s,o){var i;return`<div class="posweb-cell-actcol-name_description" role="presentation">\n                    <div class="posweb-cell-actcol-name_container" role="presentation">\n                        <span title="${o}" class="posweb-cell-actcol-name">${t}</span>\n                        ${(null===(i=e.meta)||void 0===i?void 0:i.actFootnoteNum)?'<sup class="posweb-cell-actcol-name_sup">'+e.meta.actFootnoteNum+"</sup>":""}\n                    </div>\n                    <p title="${o}" class="posweb-cell-actcol-description">${s}</p>\n                </div>`}}t.PoswebAccountCellRenderer=a},78902:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebDetailCellRenderer=void 0;const o=s(3274),i=s(75228),a=s(36737),r=s(52654),n=s(16186),l=s(48417),d=s(89065),c=s(74005),p=s(17597),u=s(58836),b=s(79859),w=s(83254),h=s(17190),v=s(68763),m=s(8939),g=s(60942),_=s(60488),y=s(93535),S=s(49386),P=s(50895),C=s(82402),f=s(19637),E=s(67452),T=s(34140),I=["Equity","Option","Mutual Fund","Others","Exchange Traded","Foreign Securities","Core","Annuity","Digital Currency"],O=48,A=60,k=30,D=132,R=508,L=516,G=112,M=232,N=30,x=37;class B extends b.PoswebBaseCellRenderer{constructor(){super(...arguments),this.DEFAULT_PAGE_SIZE=10,this.MAX_PAGE_SIZE=500,this._drawerWidth=0,this._drawerHeaderHeight=0,this._drawerNotificationsHeight=0,this._drawerEmbeddedMsgsHeight=0,this._drawerFooterHeight=0}static generateButtonKey(e,t,s){return""+(null==e?void 0:e.trim())+(null==t?void 0:t.trim())+(null==s?void 0:s.trim())}init(e){var t,s,o,i;if(this._poswebMetadata=y.PoswebMetadata.getInstance(),this._poswebStore=S.PoswebStore.getInstance(),this._poswebCommon=w.PoswebCommon.getInstance(),this._mngBasketsLink=`${this._poswebMetadata.digitalDomain}/ftgw/digital/sdp-dashboard/`,this._onclickFunctions={},this._eGui=document.createElement("div"),this._params=e,null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.meta){const{meta:t}=e.data,r=this._poswebStore.store.getState().settings.pinnedSymbol,n="boolean"==typeof r?r:a.DEF_POSWEB_STATE.settings.pinnedSymbol;if(this._eGui.setAttribute("role","gridcell"),this._eGui.setAttribute("tabindex","-1"),null===e.pinned&&this._eGui.setAttribute("aria-colspan",e.api.getColumns().length),!0===t.isDrawerDisabled||"right"===e.pinned||n&&"left"!==e.pinned||!n&&null!==e.pinned)this._eGui.innerHTML="";else if(null===(o=null===(s=e.node)||void 0===s?void 0:s.parent)||void 0===o?void 0:o.id){const s=t.securityType,o=Boolean(t.events&&(t.events.hasOpenOrder||t.events.hasEarnings||t.events.hasDistributions)),a="Core"===s,r="A"===t.ncmmInd;let l=!1,d=!1;if(this._eGui.setAttribute("aria-colindex","1"),this._eGui.setAttribute("col-id","sym"),t.isEligibleForLots&&!a&&(l=!0),(!t.isNotQuotable&&I.indexOf(s)>-1||t.isFixedIncome)&&(d=["Foreign Securities","Core"].indexOf(s)<0||t.isMoneyMarket?"tab":"link"),(!1===t.isAltProp||t.isAltUnitized||t.isAlt&&!(null===(i=window.toggleMap)||void 0===i?void 0:i.ap126216_PWE_Alt_Inv_NonU_Commitment_Card))&&(d=!1),this._poswebGridService=new g.PoswebGridService,this._eGui.classList.add("posweb-drawer-detail"),this._eGui.innerHTML=this.getDrawerHTML(e,l,d,o),this._sizeChangeSubscription=this._poswebCommon.gridSizeChangedObservable(e).subscribe({next:()=>this.gridSizeChangedCallback()}),n||(this._scrollSubscription=this._poswebCommon.gridScrollObservable(e).subscribe({next:e=>this.gridScrollCallback(e)})),Object.getOwnPropertyNames(this._onclickFunctions).length>0){this._eGui.querySelectorAll(".posweb-header-button").forEach(e=>{const t=B.generateButtonKey(e.getAttribute("aria-label"),e.getAttribute("data-evt-key"),e.textContent),s=this._onclickFunctions[t];s&&(e.onclick=s)})}this.setupTabHandlers(e,l,d,o),a&&!r&&this.processChangeCore(e),this._poswebCommon.matchElementWidthsToGrid([this._eGui]),this._eGui.addEventListener("keyup",e=>this.detailKeyupCallback(e),!0),setTimeout(()=>{e.api.setFocusedCell(e.node.rowIndex,"sym",null),a||_.PoswebGridUtils.enterMasterDetailRow(e.node.parent)})}const l=_.PoswebGridUtils.isMobileDevice()?12:19.75;C.PoswebUtils.updatePopoverStyles(".posweb-header-value-method_popover",`div.popover-pvd {\n                    border-radius: 0.25rem;\n                    width: ${l}rem;\n                    max-width: ${l}rem !important;\n                }`)}}destroy(){this._sizeChangeSubscription&&(this._sizeChangeSubscription.unsubscribe(),delete this._sizeChangeSubscription),this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),delete this._scrollSubscription)}setupTabHandlers(e,t,s,o){var i,a;if(null===(a=null===(i=null==e?void 0:e.node)||void 0===i?void 0:i.parent)||void 0===a?void 0:a.id){const i=this._poswebStore.store.getState(),a={};let r,n,l;t&&(r=_.PoswebGridUtils.attachClickListener(this._eGui,"#posweb-header-purchase-history-tab-"+e.node.parent.id,()=>{this.onTabSelection(e,"purchase-history")}),a["purchase-history"]=r),"tab"===s&&(n=_.PoswebGridUtils.attachClickListener(this._eGui,"#posweb-header-research-tab-"+e.node.parent.id,()=>{this.onTabSelection(e,"research")}),a.research=n),o&&(l=_.PoswebGridUtils.attachClickListener(this._eGui,"#posweb-header-events-tab-"+e.node.parent.id,()=>{this.onTabSelection(e,"events")}),a.events=l),a[i.userSelectedTab]?a[i.userSelectedTab].click():a["purchase-history"]?a["purchase-history"].click():a.research?a.research.click():a.events?a.events.click():this.changeRowHeight(e,0)}}processChangeCore(e){let t=null,s="";const o=this._eGui.querySelector(".posweb-header-buttons"),i=this._eGui.querySelector(".posweb-change-core-button-container");this.retrieveChangeCoreEligibility({acctNam:e.data.actNam,acctNum:e.data.actNum,isCashAct:e.data.meta.isCashAccount,regType:e.data.meta.registrationType}).then(e=>{(null==e?void 0:e.htmlBtnSnippet)&&e.htmlBtnSnippet.length>0&&(s=e.htmlBtnSnippet),t=e}).catch(()=>{s='<button class="pvd3pwe-button-root pvd-button--primary pvd-button--small text-bold posweb-header-button posweb-change-core-button" disabled type="button"><div class="pvd-button__contents"><span class="pvd-button__text">Change Core Position</span></div></button>'}).then(()=>{o&&i&&(s?(i.innerHTML=s+'<span class="pvd3pwe-link-root pvd-link--trigger pvd-link--undefined"><button type="button" class="pvd-link__link posweb-core-modal_link posweb-change-core-span"><span class="pvd-link__text">How Your Core Position Works</span></button></span>',_.PoswebGridUtils.attachClickListener(this._eGui,".posweb-core-modal_link",this.howCoreWorksModal),this.changeRowHeight(e)):1===o.childElementCount?(o.style.display="none",this.changeRowHeight(e)):i.style.display="none"),this.showCoreInfo(e,this._eGui.querySelector("#posweb-drawer-notifications-core-"+e.node.parent.id),t),setTimeout(()=>{_.PoswebGridUtils.enterMasterDetailRow(e.node.parent)})})}retrieveChangeCoreEligibility(e){return new Promise((t,s)=>{this.$changeCoreEligibilitySubscription&&this.$changeCoreEligibilitySubscription.unsubscribe(),this.$changeCoreEligibilitySubscription=this._poswebGridService.retrieveChangeCoreStatus(e).subscribe({next:t,error:e=>{console.error("Error occurred retrieving change core eligibility data, and error is %o",e),s(e)}})})}getDrawerHTML(e,t,s,o){var i;let a="";const{id:r}=e.node.parent,n="Core"===(null===(i=e.data.meta)||void 0===i?void 0:i.securityType),d=this.getTabs(r,t,s,o)+this.getLinks(e,s);if(this._poswebDetailSnippets=new v.PoswebDetailSnippets(r,this._eGui),a=`${this.getValueMethodologyPopoverContent(e.data)}${this.getAltsAsOfDate(e.data)}${this.getButtons(e.data)}${d?'<div class="posweb-header-tabs_links">'+d+"</div>":""}`,""!==a){const i=n?[l.POSWEB_DRAWER.CORE]:[],d=t?[l.POSWEB_DRAWER.LOTS]:[],c="tab"===s?[l.POSWEB_DRAWER.RESEARCH]:[],p=o?[l.POSWEB_DRAWER.EVENTS]:[];a=`<div class="posweb-drawer-header-navigation" id="posweb-drawer-header-navigation-${r}">${this.getDescIconTemplate(e.data,r)}<div class="posweb-drawer-buttons_tabs" role="group" aria-label="Actions for ${e.data.sym.desc}${this.addExpirationMessage(e.data)}">${a}</div></div></div>\n                    ${this._poswebDetailSnippets.baseNotifications([...i,...d])}\n                    ${this._poswebDetailSnippets.baseDrawerBody([...d,...c,...p])}`}else a+=`<div class="posweb-coming-soon">There are no available actions or information to display for this position.</div>\n                ${this.getCloseButton(r)}</div>`;return a=`<div class="posweb-drawer-container" role="document"><div class="posweb-drawer-header">${a}</div>`,a}getValueMethodologyPopoverContent(e){var t,s;if(!e.meta)return"";const{securityType:o}=e.meta,i=e.meta.rowId;let a='<div class="posweb-header-value-method-container">',r="";switch(o){case"Certificate Of Deposit":case"Bond":r="Bond & CDs are priced overnight using a third-party vendor. The Last Price does not reflect the amount to be received at maturity. The Last Price — also referred to as the third-party price in the fixed income research pages of Fidelity.com — is an approximate value of the security using various factors including, but not limited to, recent trade activity of the bond or CD and comparable bonds & CDs. When selling the security, the actual price may be higher or lower than the Last Price.";break;case"Foreign Securities":r="International securities that trade in their local market are converted from their local currency into USD using the current foreign exchange rate. To view how this position is trading in its local market, please use the settings menu to view international positions in their local currency.";break;case"Option":r="Overnight options pricing uses an industry-standard methodology that includes the middle price of the Last, Bid, and Ask. During market hours, options are priced in the open market. If you bought to open the option, it will be valued at the bid price. If you sold to open the option, it will be valued at the ask price.";break;default:return""}if("Option"===o){const o=C.PoswebUtils.getEasternDateFromLocal(),i=null===(t=e.sym)||void 0===t?void 0:t.optDesc,r=null===(s=C.PoswebUtils.calculateDaysBetween(o,i))||void 0===s?void 0:s.toLocaleString(),n=null==r?void 0:r.length;switch(a+=`<div class="posweb-header-expiration-container" aria-label="Option nearing expiration">${P.PoswebSymbolCellRenderer.getNearExpirationIndicatorTemplate(i)}`,r){case"0":a+="Expires today";break;case"1":a+="<b>1</b> &nbsp;Day until expiration";break;default:a+=`<b>${null!=r?r:"--"}</b> &nbsp;Days until expiration`}a+=`<div class="posweb-header-value-method-divider posweb-header-${null!=n?n:"1"}-digits"></div></div>`}return a+=`<span class="pvd3pwe-link-root pvd-link--trigger pvd-link--undefined"><button type="button" class="pvd-link__link" id="posweb-header-value-method-button-${i}"><span class="pvd-link__text">How your position is valued</span></button></span><pwe-popover class="posweb-header-value-method_popover" position="bottom" role="dialog" show-elem=".positions-web-experience" for="posweb-header-value-method-button-${i}" constrain="true" id="posweb-header-value-method_popover-${i}" zindex="1" additional-scroll-selectors=".ag-body-viewport,.ag-center-cols-viewport" popover-hide-top_bottom=".ag-body-viewport" popover-hide-left_right=".ag-body-viewport"> <div class="posweb-header-value-method_popover_content"> ${r} </div> </pwe-popover></div>`,a}getDescIconTemplate(e,t){var s;let o="";const i=y.PoswebMetadata.getInstance(),{isFixedIncome:a,fixedIncDtls:r}=e.meta;if(e.sym.desc){const n=e.sym.desc.split(" ");o+='<div class="posweb-header-description-container'+(_.PoswebGridUtils.isMobileDevice()?" mobile":"")+'"><div><span role="heading" aria-level="5" class="posweb-header-description">',a&&(null===(s=null==r?void 0:r.mtDate)||void 0===s?void 0:s.disp)?o+=`${e.meta.headerDescription||n.slice(0,n.length-1).join(" ")+" "+r.mtDate.disp}</span>`:"Option"===e.meta.securityType?(n.splice(1,3,C.PoswebUtils.formatDate(e.sym.optDesc)),o+=`${e.meta.headerDescription||n.join(" ")}</span>`):o+=`${e.meta.headerDescription||e.sym.desc}</span>`,(null==r?void 0:r.isAutoR)&&(o+=`<img class="posweb-header-desc-img" title="Auto Roll" alt="Auto Roll Icon" src="${i.assetUrl}assets/${i.version}/auto_roll_long.svg"/>`),(null==r?void 0:r.isLadder)&&(o+=`<img class="posweb-header-desc-img" title="Bond Ladder" alt="Bond Ladder Icon" src="${i.assetUrl}assets/${i.version}/bond_ladder_long.svg"/>`),o+="</div>"+this.getCloseButton(t)+"</div>"}return o}showCoreInfo(e,t,s){e&&(!t||s&&!s.hasWarning||(s?(this._poswebDetailSnippets.addNotification(l.POSWEB_DRAWER.CORE,c.POSWEB_NOTIFY.CONF,"A change to your core is in process.","Please allow one business day for us to make the update."),C.PoswebUtils.updateElementStyle("posweb-header-fdic-link-"+e.node.parent.id,"none")):this._poswebDetailSnippets.addNotification(l.POSWEB_DRAWER.CORE,c.POSWEB_NOTIFY.ERR,"Core changes are currently unavailable.","Please try again later."),this.changeRowHeight(e)))}getButtonHTML(e,t,s,o,i,a){let r;if(this.isBasketed(a)){r="";const i=B.generateButtonKey(e,s,o),n=()=>{window.poswebInitiateTrade(t)};this._onclickFunctions[i]=()=>this.basketInterceptModal(a,e,s,n)}else r=`onclick="poswebex.poswebGrid.accessMetrics('${s}'); poswebInitiateTrade(${B.seedingDataToString(t)},'${s}');" `;return`<button class="pvd3pwe-button-root ${i} pvd-button--small text-bold posweb-header-button" type="button" data-evt-key="${s}" aria-label="${e}" ${r}data-pii="true"><div class="pvd-button__contents"><span class="pvd-button__text">${o}</span></div></button>`}getButtonPrimaryHTML(e,t,s,o,i){return this.getButtonHTML(e,t,s,o,"pvd-button--primary",i)}getButtonSecondaryHTML(e,t,s,o,i){return this.getButtonHTML(e,t,s,o,"pvd-button--secondary",i)}getLinkedTradeButtons(e,t,s,o,i){const a=i?"_self":"_blank";return`<button class="pvd3pwe-button-root pvd-button--primary pvd-button--small text-bold posweb-header-button" type="button" data-evt-key="${o}"${"_self"===a?"":' title="opens in new window"'} role="link" onclick="poswebex.poswebGrid.accessMetrics('${o}'); window.open('${t}','${a}')"><div class="pvd-button__contents"><span class="pvd-button__text">${e}</span></div></button>`}getButtons(e){var t,s,o,i,a,r,n,l,d,c;let p="";if(e){if("Core"===(null===(t=e.meta)||void 0===t?void 0:t.securityType)&&"A"!==e.meta.ncmmInd&&(p+='<div class="posweb-change-core-button-container"><div class="posweb-change-core-spinner-container">\n                            <pvd3pwe-spinner class="posweb-change-core-spinner" pvd-size="small" pvd-triggered-by-interaction="false">\n                            </pvd3pwe-spinner></div></div>'),(null===(s=e.meta)||void 0===s?void 0:s.isAltBuyEligible)&&(null===(o=window.toggleMap)||void 0===o?void 0:o.ap126216_PWE_Alt_Inv_Buy_More)){const{amc:t}=this._poswebCommon,{selectedAccounts:s}=t,o=null==s?void 0:s.find(t=>t.acctNum===e.actNum);!1===(null==o?void 0:o.isAuthorizedAcct)&&["INDIVIDUAL","JOINTWROS","TENANTENTIRT","TENANTCOMMON","USUFRUCT","COMMPROPERTY","REGULARIRA","ROTHIRA","SEPIRA"].indexOf(o.legalConstructCode)>-1&&(p+=this.getBuyMoreAltBtnHTML(e))}if((null===(i=e.meta)||void 0===i?void 0:i.isAltProp)&&(!1===e.meta.isAltUnitized&&(null===(a=window.toggleMap)||void 0===a?void 0:a.ap126216_PWE_Alt_Inv_Call_Instruction_Button)&&(p+=this.getReviewCallBtnHTML()),(null===(r=window.toggleMap)||void 0===r?void 0:r.ap126216_PWE_Alt_Inv_Monitor_Button)&&(p+=this.getViewFundDetailsBtnHTML())),!(null===(n=e.meta)||void 0===n?void 0:n.isAlt)&&e.tradActns)if(this.isStockEtfsOther(e))if(e.tradActns.isBuy&&e.tradActns.isSell){const t=Boolean(this.isBasketed(e)&&_.PoswebGridUtils.isGroupByBasket(!0));p+=t?this.getInvestMoreBtnHTML(e)+this.getButtonSecondaryHTML("sell "+e.sym.name,this.seedingData(e,"S"),"sellEquity","Sell",e):this.getButtonPrimaryHTML("buy "+e.sym.name,this.seedingData(e,"B"),"buyEquity","Buy",e)+this.getButtonPrimaryHTML("sell "+e.sym.name,this.seedingData(e,"S"),"sellEquity","Sell",e),p+=this.getSetExitPlanBtnHTML(e)+this.getOptionChainBtnHTML(e)+(t?"":this.getManageBasketsBtnHTML(e))}else e.tradActns.isBuyToCov&&e.tradActns.isSellSho&&(p+=this.getButtonPrimaryHTML("buy to cover "+e.sym.name,this.seedingData(e,"BH"),"buyToCoverEquity","Buy to cover")+this.getButtonPrimaryHTML("sell short "+e.sym.name,this.seedingData(e,"SH"),"sellShortEquity","Sell short")+this.getSetExitPlanBtnHTML(e)+this.getOptionChainBtnHTML(e)+this.getManageBasketsBtnHTML(e));else if(this.isOption(e)){let t="",s="";e.tradActns.isBuyToOpe||e.tradActns.isSellToClo?(e.tradActns.isBuyToOpe&&(p+=this.getButtonPrimaryHTML("buy to open "+e.sym.name,this.seedingData(e,"BOPEN"),"buyOpenOptions","Buy to open")),e.tradActns.isSellToClo&&(p+=this.getButtonPrimaryHTML("sell to close "+e.sym.name,this.seedingData(e,"SCLOSE"),"sellCloseOptions","Sell to close")),t="SCLOSE",s="BOPEN"):(e.tradActns.isBuyToClo||e.tradActns.isSellToOpe)&&(e.tradActns.isBuyToClo&&(p+=this.getButtonPrimaryHTML("buy to close "+e.sym.name,this.seedingData(e,"BCLOSE"),"buyCloseOptions","Buy to close")),e.tradActns.isSellToOpe&&(p+=this.getButtonPrimaryHTML("sell to open "+e.sym.name,this.seedingData(e,"SOPEN"),"sellOpenOptions","Sell to open")),t="BCLOSE",s="SOPEN"),p+=this.getButtonPrimaryHTML("roll "+e.sym.name,this.seedingOptionsRollData(e,t,s),"rollOptions","Roll")}else if(this.isMutualFund(e)&&e.tradActns.isTrade)p+=this.getButtonPrimaryHTML("trade "+e.sym.name,this.seedingData(e,"MF"),"tradeFund","Trade");else if(e.tradActns.isBuy&&e.tradActns.isSell&&e.meta){const{fixedIncDtls:t}=e.meta;this.isFixedIncome(e)?p+=this.getLinkedTradeButtons("Buy",this.getFixedIncomeDigitalTradeLinks(e,"B"),"buy "+e.sym.name,"buyFixIncome",!1)+this.getLinkedTradeButtons("Sell",this.getFixedIncomeDigitalTradeLinks(e,"S"),"sell "+e.sym.name,"sellFixIncome",!1)+((null==t?void 0:t.isAutoR)?this.getCancelAutoRollBtnHTML(e):""):this.isForeignSecurity(e)?p+=this.getButtonPrimaryHTML("buy "+e.sym.name,this.seedingData(e,"B"),"buyForeignEquity","Buy")+this.getButtonPrimaryHTML("sell "+e.sym.name,this.seedingData(e,"S"),"sellForeignEquity","Sell"):this.isCrypto(e)&&(p+=this.getButtonPrimaryHTML("buy "+e.sym.name,this.seedingData(e,"B"),"buyCrypto","Buy")+this.getButtonPrimaryHTML("sell "+e.sym.name,this.seedingData(e,"S"),"sellCrypto","Sell"))}if("Foreign Cash"===(null===(l=e.meta)||void 0===l?void 0:l.securityType))p+=this.getButtonPrimaryHTML("exchange "+e.sym.name,this.seedingData(e,"X"),"currencyExchange","Exchange");else if(e.actNum&&(null===(d=e.meta)||void 0===d?void 0:d.acctType)&&(null===(c=e.tradActns)||void 0===c?void 0:c.isExch)&&(e.meta.securityType||"WPS"===e.meta.acctType)){let t="",s="",o=!1;"WPS"===e.meta.acctType?(t=`${this._poswebMetadata.netBenefitsDomain}/nbretail/savings/navigation/dc/investments?plan=${e.actNum}&option=dcInvestments`,s="wiExchange"):"Annuity"===e.meta.securityType&&(t=`${this._poswebMetadata.digitalDomain}/ftgw/digital/annuity-exchange?ACCOUNT=${e.actNum}`,s="annuityExchange",o=!0),p+=this.getLinkedTradeButtons("Exchange",t,"exchange "+e.sym.name,s,o)}""!==p&&(p='<div class="posweb-header-buttons">'+p+"</div>")}return p}getOptionChainBtnHTML(e){var t;if(!(null===(t=e.meta)||void 0===t?void 0:t.isOptionable))return"";return`<button class="pvd3pwe-button-root pvd-button--secondary pvd-button--small text-bold posweb-header-button posweb-metrics" type="button" data-metrics="optionChainUnderlying" title="opens in new tab" role="link" onclick="window.open('${`${this._poswebMetadata.digitalDomain}/ftgw/digital/options-research/option-chain?symbol=${e.sym.name}&oarchain=true`}');" data-pii="true"><div class="pvd-button__contents"><span class="pvd-button__text">Option chain</span></div></button>`}getBuyMoreAltBtnHTML(e){return e.sym?this.getButtonPrimaryHTML("Buy alternative investment "+e.sym.name,{ORDER_TYPE:"ALT",CUSIP:e.sym.cusip,ACCOUNT_NUM:e.actNum,FUND_NAME:e.sym.desc,SOLICITED:!0},"Alt_Inv_Buy_More","Buy more"):""}getReviewCallBtnHTML(){return`<button class="pvd3pwe-button-root pvd-button--primary pvd-button--small pvd-button--with-icon text-bold posweb-header-button" type="button" role="link" onclick="window.open('${`${this._poswebMetadata.digitalDomain}/ftgw/digital/monitor-capitalcall/summary`}')"><div class="pvd-button__contents"><span class="pvd-button__text">Review call instructions</span><span class="pvd-button__icon pvd-button__icon--right"><pvd3pwe-icon pvd-name="action__open-link" pvd-size="small" pvd-a11y-label="Open call instructions in new tab"></pvd3pwe-icon></span></div></button>`}getViewFundDetailsBtnHTML(){return`<button class="pvd3pwe-button-root pvd-button--primary pvd-button--small pvd-button--with-icon text-bold posweb-header-button" type="button" role="link" onclick="poswebex.poswebGrid.accessMetrics('Alt_Inv_Monitoring'); window.open('${`${this._poswebMetadata.digitalDomain}/ftgw/digital/monitor-alts/summary`}')"><div class="pvd-button__contents"><span class="pvd-button__text">View details</span><span class="pvd-button__icon pvd-button__icon--right"><pvd3pwe-icon pvd-name="action__open-link" pvd-size="small" pvd-a11y-label="Open fund details in new tab"></pvd3pwe-icon></span></div></button>`}getCancelAutoRollBtnHTML(e){var t;if(void 0===(null===(t=e.qty)||void 0===t?void 0:t.val))return"";return`<button class="pvd3pwe-button-root pvd-button--secondary pvd-button--small text-bold posweb-header-button posweb-metrics" type="button" data-metrics="cancelAutoRoll" title="Cancel auto roll" role="link" onclick="poswebex.poswebGrid.onOpenPopupBtnClick('${encodeURI(`${this._poswebMetadata.digitalDomain}/ftgw/digital/fixedincome/autorollCancel?account=${e.actNum}&cusip=${e.sym.cusip}&quantity=${e.qty.val}&description=${e.sym.desc}`)}', '${`scrollbars=yes,resizable=yes,${C.PoswebUtils.getPopupPosition(850,900)}`}', event, false, true)"data-pii="true"><div class="pvd-button__contents"><span class="pvd-button__text">Cancel auto roll</span></div></button>`}getSetExitPlanBtnHTML(e){if(e.meta.isAlt)return"";const t="Set exit plan",s="setExitPlan",o="Set exit plan",i=B.generateButtonKey(t,s,o),a=this.seedingData(e,"CO"),r=()=>{window.poswebInitiateTrade(a)};return this.isBasketed(e)?(this._onclickFunctions[i]=()=>this.basketInterceptModal(e,t,s,r),`<button class="pvd3pwe-button-root pvd-button--secondary pvd-button--small text-bold posweb-header-button" type="button" data-evt-key="${s}" aria-label="${t}" data-pii="true"><div class="pvd-button__contents"><span class="pvd-button__text">${o}</span></div></button>`):this.getButtonSecondaryHTML(t,a,s,o,e)}getManageBasketsBtnHTML(e){return this.isBasketed(e)?`<button class="posweb-managebaskets-drawer-button pvd3pwe-button-root pvd-button--primary pvd-button--small pvd-button--with-icon text-bold posweb-header-button" type="button" title="opens in new window" role="link" onclick="poswebex.poswebGrid.accessMetrics('clickManageBaskets'); window.open('${this._mngBasketsLink}')"><div class="pvd-button__contents"><span class="pvd-button__text">Manage baskets</span><span class="pvd-button__icon pvd-button__icon--right"><pvd3pwe-icon pvd-name="action__open-link" pvd-size="extra-small"></pvd3pwe-icon></span></div></button>`:""}getInvestMoreBtnHTML(e){var t;if(!this.isBasketed(e)||!(null===(t=e.basket)||void 0===t?void 0:t.basketTransitionalId)||!e.actNum)return"";return`<button class="posweb-investmore-drawer-button pvd3pwe-button-root pvd-button--primary pvd-button--small pvd-button--with-icon text-bold posweb-header-button" type="button" title="opens in new window" role="link"onclick="poswebex.poswebGrid.accessMetrics('basketInvestMore', 'Basket'); window.open('${`${this._poswebMetadata.digitalDomain}/ftgw/digital/trade-sdp/?experience=add&basketId=${e.basket.basketTransitionalId}&account=${e.actNum}`}')"> <div class="pvd-button__contents"> <span class="pvd-button__text">Invest More</span><span class="pvd-button__icon pvd-button__icon--right"><pvd3pwe-icon pvd-name="action__open-link" pvd-size="extra-small"> </pvd3pwe-icon></span></div></button>`}getForeignCurrenciesTradeLinks(e){var t;return e.actNum&&(null===(t=e.sym)||void 0===t?void 0:t.name)?`/ftgw/fbc/oftrade/fxInit?ACCOUNT=${e.actNum}&ORDER_TYPE=X&CURRENCY_CODE_1=${e.sym.name}`:"/ftgw/fbc/oftrade/fxInit"}seedingData(e,t){if(!(null==e?void 0:e.sym)||!t)return{};e.actNum=e.actNum||"",e.sym.name=e.sym.name||"";const s=this.getOrderType(e,t),o=this.getAccountType(e,t);return{ACCOUNT:e.actNum,ACCT_TYPE:o,ORDER_ACTION:this.getOrderAction(t),ORDER_TYPE:s,SYMBOL:e.sym.name,QTY:this.getQuantity(e,t),PRICE_TYPE:"CO"===s?"C":"",ORDER_DETAILS:"CO"===s&&"S"===o?{ORDER_A:{orderAction:"BH"},ORDER_B:{orderAction:"BH"}}:""}}static seedingDataToString(e,t=!0){if(void 0===e)return t?"":"'undefined'";if("object"!=typeof e)return`'${e}'`;return`{${Object.entries(e).map(([e,t])=>`${e}: ${this.seedingDataToString(t,!1)}`).join(", ")}}`}getOrderAction(e){return["MF","TO"].indexOf(e)>-1?"":e}getQuantity(e,t){var s;let o="";return(null===(s=null==e?void 0:e.qty)||void 0===s?void 0:s.val)&&(["BH","S"].indexOf(t)>-1&&!this.isStockEtfsOther(e)&&!this.isCrypto(e)||this.isFixedIncome(e)?o=String(Math.floor(Math.abs(e.qty.val))):["SCLOSE","BCLOSE"].indexOf(t)>-1&&(o=String(Math.abs(e.qty.val)))),o}getAccountType(e,t){let s="";return(null==e?void 0:e.meta)&&["BH","S","SCLOSE","BCLOSE","BOPEN","SOPEN","CO"].indexOf(t)>-1&&("Margin"===e.meta.holdingType?s="M":"Cash"===e.meta.holdingType?s="C":"Short"===e.meta.holdingType&&(s="S")),s}getOrderType(e,t){let s="";return"CO"===t?s="CO":this.isStockEtfsOther(e)&&"TO"!==t?s="SE":this.isCrypto(e)?s="DA":this.isOption(e)||"TO"===t?s="O":this.isMutualFund(e)?s="MF":this.isFixedIncome(e)?s="F":this.isForeignSecurity(e)?s="I":this.isForeignCash(e)&&(s="X"),s}isStockEtfsOther(e){return!0===((null==e?void 0:e.meta)&&["Equity","Exchange Traded","Others"].indexOf(e.meta.securityType)>-1)}isOption(e){var t;return"Option"===(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.securityType)}isCrypto(e){var t;return"Crypto"===(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.acctType)}isMutualFund(e){var t;return"Mutual Fund"===(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.securityType)}isFixedIncome(e){var t;return!0===(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.isFixedIncome)}isForeignSecurity(e){var t;return"Foreign Securities"===(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.securityType)}isForeignCash(e){var t;return"Foreign Cash"===(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.securityType)}isBasketed(e){var t;return Boolean(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.isBasketed)}getFixedIncomeDigitalTradeLinks(e,t){const s="positionspage";let o=`${this._poswebMetadata.fixedIncomeDigitalDomain}${this._poswebMetadata.fiResourcePath}?brokerageOrderAction=${t}`;return e.sym.cusip?(o+=`&securityId=${e.sym.cusip}`,o+=`&account=${e.actNum||""}`,Number(e.qty.val)&&"S"===t&&(o+=`&quantity=${this.getQuantity(e,t)}`),o+`&source=${s}`):o+`&securityId=&source=${s}`}seedingOptionsRollData(e,t,s){return(null==e?void 0:e.sym)&&t&&s?(e.actNum=e.actNum||"",e.sym.name=e.sym.name||"",{ACCOUNT:e.actNum,ACCT_TYPE:this.getAccountType(e,t),ORDER_TYPE:"MLO",COMPLEX_TYPE:"SP",SYMBOL_1:e.sym.name,ACTION_1:t,QTY_1:this.getQuantity(e,t),COMPLEX_TYPE_IDENTIFIER:"RO",SYMBOL_2:"Blank",ACTION_2:s,QTY_2:"Blank",os:"roll"}):{}}getOptionsRollLinks(e,t,s){var o;const i=`${this._poswebMetadata.digitalDomain}`;return e?i+"/ftgw/digital/trade-options?"+`ACCOUNT=${e.actNum||""}&ACCT_TYPE=${this.getAccountType(e,t)}&ORDER_TYPE=MLO&`+`COMPLEX_TYPE=SP&SYMBOL_1=${(null===(o=e.sym)||void 0===o?void 0:o.name)||""}&ACTION_1=${t}&`+`QTY_1=${this.getQuantity(e,t)}&COMPLEX_TYPE_IDENTIFIER=RO&SYMBOL_2=Blank&ACTION_2=${s}&QTY_2=Blank&os=roll`:i+"/ftgw/digital/trade-options"}getForeignSecuritiesTradeLinks(e,t){var s;return e?`/ftgw/fbc/oftrade/stockInit?ACCOUNT=${e.actNum||""}&ORDER_ACTION=${t||""}&ORDER_TYPE=${this.getOrderType(e,t)}&SYMBOL=${(null===(s=e.sym)||void 0===s?void 0:s.name)||""}`:"/ftgw/fbc/oftrade/stockInit"}getCloseButton(e){return`<div class="posweb-header-close"><button aria-label="Close Drawer" class="pvd-btn btn-anchor" onclick="poswebex.poswebGrid.onBtnClose(event, ${e})"><pvd3pwe-icon pvd-name="action__close" pvd-size="small" class="posweb-icon-close"></pvd3pwe-icon></button></div>`}getTabs(e,t,s,o){let i="";return e&&(t&&(i+=`<button aria-controls="posweb-drawer-tabpanel-lots-${e}"\n                    class="posweb-header-tab-button"\n                    id="posweb-header-purchase-history-tab-${e}"\n                    role="tab"\n                    aria-selected="false">\n                    Purchase history</button>`),"tab"===s&&(i+=`<button aria-controls="posweb-drawer-tabpanel-research-${e}"\n                    class="posweb-header-tab-button"\n                    id="posweb-header-research-tab-${e}"\n                    role="tab"\n                    aria-selected="false">\n                    Research</button>`),o&&(i+=`<button aria-controls="posweb-drawer-tabpanel-events-${e}"\n                    class="posweb-header-tab-button"\n                    id="posweb-header-events-tab-${e}"\n                    role="tab"\n                    aria-selected="false">\n                    Events</button>`),""!==i&&(i=`<div id="posweb-header-tabs-${e}"\n                class="posweb-header-tabs"\n                role="tablist">`+i+"</div>")),i}getLinks(e,t){var s,o,i,a,r;let n="",l="",d="";const c=`toolbar=yes,scrollbars=yes,resizable=yes,${C.PoswebUtils.getPopupPosition(850,900)}`;if((null===(o=null===(s=null==e?void 0:e.node)||void 0===s?void 0:s.parent)||void 0===o?void 0:o.id)&&e.data&&("link"===t&&(n+=`<pvd3pwe-link pvd-new-window pvd-href="${this.retrieveResearchLink(e.data,this._poswebMetadata)}" id="posweb-header-research-link-${e.node.parent.id}">Research</pvd3pwe-link>`),(null===(i=e.data.meta)||void 0===i?void 0:i.isFDIC)&&e.data.actNum&&!(null===(a=e.data.meta.acctActns)||void 0===a?void 0:a.is529)&&!e.data.meta.isFailedBank)){e.data.meta.isIWS&&(null===(r=e.data.sym)||void 0===r?void 0:r.cusip)?(l=`${e.data.sym.cusip}-${e.data.sym.usn}`.toLowerCase(),d=`${this._poswebMetadata.fidelityDomain}/accounts-trade/${l}`):(l=`${e.data.actNum}?accountNickName=${e.data.actNam}`,d=`${this._poswebMetadata.digitalDomain}/ftgw/digital/bank-list/${l}`);const t=e.data.meta.isIWS?"FDIC Program Details":"FDIC Program Banks";n+=`<pvd3pwe-link pvd-new-window pvd-trigger onclick="window.open('${d}','_blank','${c}'); return false;" id="posweb-header-fdic-link-${e.node.parent.id}" pvd-class="posweb-metrics" pvd-native-anchor-attributes='{"data-metrics":"FDICLinkOpened"}'>${t}</pvd3pwe-link>`}return""!==n&&(n='<div class="posweb-header-links">'+n+"</div>"),n}onTabSelection(e,t){var s,o,i,a;if((null===(o=null===(s=null==e?void 0:e.node)||void 0===s?void 0:s.parent)||void 0===o?void 0:o.id)&&t){const{id:s}=e.node.parent,o=this._eGui.querySelector("#posweb-drawer-tabpanel-lots-"+s),n=this._eGui.querySelector("#posweb-drawer-tabpanel-research-"+s),d=this._eGui.querySelector("#posweb-drawer-tabpanel-events-"+s),p=this._eGui.querySelector("#posweb-header-"+t+"-tab-"+s),b=this._eGui.querySelector(".posweb-header-tab-button-selected");if(o||n||d){if(b){if(b===p)return;b.classList.remove("posweb-header-tab-button-selected"),b.setAttribute("aria-selected","false"),this._poswebStore.store.dispatch(u.PoswebActions.dispatchUserTabSelection(t))}if(p&&(p.classList.add("posweb-header-tab-button-selected"),p.setAttribute("aria-selected","true")),f.PreferenceManager.getInstance().subscribeDrawerTabSelChange(),this._poswebDetailSnippets.clearAllNotifications(),this.setTabHiddenEmpty(o),this.setTabHiddenEmpty(n),this.setTabHiddenEmpty(d),"purchase-history"===t)o.classList.remove("pwe-hidden"),o.removeAttribute("hidden"),(null===(a=null===(i=e.data)||void 0===i?void 0:i.meta)||void 0===a?void 0:a.isUnavailLots)?(this._poswebDetailSnippets.addNotification(l.POSWEB_DRAWER.LOTS,c.POSWEB_NOTIFY.WARN,"<b>ATTENTION</b>","Purchase history is currently unavailable for this position. Updated purchase history will be available on the next business day."),this.changeRowHeight(e,N)):(o.innerHTML=`<div class="posweb-lots-spinner-container">\n                            <pvd3pwe-spinner id="posweb-lots-spinner-${s}" class="posweb-lots-spinner" pvd-size="medium"\n                            pvd-primary-text="Loading purchase history" pvd-triggered-by-interaction="false"></pvd3pwe-spinner></div>`,this.changeRowHeight(e,D),this.retrieveAndRenderLots(e,1,this.DEFAULT_PAGE_SIZE,o));else if("research"===t){this._poswebCommon.historyData.delete(s),n.classList.remove("pwe-hidden"),n.removeAttribute("hidden");const t=new E.ResearchCardManager(s,e,this.retrieveResearchLink(e.data,this._poswebMetadata),n);n.innerHTML=t.getInitSnippet();const o=this.getResearchDrawerHeight(t);this.changeRowHeight(e,o),t.initCards()}else if("events"===t){this._poswebCommon.historyData.delete(s),d.classList.remove("pwe-hidden"),d.removeAttribute("hidden");const t=new r.EventCardManager(s,e);d.innerHTML=t.getInitSnippet(),this.changeRowHeight(e,M)}}}}getResearchDrawerHeight(e){let t=0;return t=e.isFI?G:e.isMF?L:R,t}howCoreWorksModal(){i.CommonModal.getInstance().constructAndShowModal('<h4 class="pvd-heading-M posweb-core-position-modal-header">How Your Core Position Works</div>',`<div class="posweb-core-position-modal">\n                <p class="small pvd-paragraph">A core position is <b>automatically</b> established when you open a Fidelity account. It's primarily used for processing <b>cash</b> transactions and for holding uninvested cash. When you sell a security, the proceeds are deposited in your core position. When you buy a security, cash in your core position is used to pay for the trade.</p>\n                <p class="small pvd-paragraph posweb-core-position-modal-p"><b>Your core position is also used for processing</b></p>\n                <img alt="A diagram indicating sources of funds flowing into and out of the core position. Transactions that go into the core position include deposits, trade proceeds, and cash dividends. Transactions that go out of the core position include paying for investments such as stocks or mutual funds, or withdrawals made by ATM, bill payment, check writing, or debit card purchases." class="posweb-core-position-modal-image"\n                 src="${y.PoswebMetadata.getInstance().assetUrl}assets/${y.PoswebMetadata.getInstance().version}/core_modal.svg"</img>\n                <a href="${y.PoswebMetadata.getInstance().fidelityDomain}/learning-center/investment-products/mutual-funds/core-position-video" class="color-link" target="_blank">Click here to learn more</a>\n            </div>`,"",d.POSWEB_MODAL_SIZE.LARGE)}basketInterceptModal(e,t,s,o){var a,r;let l,c,p,u,b,w;n.MetricsService.sendMetricsRequest(s),s.toLowerCase().indexOf("buy")>-1?(l="clickBuyIntercept",c="Buy",p='To buy more for your basket, select "Manage baskets." You\'ll be taken to your basket dashboard. Then just select "Manage" to trade within the basket experience.<br><br>Otherwise, select "Buy" to continue to the trade ticket.'):s.toLowerCase().indexOf("setexitplan")>-1?(l="clickSetExitPlanIntercept",c="Set exit plan",p='To sell from your basket, select "Manage baskets." You\'ll be taken to your baskets dashboard. Then just select "Manage" to trade within the basket experience.<br><br>Otherwise, select "Set exit plan." Shares will be sold from your account according to your default disposal method. For example, stocks bought first will be sold first if that\'s your default method.'):(l="clickSellIntercept",c="Sell",p='To sell from your basket, select "Manage baskets." You\'ll be taken to your baskets dashboard. Then just select "Manage" to trade within the basket experience.<br><br>Otherwise, select "Sell." Shares will be sold from your account according to your default disposal method. For example, stocks bought first will be sold first if that\'s your default method.'),_.PoswebGridUtils.isGroupByBasket(!0)&&(null===(a=null==e?void 0:e.meta)||void 0===a?void 0:a.hasUnknownQuantity)?(u="Trading activity is currently limited",p='Up-to-date details are pending for at least one of your positions in this basket. This will be resolved by the next trading day.<br><br>While pending:<ul class="pvd3pwe-list-group-root pvd-list-group--unordered pvd-list-group--small"><li class="pvd-list-group__list-item"><span class="pvd-list-group__list-item-text">You will be unable to sell the position from your basket dashboard, but you can buy more of your current basket positions.</span></li><li class="pvd-list-group__list-item"><span class="pvd-list-group__list-item-text">You can sell the position outside of the basket dashboard. Shares will be sold using your account-level share disposal preferences (typically first-in first-out).</span></li></ul>',w="",b='<button class="pvd3pwe-button-root pvd-button--tertiary pvd-button--small posweb-intercept-basket-cancel-modal-trade-button" aria-label="Cancel basket trade" type="button"><div class="pvd-button__contents"><span class="pvd-button__text">Cancel</span></div></button>'):(b="",w=`\n                <button class="pvd3pwe-button-root pvd-button--secondary pvd-button--small text-bold" type="button"\n                title="opens in new window" role="link" onclick="poswebex.poswebGrid.accessMetrics('clickManageBasketsIntercept'); window.open('${this._mngBasketsLink}', '_blank')" data-pii="true"><div class="pvd-button__contents"><span class="pvd-button__text">Manage baskets</span></div></button>`),i.CommonModal.getInstance().constructAndShowModal(`<h4 class="pvd-heading-M posweb-intercept-basket-modal-header">${u||"This position is part of a basket"}</div>`,`<div class="posweb-intercept-basket-modal-body">\n                <p class="small pvd-paragraph">${p}</p>\n            </div>`,`<div class="posweb-intercept-basket-modal-footer${w?" posweb-intercept-basket-modal-footer--center":""}">${b}${w}\n                <button class="pvd3pwe-button-root pvd-button--primary pvd-button--small text-bold posweb-intercept-basket-modal-trade-button" type="button"\n                aria-label="${t}" data-pii="true"><div class="pvd-button__contents"><span class="pvd-button__text">${c}</span></div></button>\n            </div>`,d.POSWEB_MODAL_SIZE.MEDIUM),document.querySelector(".posweb-intercept-basket-modal-trade-button").onclick=()=>{i.CommonModal.getInstance().closeModal("#dest-dropdownlist-button-trade"),n.MetricsService.sendMetricsRequest(l),o()},_.PoswebGridUtils.isGroupByBasket(!0)&&(null===(r=null==e?void 0:e.meta)||void 0===r?void 0:r.hasUnknownQuantity)&&(document.querySelector(".posweb-intercept-basket-cancel-modal-trade-button").onclick=()=>{i.CommonModal.getInstance().closeModal()})}retrieveResearchLink(e,t){return"WPS"===e.meta.acctType&&this.isMutualFund(e)&&e.meta.investmentCode&&e.actNum?`${t.netBenefitsDomain}/mybenefits/savings2/performance/fundinfo?returnPage=&fundnbr=${e.meta.investmentCode}&plan=${e.actNum}`:this.isOption(e)&&e.sym.name?`${t.optionResearchDomain}/ftgw/mloptions/goto/detailedQuote?symbols=${e.sym.name}`:"Annuity"===e.meta.securityType?`${t.fundResearchDomain}/annuities/summary/${e.sym.name}`:"Core"===e.meta.securityType&&e.sym.cusip?`${t.nreDomain}/prgw/digital/research/quote/dashboard/summary?symbol=${e.sym.cusip}`:e.sym.name?`${t.nreDomain}/prgw/digital/research/quote/dashboard/summary?symbol=${e.sym.name}`:`${t.nreDomain}/prgw/digital/research/src`}retrieveAndRenderLots(e,t,s,i){var a,r,n,l,d,c,u,b,w,v,g;if(this._amc=this._amc||new o.AccountMiniContext,i&&(null===(r=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.meta)||void 0===r?void 0:r.isEligibleForLots)){const o={acctNum:e.data.actNum,acctType:this.isCrypto(e.data)?"Crypto":e.data.meta.fili?"Annuity":"Brokerage",cusip:(null===(n=e.data.sym)||void 0===n?void 0:n.cusip)||"",symbol:(null===(l=e.data.sym)||void 0===l?void 0:l.name)||"",filiSystem:e.data.meta.sysOfRec,fundCode:e.data.meta.investmentCode,holdingType:e.data.meta.holdingType,isUnadjusted:(null===(d=window[h.PoswebConstants.SETTINGS_PROPERTY_NAME])||void 0===d?void 0:d.isUnadjusted)||!1,isCostBasisAdjusted:["Bond","Certificate Of Deposit"].indexOf(e.data.meta.securityType)>-1,pageNum:t,pageSize:s,returnBasketTaxLotDetail:this.isBasketed(e.data)||!1,slvCd:e.data.meta.slvCd||void 0,positionDetail:{lastPrice:(null===(c=e.data.lstPrcUsd)||void 0===c?void 0:c.val)||(null===(u=e.data.lstPrc)||void 0===u?void 0:u.val)||(null===(w=null===(b=e.data.lstPrStk)||void 0===b?void 0:b.top)||void 0===w?void 0:w.val)||"",securityType:e.data.meta.securityType||"",currentValue:(null===(v=e.data.curVal)||void 0===v?void 0:v.val)||"",quantity:(null===(g=e.data.qty)||void 0===g?void 0:g.val)||"",costBasis:e.data.meta.cstbasType||"",isCostBasisEditable:e.data.meta.isCostBasisEditable||!1,isNotQuotable:e.data.meta.isNotQuotable||!1,isCrypto:this.isCrypto(e.data)}};return this.$openLotsSubscription&&this.$openLotsSubscription.unsubscribe(),p.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW===_.PoswebGridUtils.getCurrentSelectedPresetView()?this._amc.retrieveAccountInfo(p.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW).then(o=>{var a,r;const n=m.PoswebGridClosedPositions.formatClosedPositionsRequestDate(T.WindowService.getPositionSettings().closedPositionsYearSelection,!0),l=Object.assign(Object.assign({acctNum:e.data.actNum,cusip:(null===(a=e.data.sym)||void 0===a?void 0:a.cusip)||"",pageNum:t,pageSize:s},n),{amc:o.amc,isUnadjusted:(null===(r=window[h.PoswebConstants.SETTINGS_PROPERTY_NAME])||void 0===r?void 0:r.isUnadjusted)||!1,toggles:{}}),d=this._eGui.querySelector(".posweb-drawer-buttons_tabs");return d&&(d.style.display="none"),new Promise((t,s)=>{this.$openLotsSubscription=this._poswebGridService.retrieveClosedLotsData(l).subscribe({next:s=>{this._poswebCommon.historyData.set(e.node.parent.id,s),this.renderLotsDataInDrawer(e,s,i),t()},error:t=>{this.renderLotsDataInDrawer(e,!1,i),console.error("Error occurred retrieving history data, and error is %o",t),s(t)},complete:t})})}):new Promise((t,s)=>{this.$openLotsSubscription=this._poswebGridService.retrieveOpenLotsData(o).subscribe({next:t=>{this._poswebCommon.historyData.set(e.node.parent.id,t),this.renderLotsDataInDrawer(e,t,i)},error:t=>{this.renderLotsDataInDrawer(e,!1,i),console.error("Error occurred retrieving purchase history data, and error is %o",t),s(t)},complete:t})})}return this.renderLotsDataInDrawer(e,!1,i),Promise.reject("Not Eligible For Lots")}renderLotsDataInDrawer(e,t,s){var o,i;if(this._eGui.querySelector("#posweb-header-purchase-history-tab-"+e.node.parent.id+".posweb-header-tab-button-selected")&&s&&void 0!==s.innerHTML)if(t){s.innerHTML=t,this.addPaginationClickEventDelegator(s),(null===(i=null===(o=s.children)||void 0===o?void 0:o.drSize)||void 0===i?void 0:i.content)&&(s.children.drSize.content>132||s.children.drSize.content<132)&&this.changeRowHeight(e,Number(s.children.drSize.content));const a=s.querySelectorAll("sup");if(a.length>0){const e=new Set;for(const t of a)e.add(t.getAttribute("name"));e.forEach(e=>{C.PoswebUtils.updateElementStyle(String(e),"table-row")})}s.innerHTML.indexOf("posweb-legend-cost-basis-open-lot-cus-provided")>-1&&("Crypto"===e.data.meta.acctType?_.PoswebGridUtils.updateLegendElement(!0,"posweb-legend-customerProvidedPosition-crypto"):_.PoswebGridUtils.updateLegendElement(!0,"posweb-legend-customerProvidedPosition"))}else s.innerHTML="",s.classList.add("pwe-hidden"),this._poswebDetailSnippets.addNotification(l.POSWEB_DRAWER.LOTS,c.POSWEB_NOTIFY.WARN,"<b>ATTENTION</b>","Fidelity is currently unable to retrieve your purchase history for this security. Please try back later for this information."),this.changeRowHeight(e,N);C.PoswebUtils.updatePopoverStyles(".posweb-cell-purchase_history_popover","div.popover-pvd {\n                    border-radius: 0.25rem;\n                    max-width: calc(20.5rem - 0.125rem);\n                }")}gridSizeChangedCallback(){clearTimeout(this._sizeChangeTimeout),this._sizeChangeTimeout=setTimeout(()=>{0!==this._drawerWidth&&this._eGui.clientWidth!==this._drawerWidth&&this.changeRowHeight(this._params)},200)}gridScrollCallback(e){"horizontal"===e.direction&&(this._eGui.style.left=e.left+"px")}detailKeyupCallback(e){if("Tab"===e.key){const t=e.target;t.classList.contains("posweb-drawer-exit-down")?(_.PoswebGridUtils.exitMasterDetailRow(this._params.node.parent,"down"),e.preventDefault()):t.classList.contains("posweb-drawer-exit-up")&&(_.PoswebGridUtils.exitMasterDetailRow(this._params.node.parent,"up"),e.preventDefault())}}changeRowHeight(e,t){setTimeout(()=>{this._eGui.clientWidth!==this._drawerWidth&&(this._drawerWidth=this._eGui.clientWidth);const s=this.popHeights(".posweb-drawer-header-navigation",O,O),o=this.popHeights(".posweb-drawer-notifications",A,0),i=this.popHeights(".posweb-drawer-embedded-errmsgs",x,0),a=this.popHeights(".posweb-drawer-footer",k,0),r=s+o+i+a;if(void 0===t){let r=e.node.rowHeight;s!==this._drawerHeaderHeight&&(r=r-this._drawerHeaderHeight+s),o!==this._drawerNotificationsHeight&&(r=r-this._drawerNotificationsHeight+o),i!==this._drawerEmbeddedMsgsHeight&&(r=r-this._drawerEmbeddedMsgsHeight+i),a!==this._drawerFooterHeight&&(r=r-this._drawerFooterHeight+a),t=r}else t+=r;this._drawerHeaderHeight=s,this._drawerNotificationsHeight=o,this._drawerEmbeddedMsgsHeight=i,this._drawerFooterHeight=a,t&&t!==e.node.rowHeight&&(e.node.setRowHeight(t),e.api.onRowHeightChanged())},0)}popHeights(e,t,s){const o=this._eGui.querySelector(e);return o&&o.clientHeight>0?Math.max(t,o.clientHeight):s}addPaginationClickEventDelegator(e){return!!e.querySelector(".posweb-lots-table-pagination")&&(e.querySelector(".posweb-lots-table-pagination").onclick=e=>{e&&e.target&&!e.target.matches(".posweb-lots-table-pagination-page-button-active")&&!e.target.matches(".posweb-lots-table-pagination-button-inactive")&&this.paginationClickEventDelegator(e)},!0)}paginationClickEventDelegator(e){if((null==e?void 0:e.target)&&!e.target.matches(".posweb-lots-table-pagination-page-button-active")&&!e.target.matches(".posweb-lots-table-pagination-button-inactive")){const t=this._eGui.querySelector("#posweb-drawer-tabpanel-lots-"+this._params.node.parent.id),s=this._eGui.querySelector(".posweb-lots-pagination-spinner");if(t)if(s&&s.setAttribute("pvd-hidden","false"),e.target.matches(".posweb-lots-table-pagination-page-button")&&Number(e.target.getAttribute("page")))this.retrieveAndRenderLots(this._params,Number(e.target.getAttribute("page")),this.DEFAULT_PAGE_SIZE,t);else if(e.target.matches(".posweb-lots-table-pagination-nav-prev-button")){const e=this._eGui.querySelector(".posweb-lots-table-pagination-page-button-active");null!==e&&Number(e.getAttribute("page"))&&this.retrieveAndRenderLots(this._params,Number(e.getAttribute("page"))-1,this.DEFAULT_PAGE_SIZE,t)}else if(e.target.matches(".posweb-lots-table-pagination-nav-next-button")){const e=this._eGui.querySelector(".posweb-lots-table-pagination-page-button-active");null!==e&&Number(e.getAttribute("page"))&&this.retrieveAndRenderLots(this._params,Number(e.getAttribute("page"))+1,this.DEFAULT_PAGE_SIZE,t)}else e.target.matches(".posweb-lots-table-pagination-show-all-button")?this.retrieveAndRenderLots(this._params,1,this.MAX_PAGE_SIZE,t):e.target.matches(".posweb-lots-table-pagination-show-less-button")?this.retrieveAndRenderLots(this._params,1,this.DEFAULT_PAGE_SIZE,t):s&&s.setAttribute("pvd-hidden","true")}}setTabHiddenEmpty(e){e&&(e.classList.add("pwe-hidden"),e.setAttribute("hidden","hidden"),e.innerHTML="")}addExpirationMessage(e){var t,s;if("Option"===(null===(t=e.meta)||void 0===t?void 0:t.securityType)){const t=C.PoswebUtils.getEasternDateFromLocal(),o=null===(s=e.sym)||void 0===s?void 0:s.optDesc,i=C.PoswebUtils.calculateDaysBetween(t,o);return null!=i?i<=7?`. Option nearing expiration has ${i} ${1===i?"day":"days"} until expiration`:`. Option has ${i} days until expiration`:""}return""}getAltsAsOfDate(e){let t="";if(e){const{meta:s}=e;(null==s?void 0:s.isAltProp)&&s.isAltUnitized&&(t+=`<p class='posweb-header-alts-date'>Last price published ${C.PoswebUtils.formatDate(e.meta.altAsOfDate)} as of prior month end.</p>`)}return t}}t.PoswebDetailCellRenderer=B},78996:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebExport=void 0;const o=s(34629),i=s(40584),a=s(3274),r=s(17597),n=s(8939),l=s(60942),d=s(49386),c=s(82402),p=s(69505),u=s(34140),b="\r\n",w=["qty","lstPrc","lstPrChg","curVal","todGL","todGLPct","totGL","totGLPct","actPer","cstBasTot","cstBasShr"],h=["qty","lstPrStk","curVal","todGLStk","totGLStk","actPer","cstBasStk"],v=["qty","lstPrc","lstPrChg","curVal","actPer","exDvDte","dvAmt","pyDte","distYld","distYldDate","secYld","secYldDate","estAnuInc"],m=["mngCtg","ytdDly","oneYr","thrYr","fivYr","tenYr","exRtNt","exRtGs","mstar"],g=["cstBasCloPos","proceedsAmt","stGL","ltGL","totGLCloPos"],_=["symbol","desc","dateAcquired","dateSold","quantity","costBasis","proceeds","shortTerm","longTerm"];class y{constructor(){this._poswebStore=d.PoswebStore.getInstance()}static getInstance(){return this._instance||(this._instance=new this)}exportGrid(e){var t,s,o,a,n;const l=["Account Number","Account Name","Sleeve Name","Basket Name","Investment Type","Symbol","Description","Quantity","Last Price","Last Price Change","Current Value","Today's Gain/Loss Dollar","Today's Gain/Loss Percent","Total Gain/Loss Dollar","Total Gain/Loss Percent","Percent Of Account","Cost Basis Total","Average Cost Basis","Type"],d=["Account Number","Account Name","Sleeve Name","Basket Name","Investment Type","Symbol","Description","Quantity","Last Price","Last Price Change","Current Value","Percent Of Account","Ex-date","Amount per share","Pay date","Dist. yield","Distribution yield as of","SEC yield","SEC yield as of","Est. annual income","Type"],w=["Account Number","Account Name","Symbol","Description","Cost Basis","Proceeds","Short Term Gain/Loss","Long Term Gain/Loss","Total Term Gain/Loss"],h=["Symbol(CUSIP)","Security Description","Date Acquired","Date Sold","Quantity","Cost Basis","Proceeds","Short Term Gain/Loss","Long Term Gain/Loss"],v=["Account Number","Account Name","Sleeve Name","Basket Name","Investment Type","Symbol","Description","Morningstar Category","YTD (Daily)","1 year*","3 year*","5 year*","10 year*","Expense Ratio (Net)","Expense Ratio (Gross)","Morningstar Overall","Type"],m=null===(s=null===(t=u.WindowService.getCurrentPwe())||void 0===t?void 0:t.poswebGrid)||void 0===s?void 0:s.getPoswebGridApi,g=this._poswebStore.store.getState(),_=Object.assign(Object.assign({},i.MY_VIEW_LABEL_MAPPING),i.MY_VIEW_EXPORT_MAPPING),S=this.filterSelCols().split(",").map(e=>e.toUpperCase()).map(e=>_[e]);S.shift();const P=["Account Number","Account Name","Sleeve Name","Basket Name","Investment Type","Symbol","Description",...S];if(m){let t;switch(0===Object.keys(g.slvData).length&&(d.splice(2,1),l.splice(2,1),v.splice(2,1),P.splice(2,1)),0===Object.keys(g.basketData).length&&(d.splice(d.indexOf("Basket Name"),1),l.splice(l.indexOf("Basket Name"),1),v.splice(v.indexOf("Basket Name"),1),P.splice(P.indexOf("Basket Name"),1)),0===Object.keys(g.groupBySecurityData).length&&(d.splice(d.indexOf("Investment Type"),1),l.splice(l.indexOf("Investment Type"),1),v.splice(v.indexOf("Investment Type"),1),P.splice(P.indexOf("Investment Type"),1)),e){case r.POSWEB_PRESET_VIEW.MY_VIEW:t=P.toString()+b;break;case r.POSWEB_PRESET_VIEW.DIVIDEND_VIEW:t=d.toString()+b;break;case r.POSWEB_PRESET_VIEW.FUND_PERF_VIEW:t=v.toString()+b;break;case r.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW:t=w.toString()+b;break;case r.POSWEB_PRESET_VIEW.OVERVIEW:case r.POSWEB_PRESET_VIEW.STACK_OVERVIEW:default:t=l.toString()+b}if(e===r.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW&&(null===(n=null===(a=null===(o=u.WindowService.getProperty("PortSumContainer"))||void 0===o?void 0:o.StateContext)||void 0===a?void 0:a.current("currentAccount"))||void 0===n?void 0:n.acctNum)){const e=[];return m.forEachNodeAfterFilterAndSort(t=>{e.push(this.getLotsDetail(t.data))}),t=h.toString()+b,void y.exportClosedLots(t,e)}m.forEachNodeAfterFilterAndSort(s=>t+=this.processRowData(s.data,Object.keys(g.slvData).length>0?this.getSleeveNameForRow(s.data,g.slvData):"",Object.keys(g.basketData).length>0?this.getBasketNameForRow(s.data,g.basketData):"",Object.keys(g.groupBySecurityData).length>0?this.getGbsNameForRow(s.data,g.groupBySecurityData):"",e)),t+=b+y.getDisclosure(m)+b+b+`"Date downloaded ${p.PweSharedUtils.getEasternTimeFromLocal()} ET"`+b,c.PoswebUtils.exportToCSV(t,`Portfolio_Positions_${c.PoswebUtils.getEasternDateFromLocal()}.csv`)}}static getDisclosure(e){let t="",s=0,o=0,i=0;e.forEachNodeAfterFilterAndSort(e=>{var t,a;const r=null===(t=e.data)||void 0===t?void 0:t.rowType;if(["POSITION","ACCOUNT","POSITION_CORE"].indexOf(r)>-1){const t=null===(a=e.data.meta)||void 0===a?void 0:a.acctType;"Crypto"===t&&(o+=1),"Annuity"===t&&(i+=1),s+=1}});const a='"Insurance products at Fidelity are distributed by Fidelity Insurance Agency, Inc., and, for certain products, by Fidelity Brokerage Services, Member NYSE, SIPC."';return 0===s||0===o?(t='"The data and information in this spreadsheet is provided to you solely for your use and is not for distribution. The spreadsheet is provided for informational purposes only, and is not intended to provide advice, nor should it be construed as an offer to sell, a solicitation of an offer to buy or a recommendation for any security by Fidelity or any third party. Data and information shown is based on information known to Fidelity as of the date it was exported and is subject to change. It should not be used in place of your account statements or trade confirmations and is not intended for tax reporting purposes. For more information on the data included in this spreadsheet, including any limitations thereof, go to Fidelity.com."\r\n\r\n"Brokerage services are provided by Fidelity Brokerage Services LLC (FBS), 900 Salem Street, Smithfield, RI 02917. Custody and other services provided by National Financial Services LLC (NFS). Both are Fidelity Investment companies and members SIPC, NYSE. Neither FBS nor NFS offer crypto as a direct investment nor provide trading or custody services for such assets."',i&&(t+=b+b+a)):o===s?t='"The data and information in this spreadsheet is provided to you solely for your use and is not for distribution. The spreadsheet is provided for informational purposes only, and is not intended to provide advice, nor should it be construed as an offer to sell, a solicitation of an offer to buy or a recommendation for any security or digital asset by Fidelity or any third party. Data and information shown is based on information known to Fidelity as of the date it was exported and is subject to change. It should not be used in place of your account statements or trade confirmations and is not intended for tax reporting purposes. For more information on the data included in this spreadsheet, including any limitations thereof, go to Fidelity.com."\r\n\r\n"Neither Fidelity Brokerage Services LLC nor National Financial Services LLC offer crypto as a direct investment nor provide trading or custody services for such assets."\r\n\r\n"Fidelity Crypto® accounts and custody and trading of crypto in such accounts are provided by Fidelity Digital Asset Services, LLC, a limited liability trust company chartered by the New York Department of Financial Services (NMLS ID 1773897)."':(t='"The data and information in this spreadsheet is provided to you solely for your use and is not for distribution. The spreadsheet is provided for informational purposes only, and is not intended to provide advice, nor should it be construed as an offer to sell, a solicitation of an offer to buy or a recommendation for any security or digital asset by Fidelity or any third party. Data and information shown is based on information known to Fidelity as of the date it was exported and is subject to change. It should not be used in place of your account statements or trade confirmations and is not intended for tax reporting purposes. For more information on the data included in this spreadsheet, including any limitations thereof, go to Fidelity.com."\r\n\r\n"Brokerage services are provided by Fidelity Brokerage Services LLC (FBS), 900 Salem Street, Smithfield, RI 02917. Custody and other services provided by National Financial Services LLC (NFS). Both are Fidelity Investment companies and members SIPC, NYSE. Neither FBS nor NFS offer crypto as a direct investment nor provide trading or custody services for such assets."\r\n\r\n',i&&(t+=a+b+b),t+='"Fidelity Crypto® accounts and custody and trading of crypto in such accounts are provided by Fidelity Digital Asset Services, LLC, a limited liability trust company chartered by the New York Department of Financial Services (NMLS ID 1773897)."'),t}getLotsDetail(e){return o.__awaiter(this,void 0,void 0,function*(){return this._poswebGridService=new l.PoswebGridService,this._amc=this._amc||new a.AccountMiniContext,new Promise((t,s)=>{e&&"POSITION"===e.rowType&&e.actNum?this._amc.retrieveAccountInfo(r.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW).then(o=>{var i;const a=n.PoswebGridClosedPositions.formatClosedPositionsRequestDate(null===(i=c.PoswebUtils.getHtmlElement("posweb-grid_top-year-dropdown"))||void 0===i?void 0:i.getAttribute("pvd-selected-value"),!0),r=Object.assign(Object.assign({acctNum:e.actNum,cusip:e.sym.cusip||"",pageNum:1},a),{amc:o.amc,isUnadjusted:u.WindowService.getPositionSettings().isUnadjusted||!1,isDownLoad:!0});this._poswebGridService.retrieveClosedLotsData(r).subscribe({next:e=>{let s="";e&&e.forEach(e=>{s+=y.processLotsData(e)}),t(s)},error:t=>{console.error("Error occurred retrieving closed lots detail, and error is"+t),s(e)}})}):t("")})})}static exportClosedLots(e,t){const s=t.length,o=Array(s).fill("");let i="";i+=e;let a=!1,r=0,n=0;const l=c.PoswebUtils.htmlQuerySelector(".total-closed-lots"),d=c.PoswebUtils.htmlQuerySelector(".lots-complete");return l&&d&&(c.PoswebUtils.updateElementStyle("posweb-lwc-error-banner","block"),c.PoswebUtils.updateElementStyle("posweb-closed-lots-download-progress-banner","block"),c.PoswebUtils.updateElementStyle("posweb-closed-lots-download-warning-banner","none"),l.innerHTML=String(s-2)),new Promise(e=>{t.forEach((t,l)=>{t.then(e=>{n+=1,o[l]=e,d&&(d.innerHTML=Math.min(r,s-2)+"")}).catch(e=>{(null==e?void 0:e.sym)&&(o[l]=`${e.sym.cusip},${e.sym.desc},Sorry we are unable to provide gain/loss information for this position. Please try again later.\r\n`),a=!0}).finally(()=>{r+=1,r===s&&(c.PoswebUtils.updateElementStyle("posweb-lwc-error-banner","none"),c.PoswebUtils.updateElementStyle("posweb-closed-lots-download-progress-banner","none"),a&&(c.PoswebUtils.updateElementStyle("posweb-lwc-error-banner","block"),c.PoswebUtils.updateElementStyle("posweb-closed-lots-download-warning-banner","block")),i+=o.join(""),c.PoswebUtils.exportToCSV(i,`Portfolio_Closed_Lots_${c.PoswebUtils.getEasternDateFromLocal()}.csv`),e())})})})}static processLotsData(e){let t="";for(const s of _)t+=c.PoswebUtils.stringifyCSVTextCol(e[s]);return t+b}processRowData(e,t,s,o,i){var a,n;if(e&&["POSITION","POSITION_CORE","PENDING"].indexOf(e.rowType)>-1&&e.actNum){const l=c.PoswebUtils.stringifyCSVColKey(e.meta,"holdingType"),d=(null===(a=e.meta)||void 0===a?void 0:a.currencyCode)?" ("+e.meta.currencyCode+")":"",p=(null===(n=e.sym)||void 0===n?void 0:n.name)||"",u=c.PoswebUtils.stringifyCSVTextCol(e.actNum)+c.PoswebUtils.stringifyCSVTextCol(e.actNam)+t+s+o+c.PoswebUtils.stringifyCSVTextCol(p+d)+c.PoswebUtils.stringifyCSVColKey(e.sym,"desc")+this.getCSVColDispForView(e,i);return i===r.POSWEB_PRESET_VIEW.MY_VIEW?u+b:u+l.substring(0,l.length-1)+b}return""}getCSVColDispForView(e,t){let s,o="";const i=this.filterSelCols().replace("distYld","distYld,distYldDate").replace("secYld","secYld,secYldDate").replace("news","headlineTime").replace("mngStr","mstar").split(",");switch(i.shift(),t){case r.POSWEB_PRESET_VIEW.MY_VIEW:s=i;break;case r.POSWEB_PRESET_VIEW.DIVIDEND_VIEW:s=v;break;case r.POSWEB_PRESET_VIEW.STACK_OVERVIEW:s=h;break;case r.POSWEB_PRESET_VIEW.FUND_PERF_VIEW:s=m;break;case r.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW:s=g;break;case r.POSWEB_PRESET_VIEW.OVERVIEW:default:s=w}for(const t of s)o+="mngCtg"===t?c.PoswebUtils.stringifyCSVColKey(e[t],"disp"):"acctType"===t?c.PoswebUtils.stringifyCSVColKey(e.meta,"holdingType"):"securityType"===t?c.PoswebUtils.stringifyCSVColKey(e.meta,t):"securitysubtype"===t?c.PoswebUtils.stringifyCSVColKey(e.meta,"securitySubType"):"cusip"===t?c.PoswebUtils.stringifyCSVColKey(e.sym,"cusip"):"equitySummaryRating"===t?this.getEquitySummaryRatingCol(e):c.PoswebUtils.stringifyCSVColDisp(e[t]);return o}getSleeveNameForRow(e,t){let s="";if("SLV"===(null==e?void 0:e.rowSubType)){s=t[e.slv.val.slice(-3)].name}return s+","}getEquitySummaryRatingCol(e){var t,s;const o=null===(t=null==e?void 0:e.equitySummaryScore)||void 0===t?void 0:t.disp,i=null===(s=null==e?void 0:e.equitySummaryRating)||void 0===s?void 0:s.disp;if("string"==typeof i&&"--"!==i&&"string"==typeof o&&"--"!==o){const t=Object.assign({},e.equitySummaryRating);return t.disp=`${i} - ${o}`,c.PoswebUtils.stringifyCSVColDisp(t)}return c.PoswebUtils.stringifyCSVColDisp({disp:"--",val:"--"})}getBasketNameForRow(e,t){var s;let o="";return(null===(s=null==e?void 0:e.basket)||void 0===s?void 0:s.basketId)&&t[e.basket.basketId]&&(o=t[e.basket.basketId].sym.name),o+","}getGbsNameForRow(e,t){var s,o;const i=null===(s=null==e?void 0:e.groupBySecurity)||void 0===s?void 0:s.id;return i&&(null===(o=t[i])||void 0===o?void 0:o.actNam)?t[i].actNam+",":","}filterSelCols(){var e;return(null===(e=u.WindowService.getPositionSettings().myViewSelCols)||void 0===e?void 0:e.replace(",contractRangeVisual","").replace(",dayRange","").replace(",fifTwo","").replace(",splitFactor","").replace(",underlying_change","").replace(",underlying_last",""))||""}}t.PoswebExport=y},79383:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteCardComponent=void 0;const o=s(60942),i=s(93535),a=s(42095);class r extends a.ResearchCardComponent{constructor(e,t,s){super(),this._rowId=e,this._gridRowData=t,this._posweb=i.PoswebMetadata.getInstance(),this._tabPanel=s}static retrieveQuotes(e,t,s,i,a){const n=t.querySelector(`#posweb-research-card-content-quote-${e}`);return n.innerHTML=r.provideSpinner("quote data"),(new o.PoswebGridService).retrieveQuoteCardData({symbol:s,securityType:i,rowId:e,isStableCoinInd:a}).subscribe({next:t=>{n.innerHTML=t||this.getMessageSnippet(this.QUOTE_UNAVAILABLE_MSG,e,s,i)},error:t=>{n.innerHTML=this.getMessageSnippet(this.QUOTE_UNAVAILABLE_MSG,e,s,i),console.error("Error occurred retrieving quotes data, and error is %o",t)}})}static getMessageSnippet(e,t,s,o){return`<div class="posweb-quote-container">\n                    <div class="posweb-research-card-header">\n                        <div role="heading" aria-level="6" class="posweb-quote-header-label">Quote</div>\n                        <div class="posweb-quote-header-timestamp_refresh">\n                            <button class="posweb-refresh-button pvd-btn btn-anchor" type="button" aria-label="Refresh Research data" onclick="poswebex.poswebGrid.refreshQuotes('${s}','${o}','${t}')">\n                            <pvd3pwe-icon pvd-name="action__refresh" aria-hidden="true" pvd-size="small"></pvd3pwe-icon>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div class="posweb-research-message">\n                    <div class="posweb-research-message-icon"><pvd3pwe-icon pvd-name="alert__critical--outline" pvd-size="large" class="color-black"></pvd3pwe-icon></div>\n                    <div class="posweb-research-message-text">${e}</div>\n                </div>`}retrieveCardData(){this.$quoteSubscription&&this.$quoteSubscription.unsubscribe();let e=this._gridRowData.data.sym.name.replace("***","").replace("**","");const{securityType:t}=this._gridRowData.data.meta;if("Option"===t){const t=this._gridRowData.data.sym.usn;t&&(e+=","+t)}this.$quoteSubscription=r.retrieveQuotes(this._rowId,this._tabPanel,e,t,this._gridRowData.data.meta.isStableCoinInd||!1)}getInitSnippet(){return`<div id="posweb-research-card-quote-${this._rowId}" class="posweb-research-card posweb-research-card-quote">\n                     <div id="posweb-research-card-content-quote-${this._rowId}" class="posweb-research-card-content">`+r.provideSpinner("quote data")+"</div>\n                 </div>"}}t.QuoteCardComponent=r,r.QUOTE_UNAVAILABLE_MSG="Sorry, quote information for this security is currently unavailable. Please try again later."},79859:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebBaseCellRenderer=void 0;t.PoswebBaseCellRenderer=class{getGui(){return this._eGui}refresh(e){return!1}static getPoswebPrintGridCell(e,t,s=void 0){return"<td></td>"}loopAndAddActionableEls(e){const t=["BUTTON","A"],s=["PWE-POPOVER"];for(let o=0;o<e.length;o++){const i=e[o];i.offsetHeight>0&&(t.indexOf(i.tagName)>-1?this._actionableEls.push(i):s.indexOf(i.tagName)<0&&i.childElementCount>0&&this.loopAndAddActionableEls(i.children))}}createActionableEls(){const e=this.getGui();this._actionableEls=[],e&&e.childElementCount>0&&this.loopAndAddActionableEls(e.children)}focusActionableItems(e){this._params&&(this.createActionableEls(),this._actionableEls.length>0&&setTimeout(()=>{this.focusActionableItem(e)}),this._actionableEls.length>1&&(this._keyDownActionableItemsBind||(this._keyDownActionableItemsBind=this.keyDownActionableItems.bind(this)),this._eGui.addEventListener("keydown",this._keyDownActionableItemsBind)))}keyDownActionableItems(e){if("Tab"===e.code&&(e.shiftKey&&document.activeElement!==this._actionableEls[0]||!e.shiftKey&&document.activeElement!==this._actionableEls[this._actionableEls.length-1])){e.preventDefault(),e.stopPropagation();let t=0;for(;document.activeElement!==this._actionableEls[t]&&t<this._actionableEls.length;)t++;e.shiftKey?t--:t++,this._actionableEls[t].focus()}}focusActionableItem(e){e?this._actionableEls.slice(-1)[0].focus():this._actionableEls[0].focus()}}},80409:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FilterPopoverComponent=void 0;const o=s(75228),i=s(89065),a=s(17597),r=s(17190),n=s(72317),l=s(60942),d=s(60488),c=s(70207),p=s(71706),u=s(82402);class b{static initializeFilterPopover(e){b._poswebPresetView=e,this.filterComponent=p.PoswebSettingsFilterFactory.getFilterComponentInstance(),this.prepareMobileFilterDialog(),this.prepareFilterPopoverBody(),this.updatePopoverButton(!1),this.updatePopoverButton(!0),this.updatePopoverTrigger(),this.poswebGridService=new l.PoswebGridService}static prepareFilterPopoverBody(){const e=u.PoswebUtils.htmlQuerySelector(".posweb-grid_top-filter_popover_content"),t=u.PoswebUtils.htmlQuerySelector(".posweb-filter-popover-button-group");if(e&&t){if(c.PoswebSettingsFilterBaseComponent.shouldDisableFilters())e.innerHTML=this.filterComponent.prepareFilterMsgSnippet("Filtering by investment type is available on the Overview, Dividend View and Closed Positions."),t.style.display="none";else{const s=this.filterComponent.prepareFilterBody();s?(e.innerHTML=s,t.style.display="flex"):(e.innerHTML=this.filterComponent.prepareFilterMsgSnippet("There are currently no positions available to filter."),t.style.display="none")}e.innerHTML+=t.outerHTML,this.filterComponent.onLoad()}}static checkDialogClosed(e,t){e.forEach(e=>{if("attributes"===e.type&&"pvd-open"===e.attributeName&&"false"===e.target.getAttribute("pvd-open")){const e=u.PoswebUtils.htmlQuerySelector(".posweb-grid_top-filter_popover_content");u.PoswebUtils.htmlQuerySelector(".posweb-grid_top-filter_popover").prepend(e),b.filterMobileDialog=void 0,b.observer.disconnect()}})}static handleFilterContent(){const e=u.PoswebUtils.htmlQuerySelector(".posweb-grid_top-filter_popover_content");b.filterMobileDialog=o.CommonModal.getInstance(),b.observer||(b.observer=new MutationObserver(b.checkDialogClosed)),b.observer.observe(b.filterMobileDialog._modalElement,{attributes:!0}),b.filterMobileDialog.constructAndShowModal("","","<br>",i.POSWEB_MODAL_SIZE.SMALL),b.filterMobileDialog._bodyElement.prepend(e)}static prepareMobileFilterDialog(){const e=u.PoswebUtils.htmlQuerySelector(".posweb-grid_top-filter-button.mobile");null==e||e.addEventListener("click",b.handleFilterContent)}static updatePopoverButton(e){const t=u.PoswebUtils.htmlQuerySelector(".posweb-filter-popover-"+(e?"reset":"apply")),s=u.PoswebUtils.htmlQuerySelector(".posweb-grid_top-filter-button");this.toggleFilterClass(".desktop"),this.toggleFilterClass(".mobile"),t&&!t.onclick&&(t.onclick=()=>{e&&c.PoswebSettingsFilterBaseComponent.uncheckAll(),this.filterMobileDialog?this.filterMobileDialog.closeModal():null==s||s.click(),this.runFilterActions()})}static updatePopoverTrigger(){const e=u.PoswebUtils.htmlQuerySelector(".posweb-grid_top-filter-button");e&&!e.onclick&&(e.onclick=()=>{c.PoswebSettingsFilterBaseComponent.focusFirstCheckbox()})}static toggleFilterClass(e){var t,s,o;const i=u.PoswebUtils.htmlQuerySelector(e+" .posweb-grid_top-filter--active");if(!i)return;(b._poswebPresetView===a.POSWEB_PRESET_VIEW.CLOSED_POSITIONS_VIEW?null===(t=window[r.PoswebConstants.SETTINGS_PROPERTY_NAME])||void 0===t?void 0:t.filterClosed:(null===(s=window[r.PoswebConstants.SETTINGS_PROPERTY_NAME])||void 0===s?void 0:s.filter)||(null===(o=window[r.PoswebConstants.SETTINGS_PROPERTY_NAME])||void 0===o?void 0:o.additionalFilter))?i.removeAttribute("hidden"):i.setAttribute("hidden","true")}static runFilterActions(){const e=b.filterComponent.onApplyButton(),t=d.PoswebGridUtils.getCurrentSelectedPresetView();e&&this.poswebGridService.saveSessionStateData({entry:e}).subscribe({next:e=>{e||console.warn("No response from State API during saving view in session state")},error:e=>{console.error("Error occurred saving view in session state, and error is %o",e)}}),n.PoswebGrid.getInstance().getDataForGridRendering(!1,!1,t),b.toggleFilterClass(".desktop"),b.toggleFilterClass(".mobile")}}t.FilterPopoverComponent=b},82402:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebUtils=void 0;const o=s(54951),i=s(75228),a=s(29565),r=s(36956),n=s(53059),l=s(16186),d=s(73889),c=s(89065),p=s(36764),u=s(93535);class b{static getEasternDateFromLocal(){return(new Date).toLocaleString("en-US",{timeZone:"America/New_York",month:"short",day:"2-digit",year:"numeric"}).replace(", ","-").replace(" ","-")}static getAccountNumber(e=""){var t;return(null===(t=u.PoswebMetadata.getInstance())||void 0===t?void 0:t.isMaskAcctNum)&&e?"****"+e.slice(-4):e}static formatDate(e){if(!e)return"--";const t=["M/dd/yyyy","MM/dd/yyyy","yyyy-MM-dd","LLL-dd-yyyy","MM-dd-yyyy"].map(t=>a.DateTime.fromFormat(e,t)).find(e=>e.isValid);return t?t.toFormat("LLL-dd-yyyy"):"--"}static calculateDaysBetween(e,t){const s="LLL-dd-yyyy";if(!e||!t)return null;const o=a.DateTime.fromFormat(e.trim(),s),i=a.DateTime.fromFormat(t.trim(),s);return o.isValid&&i.isValid?i.diff(o,"days").days:null}static getHtmlElement(e){return e=e||"x_pwe_no_selector",document.getElementById(e)||document.querySelector("."+e)}static htmlQuerySelector(e){return document.querySelector(e)}static htmlQuerySelectorAll(e){return document.querySelectorAll(e)}static isNumber(e){return!(""===e||isNaN(Number(String(e))))}static updateElementStyle(e,t){const s=b.getHtmlElement(e);s&&(t=t||"none",s.style.display=t)}static updateInputElementDisabledStatus(e,t){const s=b.getHtmlElement(e);s&&(s.disabled=t,s.setAttribute("ariaDisabled",t.toString()))}static selectbyCheckboxButtonStatus(e){const t=b.htmlQuerySelectorAll(e);t.forEach(e=>{e.addEventListener("click",s=>{e.checked&&t.forEach(t=>{t!==e&&(t.checked=!1)})})})}static updateTextContentOfParagraphElement(e,t){const s=b.getHtmlElement(e);s&&"P"===s.tagName&&(s.textContent=t)}static updateInnerHtml(e,t){const s=b.getHtmlElement(e);s&&(s.innerHTML=t)}static getScrollbarWidth(){return window.innerWidth-document.documentElement.clientWidth}static getPopupPosition(e,t){return`left=${(window.screen.width-e)/2},top=${(window.screen.height-t)/2},width=${e},height=${t}`}static exportToCSV(e,t,s){const o=new Blob([new Uint8Array([239,187,191]),e],{type:"text/csv;encoding=utf-8;charset=utf-8;"});if("msSaveBlob"in navigator)navigator.msSaveBlob(o,t);else{const i=document.createElement("a");s=s||location,URL&&"download"in i?(i.setAttribute("href",URL.createObjectURL(o)),i.setAttribute("download",t),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)):s.href="data:application/octet-stream,"+encodeURIComponent(e)}}static getString(e){return(e||"").trim()}static stringifyCSVTextCol(e){return((e=0===(e=b.getString(e)).indexOf("-")?" "+e:e).indexOf(",")>-1?'"'+e+'"':e)+","}static stringifyCSVFigureCol(e,t){return e&&e[t]?e[t].replaceAll(",","")+",":","}static stringifyCSVColKey(e,t){return e&&e[t]?b.stringifyCSVTextCol(e[t]):","}static stringifyCSVColDisp(e){var t;let s;return s=e&&e.top&&e.bottom?b.stringifyCSVStackColDisp(e):e&&e.rate&&"--"!==e.rate&&(null===(t=e.cnt)||void 0===t?void 0:t.disp)&&"--"!==e.cnt.disp?`"${e.rate} (${b.getString(e.cnt.disp)} Rated)",`:b.stringifyCSVFigureCol(e,"disp"),s}static stringifyCSVStackColDisp(e){return e&&e.top&&e.bottom?`${b.stringifyCSVFigureCol(e.top,"disp")}${b.stringifyCSVFigureCol(e.bottom,"disp")}`.replace("(","").replace(")","").replace(" / Share",""):",,"}static isEdge(){return navigator.userAgent.toLowerCase().indexOf("edge")>-1}static isIE11(){return navigator.userAgent.toLowerCase().indexOf("trident")>-1&&navigator.userAgent.toLowerCase().indexOf("rv")>-1}static isIE(){return navigator.userAgent.toLowerCase().indexOf("compatible")>-1&&navigator.userAgent.toLowerCase().indexOf("msie")>-1||this.isIE11()}static addToHeaders(e){const t=new r.Headers;if(e&&e.length>0)for(const s of e)t.append(s.key,s.value);return t}static ignoreLogging(e,t){return(null==t?void 0:t.type)!==p.PoswebActionKeys.GRID_ROW_DATA}static pickFirst(e,t){return e&&e.length>0&&e[0]?e[0]:t}static validateColumns(e,t){if(!e||!t||e.length!==t.length)return t;const s=e.split(",").sort(),o=t.split(",").sort();for(let e=0;e<s.length;e++)if(s[e]!==o[e])return t;return e}static matchSort(e,t){return!(!e||!t)&&!!e.match(new RegExp("^("+t.replace(/,/g,"|")+"):"))}static updatePopoverStyles(e,t){b.htmlQuerySelectorAll(e).forEach(e=>{const{shadowRoot:s}=e,o=null==s?void 0:s.querySelector("style");(null==o?void 0:o.textContent)&&(o.textContent+=t),null==s||s.appendChild(o)})}static getYearFromEpoch(e){const t=a.DateTime.fromSeconds(e,{zone:"America/New_York"}).toFormat("yyyy");return parseInt(t)}static getContentWidth(e){const{clientWidth:t}=e,s=window.getComputedStyle(e);return t-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)}static genPriceCol(e,t,s,o=!1){const i=this.formatDblDashNA(e),a=o?t?"+0,0.00[00]":"0,0.00[00]":t?"+$0,0.00[00]":"$0,0.00[00]";return s?this.formatHundredthPct(i,!0):this.formatVal(i,a)}static formatDblDashNA(e){return"string"==typeof e&&["not applicable","not available"].indexOf(e.toLowerCase())>=0?"--":e||0===e?e:""}static formatHundredthPct(e,t){return this.formatNumericPct(e,t,"0,0.00")}static formatVal(e,t,s){let o=e||"--";return this.isNumber(e)&&(!s||s&&e)&&(o=this.formatValidValue(e,t)),o}static formatNumericPct(e,t,s){return!e&&0!==e||"n/a"===e||"--"===e?String(e||""):this.formatValidValue(e,(t?"+":"")+s)+"%"}static formatValidValue(e,t){const s=0===Number(e);return(e=o(e).format(t)).toString().indexOf("+")>-1&&(e=(s?"":"+")+(e=e.toString().replace("+",""))),e}static getCryptoSymbolPrefix(e){let t="";return t=e.match(/[^/]*/).toString(),t}static isNAorDoubleDash(e){return["n/a","--"].indexOf(e)>-1}static sortMyViewColumns(e,t){const s=new Map;return t.forEach((e,t)=>s.set(e,t)),e.sort((e,t)=>{const o=s.get(e),i=s.get(t);return void 0===o&&void 0===i?0:void 0===o?1:void 0===i?-1:o-i}),e}static renderCCBanner(){b.ccBannerModal=i.CommonModal.getInstance(),b.ccBannerModal.constructAndShowModal('<div class="cc-banner-myview"><h2>Check out our new custom columns in My View</h2><p>You can now customize your positions grid view to show only the stuff you want.</p>',`<div class ="cc-banner-img"><img src="${u.PoswebMetadata.getInstance().assetUrl}assets/${u.PoswebMetadata.getInstance().version}/cc-banner.gif" pvd-intercept-close="true" alt="CC Banner"/></div>`,'<pvd3pwe-button class="cc-banner-modal-save" pvd-size="small" pvd-variant="primary" align="center" id="cc-banner-save">Try it now</pvd3pwe-button></div>',c.POSWEB_MODAL_SIZE.MEDIUM),setTimeout(()=>{const e=b.getHtmlElement("cc-banner-save");e&&e.addEventListener("click",()=>{l.MetricsService.sendMetricsRequest("try now",n.MetricsActionTypes.INTERACTION,"my view intro modal"),b.ccBannerModal.closeModal(),d.MyViewModalComponent.initializeMyViewModal(!1)}),this.ccBannerGifCloseMetrics(),this.ccBannerGifExitIntentMetrics()})}static ccBannerGifCloseMetrics(){const e=b.ccBannerModal._modalElement;e.setAttribute("pvd-intercept-close","true"),e.addEventListener("pvd-modal-close-intercept",e=>{"modalCloseButton"===e.detail.source&&l.MetricsService.sendMetricsRequest("xmark",n.MetricsActionTypes.INTERACTION,"my view intro modal"),b.ccBannerModal.closeModal()})}static ccBannerGifExitIntentMetrics(){const e=b.ccBannerModal._modalElement;e.setAttribute("pvd-intercept-close","true"),e.addEventListener("pvd-modal-close-intercept",e=>{"modalOverlay"===e.detail.source&&l.MetricsService.sendMetricsRequest("exit intent",n.MetricsActionTypes.INTERACTION,"my view intro modal")})}}t.PoswebUtils=b},83254:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebCommon=void 0;const o=s(82402),i=s(3976);t.PoswebCommon=class{constructor(){this._historyData=new Map}static getInstance(){return this._instance||(this._instance=new this)}gridSizeChangedObservable(e){return this._gridSizeChangedObservable=(0,i.fromEvent)(e.api,"gridSizeChanged"),this._gridSizeChangedObservable}gridScrollObservable(e){return this._gridScrollObservable=(0,i.fromEvent)(e.api,"bodyScroll"),this._gridScrollObservable}cellFocusedObservable(e){return this._cellFocusedObservable=(0,i.fromEvent)(e.api,"cellFocused"),this._cellFocusedObservable}matchElementWidthsToGrid(e){var t,s;if(e.length&&e.length>0){this._gridElement||(this._gridElement=o.PoswebUtils.getHtmlElement("posweb-grid"));const i=(null===(t=this._gridElement.querySelector(".ag-pinned-left-cols-container"))||void 0===t?void 0:t.clientWidth)+(null===(s=this._gridElement.querySelector(".ag-center-cols-viewport"))||void 0===s?void 0:s.clientWidth)||this._gridElement.clientWidth;e.forEach(e=>{"string"==typeof e?document.querySelectorAll(e).forEach(e=>{e.style.width=i+"px",e.dispatchEvent(new Event("widthChange"))}):(e.style.width=i+"px",e.dispatchEvent(new Event("widthChange")))})}}get amc(){return this._amc}set amc(e){this._amc=e}set basketData(e){this._basketData=e}get basketData(){return this._basketData||{}}set groupBySecurityData(e){this._groupBySecurityData=e}get groupBySecurityData(){return this._groupBySecurityData||{}}set actGroupData(e){this._actGroupData=e}get actGroupData(){return this._actGroupData||{}}set sleeveData(e){this._sleeveData=e}get sleeveData(){return this._sleeveData||{}}set poswebCurrentView(e){this._poswebCurrentView=e}get poswebCurrentView(){return this._poswebCurrentView}get historyData(){return this._historyData}set historyData(e){this._historyData=e}set isHideFundView(e){this._isHideFundView=e}get isHideFundView(){return this._isHideFundView}myViewColumns(e){const t=["slv","basket","groupBySecurity"];let s="";try{if("string"==typeof e){s=JSON.parse(e).MyView||""}else"object"==typeof e&&null!==e&&(s=e.MyView||"");return s.split(",").filter(e=>!t.includes(e.trim())).join(",")}catch(e){return console.error("error in passing input:",e),""}}}},83577:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebCloPosCostBasisCellRenderer=void 0;const o=s(79859),i=s(17190),a=s(60488);class r extends o.PoswebBaseCellRenderer{static getCostBasisSnippet(e,t){var s;const o=null===(s=window[i.PoswebConstants.SETTINGS_PROPERTY_NAME])||void 0===s?void 0:s.isUnadjusted,r=a.PoswebGridUtils.getWashSalesPopover(o,t);return e?`${r} <span class="posweb-cell-cost_basis_value">${e}</span>`:""}static getPoswebPrintGridCell(e,t){var s;return(null===(s=e.cstBasCloPos)||void 0===s?void 0:s.disp)?`<td${t?` class="${t}"`:""}><div class="posweb-cell-cost_basis_clo_pos_container">`+r.getCostBasisSnippet(e.cstBasCloPos.disp)+"</div></td>":"<td></td>"}init(e){var t,s,o;this._eGui=document.createElement("div"),this._params=e,e&&(this._eGui.classList.add("posweb-cell-cost_basis_clo_pos_container"),this._eGui.innerHTML=r.getCostBasisSnippet(null===(s=null===(t=e.data)||void 0===t?void 0:t.cstBasCloPos)||void 0===s?void 0:s.disp,null===(o=e.node)||void 0===o?void 0:o.rowIndex))}}t.PoswebCloPosCostBasisCellRenderer=r},88554:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebHttpFactoryService=void 0;const o=s(36956),i=s(3976),a=s(18684),r=s(17190),n=s(93535),l=[a.POSWEB_HTTP.GET,a.POSWEB_HTTP.HEAD,a.POSWEB_HTTP.OPTS];t.PoswebHttpFactoryService=class{constructor(){this._posweb=n.PoswebMetadata.getInstance()}get(e,t){return this.handleEverything(a.POSWEB_HTTP.GET,e,t)}head(e,t){return this.handleEverything(a.POSWEB_HTTP.HEAD,e,t)}options(e,t){return this.handleEverything(a.POSWEB_HTTP.OPTS,e,t)}post(e,t,s){return this.handleEverything(a.POSWEB_HTTP.POST,e,s,t)}put(e,t,s){return this.handleEverything(a.POSWEB_HTTP.PUT,e,s,t)}delete(e,t,s){return this.handleEverything(a.POSWEB_HTTP.DEL,e,s,t)}handleEverything(e,t,s,o){return this.prepareConnection(this.prepareRequest(e,t,this.prepareDefaultRequestHeaders(s),o))}prepareConnection(e){return i.Observable.create(t=>{(0,o.fetch)(e).then(s=>{if(e.url.indexOf(r.PoswebConstants.API_POSITIONS)>-1&&(window[r.PoswebConstants.POS_APP_TIME]=s.headers.get(r.PoswebConstants.HDR_APP_TIME)||"0",window[r.PoswebConstants.POS_LWC_TIME]=s.headers.get(r.PoswebConstants.HDR_LWC_TIME)||"0"),s.ok||401===s.status)return s.headers.get("content-type").indexOf("application/json")>-1?s.json():s.text();t.error(s)}).then(e=>{e&&e.Location?window.location.href=e.Location:t.next(e),t.complete()}).catch(s=>{console.error("Error occurred requesting %s on %s and error is %o",e.method,e.url,s),t.error(s)})})}prepareRequest(e,t,s,i){const a=this.prepareDefaultRequestOptions(e,s,i);return l.indexOf(e)>-1&&(a.headers.delete("X-CSRF-TOKEN"),delete a.body),new o.Request(this.prepareFinalUrl(t),a)}prepareFinalUrl(e){var t;const s="AIDE"===(null===(t=window.PortSumContainer)||void 0===t?void 0:t.ShellApp)?r.PoswebConstants.AIDE_API_PATH:r.PoswebConstants.BASE_API_PATH;if(e)return-1!==e.indexOf("%")?encodeURI(s+e):s+e;throw new Error("url is not valid")}prepareDefaultRequestHeaders(e){return(e=e||new o.Headers).append("Content-Type","application/json"),e.append("Accept","application/json"),e.append("Accept","text/html"),e.append("X-CSRF-TOKEN",this._posweb.csrf),this._posweb.virtual&&(e.append("virtualmode","Y"),e.append("virtualpwe",this._posweb.dataset),e.append("virtualpzn",this._posweb.pznset)),e}prepareDefaultRequestOptions(e,t,s){return{mode:"cors",credentials:"include",redirect:"follow",cache:"no-cache",referrer:"no-referrer",body:s?"string"==typeof s?s:JSON.stringify(s):void 0,headers:t,method:e}}}},89065:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.POSWEB_MODAL_SIZE=void 0,function(e){e.SMALL="400",e.MEDIUM="600",e.LARGE="800"}(s||(t.POSWEB_MODAL_SIZE=s={}))},90239:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChartCardComponent=void 0;const o=s(36802),i=s(60942),a=s(60488),r=s(93535),n=s(82402),l=s(42095);class d extends l.ResearchCardComponent{constructor(e,t,s){super(),this._rowId=e,this._gridRowData=t,this._poswebGridService=new i.PoswebGridService,this._posweb=r.PoswebMetadata.getInstance(),this._tabPanel=s,this._isOptionChart=!1}retrieveCardData(){const e=this._tabPanel.querySelector(`#posweb-research-card-content-chart-${this._rowId}`);if(e){let t="";t=this._isOptionChart?this._gridRowData.data.sym.name:this._gridRowData.data.sym.usn||this._gridRowData.data.sym.name,e.innerHTML=this.getChartIQCardData(t,this._gridRowData.data.meta.securityType),this.addOptionsButtonListeners();const s={env:this._posweb.envName&&"prod"!==String(this._posweb.envName).toLowerCase()?"dev":"prod",productid:"positionswebexperience",realtime:!0};this._posweb.chartServerUrl&&(s.endpoints={dev:this._posweb.chartServerUrl,prod:this._posweb.chartServerUrl});const i=e.querySelector(".posweb-chartiq-component"),a={preset:"AP126216_positionwebex",symbol:t,securityType:"",datasource:new o.default.EIMarketDataSource(s),chartAriaLabel:`performance data for ${t}`};this.isMutualFundOrCore()?(a.timeframe={default:"1Y",items:[{label:"5D",value:"5D"},{label:"1M",value:"1M"},{label:"3M",value:"3M"},{label:"1Y",value:"1Y"},{label:"5Y",value:"5Y"}]},a.frequency={name:"Freq",default:"1D",items:[{label:"Daily",value:"1D"},{label:"Weekly",value:"1W"},{label:"Monthly",value:"1M"}]}):["Equity","Others","Exchange Traded","Option"].indexOf(this._gridRowData.data.meta.securityType)>=0?(a.timeframe={default:"TODAY",items:[{label:"1D",value:"TODAY"},{label:"5D",value:"5D"},{label:"1M",value:"1M"},{label:"3M",value:"3M"},{label:"1Y",value:"1Y"}]},a.frequency={name:"Freq",default:"1m",items:[{label:"1 Minute",value:"1m"},{label:"5 Minutes",value:"5m"},{label:"15 Minutes",value:"15m"},{label:"1 Hour",value:"1H"},{label:"Daily",value:"1D"},{label:"Weekly",value:"1W"}]}):"Digital Currency"===this._gridRowData.data.meta.securityType?(a.securityType="Crypto",a.timeframe={default:"1D",items:[{label:"1H",value:"60m"},{label:"1D",value:"1D"},{label:"1W",value:"1W"},{label:"1M",value:"1M"},{label:"1Y",value:"1Y"},{label:"All",value:"MAX"}]},a.frequency={name:"Freq",default:"1m",items:[{label:"1 Minute",value:"1m"},{label:"15 Minutes",value:"15m"},{label:"1 Hour",value:"1H"},{label:"Daily",value:"1D"},{label:"Weekly",value:"1W"},{label:"Monthly",value:"1M"}]}):this.isAnnuity()&&(a.timeframe={default:"1Y",items:[{label:"5D",value:"5D"},{label:"1M",value:"1M"},{label:"3M",value:"3M"},{label:"1Y",value:"1Y"}]},a.frequency={name:"Freq",default:"1D",items:[{label:"Daily",value:"1D"}]}),setTimeout(()=>{this.createPositionChart(i,a)})}}createPositionChart(e,t){new o.default.PositionChart(e,{enableAutoDestroying:!0}).draw(t)}getInitSnippet(){return`<div id="posweb-research-card-chart-${this._rowId}" class="posweb-research-card ${this.isAnnuity()?"posweb-research-card-chart":"posweb-research-card-chartiq"}">\n                    <div id="posweb-research-card-content-chart-${this._rowId}" class="posweb-research-card-content">`+d.provideSpinner("chart data")+"</div></div>"}getChartIQCardData(e,t){const s=`<div id="posweb-option-chart-tabs-${this._rowId}" class="posweb-option-chart-tabs" role="tablist"><button aria-controls="posweb-option-chart-tabpanel-underlying-${this._rowId}" class="posweb-option-chart-tab-button underlying-button ${this._isOptionChart?"":"chart-selected"}"id=posweb-option-chart-underlying-${this._rowId} role = "tab" aria-selected=${!this._isOptionChart}>Underlying</button><button aria-controls="posweb-option-chart-tabpanel-option-${this._rowId}"class="posweb-option-chart-tab-button option-button ${this._isOptionChart?"chart-selected":""}"id = "posweb-option-chart-option-${this._rowId}" role = "tab" aria-selected=${this._isOptionChart}>Option</button></div>`;let o="";return e&&t&&(o+='<div class="posweb-chart-container"><div class="posweb-research-card-header"><div role="heading" aria-level="6" class="posweb-chart-header-label">Chart</div>'+("Digital Currency"===t||this.isAnnuity()||this.isMutualFundOrCore()||this._isOptionChart?"":`${this.getAdvChartLinkHTML(e)}`)+"</div>"+("Option"===t?s:"")+'<div class="posweb-chartiq-component" aria-label="Research Chart Component"></div></div> '),o}getChartImageHTML(e,t,s){var o,i;const a=(null===(o=this._gridRowData.data.lstPrStk)||void 0===o?void 0:o.top.disp)||(null===(i=this._gridRowData.data.lstPrc)||void 0===i?void 0:i.disp);return`<div class="posweb-chart-image">\n                    <img style="max-width:100%; max-height:100%;" id="researchChartImage-${s}"\n                    src="${this.getChartSrcLink(e,t)}" alt="A chart of the investment is displayed with a daily unit value of ${null!=a?a:"--"}. A table equivalent with monthly prices is available using the research link.">\n                </div>`}getChartTimeHTML(e,t,s,o,i,a){return"Mutual Fund"===i&&(s="1dy"),`<a href="javascript:void(0);" id="chartTime-${t}-rowId-${e}"\n                    class="${a}posweb-metrics posweb-chart-time" data-chartTime=${t}\n                    data-chartFreq=${s} data-metrics=${o}\n                    onclick="poswebex.poswebGrid.onChartTimeframeClick('chartTime-${t}-rowId-',${e})">\n                    ${t}</a>`}getChartSrcLink(e,t){let s="";return e&&t&&(["Equity","Others","Exchange Traded","Option"].indexOf(t)>-1?s=this._posweb.realtimeBigChartDomain+e+"&type=256&size=4&style=2320&time=3M&freq=1dy":["Mutual Fund","Annuity","Core"].indexOf(t)>-1&&(s=this._posweb.realtimeBigChartDomain+e+"&type=256&size=1&style=2320&time=3M&freq=1dy")),s}getAdvChartLinkHTML(e){return`<div class="posweb-advanced-chartiq-link">\n                     <a href="${this._posweb.advChartDomain+e}" aria-label="Open Advanced Chart In New Tab" data-metrics="advancedChart" target="_blank">Advanced chart <pvd3pwe-icon pvd-name="action__open-link" pvd-size="extra-small" pvd-a11y-label="Open Advanced Chart In New Tab"></pvd3pwe-icon></a>\n                </div>`}isAnnuity(){var e;return"Annuity"===(null===(e=this._gridRowData.data.meta)||void 0===e?void 0:e.securityType)}isMutualFundOrCore(){return"Mutual Fund"===this._gridRowData.data.meta.securityType||"Core"===this._gridRowData.data.meta.securityType&&this._gridRowData.data.meta.isMoneyMarket}getMessageSnippet(e){return`<div id="posweb-research-card-chart-${this._rowId}" class="posweb-research-card posweb-research-card-chartiq">\n                    <div id="posweb-research-card-content-chart-${this._rowId}" class="posweb-research-card-content"><div class="posweb-chart-container">\n                    <div class="posweb-research-card-header">\n                        <div class="posweb-chart-header-label">Chart</div>\n                    </div>\n                </div>\n                <div class="posweb-research-message">\n                    <div class="posweb-research-message-icon"><pvd3pwe-icon pvd-name="alert__critical--outline" pvd-size="large" class="color-black"></pvd3pwe-icon></div>\n                    <div class="posweb-research-message-text">${e}</div>\n                </div></div></div>`}addOptionsButtonListeners(){a.PoswebGridUtils.attachClickListener(this._tabPanel,"#posweb-option-chart-option-"+this._rowId,()=>{this.onOptionChartTabSelect("option")}),a.PoswebGridUtils.attachClickListener(this._tabPanel,"#posweb-option-chart-underlying-"+this._rowId,()=>{this.onOptionChartTabSelect("underlying")})}onOptionChartTabSelect(e){const t=n.PoswebUtils.htmlQuerySelector("#posweb-option-chart-option-"+this._rowId),s=n.PoswebUtils.htmlQuerySelector("#posweb-option-chart-underlying-"+this._rowId),o="option"===e?t:s,i=this._tabPanel.querySelector(".chart-selected");o&&i&&o!==i&&(this._isOptionChart="option"===e,this.retrieveCardData())}}t.ChartCardComponent=d},93535:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebMetadata=void 0;t.PoswebMetadata=class{constructor(){if(this._totalNoOfAccts=0,this._hasForeignSecurities=!1,this._hasPriorDaySecurities=!1,this._isBasketEnabled=!1,this._isMaskAcctNum=!1,this._posweb=this.retrievePosweb(),!this._posweb.ctoken&&"PAC"!==this._posweb.envName)throw new Error("cannot retrieve positions web experience metadata")}static getInstance(){return this._instance||(this._instance=new this)}reload(){const e=this.retrievePosweb();e.ctoken&&this._posweb.ctoken!==e.ctoken&&(this._posweb=e)}retrievePosweb(){return window&&window.posweb?window.posweb:{}}set totalNoOfAccts(e){this._totalNoOfAccts=e}get totalNoOfAccts(){return this._totalNoOfAccts}set isBasketEnabled(e){this._isBasketEnabled=e}get isBasketEnabled(){return this._isBasketEnabled}set hasPriorDaySecurities(e){this._hasPriorDaySecurities=e}get hasPriorDaySecurities(){return this._hasPriorDaySecurities}set hasForeignSecurities(e){this._hasForeignSecurities=e}get hasForeignSecurities(){return this._hasForeignSecurities}set acctfndPerfCd(e){this._acctfndPerfCd=e}get acctfndPerfCd(){return this._acctfndPerfCd}set allSymTotInfos(e){this._allSymTotInfos=e}get allSymTotInfos(){return this._allSymTotInfos}set isMaskAcctNum(e){this._isMaskAcctNum=e}get isMaskAcctNum(){return this._isMaskAcctNum}get accountMaintDomain(){return this.domains.accountMaintDomain}get assetUrl(){return this._posweb.assetUrl}get config(){return this._posweb.config?JSON.parse(this._posweb.config):{}}get csrf(){return this._posweb.ctoken}get domains(){return JSON.parse(this._posweb.domains)}get dataset(){return this._posweb.virtualpwe}get fidelityDomain(){return this.domains.fidelityDomain}get fundResearchDomain(){return this.domains.fundResearchDomain}get fixedIncomeResearchDomain(){return this.domains.fixedIncomeResearchDomain}get optionResearchDomain(){return this.domains.optionResearchDomain}get digitalDomain(){return this.domains.digitalDomain}get fixedIncomeDigitalDomain(){return this.domains.fixedIncomeDigitalDomain}get fiResourcePath(){return this._posweb.fiResourcePath}get inGridThresholdIEEdge(){return this.config.inGridThresholdIEEdge?Number(this.config.inGridThresholdIEEdge):999999999}get inGridThreshold(){return this.config.inGridThreshold?Number(this.config.inGridThreshold):999999999}get qsiId(){return this._posweb.qsiId}get fundPerfViewToggle(){return!0===this.config.fundPerfView}get realtimeBigChartDomain(){return this.domains.realtimeBigChartDomain}get advChartDomain(){return this.domains.advChartDomain}get nreDomain(){return this.domains.nreDomain}get netBenefitsDomain(){return this.domains.netBenefitsDomain}get spsToggle(){return!0===this.config.spsSupport}get spsRsaRsuToggle(){return!0===this.config.spsEnableRsaRsu}get stateApiTimeout(){return this.config.stateApiCallTimeout?Number(this.config.stateApiCallTimeout):0}get pznApiTimeout(){return this.config.pznApiCallTimeout?Number(this.config.pznApiCallTimeout):0}get virtual(){return"Y"===this._posweb.virtualmode}get pznset(){return this._posweb.virtualpzn}get isStatsReported(){return!0===this.config.isStatsReported}get isSnippet(){return Boolean(this._posweb.isSnippet)}get version(){return this._posweb.version}get envName(){return this._posweb.envName}get chartServerUrl(){return this.domains.chartServerUrl}get pznFPLReviewLinkUrl(){return this.domains.pznFPLReviewLinkUrl}get fixedIncomeLandingPageUrl(){return this.domains.fixedIncomeLandingPageUrl}get fixedIncomeAlertsUrl(){return this.domains.fixedIncomeAlertsUrl}}},94561:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.POSWEB_PRESET_VIEW_VALUES=void 0,function(e){e.OVERVIEW="Overview",e.STACK_OVERVIEW="StackOver View",e.DIVIDEND_VIEW="Dividend view",e.FUND_PERF_VIEW="Fund performance",e.CLOSED_POSITIONS_VIEW="Closed positions",e.MY_VIEW="My View",e.EDIT_MY_VIEW="Edit My View"}(s||(t.POSWEB_PRESET_VIEW_VALUES=s={}))},94625:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StickyHeaderBehavior=void 0;const o=s(82402);class i{static initialize(e){if(i.dispose(),e&&(i._grid=o.PoswebUtils.getHtmlElement("posweb-grid"),i._header=o.PoswebUtils.htmlQuerySelector(".ag-header"),i._grid&&i._header)){i.adjustHeaderWidth(),i.adjustHeaderPosition(),window["ap126216-pwe-sticky-scroll"]=i.adjustHeaderPosition,window["ap126216-pwe-sticky-resize"]=i.adjustHeaderWidth,window["ap126216-pwe-sticky-unload"]=i.dispose,window.addEventListener("resize",window["ap126216-pwe-sticky-resize"]),window.addEventListener("scroll",window["ap126216-pwe-sticky-scroll"]);const e=o.PoswebUtils.htmlQuerySelector(".port-content.account-content"),t={subtree:!0,childList:!1,attributes:!0,attributeOldValue:!1,attributeFilter:["style"]};e&&(i._sideMenuObserver=new MutationObserver(i.adjustHeaderWidth),i._sideMenuObserver.observe(e,t),window["ap126216-pwe-sticky-observer"]=i._sideMenuObserver),window.addEventListener("unload",window["ap126216-pwe-sticky-unload"])}}static dispose(){i._sideMenuObserver&&i._sideMenuObserver.disconnect(),i._sideMenuObserver=void 0,window["ap126216-pwe-sticky-observer"]&&window["ap126216-pwe-sticky-observer"].disconnect(),window.removeEventListener("resize",window["ap126216-pwe-sticky-resize"]),window.removeEventListener("scroll",window["ap126216-pwe-sticky-scroll"]),window.removeEventListener("unload",window["ap126216-pwe-sticky-unload"])}static adjustHeaderPosition(){const e=i.getUrlPathName();i._grid.getBoundingClientRect().top<=0&&i._grid.getBoundingClientRect().bottom>=0?(i._grid.style.paddingTop=i._header.offsetHeight+"px",i._header.style.position=e,i._header.style.zIndex="999"):(i._header.style.position="static",i._grid.style.paddingTop=null,i._header.style.zIndex="2")}static adjustHeaderWidth(){i._header.style.width=i._grid.clientWidth-2+"px"}static getUrlPathName(){return window.location.pathname.includes("/itgw/")?"static":"fixed"}}t.StickyHeaderBehavior=i},95906:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AccountSelector=void 0;const o=s(18533);class i{static updateAccountTotals(e,t){var s,o;if(e&&e.length>0&&(null===(o=null===(s=window.PortSumContainer)||void 0===s?void 0:s.PicoService)||void 0===o?void 0:o.updateAccountsBalance)){const s=i.mapAccountsBalance(e,t);window.PortSumContainer.PicoService.updateAccountsBalance(s)}}static mapAccountsBalance(e,t){const s=e.map(i.mapBalanceDetail);let a=t;a||1!==s.length||(a=new o.GrandTotBalance,a.todaysGainLoss=s[0].gainLossBalanceDetail.todaysGainLoss,a.todaysGainLossPct=s[0].gainLossBalanceDetail.todaysGainLossPct,a.hasIntradayPricing=s[0].gainLossBalanceDetail.hasIntradayPricing);const r=a?Object.assign({},a):{};return r.acctsList=s,r}static mapBalanceDetail(e){return{acctNum:e.acctNum,gainLossBalanceDetail:{totalMarketVal:e.currentVal,todaysGainLoss:e.todayChange,todaysGainLossPct:e.todayChangePct,hasIntradayPricing:e.isAccountPriced}}}}t.AccountSelector=i},96097:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebGridAfterLoadEvents=void 0;const o=s(83254),i=s(72317),a=s(60942),r=s(60488),n=s(49386),l=s(82402),d=s(31424),c=s(34140);t.PoswebGridAfterLoadEvents=class{constructor(){this._poswebStore=n.PoswebStore.getInstance(),this._poswebGridService=new a.PoswebGridService}static getInstance(){return this._instance||(this._instance=new this)}invoke(){const e=this.extractRowIdentifier();if(e&&e.rowIdentifierOpenOrder&&e.rowIdentifierEarnings&&-1===[e.rowIdentifierEarnings.length,e.rowIdentifierEarnings.length,e.rowIdentifierDistributions].indexOf(0)){const t={rowIdentifier:e.rowIdentifierOpenOrder,acctNums:this._accts},s={rowIdentifier:e.rowIdentifierEarnings},o=e.rowIdentifierDistributions;return Promise.all([this.getOrdersData(t),this.getEarningsData(s)]).then(e=>{const t=e[0]&&e[0]instanceof Array,s=e[1]&&e[1]instanceof Array;t&&s?(0===e[0].length&&(r.PoswebGridUtils.updateLegendElement(!1,"posweb-legend-openOrder"),r.PoswebGridUtils.updateLegendElement(!1,"posweb-legend-openOrder-crypto")),0===e[1].length&&r.PoswebGridUtils.updateLegendElement(!1,"posweb-legend-earnings"),0===o.length&&r.PoswebGridUtils.updateLegendElement(!1,"posweb-legend-distribution")):(t||("Too Many Accounts"===e[0]?l.PoswebUtils.updateElementStyle("posweb-open-order-individual-account-warning-banner","block"):l.PoswebUtils.updateElementStyle("posweb-open-order-warning-banner","block")),s||l.PoswebUtils.updateElementStyle("posweb-earnings-warning-banner","block"),l.PoswebUtils.updateElementStyle("posweb-lwc-error-banner","block")),this.renderEvents(this.getFormattedEventsDataForRendering(t?e[0]:[],s?e[1]:[],o)),this.expandCollapseForAllGroups()}).catch(()=>{this.renderEvents(this.getFormattedEventsDataForRendering([],[],o)),l.PoswebUtils.updateElementStyle("posweb-open-order-warning-banner","block"),l.PoswebUtils.updateElementStyle("posweb-earnings-warning-banner","block"),l.PoswebUtils.updateElementStyle("posweb-lwc-error-banner","block")})}return r.PoswebGridUtils.updateLegendElement(!1,"posweb-legend-openOrder"),r.PoswebGridUtils.updateLegendElement(!1,"posweb-legend-openOrder-crypto"),r.PoswebGridUtils.updateLegendElement(!1,"posweb-legend-earnings"),r.PoswebGridUtils.updateLegendElement(!1,"posweb-legend-distribution"),this.expandCollapseForAllGroups(),Promise.resolve()}extractRowIdentifier(){const e=this._poswebStore.store.getState(),t=[],s=[],o=[];if(this._accts=[],e&&e.rowData&&e.rowData instanceof Array&&0<e.rowData.length){const i=[];e.rowData.filter(e=>{if("POSITION"===e.rowType&&e&&e.meta&&e.meta.rowId&&["External","Annuity"].indexOf(e.meta.acctType)<0){const a="Option"===e.meta.securityType&&0===e.sym.name.indexOf("-")?e.sym.name.substring(1):e.sym.name,r="Option"===e.meta.securityType?e.sym.usn:e.sym.name;e.actNum&&a&&!e.meta.isMngAcct&&["Crypto","WPS"].indexOf(e.meta.acctType)<0&&(i.push(e.actNum),t.push(e.actNum+"_"+a+"_"+e.meta.rowId)),r&&s.push(r+"_"+e.meta.rowId),e.meta.distributionEvents&&o.push({rowId:e.meta.rowId.toString(),distributionEvents:e.meta.distributionEvents})}}),this._accts=i.filter((e,t,s)=>s.indexOf(e)===t)}return{rowIdentifierOpenOrder:t,rowIdentifierEarnings:s,rowIdentifierDistributions:o}}renderEvents(e){var t,s,a;const r=i.PoswebGrid.getInstance(),n=o.PoswebCommon.getInstance();for(const o in e)if(o&&e[o]instanceof d.RowEventsInfo&&r&&r.getPoswebGridApi){const i=r.getPoswebGridApi.getRowNode(e[o].rowId);if(i&&i.data&&i.data.meta&&i.setDataValue){i.data.meta.events=e[o].events,i.setDataValue("sym",i.data.meta.events);const l=null===(t=i.data.groupBySecurity)||void 0===t?void 0:t.id;if(l&&"POSITION"===i.data.rowType&&n.groupBySecurityData[l]&&i.parent){const{hasEarnings:t}=e[o].events,{hasDistributions:n}=e[o].events;(s=i.parent).hasEarnings||(s.hasEarnings=t),(a=i.parent).hasDistributions||(a.hasDistributions=n),(n||t)&&r.getPoswebGridApi.refreshCells({rowNodes:[i.parent],force:!0,columns:["sym"]})}}}}getOrdersData(e){return new Promise(t=>{var s;(null==e?void 0:e.acctNums)&&e.acctNums.length>200?t("Too Many Accounts"):!(null===(s=window.toggleMap)||void 0===s?void 0:s.ap126216_Open_Orders_Enabled)||(null==e?void 0:e.acctNums)&&0===e.acctNums.length?t([]):(this.$openOrderServiceSubscription&&this.$openOrderServiceSubscription.unsubscribe(),this.$openOrderServiceSubscription=this._poswebGridService.retrieveOpenOrders(e).subscribe(r.PoswebGridUtils.getSubscribeObserver("Error occurred retrieving open orders data, and error is %O","Orders failed",t)))})}getEarningsData(e){return new Promise(t=>{this.$earningsServiceSubscription&&this.$earningsServiceSubscription.unsubscribe(),this.$earningsServiceSubscription=this._poswebGridService.retrieveEarningsData(e).subscribe(r.PoswebGridUtils.getSubscribeObserver("Error occurred retrieving earnings data, and error is %O","Earnings failed",t))})}getFormattedEventsDataForRendering(e=[],t=[],s=[]){const o={};return e.forEach(e=>{e&&e.rowId&&e.rowId.forEach(t=>o[t]=new d.RowEventsInfo(t,e.orderDetails,null,null))}),t.forEach(e=>{e&&e.rowId&&e.rowId.forEach(t=>{const s=o[t];s?s.setEarnings(e.earnings):o[t]=new d.RowEventsInfo(t,null,e.earnings,null)})}),s.forEach(e=>{const t=o[e.rowId];t?t.setDistributions(e.distributionEvents):o[e.rowId]=new d.RowEventsInfo(e.rowId,null,null,e.distributionEvents)}),o}expandCollapseForAllGroups(){const e=i.PoswebGrid.getInstance(),t=c.WindowService.getPositionSettings().isGroupBySecurityExpandAll,s=c.WindowService.getPositionSettings().isGroupBySecurityType,o=c.WindowService.getPositionSettings().groupBy;t&&"0"===o&&s&&e.expandCollapseAllGroups(t),e.groupBySecurityToggle()}}},99342:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PoswebSettingsFilterClosedComponent=void 0;const o=s(17190),i=s(70207);class a extends i.PoswebSettingsFilterBaseComponent{constructor(){super(...arguments),this.settingsFilterKey=o.PoswebConstants.SETTINGS_FILTER_CLOSED_KEY,this.settingsFilterItemsSetKey=o.PoswebConstants.SETTINGS_FILTER_ITEMS_SET_CLOSED_KEY,this.settingsFilterStateKey=o.PoswebConstants.SETTINGS_FILTER_CLOSED_STATE_KEY,this.additionalFilterStateKey=o.PoswebConstants.SETTINGS_FILTER_ADDITIONAL_STATE_KEY,this.securityTypeKeyLabelArr=[["MutualFunds","Mutual Funds"],["Stocks_ETFs","Stocks/ETFs"],["Options","Options"],["Bonds","Bonds"],["ForeignCash","Foreign Cash"],["Others","Other"],["Annuities","Annuity"],["Warrants","Warrant"],["Cash","Cash"]],this.eventTypeKeyLabelArr=[]}static getInstance(){return this._instance||(this._instance=new this)}}t.PoswebSettingsFilterClosedComponent=a}},s={};function o(e){var i=s[e];if(void 0!==i)return i.exports;var a=s[e]={exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,s,i,a)=>{if(!s){var r=1/0;for(c=0;c<e.length;c++){for(var[s,i,a]=e[c],n=!0,l=0;l<s.length;l++)(!1&a||r>=a)&&Object.keys(o.O).every(e=>o.O[e](s[l]))?s.splice(l--,1):(n=!1,a<r&&(r=a));if(n){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[s,i,a]},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={871:0};o.O.j=t=>0===e[t];var t=(t,s)=>{var i,a,[r,n,l]=s,d=0;if(r.some(t=>0!==e[t])){for(i in n)o.o(n,i)&&(o.m[i]=n[i]);if(l)var c=l(o)}for(t&&t(s);d<r.length;d++)a=r[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(c)},s=globalThis.poswebJsonpFn=globalThis.poswebJsonpFn||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),o.O(void 0,[47,769,501,959,975,625,65,699,802,789,918,449,641],()=>o(42457));var i=o.O(void 0,[47,769,501,959,975,625,65,699,802,789,918,449,641],()=>o(8326));i=o.O(i)})();